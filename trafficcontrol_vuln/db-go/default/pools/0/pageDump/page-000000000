//Users/Users/test/Users/test/Desktop/Users/test/Desktop/trafficcontrol/Users/test/Desktop/trafficcontrol/cache-config/Users/test/Desktop/trafficcontrol/cache-config/t3c/Users/test/Desktop/trafficcontrol/cache-config/t3c/t3c.goAppNameExitCodeCommandErrExitCodeCommandLookupErrExitCodeExeErrExitCodeNoCommandExitCodeSuccessExitCodeUnknownCommandGitRevisionVersioncommandsmainusageStrokerrappappPathargscmdenvflagHelpflagVersionfilepathfmtgetoptlogossyscallt3cutil"fmt""os"path/filepath"path/filepath""syscall"github.com/apache/trafficcontrol/v8/cache-config/t3cutil"github.com/apache/trafficcontrol/v8/cache-config/t3cutil"github.com/apache/trafficcontrol/v8/lib/go-log"github.com/apache/trafficcontrol/v8/lib/go-log"github.com/pborman/getopt/v2"github.com/pborman/getopt/v2"t3c-check"t3c-check"0.4"0.4"nogit"nogit"stringapply"apply"check"check"diff"diff"generate"generate"preprocess"preprocess"request"request"tail"tail"update"update"012345BoolLonghelp"help"h'h'104Print usage information and exit"Print usage information and exit"version"version"V'V'86Print version information and exit."Print version information and exit."ParseWriteClosererrorErrorWriterWriteCloserCloseInitFilefileFDfdMutexstatersemawsemaincrefmuincrefAndClosedecrefrwlockrwunlockSysFileIovecBaseLenSetLenioviovecsinitsdestroypollDescruntimeCtxpdcloseevictprepareprepareReadprepareWritewaitwaitReadwaitWritewaitCanceledpollablefdmuSysfdcsemaisBlockingIsStreamZeroReadIsEOFisFileFsyncfdreadLockreadUnlockwriteLockwriteUnlockOpenDirSetDeadlineSetReadDeadlineSetWriteDeadlineeofErrorShutdownFchownFtruncateRawControlSetBlockingReadPreadReadFromReadFromInet4ReadFromInet6ReadMsgReadMsgInet4ReadMsgInet6PwriteWriteToInet4WriteToInet6WriteToWriteMsgWriteMsgInet4WriteMsgInet6AcceptFchmodFstatDupWaitWriteWriteOnceRawReadRawWriteFchdirReadDirentSeekSetsockoptIntSetsockoptInet4AddrSetsockoptLingerGetsockoptIntSetsockoptByteSetsockoptIPMreqSetsockoptIPv6MreqWritevPointerTnoCopyLockUnlock_vLoadxStoreSwapCompareAndSwappfdnamedirinfononblockstdoutOrErrappendModeReaddirfReaddirnamesReadDirreaddirNameReadAtWriteAtWriteStringwrapErrChmodSyscallConnreadpreadwritepwritechmodChownTruncateSyncChdirsetDeadlinesetReadDeadlinesetWriteDeadlinecheckValidFdseekStatwriteToreadFromStderrErrorlnExitPrintlnVersionStrlenArgsErrorfno command

%s"no command\n\n%s"unknown command
%s"unknown command\n%s"t3c-"t3c-"JoinInstallDirFileInfoTimeLocationzoneoffsetisDSTzoneTranswhenindexisstdisutctxextendcacheStartcacheEndcacheZonegetlStringlookuplookupFirstZonefirstZoneUsedlookupNamewallextloctGoStringFormatAppendFormatappendFormatappendFormatRFC3339appendStrictRFC3339nsecsecunixSecaddSecsetLocstripMonosetMonomonoAfterBeforeCompareEqualIsZeroabslocabsDateYearMonthDayWeekdayISOWeekClockHourMinuteSecondNanosecondYearDayAddSubAddDatedateUTCLocalInZoneZoneBoundsUnixUnixMilliUnixMicroUnixNanoMarshalBinaryUnmarshalBinaryGobEncodeGobDecodeMarshalJSONUnmarshalJSONMarshalTextUnmarshalTextIsDSTRoundFileModemIsDirIsRegularPermTypeModTimeModeSizeSysnilerror finding path to '%s': %s
"error finding path to '%s': %s\n"appendEnvironExecerror executing sub-command '%s': %s
"error executing sub-command '%s': %s\n"usage: t3c [--help]
       <command> [<args>]

For the arguments of a command, see 't3c <command> --help'.

These are the available commands:

  apply      generate and apply configuration

  check      check that new config can be applied
  diff       diff config files, with logic like ignoring comments
  generate   generate configuration from Traffic Ops data
  preprocess preprocess generated config files
  request    request Traffic Ops data
  tail       tail a log file
  update     update a cache's queue and reval status in Traffic Ops
`usage: t3c [--help]
       <command> [<args>]

For the arguments of a command, see 't3c <command> --help'.

These are the available commands:

  apply      generate and apply configuration

  check      check that new config can be applied
  diff       diff config files, with logic like ignoring comments
  generate   generate configuration from Traffic Ops data
  preprocess preprocess generated config files
  request    request Traffic Ops data
  tail       tail a log file
  update     update a cache's queue and reval status in Traffic Ops
`
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
  TODO change to x/unix ? Version is the application version. This is overwritten by the build with the current project version. GitRevision is the git revision the application was built from.DurationdformatNanosecondsMicrosecondsMillisecondsSecondsMinutesHoursAbsSockaddrInet4RawSockaddrInet48FamilyPortAddrZerorawsockaddrsaStat_tTimespecSecNsectsNanoDevNlinkInoUidGidRdevPad_cgo_0AtimespecMtimespecCtimespecBirthtimespecBlocksBlksizeFlagsGenLspareQspareReaderSockaddr_Socklensyscall.sockaddrSockaddrInet616RawSockaddrInet6FlowinfoScope_idZoneIdIPMreqMultiaddrInterfacereaddirModeDirEntryInfoIPv6MreqRawConnControlLingerOnoff32/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/config/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/config/config.goCfgChkconfigDefaultTSConfigDirGetATSVersionStrGetCfgGetTSPackageHomeServiceStatusDirStrToUseGitFlagStrToWaitForParentsFlagSvcManagementSystemCtlSystemDSystemVTSHomeTimeAndDateLayoutTmpBaseTrafficCtlTrafficServerOwnerUnknownUsageUseGitAutoUseGitFlagUseGitInvalidUseGitNoUseGitYesWaitForParentsDefaultWaitForParentsFalseWaitForParentsFlagWaitForParentsInvalidWaitForParentsRevalWaitForParentsTruedirectoryExistsgetOSSvcManagementgetRpmDBBackendisCommandAvailableisSqliteInstalledprintConfigrpmDBBdbrpmDBSquLiterpmDBUnknownrpmDBVerifyCmdrpmDirsqliteRpmDBsqliteRpmDbVerifyCmdvalidateURLverifyRpmDBverifySqliteRpmDBUseStrategiesFlagflApplyServiceActionFlagafApplyFilesFlagffLogLocationDebugLogLocationErrLogLocationInfoLogLocationWarnCacheHostNameRetriesReverseProxyDisableRpmDBOkSkipOSCheckUseStrategiesTOInsecureTOTimeoutMSTOUserTOPassTOURLDNSLocalBindWaitForParentsYumOptionsUseGitNoCacheSyncDSUpdatesIPAllowOmitViaStringReleaseNoOutgoingIPDisableParentConfigCommentsDefaultClientEnableH2DefaultClientTLSVersionsMaxMindLocationTsHomeTsConfigDirServiceActionNoConfirmServiceActionReportOnlyGoDirectFilesInstallPackagesIgnoreUpdateFlagNoUnsetUpdateFlagUpdateIPAllowLocalATSVersionCacheTypeAppVersioncfgErrorLogWarningLogInfoLogDebugLogEventLogstrdirinforesponseStrlineiifilesoutputtsHomeoutBufsqliteUtildbFilesexcludesqliteDBrunModemsgappVersionatsVersionStrcachecacheHostNamecacheHostNamePtrdefaultClientTLSVersionsdefaultEnableH2defaultFilesdefaultServiceActiondefaultUseStrategiesdisableParentConfigCommentsPtrdnsLocalBinddnsLocalBindPtrfatalLogStrsfilesFlagNamefilesPtrgitRevisiongoDirectFlagNamegoDirectPtrignoreUpdateFlagNameignoreUpdateFlagPtrinstallPackagesFlagNameinstallPackagesPtrlogLocationDebuglogLocationErrorlogLocationInfologLocationWarnmaxmindLocationmaxmindLocationPtrmodeLogStrsnoCachePtrnoConfirmServiceActionnoConfirmServiceActionFlagNamenoOutgoingIPnoUnsetUpdateFlagPtromitViaStringReleasePtrreportOnlyFlagNamereportOnlyPtrretriesretriesPtrreverseProxyDisablereverseProxyDisablePtrrpmDBTyperpmDBisOkrunModeFlagNamerunModePtrserviceActionFlagNameserviceActionPtrsilentFlagNamesilentPtrskipOSCheckPtrskipOsChecksvcManagementsyncdsUpdatesIPAllowPtrtoInfoLogtoInsecuretoInsecurePtrtoPasstoPassPtrtoTimeoutMStoTimeoutMSPtrtoURLtoURLParsedtoURLPtrtoUsertoUserPtrtsConfigDirtsHomePtrupdateIPAllowFlagNameupdateIPAllowPtrurlSourceStruseGituseGitStruseLocalATSVersionFlagNameuseLocalATSVersionPtruseStrategiesuseStrategiesFlagNameuseStrategiesPtrverbosePtrwaitForParentsFlagNamewaitForParentsPtryumOptionsucommand_svcManageratsVersioncodestdErrstdOuttsPathbyteserrorsexecregexpstringstimeurlconfig"bytes""errors"net/url"net/url"os/exec"os/exec""regexp""strings""time"t3c-apply"t3c-apply"/opt/trafficserver"/opt/trafficserver"/opt/trafficserver/etc/trafficserver"/opt/trafficserver/etc/trafficserver"/var/lib/trafficcontrol-cache-config/status"/var/lib/trafficcontrol-cache-config/status"/sbin/chkconfig"/sbin/chkconfig"/sbin/service"/sbin/service"/bin/systemctl"/bin/systemctl"/tmp/trafficcontrol-cache-config"/tmp/trafficcontrol-cache-config"/bin/traffic_ctl"/bin/traffic_ctl"ats"ats"int"Unknown""SystemD""SystemV"boolauto"auto"yes"yes"no"no"""ToLowerTrimSpacerevalJan 2, 2006 15:04 MST"Jan 2, 2006 15:04 MST"true"true"false"false""reval"LogLocationLogLocationNullnullIsNotExistBufferreadOpbufofflastReadBytesbAvailableBufferemptyCapAvailableResettryGrowByReslicegrowGrowWriteByteWriteRuneNextReadByteReadRuneUnreadRuneUnreadByteReadBytesreadSliceReadStringCmdSysProcAttrCredentialGroupsNoSetGroupsChrootPtraceSetsidSetpgidSetcttyNocttyCttyForegroundPgidProcessprocessModeUint64align64AndOrRWMutexMutexsemaTryLocklockSlowunlockSlowInt32wwriterSemreaderSemreaderCountreaderWaitRLockrwTryRLockRUnlockrUnlockSlowRLockerPidmodesigMuhandlehandleTransientAcquirephandleTransientReleasehandlePersistentReleasepidStatuspidDeactivateReleaseKillWaitSignalcloseHandlekillpidWaitsignalpidSignalreleasepidfdReleasepidfdWaitpidfdSendSignalblockUntilWaitableProcessStateWaitStatusExitedExitStatusSignaledCoreDumpStoppedContinuedStopSignalTrapCauseRusageTimevalUsectvUtimeStimeMaxrssIxrssIdrssIsrssMinfltMajfltNswapInblockOublockMsgsndMsgrcvNsignalsNvcswNivcswpidstatusrusageUserTimeSystemTimeSuccessSysUsageexitedsuccesssyssysUsageExitCodeuserTimesystemTimeContextDeadlineDoneErrValuectxResultTimerCinitTimerStoptimerinoutPathEnvDirStdinStdoutExtraFilesctxCancelWaitDelaychildIOFilesparentIOPipesgoroutinegoroutineErrcreatedByStacklookPathErrcachedLookExtensionscargvchildStdinchildStdoutchildStderrwriterDescriptorRunStartwatchCtxawaitGoroutinesOutputCombinedOutputStdinPipeStdoutPipeStderrPipeenvironCommand/bin/rpm"/bin/rpm"-q"-q"-c"-c"trafficserver"trafficserver"Split
"\n"Containsetc/trafficserver"etc/trafficserver"/etc"/etc"bdb"bdb"sqlite"sqlite"unknown"unknown"/usr/lib/rpm/rpmdb_verify"/usr/lib/rpm/rpmdb_verify"/bin/sqlite3"/bin/sqlite3"/var/lib/rpm"/var/lib/rpm"rpmdb.sqlite"rpmdb.sqlite"-E"-E"%_db_backend"%_db_backend"RegexpProgInstInstOpiOpOutArgRuneopMatchRuneMatchRunePosMatchEmptyWidthNumCapskipNopPrefixStartCondonePassProgonePassInstEmptyOpexprprogonepassnumSubexpmaxBitStateLensubexpNamesprefixprefixBytesprefixRuneprefixEndmpoolmatchcapprefixCompletecondminInputLenlongesttryBacktrackrebacktrackdoOnePassdoMatchdoExecuteCopyLongestputNumSubexpSubexpNamesSubexpIndexLiteralPrefixMatchReaderMatchStringMatchReplaceAllStringReplaceAllLiteralStringReplaceAllStringFuncreplaceAllReplaceAllReplaceAllLiteralReplaceAllFuncpadallMatchesFindFindIndexFindStringFindStringIndexFindReaderIndexFindSubmatchExpandExpandStringexpandFindSubmatchIndexFindStringSubmatchFindStringSubmatchIndexFindReaderSubmatchIndexFindAllFindAllIndexFindAllStringFindAllStringIndexFindAllSubmatchFindAllSubmatchIndexFindAllStringSubmatchFindAllStringSubmatchIndexMustCompile(^\.|^__)`(^\.|^__)`byte"/"PRAGMA quick_check`PRAGMA quick_check`E'E'69StringLongcache-host-name"cache-host-name"H'H'72Host name of the cache to generate config for. Must be the server host name in Traffic Ops, not a URL, and not the FQDN"Host name of the cache to generate config for. Must be the server host name in Traffic Ops, not a URL, and not the FQDN"IntLongnum-retries"num-retries"r'r'114[number] retry connection to Traffic Ops URL [number] times, default is 3"[number] retry connection to Traffic Ops URL [number] times, default is 3"reverse-proxy-disable"reverse-proxy-disable"'p'112[false | true] bypass the reverse proxy even if one has been configured default is false"[false | true] bypass the reverse proxy even if one has been configured default is false"skip-os-check"skip-os-check"'C'67[false | true] skip os check, default is false"[false | true] skip os check, default is false"traffic-ops-insecure"traffic-ops-insecure"I'I'73[true | false] ignore certificate errors from Traffic Ops"[true | false] ignore certificate errors from Traffic Ops"traffic-ops-timeout-milliseconds"traffic-ops-timeout-milliseconds"'t'11630000Timeout in milli-seconds for Traffic Ops requests, default is 30000"Timeout in milli-seconds for Traffic Ops requests, default is 30000"traffic-ops-url"traffic-ops-url"'u'117Traffic Ops URL. Must be the full URL, including the scheme. Required. May also be set with the environment variable TO_URL"Traffic Ops URL. Must be the full URL, including the scheme. Required. May also be set with the environment variable TO_URL"traffic-ops-user"traffic-ops-user"U'U'85Traffic Ops username. Required. May also be set with the environment variable TO_USER"Traffic Ops username. Required. May also be set with the environment variable TO_USER"traffic-ops-password"traffic-ops-password"P'P'80Traffic Ops password. Required. May also be set with the environment variable TO_PASS"Traffic Ops password. Required. May also be set with the environment variable TO_PASS"trafficserver-home"trafficserver-home"R'R'82Trafficserver Package directory. May also be set with the environment variable TS_HOME"Trafficserver Package directory. May also be set with the environment variable TS_HOME"dns-local-bind"dns-local-bind"'b'98[true | false] whether to use the server's Service Addresses to set the ATS DNS local bind address"[true | false] whether to use the server's Service Addresses to set the ATS DNS local bind address"git"git"g'g'103Create and use a git repo in the config directory. Options are yes, no, and auto. If yes, create and use. If auto, use if it exist. Default is auto."Create and use a git repo in the config directory. Options are yes, no, and auto. If yes, create and use. If auto, use if it exist. Default is auto."no-cache"no-cache"n'n'110Whether to not use a cache and make conditional requests to Traffic Ops"Whether to not use a cache and make conditional requests to Traffic Ops"syncds-updates-ipallow"syncds-updates-ipallow"S'S'83Whether syncds mode will update ipallow. This exists because ATS had a bug where reloading after changing ipallow would block everything. Default is false."Whether syncds mode will update ipallow. This exists because ATS had a bug where reloading after changing ipallow would block everything. Default is false."omit-via-string-release"omit-via-string-release"e'e'101Whether to set the records.config via header to the ATS release from the RPM. Default true."Whether to set the records.config via header to the ATS release from the RPM. Default true."no-outgoing-ip"no-outgoing-ip"'i'105Whether to not set the records.config outgoing IP to the server's addresses in Traffic Ops. Default is false."Whether to not set the records.config outgoing IP to the server's addresses in Traffic Ops. Default is false."disable-parent-config-comments"disable-parent-config-comments"'c'99Whether to disable verbose parent.config comments. Default false."Whether to disable verbose parent.config comments. Default false."default-client-enable-h2"default-client-enable-h2"'2'50Whether to enable HTTP/2 on Delivery Services by default, if they have no explicit Parameter. This is irrelevant if ATS records.config is not serving H2. If omitted, H2 is disabled."Whether to enable HTTP/2 on Delivery Services by default, if they have no explicit Parameter. This is irrelevant if ATS records.config is not serving H2. If omitted, H2 is disabled."default-client-tls-versions"default-client-tls-versions"Comma-delimited list of default TLS versions for Delivery Services with no Parameter, e.g. --default-tls-versions='1.1,1.2,1.3'. If omitted, all versions are enabled."Comma-delimited list of default TLS versions for Delivery Services with no Parameter, e.g. --default-tls-versions='1.1,1.2,1.3'. If omitted, all versions are enabled."maxmind-location"maxmind-location"M'M'77URL of a maxmind gzipped database file, to be installed into the trafficserver etc directory."URL of a maxmind gzipped database file, to be installed into the trafficserver etc directory."CounterLongverbose"verbose"'v'118Log verbosity. Logging is output to stderr. By default, errors are logged. To log warnings, pass '-v'. To log info, pass '-vv'. To omit error logging, see '-s'`Log verbosity. Logging is output to stderr. By default, errors are logged. To log warnings, pass '-v'. To log info, pass '-vv'. To omit error logging, see '-s'`"cache"'T'84Cache server type. Generate configuration files for specific cache server type, e.g. 'ats', 'varnish'."Cache server type. Generate configuration files for specific cache server type, e.g. 'ats', 'varnish'."silent"silent"'s'115Silent. Errors are not logged, and the 'verbose' flag is ignored. If a fatal error occurs, the return code will be non-zero but no text will be output to stderr`Silent. Errors are not logged, and the 'verbose' flag is ignored. If a fatal error occurs, the return code will be non-zero but no text will be output to stderr`go-direct"go-direct"G'G'71old"old"[true|false|old] default will set go_direct to old and it will be based on opposite of parent_is_proxy directivefalse, you can also set go_direct true, or false."[true|false|old] default will set go_direct to old and it will be based on opposite of parent_is_proxy directivefalse, you can also set go_direct true, or false."wait-for-parents"wait-for-parents"W'W'87[true | false] do not update if parent_pending = 1 in the update json. Default is false"[true | false] do not update if parent_pending = 1 in the update json. Default is false"service-action"service-action"ApplyServiceActionFlagReloadreloadEnumLonga'a'97ApplyServiceActionFlagRestartrestartApplyServiceActionFlagNonenoneaction to perform on Traffic Server and other system services. Only reloads if necessary, but always restarts. Default is 'reload'"action to perform on Traffic Server and other system services. Only reloads if necessary, but always restarts. Default is 'reload'"no-confirm-service-action"no-confirm-service-action"Whether to skip waiting and confirming the service action succeeded (reload or restart) via t3c-tail. Default is false."Whether to skip waiting and confirming the service action succeeded (reload or restart) via t3c-tail. Default is false."report-only"report-only"o'o'111Log information about necessary files and actions, but take no action. Default is false"Log information about necessary files and actions, but take no action. Default is false""files"ApplyFilesFlagAllall'f'102ApplyFilesFlagReval[all | reval] Which files to generate. If reval, the Traffic Ops server reval_pending flag is used instead of the upd_pending flag. Default is 'all'"[all | reval] Which files to generate. If reval, the Traffic Ops server reval_pending flag is used instead of the upd_pending flag. Default is 'all'"install-packages"install-packages"k'k'107Whether to install necessary packages. Default is false."Whether to install necessary packages. Default is false."ignore-update-flag"ignore-update-flag"F'F'70Whether to ignore the upd_pending or reval_pending flag in Traffic Ops, and always generate and apply files. If true, the flag is still unset in Traffic Ops after files are applied. Default is false."Whether to ignore the upd_pending or reval_pending flag in Traffic Ops, and always generate and apply files. If true, the flag is still unset in Traffic Ops after files are applied. Default is false."no-unset-update-flag"no-unset-update-flag"'d'100Whether to not unset the update flag in Traffic Ops after applying files. This option makes it possible to generate test or debug configuration from a production Traffic Ops without un-setting queue or reval flags. Default is false."Whether to not unset the update flag in Traffic Ops after applying files. This option makes it possible to generate test or debug configuration from a production Traffic Ops without un-setting queue or reval flags. Default is false."update-ipallow"update-ipallow"A'A'65Whether ipallow file will be updated if necessary. This exists because ATS had a bug where reloading after changing ipallow would block everything. Default is false."Whether ipallow file will be updated if necessary. This exists because ATS had a bug where reloading after changing ipallow would block everything. Default is false."use-strategies"use-strategies"UseStrategiesFlagFalseUseStrategiesFlagTrueUseStrategiesFlagCorecore[true | core| false] whether to generate config using strategies.yaml instead of parent.config. If true use the parent_select plugin, if 'core' use ATS core strategies, if false use parent.config."[true | core| false] whether to generate config using strategies.yaml instead of parent.config. If true use the parent_select plugin, if 'core' use ATS core strategies, if false use parent.config."local-ats-version"local-ats-version"[true | false] whether to use the local installed ATS version for config generation. If false, attempt to use the Server Package Parameter and fall back to ATS 5. If true and the local ATS version cannot be found, an error will be logged and the version set to ATS 5. Default is false"[true | false] whether to use the local installed ATS version for config generation. If false, attempt to use the Server Package Parameter and fall back to ATS 5. If true and the local ATS version cannot be found, an error will be logged and the version set to ATS 5. Default is false"run-mode"run-mode"'m'109[badass | report | revalidate | syncds] run mode. Optional, convenience flag which sets other flags for common usage scenarios.
syncds     keeps the defaults:
                --report-only=false
                --files=all
                --install-packages=false
                --service-action=reload
                --ignore-update-flag=false
                --update-ipallow=false
                --no-unset-update-flag=false
revalidate sets --files=reval
                --wait-for-parents=true
badass     sets --install-packages=true
                --service-action=restart
                --ignore-update-flag=true
                --update-ipallow=true
report     sets --report-only=true
                --no-unset-update-flag=true
                --silent

Note the 'syncds' settings are all the flag defaults. Hence, if no mode is set, the default is effectively 'syncds'.

If any of the related flags are also set, they override the mode's default behavior.`[badass | report | revalidate | syncds] run mode. Optional, convenience flag which sets other flags for common usage scenarios.
syncds     keeps the defaults:
                --report-only=false
                --files=all
                --install-packages=false
                --service-action=reload
                --ignore-update-flag=false
                --update-ipallow=false
                --no-unset-update-flag=false
revalidate sets --files=reval
                --wait-for-parents=true
badass     sets --install-packages=true
                --service-action=restart
                --ignore-update-flag=true
                --update-ipallow=true
report     sets --report-only=true
                --no-unset-update-flag=true
                --silent

Note the 'syncds' settings are all the flag defaults. Hence, if no mode is set, the default is effectively 'syncds'.

If any of the related flags are also set, they override the mode's default behavior.`IsSetmdStrToModeModeInvalid is an invalid mode." is an invalid mode."t3c-apply is running in "t3c-apply is running in " mode" mode"ModeSyncDSsyncdsModeRevalidaterevalidate setting --" setting --"="="ModeBadAssbadassModeReportreport not set using default 'old'" not set using default 'old'"go-direct not set using default 'old' is not a valid go-direct option setting default 'old'" is not a valid go-direct option setting default 'old'"LogLocationStderrstderrToo many verbose options. The maximum log verbosity level is 2 (-vv or --verbose=2) for errors (0), warnings (1), and info (2)"Too many verbose options. The maximum log verbosity level is 2 (-vv or --verbose=2) for errors (0), warnings (1), and info (2)"HostnameCould not get the hostname from the O.S., please supply a hostname: "Could not get the hostname from the O.S., please supply a hostname: "."."Invalid git flag '"Invalid git flag '"'. Valid options are yes, no, auto."'. Valid options are yes, no, auto."Millisecond1000000argument"argument"environment variable"environment variable"GetenvTO_URL"TO_URL"SetenvTO_USER"TO_USER"TO_PASS"TO_PASS"Sprintferror getting db type: %s"error getting db type: %s"RPM database is %s"RPM database is %s"/var/lib/rpm//var/lib/rpm/rpmdb.sqliteRPM database is ok: %t"RPM database is ok: %t"/bin/sqlite3 not available, RPM database not checked"/bin/sqlite3 not available, RPM database not checked"RPM DB type is %s DB check will be skipped"RPM DB type is %s DB check will be skipped"RPM database check failed unable to install packages cannot continue in badass mode"RPM database check failed unable to install packages cannot continue in badass mode"RPM database check failed unable to install packages cannot continue"RPM database check failed unable to install packages cannot continue"set TSHome from command line: '%s'"set TSHome from command line: '%s'"TS_HOME"TS_HOME"set TSHome from TS_HOME environment variable '%s'
"set TSHome from TS_HOME environment variable '%s'\n"set TSHome from the RPM config file  list '%s'
"set TSHome from the RPM config file  list '%s'\n"no override for TSHome was found, using the configured default: '%s'
"no override for TSHome was found, using the configured default: '%s'\n"/etc/trafficserver"/etc/trafficserver"varnish"varnish"/etc/varnish"/etc/varnish"TSHome: %s, TSConfigDir: %s
"TSHome: %s, TSConfigDir: %s\n"getting local ATS version: "getting local ATS version: "ATSVersionStr: '%s'
"ATSVersionStr: '%s'\n"basic usage: t3c-apply --traffic-ops-url=myurl --traffic-ops-user=myuser --traffic-ops-password=mypass --cache-host-name=my-cache"basic usage: t3c-apply --traffic-ops-url=myurl --traffic-ops-user=myuser --traffic-ops-password=mypass --cache-host-name=my-cache"Missing required argument --traffic-ops-url or TO_URL environment variable. "Missing required argument --traffic-ops-url or TO_URL environment variable. "Missing required argument --traffic-ops-user or TO_USER environment variable. "Missing required argument --traffic-ops-user or TO_USER environment variable. "Missing required argument --traffic-ops-password or TO_PASS environment variable. "Missing required argument --traffic-ops-password or TO_PASS environment variable. "Missing required argument --cache-host-name. "Missing required argument --cache-host-name. "URLUserinfousernamepasswordpasswordSetUsernamePasswordSchemeOpaqueUserHostRawPathOmitHostForceQueryRawQueryFragmentRawFragmentsetPathEscapedPathsetFragmentEscapedFragmentRedactedIsAbsResolveReferenceQueryRequestURIJoinPathNewparsing Traffic Ops URL from "parsing Traffic Ops URL from " '" '"': "': "invalid Traffic Ops URL from "invalid Traffic Ops URL from "YUM_OPTIONS"YUM_OPTIONS"ConfigInitCfgInitializing loggers: "Initializing loggers: "fatal error has occurred"fatal error has occurred"Infolnnil url"nil url"http"http"https"https"scheme expected 'http' or 'https', actual '"scheme expected 'http' or 'https', actual '"'"'"no host"no host" --version" --version"/bin/sh"/bin/sh"bin"bin"traffic_server"traffic_server"Dosh`sh``-c`set -o pipefail && `set -o pipefail && ` --version | head -1 | awk '{print $3}'` --version | head -1 | awk '{print $3}'`traffic_server --version returned code %v stderr '%v' stdout '%v'"traffic_server --version returned code %v stderr '%v' stdout '%v'"traffic_server --version returned nothing, code %v stderr '%v' stdout '%v'"traffic_server --version returned nothing, code %v stderr '%v' stdout '%v'"DebugfLogLocationDebug: %s
"LogLocationDebug: %s\n"LogLocationErr: %s
"LogLocationErr: %s\n"LogLocationInfo: %s
"LogLocationInfo: %s\n"LogLocationWarn: %s
"LogLocationWarn: %s\n"CacheHostName: %s
"CacheHostName: %s\n"SvcManagement: %s
"SvcManagement: %s\n"GoDirect: %s
"GoDirect: %s\n"Retries: %d
"Retries: %d\n"ReverseProxyDisable: %t
"ReverseProxyDisable: %t\n"SkipOSCheck: %t
"SkipOSCheck: %t\n"TOInsecure: %t
"TOInsecure: %t\n"TOTimeoutMS: %d
"TOTimeoutMS: %d\n"TOUser: %s
"TOUser: %s\n"TOPass: Pass len: '%d'
"TOPass: Pass len: '%d'\n"TOURL: %s
"TOURL: %s\n"TSHome: %s
"TSHome: %s\n"LocalATSVersion: %s
"LocalATSVersion: %s\n"WaitForParents: %v
"WaitForParents: %v\n"ServiceAction: %v
"ServiceAction: %v\n"NoConfirmServiceAction: %v
"NoConfirmServiceAction: %v\n"YumOptions: %s
"YumOptions: %s\n"MaxmindLocation: %s
"MaxmindLocation: %s\n"PrintUsage legacy System V Init. UseGit is whether to create and maintain a git repo of config changes. Note this only applies to the ATS config directory inferred or set via the flag.      It does not do anything for config files generated outside that location. MaxMindLocation is a URL string for a download location for a maxmind database for use with either HeaderRewrite or Maxmind_ACL plugins event logging is not used. derives the ATS Installation directory from the rpm config file list. on error or if the trafficserver rpm is not installed indicated by a return code of '1', return an empty string. trafficserver is installed, derive TSHome getRpmDBBackend uses "%_db_backend" macro to get the database type isSqliteInstalled looks to see if the sqlite3 executable is installed which is needed to do the db verify verifies the rpm database files. if there is any database corruption it will return false verifySqliteRpmDB runs PRAGMA quick_check requires /bin/sqlite3 The mode is never exposed outside this function to prevent accidentally changing behavior based on it, so we want to log what flags the mode set here, to aid debugging. But we can't do that until the loggers are initialized. syncds flags are all the defaults, no need to change anything t3c only has 3 verbosity options: none (-s), error (default or --verbose=0), warning (-v), and info (-vv). Any code calling log.Debug is treated as Info. strings.Split always returns a slice with at least 1 element, so we don't need a len check for error messages set TSHome evironment or rpm check. check for the environment variable. check using the config file listing from the rpm package if rpmdb is ok. we have what we need TODO add new flagsRuneReaderbitStatejobpcargposinputsinputBytesstepcanCheckPrefixhasPrefixcontextinputStringinputReaderatEOTreadernewBytesnewStringnewReaderclearendcapjobsvisitedresetshouldVisitpushinputlazyFlagmatchregexp.canCheckPrefixregexp.contextregexp.hasPrefixregexp.indexregexp.stepmachinequeueentrythreadinstsparsedenseq0q1poolmatchedallocaddprocessStatusLockerValuesGetSetDelHasEncodeReadCloser/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/t3c-apply.goCacheConfigFailureExitMsgCheckMaxmindUpdateExitCodeAlreadyRunningExitCodeConfigErrorExitCodeConfigFilesErrorExitCodeGeneralFailureExitCodePackagingErrorExitCodeRevalidationErrorExitCodeServicesErrorExitCodeSyncDSErrorExitCodeUserCheckErrorFailureExitMsgGetMetaDataFilePathGitCommitAndExitLoadMetaDataLockFilePathLockFileRetryIntervalLockFileRetryTimeoutLogPanicMainMetaDataFileModeMetaDataFileNamePostConfigFailureExitMsgSuccessExitMsgWriteMetaDatarunSysctlrclockStarttriedMakingRepogitLockgitLockFilegitMaxLockAgeMinutesoldLockpathfinalMsgpostConfigFailrunningsvcStatuslockmetaDataoldMetaDatasyncdsUpdatetropsexitCodeexitMsgresultMaxMindListretresultbtsmetaDataFilePathjsontcutiltorequestutilencoding/json"encoding/json"github.com/apache/trafficcontrol/v8/cache-config/t3c-apply/config"github.com/apache/trafficcontrol/v8/cache-config/t3c-apply/config"github.com/apache/trafficcontrol/v8/cache-config/t3c-apply/torequest"github.com/apache/trafficcontrol/v8/cache-config/t3c-apply/torequest"github.com/apache/trafficcontrol/v8/cache-config/t3c-apply/util"github.com/apache/trafficcontrol/v8/cache-config/t3c-apply/util"github.com/apache/trafficcontrol/v8/lib/go-util"github.com/apache/trafficcontrol/v8/lib/go-util"132133134135136137138139140ExecCommand/usr/sbin/sysctl"/usr/sbin/sysctl"-p"-p"sysctl -p failed"sysctl -p failed"sysctl -p ran succesfully."sysctl -p ran succesfully."/var/run/t3c.lock"/var/run/t3c.lock"100000000060000000000CACHE CONFIG FAILURE`CACHE CONFIG FAILURE`CRITICAL FAILURE, ABORTING`CRITICAL FAILURE, ABORTING`CRITICAL FAILURE AFTER SETTING CONFIG, ABORTING`CRITICAL FAILURE AFTER SETTING CONFIG, ABORTING`SUCCESS`SUCCESS`UpdateStatusFileLockFlockfhLockedRLockedTryLockContextTryRLockContextsetFhensureFhStatetryreopenFDOnErrorf_lockis_lockedGetLockTrying to acquire app lock"Trying to acquire app lock"NowSinceFailed to get app lock after %v seconds, another instance is running, exiting without running
"Failed to get app lock after %v seconds, another instance is running, exiting without running\n"60Unable to acquire app lock retrying in: %v "Unable to acquire app lock retrying in: %v "SleepAcquired app lock"Acquired app lock"ApplyMetaDataApplyMetaDataActionActionjson:"action"Statusjson:"status"json:"version"ServerHostNamejson:"server-hostname"ReloadedATSjson:"reloaded-ats"RestartedATSjson:"restarted-ats"UnsetUpdateFlagjson:"unset-update-flag"UnsetRevalFlagjson:"unset-reval-flag"InstalledPackagesjson:"installed-packages"OwnedFilePathsjson:"owned-files"Succeededjson:"succeeded"PartialSuccessjson:"partial-success"Actionsjson:"actions"Failed to load old metadata file, metadata-dependent functionality disabled: "Failed to load old metadata file, metadata-dependent functionality disabled: "NewApplyMetaDataActionLogActionActionLogStatusWriteActionLogActionLogActionApplyStartapply-startActionLogStatusSuccessEnsureConfigDirIsGitRepoEnsuring config directory '"Ensuring config directory '"' is a git repo - config may not be a git repo! "' is a git repo - config may not be a git repo! "ActionLogActionGitInitgit-initActionLogStatusFailurefailureSuccessfully ensured ATS config directory '"Successfully ensured ATS config directory '"' is a git repo"' is a git repo"UseGit not 'yes', not creating git repo"UseGit not 'yes', not creating git repo".git/index.lock".git/index.lock"IsGitLockFileOld300000000000checking for git lock file: "checking for git lock file: "removing git lock file older than %dm"removing git lock file older than %dm"RemoveGitLockcouldn't remove git lock file: %v"couldn't remove git lock file: %v"Checking git for safe directory config"Checking git for safe directory config"GetGitConfigSafeDirWarnlnerror checking git for safe directory config: "error checking git for safe directory config: "MakeGitCommitAllGitChangeNotSelfgit committing existing changes, dir '"git committing existing changes, dir '"ActionLogActionGitCommitInitialcreate-git-commit-initialTrafficOpsReqConfigFileCfgBackupTropsBackupAuditCompleteAuditFailedAuditErrorChangeAppliedChangeNeededPreReqFailedRemapPluginConfigBodyWarningsRestartDataTrafficCtlReloadSysCtlReloadNtpdRestartTeakdRestartTrafficServerRestartRemapConfigReloadHitchReloadVarnishReloadPkgspluginsinstalledPkgschangedFilesconfigFilesconfigFileWarningsDumpConfigFilescheckConfigFilecheckStatusFilesprocessRemapOverridesprocessUdevRulesreadCfgFilereplaceCfgFileCheckSystemServicesIsPackageInstalledGetConfigFileGetConfigFileListPrintWarningsCheckRevalidateStateCheckSyncDSStateCheckReloadRestartProcessConfigFilesProcessPackagesProcessPackagesWithMetaDataRevalidateWhileSleepingStartServicesShowUpdateStatusUpdateTrafficOpsNewTrafficOpsReqOS checks are enabled and unable to find any know service management tools."OS checks are enabled and unable to find any know service management tools."MkDirmkdir TmpBase '"mkdir TmpBase '"' failed, cannot continue"' failed, cannot continue"mkdir TmpBase '/tmp/trafficcontrol-cache-config' failed, cannot continueCleanTmpDirCleanTmpDir failed, cannot continue"CleanTmpDir failed, cannot continue"RFC33392006-01-02T15:04:05Z07:00CheckUserChecking revalidate state: "Checking revalidate state: "UpdateTropsNotNeededChecking revalidate state: returned UpdateTropsNotNeeded"Checking revalidate state: returned UpdateTropsNotNeeded"Checking syncds state: "Checking syncds state: "/remap.config"/remap.config"/usr/bin/touch"/usr/bin/touch"failed to update the remap.config for reloading: %s
"failed to update the remap.config for reloading: %s\n"updated the remap.config for reloading."updated the remap.config for reloading."failed to start services: "failed to start services: "======== Didn't get all files, no package processing needed or possible ========"======== Didn't get all files, no package processing needed or possible ========"======== Start processing packages  ========"======== Start processing packages  ========"Error processing packages: %s
"Error processing packages: %s\n"PackagesToMetaDataError verifying system services: %s
"Error verifying system services: %s\n"======== RPM DB checks failed, package processing not possible, using installed packages from  metadata if available========"======== RPM DB checks failed, package processing not possible, using installed packages from  metadata if available========"Preparing to fetch the config files for %s, files: %s, syncdsUpdate: %s
"Preparing to fetch the config files for %s, files: %s, syncdsUpdate: %s\n"Getting config file list: %s
"Getting config file list: %s\n"Error while processing config files: %s
"Error while processing config files: %s\n"ActionLogActionUpdateFilesAllupdate-files-allremap.config"remap.config"teakd"teakd"ServiceStatusGetServiceStatusnot starting 'teakd', error getting 'teakd' run status: %s
"not starting 'teakd', error getting 'teakd' run status: %s\n"SvcNotRunningServiceStartstart"start"'teakd' was not started: %s
"'teakd' was not started: %s\n"service 'teakd' started."service 'teakd' started."SvcRunningInfofservice 'teakd' was already running, pid: %v
"service 'teakd' was already running, pid: %v\n"hitch"hitch"not starting 'hitch', error getting 'hitch' run status: %s
"not starting 'hitch', error getting 'hitch' run status: %s\n""reload"'hitch' was not %sed: %s
"'hitch' was not %sed: %s\n"service 'hitch' %sed"service 'hitch' %sed"service 'hitch' already running"service 'hitch' already running"failed to update Traffic Ops: %s
"failed to update Traffic Ops: %s\n"UpdateTropsFailedrecoverpanic: (err: %v) stacktrace:
%s
"panic: (err: %v) stacktrace:\n%s\n"StacktraceCombineOwnedFilePathsGitChangeIsSelfActionLogActionGitCommitFinalcreate-git-commit-finalActionLogActionApplyEndapply-end,","UpdateMaxmindmaxmind database was updated from "maxmind database was updated from "maxmind database not updated. Either not needed or curl/gunzip failure: "maxmind database not updated. Either not needed or curl/gunzip failure: "maxmindlocation is empty, not checking for DB update"maxmindlocation is empty, not checking for DB update"t3c-apply-metadata.json`t3c-apply-metadata.json`3840600formatting metadata file: "formatting metadata file: "WriteFilewriting metadata file '"writing metadata file '"ReadFilereading metadata file '"reading metadata file '"Unmarshalunmarshalling metadata file: "unmarshalling metadata file: " Main is the main function of t3c-apply. This is a separate function so defer statements behave as-expected. DO NOT call os.Exit within this function; return the code instead. Returns the application exit code. user used the --help option Note failing to load old metadata is not fatal! oldMetaData must always be checked for nil before usage! Note we only write the metadata file after acquiring the app lock. We don't want to write a metadata file if we didn't run because another t3c-apply was already running.need to see if there is an old lock file laying around.older than 5 minutes commit anything someone else changed when we weren't looking, with a keyword indicating it wasn't our change if doing os checks, insure there is a 'systemctl' or 'service' and 'chkconfig' commands. create and clean the config.TmpBase (/tmp/ort) if running in Revalidate mode, check to see if it's necessary to continue If touching remap.config fails, we want to still try to restart services But log a critical-post-config-failure, which needs logged right before exit. check for maxmind db updates even if we have no other updates We updated the db so we should touch and reload make sure we got the data necessary to check packages check and make sure packages are enabled for startup check for maxmind db updates If we've updated also reload remap to reload the plugin and pick up the new database start 'teakd' if installed. reload sysctl GitCommitAndExit attempts to git commit all changes, and logs any error. It then logs exitMsg at the Info level, and returns exitCode. This is a helper function, to reduce the duplicated commit-log-return into a single line. metadata isn't actually part of git, but we always want to write it before committing to git, so this is the right place files previously dropped never become "unmanaged", and if we delete them they're removed from oldMetaData as well as the new, so add the old files to the new metadata. This is especially important for reval runs, which don't add all files. nil metadata to prevent modifying the file after the final git commit CheckMaxmindUpdate will (if a url is set) check for a db on disk. If it exists, issue an IMS to determine if it needs to update the db. If no file or if an update is needed to be done it is downloaded and unpacked. Check if we have a URL for a maxmind db If we do, test if the file exists, do IMS based on disk time and download and unpack as needed Check if the maxmind db needs to be updated before reload If we've seen any database updates then return true to update ATS WriteMetaData writes the metaData file. The metadata file is written in the ATS config directory, so it's versioned with git. On error, an error is written to the log, but no error is returned.FileRestartData/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/torequest/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/torequest/cmd.goPackageServerAndConfigsShouldReloadRestartTailDiagsLogRelativeTailReloadTimeOutMSTailRestartTimeOutMSUpdateTropsNeededUpdateTropsSuccessfulcheckCertcheckRefscheckReloadcommentsFilterconfigFileTempSuffixdoTailgetChkconfiggetPackagesgetStatusesgetSystemInfogetUpdateStatuslogSubApplogSubAppErrlogSubAppWarnOrErrnewLineFilteroutToErrpkgMatchpkgMetaDataToMaprequestConfigrequestJSONsendUpdatestripDatet3cchkrefst3cchkreloadt3cdifft3cgent3cpatht3cpreproct3creqt3cupdtailMatchtailReloadEndtailRestartEndunencodeFilterallFilesconfigDatageneratedFilespreprocessedBytesexitErrerrbufoutbufstdinPipevalslstatusespkgsusedconfigApplyBoolconfigApplyTimerevalApplyBoolrevalApplyTimeendMatchlineslogMatchtimeoutInMSgoLoggerreportLocationdiffMsgdiffpathfileLocationgidnewFilepermreportOnlyuidcfgFilefilesAddinginputBtsblockcertfatalchangedConfigFileserrBufneedsobjcacheBtsappNameisErrlogFloggerlogLocationatscfggologioutilpemstrconvtcx509crypto/x509"crypto/x509"encoding/pem"encoding/pem"io/ioutil"io/ioutil""log""strconv"github.com/apache/trafficcontrol/v8/lib/go-atscfg"github.com/apache/trafficcontrol/v8/lib/go-atscfg"github.com/apache/trafficcontrol/v8/lib/go-tc"github.com/apache/trafficcontrol/v8/lib/go-tc"t3c generate`t3c generate`t3c update`t3c update`t3c-diff`t3c-diff`t3c check refs`t3c check refs`t3c check reload`t3c check reload`t3c request`t3c request`t3c preprocess`t3c preprocess`RawMessageConfigDataConfigFiles\[\w{3}\s{1,2}\d{1,2}\s\d{2}:\d{2}:\d{2}\.\d{3}\]\s`\[\w{3}\s{1,2}\d{1,2}\s\d{2}:\d{2}:\d{2}\.\d{3}\]\s`t3c`t3c`ATSConfigFilejson:"name"json:"path"ContentTypejson:"content_type"LineCommentjson:"line_comment"Securejson:"secure"Textjson:"text"json:"warnings"requesting: "requesting: "`generate`--dir="--dir="--cache="--cache="-s"-s"-v"-v"--dns-local-bind"--dns-local-bind"--default-client-enable-h2="--default-client-enable-h2="FormatBool--default-client-tls-versions="--default-client-tls-versions="--revalidate-only"--revalidate-only"--ats-version="--ats-version="--via-string-release="--via-string-release="--no-outgoing-ip="--no-outgoing-ip="--disable-parent-config-comments="--disable-parent-config-comments="--use-strategies="--use-strategies="--go-direct="--go-direct="DoInput stdout` stdout`t3c generate stdout stderr` stderr`t3c generate stderr%s returned non-zero exit code %v, see log for output"%s returned non-zero exit code %v, see log for output"preprocessing config files: "preprocessing config files: "unmarshalling generated files: "unmarshalling generated files: "`preprocess`getting command pipe: "getting command pipe: "starting command: "starting command: "{"data":`{"data":`writing opening json to input: "writing opening json to input: "writing config data to input: "writing config data to input: ","files":`,"files":`writing files key to input: "writing files key to input: "writing generated files to input: "writing generated files to input: "}`}`writing closing json input: "writing closing json input: "closing stdin writer: "closing stdin writer: "ExitErrorerror running command: "error running command: "t3c preprocess stdoutt3c preprocess stderrStatusNullableTimeNoModValidScanDescriptionjson:"description" db:"description"IDjson:"id" db:"id"LastUpdatedjson:"lastUpdated" db:"last_updated"json:"name" db:"name""statuses"requesting json: "requesting json: "chkconfig"chkconfig"ServerUpdateStatusHostNamejson:"host_name"UpdatePendingjson:"upd_pending"RevalPendingjson:"reval_pending"UseRevalPendingjson:"use_reval_pending"HostIdjson:"host_id"ParentPendingjson:"parent_pending"ParentRevalPendingjson:"parent_reval_pending"ConfigUpdateTimejson:"config_update_time"ConfigApplyTimejson:"config_apply_time"ConfigUpdateFailedjson:"config_update_failed"RevalidateUpdateTimejson:"revalidate_update_time"RevalidateApplyTimejson:"revalidate_apply_time"RevalidateUpdateFailedjson:"revalidate_update_failed"update-status"update-status"system-info"system-info"packages"packages"`update`--traffic-ops-timeout-milliseconds="--traffic-ops-timeout-milliseconds="FormatIntint6410--traffic-ops-user="--traffic-ops-user="--traffic-ops-password="--traffic-ops-password="--traffic-ops-url="--traffic-ops-url="--traffic-ops-insecure="--traffic-ops-insecure="--cache-host-name="--cache-host-name="--set-config-apply-time="--set-config-apply-time="RFC3339Nano2006-01-02T15:04:05.999999999Z07:00--set-reval-apply-time="--set-reval-apply-time="--set-update-status="--set-update-status="--set-reval-status="--set-reval-status="LookupEnvt3c update stdoutt3c update stderr succeeded" succeeded"t3c update succeeded--file="--file="--match="--match="--end-match="--end-match="--timeout-ms="--timeout-ms="Itoat3c-tail`t3c-tail`t3c-tail returned error code %d stdout '%s' stderr '%s'"t3c-tail returned error code %d stdout '%s' stderr '%s'"--file-a=stdin"--file-a=stdin"--file-b="--file-b="--file-mode="--file-mode="%#o"%#o"--file-uid="--file-uid="Sprint--file-gid="--file-gid="-diff`-diff`%s returned error code %v stdout '%v' stderr '%v'"%s returned error code %v stdout '%v' stderr '%v'"All lines and file permissions match TrOps for config file: %s
"All lines and file permissions match TrOps for config file: %s\n"file '"file '"' changes begin
"' changes begin\n"diff: "diff: "' changes end"' changes end"LoggerBooloutMuflagisDiscardSetOutputPrintPrintfFatalFatalfFatallnPanicPanicfPaniclnSetFlagsSetPrefixInfoPrefixINFO: InfoFlagsLogln`check`refs`refs`--files-adding=input`--files-adding=input`MarshalCheckRefsInputFileAndAddingjson:"file"Addingjson:"adding"marshalling json input: "marshalling json input: "t3c check refs stdoutt3c check refs stderr%d plugins failed to verify. See log for details."%d plugins failed to verify. See log for details."BlockHeadersDecodeBad Certificate:
'"Bad Certificate:\n'"Error Decoding Certificate"Error Decoding Certificate"CertificateSignatureAlgorithmisRSAPSSalgohashFuncPublicKeyAlgorithmIntnatWordmodInverseznormmakesetWordsetUint64setsubcmpmulAddWWmontgomerymulsqrmulRangebitLentrailingZeroBitsisPow2shlshrsetBitbitstickyandtruncandNotorxorrandomexpNNexpNNMontgomeryEvenexpNNWindowedexpNNMontgomerysetBytessqrtsubMod2NscanutoaitoaconvertWordsqexpWWremdivdivWmodWdivLargedivBasicdivRecursivedivRecursiveStepprobablyPrimeMillerRabinprobablyPrimeLucasnegSignSetInt64SetUint64BitsSetBitsNegMulMulRangeBinomialQuoRemQuoRemDivModDivModCmpCmpAbsInt64IsInt64IsUint64Float64SetStringsetFromScannerSetBytesFillBytesBitLenTrailingZeroBitsExpexpSlowexpGCDlehmerGCDRandModInversemodSqrt3Mod4PrimemodSqrt5Mod8PrimemodSqrtTonelliShanksModSqrtLshRshBitSetBitAndNotXorNotSqrtAppendProbablyPrimescaleDenomAttributeTypeAndValueObjectIdentifieroiCountryOrganizationOrganizationalUnitLocalityProvinceStreetAddressPostalCodeSerialNumberCommonNameNamesExtraNamesFillFromRDNSequenceappendRDNsToRDNSequenceKeyUsageExtensionIdCriticalasn1:"optional"ExtKeyUsageIPIsUnspecifiedipIsLoopbackIsPrivateIsMulticastIsInterfaceLocalMulticastIsLinkLocalMulticastIsLinkLocalUnicastIsGlobalUnicastTo4To16DefaultMaskMaskmatchAddrFamilyIPNetIPMaskNetworkOIDderunmarshalOIDTextoidEqualASN1OIDtoASN1OIDRawRawTBSCertificateRawSubjectPublicKeyInfoRawSubjectRawIssuerSignaturePublicKeyIssuerSubjectNotBeforeNotAfterExtensionsExtraExtensionsUnhandledCriticalExtensionsUnknownExtKeyUsageBasicConstraintsValidIsCAMaxPathLenMaxPathLenZeroSubjectKeyIdAuthorityKeyIdOCSPServerIssuingCertificateURLDNSNamesEmailAddressesIPAddressesURIsPermittedDNSDomainsCriticalPermittedDNSDomainsExcludedDNSDomainsPermittedIPRangesExcludedIPRangesPermittedEmailAddressesExcludedEmailAddressesPermittedURIDomainsExcludedURIDomainsCRLDistributionPointsPolicyIdentifiersPoliciessystemVerifycheckNameConstraintsisValidVerifybuildChainsVerifyHostnamehasSANExtensionCheckSignatureFromCheckSignaturehasNameConstraintsgetSANExtensionCheckCRLSignatureCreateCRLParseCertificateError Parsing Certificate: "Error Parsing Certificate: "Certificate expired: "Certificate expired: "WarnfCertificate valid until %s "Certificate valid until %s "ServiceNeedssn%s calling with changedConfigFiles '%v'
"%s calling with changedConfigFiles '%v'\n"`reload`ServiceNeedsInvalidinvalid{"changed_files":"`{"changed_files":"`writing changed files to input: "writing changed files to input: ""}`"}`t3c check reload stdoutt3c check reload stderr%s returned error code %d - see log for details."%s returned error code %d - see log for details."StrToServiceNeeds returned unknown string '" returned unknown string '"t3c check reload returned unknown string 'unmarshalling '"unmarshalling '"`request`--get-data=`--get-data=`t3c request stdoutt3c request stderrApplyCachePath/var/lib/trafficcontrol-cache-config/config-data.jsongetting cached config data failed, not using cache! Error: "getting cached config data failed, not using cache! Error: "config cache bytes: %v
"config cache bytes: %v\n"--get-data=config`--get-data=config`--old-config=stdin`--old-config=stdin`t3c returned non-zero exit code %v, see log for details"t3c returned non-zero exit code %v, see log for details"writing config data to cache failed: "writing config data to cache failed: "Warning start` start`'\n' end` end`stdout"stdout""stderr" cmd.go has funcs to call t3c sub-command apps. generate runs t3c-generate and returns the result. preprocess takes the to Data from 't3c-request --get-data=config' and the generated files from 't3c-generate', passes them to `t3c-preprocess`, and returns the result. if cmd.Wait returns no error, that means the command returned 0 sendUpdate updates the given cache's queue update and reval status in Traffic Ops. Note the statuses are the value to be set, not whether to set the value. *** Compatability requirement until ATC (v7.0+) is deployed with the timestamp features *** TODO: Do these override the values set above? These appear to be the same, dups? doTail calls t3c-tail, which will read lines from the file at the provided path, and will print lines matching the 'logMatch' regular expression. When a line matching the 'endMatch' regular expression is encountered, t3c-tail will exit - which means it MUST NOT be an empty string or only the first line of the file will ever be read (and possibly printed, if it matches 'logMatch'). In any case, the process will terminate after 'timeoutInMS' milliseconds. Note that apart from an exit code difference on timeout, this is almost exactly equivalent to the bash command:	timeout timeoutInS tail -fn+2 file | grep -m 1 -B "$(wc -l file | cut -d ' ' -f1)" -E endMatch | grep -E logMatch ... where 'timeoutInS' is 1/1000 of 'timeoutInMS' and the string values of arguments are otherwise substituted wherever they are found (GNU coreutils are assumed to be present). diff calls t3c-diff to diff the given new file and the file on disk. Returns whether they're different. Logs the difference. If the file on disk doesn't exist, returns true and logs the entire file as a diff. t3c-diff is called directly for performance reasons. 0 is only returned if there's no diff code 1 means a diff, difference text will be on stdout the shell output includes a trailing newline that isn't part of the diff; remove it no trailing newline, becuase we're using log*ln, the last line will get a newline appropriately Create our own info logger, to log the diff. We can't use the logger initialized in the config package because we don't want to log all the other Info logs. But we want the standard log.Info prefix, timestamp, etc. checkRefs calls t3c-check-refs to verify the given cfgFile. The cfgFile should be the full text of either a plugin.config or remap.config. Returns nil if t3c-check-refs returned no errors found, or the error found if any. checkCert checks the validity of the ssl certificate. checkReload is a helper for the sub-command t3c-check-reload. requestJSON calls t3c-request with the given command, and deserializes the result as JSON into obj. request calls t3c-request with the given command, and returns the stdout bytes. requestConfig calls t3c-request and returns the stdout bytes. It also caches the config in /var/lib/trafficcontrol-cache-config and uses the cache to issue IMS requests. TODO support /opt don't log an error if the cache didn't exist write directly to the underlying logger, to avoid duplicating the prefix outToErr returns stderr if logLocation is stdout, otherwise returns logLocation unchanged. This is a helper to avoid logging to stdout for commands whose output is on stdout.StateFlagPrecisionWidthVerifyOptionsCertPoollazyCertrawSubjectconstraintgetCertsum22428byNamelazyCertshaveSumsystemPoolClonefindPotentialParentscontainsAddCertaddCertFuncAppendCertsFromPEMSubjectsAddCertWithConstraintDNSNameIntermediatesRootsCurrentTimeKeyUsagesMaxConstraintComparisionsByteScannerByteReaderScanStateSkipSpaceTokenCertificateListTBSCertificateListRawContentAlgorithmIdentifierRawValueClassTagIsCompoundFullBytesAlgorithmParametersRDNSequenceRelativeDistinguishedNameSETRevokedCertificateRevocationTimeasn1:"optional,default:0"ThisUpdateNextUpdateRevokedCertificatesasn1:"tag:0,optional,explicit"BitStringBitLengthAtRightAlignTBSCertListSignatureValueHasExpiredcertListReloadRestartdivisorbbbnbitsndigitsAccuracyHashHashFuncSourceInt63SeedSource64srcs64readValreadPosExpFloat64NormFloat64Uint32Int31Int63nInt31nint31nIntnFloat32ShuffleBlockSizeSumpotentialParent/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/torequest/torequest.gobodynewlinesamelgtltspchangeNeededfileExistsotherStatusstatusFilesvrStatusnewstrfieldsnewdatadatafromlineCountoverrideCountoverridenCountoverridesstatStructdevPathfileInfouserInfovalsdeviceownerdiskfsudevDevicesfullFileNamesizehitchReloadntpdRestartremapConfigReloadsysCtlReloadtmpFileNametrafficCtlReloadtrafficServerRestartvarnishReloadnvjjlevelValuearrvenabledlevelvaluepkgAndVersionpkgArrwarnatsGidatsUidatsUserwarningupdateStatusserverStatussleepOverriderandDispSecchangedFilerdfileNamereDataauditErrorschangesRequiredshouldRestartReloadarrfullPackageinstpkgreqpkgpkginstalluninstallpkgMappmdpkpkgMetaDatapackageMetaDatapkgMdataMapstartStrreloadArgsreloadCommandpackageNameserviceNeedscurSettingflagTypenewSettingperformUpdateuseros/user"os/user"/var/log/trafficserver/diags.log"/var/log/trafficserver/diags.log"6000015000ET_(TASK|NET)\s\d{1,}`ET_(TASK|NET)\s\d{1,}`Traffic Server is fully initialized"Traffic Server is fully initialized"remap.config finished loading"remap.config finished loading"`json:"name"``json:"version"`"UpdateTropsNotNeeded""UpdateTropsNeeded""UpdateTropsSuccessful""UpdateTropsFailed"HasPrefix#"#"
"\r\n"\s+`\s+`^\s+|\s+$`^\s+|\s+$`amp;`amp;`&lt;`&lt;`&gt;`&gt;` " "<"<">">"Name: %s, Dir: %s, Service: %s
"Name: %s, Dir: %s, Service: %s\n"Config file name is empty is empty, skipping further checks."Config file name is empty is empty, skipping further checks."No location information for "No location information for "MkDirWithOwnerUnable to create the directory '"Unable to create the directory '" for " for "======== Start processing config file: %s ========
"======== Start processing config file: %s ========\n"50-ats.rules"50-ats.rules"unable to process udev rules in '"unable to process udev rules in '"plugin.config"plugin.config"failed to verify '"failed to verify '"Successfully verified plugins used by '"Successfully verified plugins used by '"HasSuffix.cer".cer" for: " for: "getting diff: "getting diff: "======== End processing config file: %s for service: %s ========
"======== End processing config file: %s for service: %s ========\n"Returning; did not find status from Traffic Ops!"Returning; did not find status from Traffic Ops!"Found %s status from Traffic Ops.
"Found %s status from Traffic Ops.\n"FileExistsstatus file %s does not exist.
"status file %s does not exist.\n"could not retrieves a statuses list from Traffic Ops: %s
"could not retrieves a statuses list from Traffic Ops: %s\n"Removing other status file %s that exists
"Removing other status file %s that exists\n"RemoveError removing %s: %s
"Error removing %s: %s\n"unable to create '%s'
"unable to create '%s'\n"Touchunable to touch %s - %s
"unable to touch %s - %s\n"Fields##OVERRIDDEN## "##OVERRIDDEN## "##OVERRIDE##"##OVERRIDE##"TrimPrefix##OVERRIDE## "##OVERRIDE## "The "The " file is empty, nothing to process." file is empty, nothing to process."Overrode %d old remap rule(s) with %d new remap rule(s).
"Overrode %d old remap rule(s) with %d new remap rule(s).\n"KERNEL=="KERNEL=="""\""root"root"HomeDirGroupIdsLookupno such user on this system: '%s'
"no such user on this system: '%s'\n"/dev/"/dev/"Found device in 50-ats.rules: %s
"Found device in 50-ats.rules: %s\n"Device %s is owned by uid %s, not %s (%s)
"Device %s is owned by uid %s, not %s (%s)\n"Ownership for disk device %s, is okay
"Ownership for disk device %s, is okay\n"Unable to read device owner info for %s
"Unable to read device owner info for %s\n"/proc/fs/ext4"/proc/fs/ext4"unable to read /proc/fs/ext4, cannot audit disks for filesystem usage."unable to read /proc/fs/ext4, cannot audit disks for filesystem usage."Device %s has an active partition and filesystem!!!!
"Device %s has an active partition and filesystem!!!!\n"Openunable to completely read from '"unable to completely read from '".tmp`.tmp`You elected not to replace %s with the version from Traffic Ops.
"You elected not to replace %s with the version from Traffic Ops.\n"Writing temp file '%s' with file mode: '%#o' 
"Writing temp file '%s' with file mode: '%#o' \n"WriteFileWithOwnerFailed to write temp config file '"Failed to write temp config file '"Copying temp file '%s' to real '%s'
"Copying temp file '%s' to real '%s'\n"RenameFailed to move temp '"Failed to move temp '"' to real '"' to real '"bg_fetch"bg_fetch"hdr_rw_"hdr_rw_"regex_remap_"regex_remap_"set_dscp_"set_dscp_"url_sig_"url_sig_"uri_signing"uri_signing".lua".lua"ssl_multicert.config"ssl_multicert.config"records.config"records.config"ssl"ssl".key".key"ntpd.conf"ntpd.conf"sysctl.conf"sysctl.conf"hitch.conf"hitch.conf"default.vcl"default.vcl"Reload state after %s: remap.config: %t reload: %t restart: %t ntpd: %t sysctl: %t"Reload state after %s: remap.config: %t reload: %t restart: %t ntpd: %t sysctl: %t"Setting change applied for '%s'
"Setting change applied for '%s'\n""name""value":":"on"on"enable"enable"Unable to enable service "Unable to enable service ": ": "The %s service has been enabled
"The %s service has been enabled\n"/bin/chkconfig"/bin/chkconfig"--level"--level"Unable to ensure %s service is enabled, SvcMananagement type is %s
"Unable to ensure %s service is enabled, SvcMananagement type is %s\n"Found in cache for '%s'"Found in cache for '%s'"RPM DB is corrupted cannot run IsPackageInstalled for '%s' and package metadata is unavailable"RPM DB is corrupted cannot run IsPackageInstalled for '%s' and package metadata is unavailable"IsPackageInstalled '%v' not found in cache, querying rpm"IsPackageInstalled '%v' not found in cache, querying rpm"PackageInfopkg-query"pkg-query"IsPackageInstalled PackageInfo(pkg-query, %v) failed, caching as not installed and returning false! Error: %v\n`IsPackageInstalled PackageInfo(pkg-query, %v) failed, caching as not installed and returning false! Error: %v\n`IsPackageInstalled '%v' found in rpm, adding '%v' to cache"IsPackageInstalled '%v' found in rpm, adding '%v' to cache"IsPackageInstalled '%v' not found in rpm, adding '%v'=false to cache"IsPackageInstalled '%v' not found in rpm, adding '%v'=false to cache"could not lookup the trafficserver, '%s', owner uid, using uid/gid 0"could not lookup the trafficserver, '%s', owner uid, using uid/gid 0"Atoicould not parse the ats UID."could not parse the ats UID."could not parse the ats GID."could not parse the ats GID."requesting data generating config files: "requesting data generating config files: "4200644======== Summary of config warnings that may need attention. ========"======== Summary of config warnings that may need attention. ========"%s: %s"%s: %s"======== End warning summary ========"======== End warning summary ========"Checking revalidate state."Checking revalidate state."CheckRevalidateState returning %v
"CheckRevalidateState returning %v\n"getting update status: "getting update status: "my status: %s
"my status: %s\n"Update URL: Instant invalidate is not enabled.  Separated revalidation requires upgrading to Traffic Ops version 2.2 and enabling this feature."Update URL: Instant invalidate is not enabled.  Separated revalidation requires upgrading to Traffic Ops version 2.2 and enabling this feature."Traffic Ops is signaling that a revalidation is waiting to be applied."Traffic Ops is signaling that a revalidation is waiting to be applied."Traffic Ops is signaling that my parents need to revalidate, not revalidating."Traffic Ops is signaling that my parents need to revalidate, not revalidating."Traffic Ops is signaling that my parents need to revalidate, but wait-for-parents is false, revalidating anyway."Traffic Ops is signaling that my parents need to revalidate, but wait-for-parents is false, revalidating anyway."In revalidate mode, but no update needs to be applied. I'm outta here."In revalidate mode, but no update needs to be applied. I'm outta here."Traffic Ops is signaling that no revalidations are waiting to be applied."Traffic Ops is signaling that no revalidations are waiting to be applied."checking status files: "checking status files: "CheckRevalidateState checkStatusFiles returned nil error"CheckRevalidateState checkStatusFiles returned nil error"DebuglnChecking syncds state."Checking syncds state."getting '"getting '"' update status: "' update status: "Traffic Ops is signaling that an update is waiting to be applied"Traffic Ops is signaling that an update is waiting to be applied"Traffic Ops is signaling that my parents need an update."Traffic Ops is signaling that my parents need an update."sleeping for %ds to see if the update my parents need is cleared."sleeping for %ds to see if the update my parents need is cleared."My parents still need an update, bailing."My parents still need an update, bailing."The update on my parents cleared; continuing."The update on my parents cleared; continuing."Processing with update: Traffic Ops server status %+v config wait-for-parents %+v"Processing with update: Traffic Ops server status %+v config wait-for-parents %+v"no queued update needs to be applied.  Running revalidation before exiting."no queued update needs to be applied.  Running revalidation before exiting."Traffic Ops is signaling that no update is waiting to be applied."Traffic Ops is signaling that no update is waiting to be applied." ======== Start processing config files ========" ======== Start processing config files ========"/opt/trafficserver/"/opt/trafficserver/"udev"udev"Not installing packages, but trafficserver isn't installed. Continuing."Not installing packages, but trafficserver isn't installed. Continuing."/opt/ort"/opt/ort"12M_facts"12M_facts"puppet"puppet"cron"cron"system"system"ntp.conf"ntp.conf"ntpd"ntpd"About to process config file: %s, service: %s
"About to process config file: %s, service: %s\n"plugin.config changed however, prereqs failed for remap.config so I am skipping updates for plugin.config"plugin.config changed however, prereqs failed for remap.config so I am skipping updates for plugin.config"remap.config changed however, prereqs failed for plugin.config so I am skipping updates for remap.config"remap.config changed however, prereqs failed for plugin.config so I am skipping updates for remap.config"ip_allow.config"ip_allow.config"ip_allow.config changed, not updating! Run with --mode=badass or --syncds-updates-ipallow=true to update!"ip_allow.config changed, not updating! Run with --mode=badass or --syncds-updates-ipallow=true to update!"All Prereqs passed for replacing %s on disk with that in Traffic Ops.
"All Prereqs passed for replacing %s on disk with that in Traffic Ops.\n"failed to replace the config file, '%s',  on disk with data in Traffic Ops.
"failed to replace the config file, '%s',  on disk with data in Traffic Ops.\n"audit failed for config file: %v Error: %s"audit failed for config file: %v Error: %s"Final state: remap.config: %t reload: %t restart: %t ntpd: %t sysctl: %t"Final state: remap.config: %t reload: %t restart: %t ntpd: %t sysctl: %t"Calling ProcessPackages"Calling ProcessPackages"getting packages: "getting packages: "ProcessPackages got %+v
"ProcessPackages got %+v\n"Processing package %s-%s
"Processing package %s-%s\n"PackgeInfo pkg-query: "PackgeInfo pkg-query: "-"-"%s Currently installed and not marked for removal
"%s Currently installed and not marked for removal\n"%s Currently installed and marked for removal
"%s Currently installed and marked for removal\n"%s is Not installed and is marked for installation.
"%s is Not installed and is marked for installation.\n"pkg-requires"pkg-requires"PackgeInfo pkg-requires: "PackgeInfo pkg-requires: "%s is Currently installed and depends on %s and needs to be removed."%s is Currently installed and depends on %s and needs to be removed."%s Currently installed.
"%s Currently installed.\n"%s Wrong version currently installed.
"%s Wrong version currently installed.\n"%s is Not installed.
"%s is Not installed.\n"number of packages requiring installation: %d
"number of packages requiring installation: %d\n"number of packages requiring removal: %d
"number of packages requiring removal: %d\n"PackageAction"info"Package "Package " is not available to install: " is not available to install: "All packages available.. proceding.."All packages available.. proceding.."Uninstalling %s
"Uninstalling %s\n"remove"remove"Unable to uninstall "Unable to uninstall " : " : "Package %s was uninstalled
"Package %s was uninstalled\n"Installing %s
"Installing %s\n""install"Unable to install "Unable to install "Package %s was installed
"Package %s was installed\n"
In Report mode and %s needs installation.
"\nIn Report mode and %s needs installation.\n"In Report mode and packages need installation"In Report mode and packages need installation"getting packages: %w"getting packages: %w"package %s is assumed to be installed according to metadata file"package %s is assumed to be installed according to metadata file"package %s is assumed to be installed according to metadata, but doesn't match traffic ops pkg"package %s is assumed to be installed according to metadata, but doesn't match traffic ops pkg"package %s does not appear to be installed."package %s does not appear to be installed."ActionLogActionUpdateFilesRevalupdate-files-revalServiceNeedsNothingServiceNeedsRestartdetermining if service needs restarted - not reloading or restarting! : "determining if service needs restarted - not reloading or restarting! : "t3c-check-reload returned '%+v'
"t3c-check-reload returned '%+v'\n"ServiceNeedsReloadATS config files unchanged, we updated files via t3c-apply, ATS needs reload"ATS config files unchanged, we updated files via t3c-apply, ATS needs reload" needs " needs " but is not installed." but is not installed."getting trafficserver service status: "getting trafficserver service status: "ATS configuration has changed.  The new config will be picked up the next time ATS is started."ATS configuration has changed.  The new config will be picked up the next time ATS is started."ATS configuration has changed. 'traffic_ctl config reload' needs to be run"ATS configuration has changed. 'traffic_ctl config reload' needs to be run""restart"ActionLogActionATSRestartats-restartfailed to restart trafficserver"failed to restart trafficserver"trafficserver has been "trafficserver has been "ed"ed"confirming ATS restart succeeded"confirming ATS restart succeeded".*".*"error running tail"error running tail"skipping ATS restart success confirmation"skipping ATS restart success confirmation"ATS configuration has changed, Running 'traffic_ctl config reload' now."ATS configuration has changed, Running 'traffic_ctl config reload' now.""config"/usr/sbin/varnishreload"/usr/sbin/varnishreload"ActionLogActionATSReloadats-reloadATS configuration has changed and 'traffic_ctl config reload' failed, check ATS logs: "ATS configuration has changed and 'traffic_ctl config reload' failed, check ATS logs: "ATS 'traffic_ctl config reload' was successful"ATS 'traffic_ctl config reload' was successful"confirming ATS reload succeeded"confirming ATS reload succeeded"error running tail: "error running tail: "skipping ATS reload success confirmation"skipping ATS reload success confirmation"%s flag currently set to %v, setting to %v took %v"%s flag currently set to %v, setting to %v took %v"failed to update Traffic Ops: "failed to update Traffic Ops: "Traffic Ops is signaling that an update is ready to be applied but, none was found! Clearing update state in Traffic Ops anyway."Traffic Ops is signaling that an update is ready to be applied but, none was found! Clearing update state in Traffic Ops anyway."Traffic Ops does not require an update at this time"Traffic Ops does not require an update at this time"Traffic Ops requires an update but, applying the update locally failed.  Traffic Ops is not being updated."Traffic Ops requires an update but, applying the update locally failed.  Traffic Ops is not being updated."Traffic Ops requires an update and it was applied successfully.  Clearing update state in Traffic Ops."Traffic Ops requires an update and it was applied successfully.  Clearing update state in Traffic Ops."In Report mode and Traffic Ops needs updated you should probably do that manually."In Report mode and Traffic Ops needs updated you should probably do that manually."Update flag currently set to %v, setting to %v"Update flag currently set to %v, setting to %v"Reval flag currently set to %v, setting to %v"Reval flag currently set to %v, setting to %v"Traffic Ops Update failed: "Traffic Ops Update failed: "Traffic Ops has been updated."Traffic Ops has been updated." map of packages which are installed, either already installed or newly installed by this run. map of verified plugins map of packages which were installed by us. list of config files which were changed a traffic_ctl_reload is required a reload of the sysctl.conf is required ntpd needs restarting a restart of teakd is required a trafficserver restart is required remap.config should be reloaded hitch should be reloaded varnish should be reloaded file name install directory full path service assigned to location to backup the config at 'Path' location to backup the TrafficOps Version audit is complete audit failed Error generated when AuditFailed is true a change has been applied change required failed plugin prerequiste check file is a remap plugin config file default file permissions owner uid, default is 0 owner gid, default is 0 commentsFilter is used to remove comment lines from config files while making comparisons. newLineFilter removes carriage returns from config files while making comparisons. unencodeFilter translates HTML escape sequences while making config file comparisons. DumpConfigFiles is used for debugging NewTrafficOpsReq returns a new TrafficOpsReq object. checkConfigFile checks and audits config files. The filesAdding parameter is the list of files about to be added, which is needed for verification in case a file is required and about to be created but doesn't exist yet. return if audit has already been done. perform plugin verification checkStatusFiles ensures that the cache status files reflect the status retrieved from Traffic Ops. processRemapOverrides processes remap overrides found from Traffic Ops. check if this line should be overriden check for an override remove the ##OVERRIDE## comment along with the trailing space save the remap 'from field' to overrides. no override is necessary strings.Join doesn't add a newline character to the last element in the array and we need one when the data is written out to a file. processUdevRules verifies disk drive device ownership and mode readCfgFile reads a config file and return its contents. replaceCfgFile replaces an ATS configuration file with one from Traffic Ops. write a new file, then move to the real location because moving is atomic but writing is not. If we just wrote to the real location and the app or OS or anything crashed, we'd end up with malformed files. CheckSystemServices is used to verify that packages installed are enabled for startup. IsPackageInstalled returns true/false if the named rpm package is installed. the prefix before the version is matched. GetConfigFile fetchs a 'Configfile' by file name. GetConfigFileList fetches and parses the multipart config files for a cache from traffic ops and loads them into the configFiles map. CheckRevalidateState retrieves and returns the revalidate status from Traffic Ops. CheckSyncDSState retrieves and returns the DS Update status from Traffic Ops. The metaData is this run's metadata. It must not be nil, and this function may add to it.	if r.Cfg.RunMode == t3cutil.ModeSyncDS || r.Cfg.RunMode == t3cutil.ModeBadAss || r.Cfg.RunMode == t3cutil.ModeReport { TODO should reval really not sleep? check local status files. CheckReloadRestart determines the final reload/restart state after all config files are processed. ProcessConfigFiles processes all config files retrieved from Traffic Ops. list of file names being added, needed for verification. add service metadata all config files are added to OwnedFiles, even if they aren't changed on disk. ProcessPackages retrieves a list of required RPM's from Traffic Ops and determines which need to be installed or removed on the cache. get the package list for this cache from Traffic Ops. install package list. uninstall package list loop through the package list to build an install and uninstall list. installed package required package check to see if any package by name is installed. go needs the ternary operator :) check if the full package version is installed the installed package needs upgrading. the required package needs installing. get a list of packages that depend on this one and mark dependencies for deletion. Only check if packages exist and complain if they are wrong. uninstall packages marked for removal install the required packages ProcessPackagesWithMetaData will attempt to get installed package data from t3c-apply-metadata.json and log the results. TODO verify? This is for revalidating after a syncds, so we probably do want to wait for parents here, and users probably don't for the main syncds run. But, this feels surprising. The better solution is to gut the RevalidateWhileSleeping stuff, once TO can handle more load StartServices reloads, restarts, or starts ATS as necessary, according to the changed config files and run mode. Returns nil on success or any error. We have our own internal knowledge of files that have been modified as well If check-reload does not know about these and we do, then we should initiate a reload as well TODO try to reload/restart anyway? To allow non-RPM installs? we restarted, so no need to reload TODO: The boolean flags/representation can be removed after ATC (v7.0+)/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/util/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/util/gitutil.goDirectoryExistsGitSafeDirOneWeekRandomDurationSvcUnknownaddGitSafeDirdoMkDirWithOwnergitEmailgitUsermakeConfigDirGitRepomakeConfigDirGitUsermakeGitCommitMsgmakeInitialGitCommitGitNotARepoMsgPrefixerrOutputerrPipesafeDirnowselfappStrmodeStrselfStrsepsuccessStrtimeStrlockFilelockFileInfomaxAge"status"getting stderr pipe for command: "getting stderr pipe for command: "git status returned: "git status returned: "ReadAllreading stderr: "reading stderr: "waiting for git command: "waiting for git command: "fatal: not a git repository`fatal: not a git repository`making config dir '"making config dir '"' a git repo: "' a git repo: "safe.directory"safe.directory"safe.directory=/usr/bin/git"/usr/bin/git"-l"-l"git config returned err %v"git config returned err %v"--global"--global"--add"--add"git config add '%v' returned err %v"git config add '%v' returned err %v""init"git init in config dir '%v' returned err %v msg '%v'"git init in config dir '%v' returned err %v msg '%v'"git creating user in config dir '%v': %v"git creating user in config dir '%v': %v"creating initial git commit: "creating initial git commit: "creating first files git commit: "creating first files git commit: "traffic-control-cache-config@apache-traffic-control.invalid"traffic-control-cache-config@apache-traffic-control.invalid""t3c"user.email"user.email"git config user.email in config dir '%v' returned err %v msg '%v'"git config user.email in config dir '%v' returned err %v msg '%v'"user.name"user.name"commit"commit"--allow-empty"--allow-empty"-m"-m"Initial commit"Initial commit"git initial commit error: in config dir '%v' returned err %v msg '%v'"git initial commit error: in config dir '%v' returned err %v msg '%v'"--porcelain"--porcelain"git status error: in config dir '%v' returned err %v msg '%v'"git status error: in config dir '%v' returned err %v msg '%v'""add"-A"-A"git add error: in config dir '%v' returned err %v msg '%v'"git add error: in config dir '%v' returned err %v msg '%v'"--message"--message"git commit error: in config dir '%v' returned err %v msg '%v'"git commit error: in config dir '%v' returned err %v msg '%v'"other"other""self"report-only="report-only=" files=" files=" install-packages=" install-packages=" service-action=" service-action=" ignore-update-flag=" ignore-update-flag=" update-ipallow=" update-ipallow=" wait-for-parents=" wait-for-parents=" no-unset-update-flag=" no-unset-update-flag=" report-only=" report-only="fail"fail""success"stat returned error: %v on file %v"stat returned error: %v on file %v"error removing file: %v, %v"error removing file: %v, %v" EnsureConfigDirIsGitRepo ensures the ATS config directory is a git repo. Returns whether it tried to create a git repo, and any error. Note the return will be (false, nil) if a git repo already exists. Note true and a non-nil error may be returned, if creating a git repo is necessary and attempted and fails. this means Go failed to run the command, not that the command returned an error. it's already a git repo GetGitConfigSafeDir checks that TsConfigDir has been configured as a safe directory. if not it will be added to the git config this will prevent the fatal: detected dubious ownership error makeInitialGitCommit makes the initial commit for a new git repo. An initial empty commit is desirable, because the first commit is difficult to manipulate. TODO git config author? makeGitCommitAll makes a git commit of all changes in cfg.TsConfigDir, including untracked files. if there are no changes, don't do anything no error and no output means there were zero changes, so just return TODO get a single consistent time when ORT starts? TODO use full args string literal instead?/Users/test/Desktop/trafficcontrol/cache-config/t3c-apply/util/util.gofullCommandfnactiveservicecmdstrmaxmyfiledateStrclientfilePathgunzipmaxmindlocationmovereportonlyreqresptsconfigdirurlpathflockrandmath/rand"math/rand"net/http"net/http""path"github.com/gofrs/flock"github.com/gofrs/flock"604800"SvcNotRunning""SvcRunning""SvcUnknown"unable to obtain a lock on %s
"unable to obtain a lock on %s\n"Error executing '"Error executing '"-1/usr/sbin/service"/usr/sbin/service"could not get status for service '"could not get status for service '"'
"'\n"Active: active"Active: active"Main PID: "Main PID: "SscanfMain PID: %d"Main PID: %d"ServiceStart called for '%s'
"ServiceStart called for '%s'\n"Could not get status for '"Could not get status for '"' : "' : "service '%s' is already running, pid: %d
"service '%s' is already running, pid: %d\n"Could not "Could not " the '" the '"' service: "' service: "OpenFileO_WRONLYO_CREATE512513O_TRUNC10241537unable to open '"unable to open '"' for writing: "' for writing: "error writing to '"error writing to '"error changing ownership on '"error changing ownership on '"/usr/bin/yum"/usr/bin/yum"-y"-y"cfg-files"cfg-files"output from cfg-files query: %s
"output from cfg-files query: %s\n"result length: %d, result: %s
"result length: %d, result: %s\n"file-query"file-query"-f"-f"output from file-query: %s
"output from file-query: %s\n"pkg-provides"pkg-provides"--whatprovides"--whatprovides"pkg-provides - name: %s, output: %s
"pkg-provides - name: %s, output: %s\n"rpm -q --whatprovides '"rpm -q --whatprovides '"' returned: "' returned: "rpm -q '"rpm -q '"--whatrequires"--whatrequires"rpm -q --whatrequires '"rpm -q --whatrequires '"Currentcould not obtain the current user info: %s
"could not obtain the current user info: %s\n"user check: report-only=%v service-action=%v install-packages=%v files=%v user='%v'
"user check: report-only=%v service-action=%v install-packages=%v files=%v user='%v'\n"Only the root user may restart services, current user: %s
"Only the root user may restart services, current user: %s\n"Only the root user may install packages, current user: %s
"Only the root user may install packages, current user: %s\n"Only the root user may set non-reval files, current user: %s
"Only the root user may set non-reval files, current user: %s\n"Running report only, not cleaning tmp directory"Running report only, not cleaning tmp directory"config.TmpBase is misconfigured: '%s', refusing to remove any files or directories."config.TmpBase is misconfigured: '%s', refusing to remove any files or directories."opening %s: %v
"opening %s: %v\n"config.TmpBase is incorrectly configured, refusing to remove '/'. check config.TmpBase."config.TmpBase is incorrectly configured, refusing to remove '/'. check config.TmpBase."..".."RemoveAllcould not remove '%s': %v
"could not remove '%s': %v\n"the directory '%s' already exists"the directory '%s' already exists"there is a file named, '%s' that is not a directory"there is a file named, '%s' that is not a directory"Reporting only: the directory %s does not exist and was not created"Reporting only: the directory %s does not exist and was not created"Mkdir4930755unable to create the directory '%s': %v"unable to create the directory '%s': %v"unable to chown directory uid/gid, '%s': %v"unable to chown directory uid/gid, '%s': %v"CreateReporting: maxmind location '%v', reporting only and not modifying file
"Reporting: maxmind location '%v', reporting only and not modifying file\n"error parsing maxmind url: %v"error parsing maxmind url: %v"filename for maxmind from url invalid: %s"filename for maxmind from url invalid: %s"`date`+%a, %d %b %Y %T %Z"+%a, %d %b %Y %T %Z"-u"-u"-r"-r"ClientRoundTripperRequestHeaderhassortedKeyValuesWriteSubsetwriteSubsetFormFileHeaderMIMEHeaderFilenamecontenttmpfiletmpofftmpsharedConnectionStateCurveIDHandshakeCompleteDidResumeCipherSuiteNegotiatedProtocolNegotiatedProtocolIsMutualServerNamePeerCertificatesVerifiedChainsSignedCertificateTimestampsOCSPResponseTLSUniqueECHAcceptedekmtestingOnlyDidHRRtestingOnlyCurveIDExportKeyingMaterialcsResponseStatusCodeProtoProtoMajorProtoMinorContentLengthTransferEncodingUncompressedTrailerTLSCookiesProtoAtLeastcloseBodybodyIsWritableisProtocolSwitchpatternsegmentwildmultimethodhostsegmentslastSegmentconflictsWithp1comparePathsAndMethodscompareMethodscomparePathsMethodGetBodyPostFormMultipartFormRemoteAddrPatternpatmatchesotherValuesWithContextUserAgentCookiesNamedCookieAddCookieRefererMultipartReadermultipartReaderisH2UpgradeWriteProxyBasicAuthSetBasicAuthParseFormParseMultipartFormFormValuePostFormValueFormFilePathValueSetPathValuepatIndexexpectsContinuewantsHttp10KeepAlivewantsCloseisReplayableoutgoingLengthrequiresHTTP1RoundTripCookieJarSameSiteQuotedDomainExpiresRawExpiresMaxAgeHttpOnlyPartitionedUnparsedSetCookiesTransportCheckRedirectJarTimeoutsenddeadlinetransportcheckRedirectdomakeHeadersCopierPostHeadCloseIdleConnectionsNewRequestHEAD"HEAD"error creating head request %v"error creating head request %v"If-Modified-Since"If-Modified-Since"error issuing client IMS request %v"error issuing client IMS request %v"304200error requesting %s, code: %d"error requesting %s, code: %d"Last-Modified"Last-Modified""Date"touch`touch`-d"-d"error setting new date: %s, on %s"error setting new date: %s, on %s"received a 304 for maxmind database, updated disk file with new date: %s"received a 304 for maxmind database, updated disk file with new date: %s"curl`curl`-so"-so"Error downloading maxmind database"Error downloading maxmind database"bash"bash"gunzip < "gunzip < " > " > "TrimSuffix.gz".gz"".tmp"error running gunzip: %v
"error running gunzip: %v\n"mv "mv "error moving new maxmind database file: %v
"error moving new maxmind database file: %v\n"Maxmind DB at %s successfully updated from %s"Maxmind DB at %s successfully updated from %s" Try to get a file lock, non-blocking. some OS error attempting to obtain a file lock another process is running. Releases the file lock, if locked. service is down start or restart the service 'service'. cmd is 'start | restart' service was sucessfully started not started, service is already running runs the rpm command. if the return code from rpm == 0, then a valid package list is returned. if the return code is 1, the the 'name' queried for is not part of a	package or is not installed. otherwise, if the return code is not 0 or 1 and error is set, a general rpm command execution error is assumed and the error is returned. returns a list of the package configuration files. rpm package for 'name' was not found. add the package name the file belongs to. returns the rpm name that owns the file 'name' file is not part of any package. returns the package name that provides 'name' no package provides 'name' returns the package name for 'name'. the package is not installed. add the rpm name returns a list of packages that requires package 'name' no package reuires package 'name' TODO remove check? Let people run as any user, if it succeeds? Warn? TODO remove? Why would reval be ok, but not other files? remove any directory and its contents under the config.TmpBase (/tmp/ort) that is more than a week old. Check if already exists Dont update for report mode Split url, get filename Check if filename exists in ats etc Do a HEAD request to check for 200 or 304 depending on if we have an existing file or not. If we have a 304 then update the timestamp on the file on disk.relationshipClientTraceGotConnInfoConnLocalAddrReusedWasIdleIdleTimeDNSStartInfoDNSDoneInfoIPAddrisWildcardopAddrfamilytoLocalAddrsCoalescedWroteRequestInfoGetConnGotConnPutIdleConnGotFirstResponseByteGot100ContinueGot1xxResponseDNSStartDNSDoneConnectStartConnectDoneTLSHandshakeStartTLSHandshakeDoneWroteHeaderFieldWroteHeadersWait100ContinueWroteRequestcomposehasNetHooksReaderAtSeekerkeyValueskeyvaluesheaderSorterkvslastBytelastRuneSizefillreadErrPeekDiscardBufferedReadSliceReadLinecollectFragmentswriteBufPartmrdispositiondispositionParamstotalFormNameFileNameparseContentDispositionpopulateHeadersbufReadertempDircurrentPartpartsReadnlnlDashBoundarydashBoundaryDashdashBoundaryReadFormreadFormNextPartNextRawPartnextPartisFinalBoundaryisBoundaryDelimiterLinenet.familynet.isWildcardnet.sockaddrnet.toLocal/Users/test/Desktop/trafficcontrol/cache-config/t3c-check/Users/test/Desktop/trafficcontrol/cache-config/t3c-check/t3c-check.go"refs"no command

"no command\n\n"t3c-check-"t3c-check-"error executing sub-command: %s
"error executing sub-command: %s\n"usage: t3c-check [--help]
       <command> [<args>]

t3c-check has commands for checking things about new config files, such as
whether they can be safely applied or if a service reload or restart will
be required.

For the arguments of a command, see 't3c-check <command> --help'.

These are the available commands:

  reload  if a reload or restart is needed
  refs    if a config file's referenced plugins and files are valid
`usage: t3c-check [--help]
       <command> [<args>]

t3c-check has commands for checking things about new config files, such as
whether they can be safely applied or if a service reload or restart will
be required.

For the arguments of a command, see 't3c-check <command> --help'.

These are the available commands:

  reload  if a reload or restart is needed
  refs    if a config file's referenced plugins and files are valid
`/Users/test/Desktop/trafficcontrol/cache-config/t3c-check-refs/Users/test/Desktop/trafficcontrol/cache-config/t3c-check-refs/config/Users/test/Desktop/trafficcontrol/cache-config/t3c-check-refs/config/config.goArgFilesAddingInputArgToFilesAddingInitConfigdefaultATSConfigDirdefaultATSPluginDirCommandArgsLogLocationErrorTrafficServerConfigDirTrafficServerPluginDirFilesAddingFilesAddingInputatsConfigDirPtratsPluginDirPtrfilesAddingInputfilesAddingSethelpPtrversionPtrfileAddingfilesAddingValt3c-check-refs"t3c-check-refs""input"/opt/trafficserver/libexec/trafficserver"/opt/trafficserver/libexec/trafficserver"trafficserver-config-dir"trafficserver-config-dir"directory where ATS config files are stored."directory where ATS config files are stored."trafficserver-plugin-dir"trafficserver-plugin-dir"directory where ATS plugins are stored."directory where ATS plugins are stored."files-adding"files-adding"comma-delimited list of file names being added, to not fail to verify if they don't already exist."comma-delimited list of file names being added, to not fail to verify if they don't already exist."initializing loggers: "initializing loggers: " ArgFilesAddingInput is the value of the --files-adding flag to indicate to the input (file or stdin, depending whether a filename argument was passed) is a t3cutil.CheckRefsInputFileAndAdding JSON object. warn logging is not used. Usage() writes command line options and usage to 'stderr' InitConfig() intializes the configuration variables and loggers. ArgToFilesAdding converts a comma-delimited list of files being added to a set./Users/test/Desktop/trafficcontrol/cache-config/t3c-check-refs/t3c-check-refs.goatsPluginscheckConfigLineloadAvailablePluginspluginCheckspluginParamsverifyPluginverifyPluginConfigfileparamexistslengthlineNumberpluginErrorCountverifiedfilenamefilenameForAddinginputObjtextscannertextArraybufioio"bufio""io"github.com/apache/trafficcontrol/v8/cache-config/t3c-check-refs/config"github.com/apache/trafficcontrol/v8/cache-config/t3c-check-refs/config"line: %s
"line: %s\n"length: %d, fields: %v"length: %d, fields: %v"map"map"map_with_recv_port"map_with_recv_port"map_with_referer"map_with_referer"reverse_map"reverse_map"redirect"redirect"redirect_temporary"redirect_temporary"@plugin="@plugin="malformed @plugin definition on line '%d'
"malformed @plugin definition on line '%d'\n"Verified plugin '%s', exists: %v
"Verified plugin '%s', exists: %v\n"the plugin '%s' in remap.config on line '%d' is not available to the installed trafficserver
"the plugin '%s' in remap.config on line '%d' is not available to the installed trafficserver\n"then plugin DSO '%s' in remap.config on line '%d' has been verified
"then plugin DSO '%s' in remap.config on line '%d' has been verified\n"@pparam"@pparam"^.+(\.config|\.cfg|\.txt|\.yml|\.yaml|\.lua)$`^.+(\.config|\.cfg|\.txt|\.yml|\.yaml|\.lua)$`malformed @pparam definition in remap.config on line '%d': %v
"malformed @pparam definition in remap.config on line '%d': %v\n"the plugin config file '%s' on line '%d' of remap.config does not exist or is empty
"the plugin config file '%s' on line '%d' of remap.config does not exist or is empty\n"the plugin config file '%s' on line '%d' of remap.config has been verified
"the plugin config file '%s' on line '%d' of remap.config has been verified\n".so".so"the plugin '%s' on line '%d' of plugin.config is not available to the the installed trafficserver
"the plugin '%s' on line '%d' of plugin.config is not available to the the installed trafficserver\n"the plugin '%s' on line '%d' of plugin.config has been verified
"the plugin '%s' on line '%d' of plugin.config has been verified\n"([^=]+\.config$|[^=]\.cfg$|[^=]+\.txt$|[^=]+\.yml$|[^=]+\.yaml$|[^=]+\.lua$)`([^=]+\.config$|[^=]\.cfg$|[^=]+\.txt$|[^=]+\.yml$|[^=]+\.yaml$|[^=]+\.lua$)`the plugin config file '%s' on line '%d' of plugin.config does not exist or is empty
"the plugin config file '%s' on line '%d' of plugin.config does not exist or is empty\n"the plugin config file '%s' on line '%d' of plugin.config has been verified
"the plugin config file '%s' on line '%d' of plugin.config has been verified\n"verifying plugin file at %s
"verifying plugin file at %s\n"%v
"%v\n"loaded plugin %s
"loaded plugin %s\n"FprintfERROR: %s
"ERROR: %s\n"ScannerSplitFuncsplitmaxTokenSizetokenemptiesscanCalleddoneadvancesetErrDecoderdecodeStateendTopparseStateeofpushParseStatepopParseStateerrorContextChanDirStructFieldStructTagtagPkgPathOffsetIndexAnonymousIsExportedKindTFlagNameOffTypeOffSize_PtrBytesAlign_FieldAlign_Kind_GCDataStrPtrToThisHasNamePointersIfaceIndirIsDirectIfaceGcSliceCommonUncommonElemStructTypeMapTypeArrayTypeFuncTypeInterfaceTypeAlignFieldAlignExportedMethodsNumMethodKeykindromustBemustBeExportedmustBeExportedSlowmustBeAssignablemustBeAssignableSlowpanicNotMaptyp_ptrSeqSeq2typpointerpanicNotBoolbytesSlowrunesCanAddrCanSetCallCallSlicecallcapNonSliceCanComplexComplexFieldFieldByIndexFieldByIndexErrFieldByNameFieldByNameFuncCanFloatFloatCanIntCanInterfaceInterfaceDataIsNilIsValidSetZerolenNonSliceMapIndexMapKeysSetIterKeySetIterValueMapRangeMethodByNameNumFieldOverflowComplexOverflowFloatOverflowIntOverflowUintRecvrecvSendSetBoolsetRunesSetComplexSetFloatSetIntSetCapSetMapIndexSetUintSetPointerSliceSlice3stringNonStringTryRecvTrySendtypeSlowCanUintUintUnsafeAddrUnsafePointerextendSliceClearassignToConvertCanConvertComparableFuncUncommonTypeMcountXcountMoffMethodsAssignableToCanSeqCanSeq2ConvertibleToImplementsIsVariadicNumInNumOutcommonreflect.commonuncommonreflect.uncommonStructFieldStackopcodesavedErroruseNumberdisallowUnknownFieldsunmarshalreadIndexsaveErroraddErrorContextskipscanNextscanWhilerescanLiteralvalueQuotedarrayobjectconvertNumberliteralStorevalueInterfacearrayInterfaceobjectInterfaceliteralInterfacescanpscannedtokenStatetokenStackUseNumberdecDisallowUnknownFieldsreadValuerefilltokenPrepareForDecodetokenValueAllowedtokenValueEndtokenErrorMorepeekInputOffsetNewDecoderdecoding input: "decoding input: "comparableSliceToSetNewScannerNewBufferparsing: %s
"parsing: %s\n"\"\\"there are '%d' plugins that could not be verified
"there are '%d' plugins that could not be verified\n"All configured plugins have successfully been verified"All configured plugins have successfully been verified" This function accepts config line data from either ATS a 'plugin.config' or a 'remap.config' format. It checks the configuration file line by line and verifies that any specified plugin exists in the file system at the complete file path or relative to the ATS plugins installation directory. Also, any plugin arguments or plugin parameters that end in '.config', '.cfg', '.txt', '.yml', or '.yaml'  are assumed to be plugin configuration files and they will be verified that the exist at the absolute path in the file name or relative to the ATS configuration files directory. Returns '0' if all plugins on the config line successfully verify otherwise, returns the the count of plugins that failed to verify. create an array of whitespace delimited fields processing a line from remap.config any plugin parameters that end in '.config | .cfg | .txt | yml | .yaml | .lua' are assumed to be configuration files and are checked that they exist in the filesystem at the absolute location in the name or relative to the ATS configuration files directory. process a line from plugin.config Check the arguments in a plugin.config file for possible plugin config files. Any plugin argument that ends in '.config | .cfg | .txt | .yml | .yaml | .lua' are assumed to be configuration files and are checked that they returns 'filename' exists 'true' or 'false' read the names of all available plugins in the installed trafficservers plugin directory. filename isn't necessarily just a filename, it's whatever was in the plugin param, and can include a relative or absolute path. So, get just the file name for the filesAdding check, because filesAdding is just the name. TODO smarter path checking. This would wrongly succeed if a file was being created but in a different path. returns plugin is verified (filename exists), 'true' or 'false' The count of plugins that could not be verified is returned to the calling program. A count of '0' is successful meaning all ATS plugins named in the config file have been verified to exist where named or in the ATS plugins directory. load up the names of available plugins (at cfg.TrafficServerPluginDir). open the indicated 'filename' argument or os.Stdin. If --files-adding=input, then the input (stdin or file) is a JSON object containing the file contents and the list of files to add, and we need to set cfg.FilesAdding from it. Otherwise, the input is the raw file, and config loading has already set cfg.FilesAdding. process the config file contents verifying plugins. scan the stream line by line skip lines beginning with a comment. check for and concatenate lines that have the '\' continuation markerTextOffMtypIfnTfnDataCheckedDataHasTagIsEmbeddedReadVarintIsBlankImethodTypEmbeddedInCountOutCountInSliceOutSliceBucketHasherKeySizeValueSizeBucketSizeIndirectKeymtIndirectElemReflexiveKeyNeedKeyUpdateHashMightPanicKMapIterhiterelembucketsbptroverflowoldoverflowstartBucketwrappedBbucketcheckBucketinitializediter/Users/test/Desktop/trafficcontrol/cache-config/t3c-check-reload/Users/test/Desktop/trafficcontrol/cache-config/t3c-check-reload/t3c-check-reload.goChangedCfgExitNothingExitReloadExitRestartStrIsEmptyStrMapStrRemoveIfconfigFilesRequiringRestartchangedPathfileRequiringRestartchangedCfgnewsstrst3c-check-reload"t3c-check-reload"ChangedFilesjson:"changed_files"Error reading json input"Error reading json input"/trafficserver/"/trafficserver/"uri_signing_"uri_signing_"`json:"changed_files"`usage: t3c-check-reload [--help]
Accepts json data from stdin in in the following format:
{"changed_files":"<comma separated list of files>"}
`usage: t3c-check-reload [--help]
Accepts json data from stdin in in the following format:
{"changed_files":"<comma separated list of files>"}
` presumably calculated by by t3c-check-refs TODO remove? The blueprint says t3c/ORT will no longer install packages ATS restart is needed if: [x] 1. mode was badass [x] 2. plugin.config or 50-ats.rules was changed [ ] 3. package 'trafficserver' was installed ATS reload is needed if: [ ] 1. new SSL keys were installed AND ssl_multicert.config was changed [ ] 2. any of the following were changed: url_sig*, uri_signing*, hdr_rw*, (plugin.config), (50-ats.rules),        ssl/*.cer, ssl/*.key, anything else in /trafficserver, TODO add && ssl keys install && sslKeysInstalled  ExitRestart returns the "needs restart" message and exits. ExitReload returns the "needs reload" message and exits. ExitNothing returns the "needs nothing" message and exits. StrMap applies the given function fn to all strings in strs. StrRemoveIf removes all strings in strs for which fn returns true. StrIsEmpty returns whether str == "". Helper function for composing with other functions./Users/test/Desktop/trafficcontrol/cache-config/t3c-diff/Users/test/Desktop/trafficcontrol/cache-config/t3c-diff/t3c-diff.goreadFileOrStdinchangechangesfafbfileAfileAExistedfileALinesfileBfileBExistedfileBLinesfileNameAfileNameBlineCommentfileOrStdingithub.com/kylelemons/godebug/diff"github.com/kylelemons/godebug/diff""t3c-diff"Print usage info and exit"Print usage info and exit"Print version information and exit"Print version information and exit"line_comment"line_comment"'l'108Comment symbol"Comment symbol"file-mode"file-mode"file mode default is 644"file mode default is 644"file-uid"file-uid"User id the file being checked should have, default is running process's uid"User id the file being checked should have, default is running process's uid"file-gid"file-gid"Group id the file being checked should have, default is running process's gid"Group id the file being checked should have, default is running process's gid"file-a"file-a"first diff file"first diff file"file-b"file-b"second diff file"second diff file"ParseV2usage: t3c-diff [--help]
        -a <file-a> -b <file-b> -l <line comment> -m <file mode> -u <file uid> -g <file gid>

Either file may be 'stdin', in which case that file is read from stdin.
Either file may not exist.

Prints the diff to stdout, and returns the exit code 0 if there was no diff, 1 if there was a diff.
If one file exists but the other doesn't, it will always be a diff.

Mode is file permissions in octal format, default is 0644.
Line comment is a character that signals the line is a comment, default is #

Uid is the User id the file being checked should have, default is running process's uid.
Gid is the Group id the file being checked should have, default is running process's gid.

Note this means there may be no diff text printed to stdout but still exit 1 indicating a diff
if the file being created or deleted is semantically empty.GeteuidGetgiderror reading first: %s
"error reading first: %s\n"error reading second: %s
"error reading second: %s\n"6UnencodeFilterCommentsFilterNewLineFilter(?m)^\+.*|^-.*`(?m)^\+.*|^-.*`Diffstdin"stdin"PermCkFile permissions are incorrect, should be "File permissions are incorrect, should be "OwnershipCkuser or group ownership are incorrect, should be "user or group ownership are incorrect, should be "Uid:%d Gid:%d"Uid:%d Gid:%d"`usage: t3c-diff [--help]
        -a <file-a> -b <file-b> -l <line comment> -m <file mode> -u <file uid> -g <file gid>

Either file may be 'stdin', in which case that file is read from stdin.
Either file may not exist.

Prints the diff to stdout, and returns the exit code 0 if there was no diff, 1 if there was a diff.
If one file exists but the other doesn't, it will always be a diff.

Mode is file permissions in octal format, default is 0644.
Line comment is a character that signals the line is a comment, default is #

Uid is the User id the file being checked should have, default is running process's uid.
Gid is the Group id the file being checked should have, default is running process's gid.

Note this means there may be no diff text printed to stdout but still exit 1 indicating a diff
if the file being created or deleted is semantically empty.`reading stdin: "reading stdin: "reading file: "reading file: " readFileOrStdin reads the file, or if fileOrStdin is 'stdin', reads from stdin. Returns the file, whether it existed, and any error./Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/cfgfile/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/cfgfile/all.goCheckKeyPairConfigFileFuncConfigFileLiteralFuncConfigFilePrefixSuffixFuncGetAllConfigsGetSSLCertsAndKeyFilesGetVarnishConfigsHdrConfigFilePathHdrLineCommentMake12MFactsMakeATSDotRulesMakeAstatsDotConfigMakeBGFetchDotConfigMakeCacheDotConfigMakeChkconfigMakeConfigFilesListMakeDropQStringDotConfigMakeHeaderRewriteMakeHostingDotConfigMakeIPAllowDotConfigMakeIPAllowDotYAMLMakeLoggingDotConfigMakeLoggingDotYAMLMakeLogsXMLDotConfigMakePackagesMakeParentDotConfigMakePluginDotConfigMakeRecordsDotConfigMakeRegexRemapMakeRegexRevalidateDotConfigMakeRemapDotConfigMakeSNIDotYAMLMakeSSLMultiCertDotConfigMakeSSLServerNameYAMLMakeSetDSCPMakeStorageDotConfigMakeStrategiesDotYAMLMakeSysCtlDotConfMakeURISigningConfigMakeURLSigConfigMakeUnknownConfigMakeVolumeDotConfigWriteConfigsconfigFileLiteralFuncsconfigFilePrefixSuffixFuncsgetConfigFileFunclogWarningsmakeHeaderCommentmakeIPStrmakeNewDsCapscontentTypesecuretxtwarningsfisslConfigsconfigsgenTimehasSSLMultiCertConfighdrCommentTxttoDataserverHostNametoIPsipsdsCapdeliveryServicessvcReqCapscfgfilegithub.com/apache/trafficcontrol/v8/cache-config/t3c-generate/config"github.com/apache/trafficcontrol/v8/cache-config/t3c-generate/config"ServerServerInterfaceInfoV40ServerInterfaceInfoServerIPAddressAddressjson:"address" db:"address"Gatewayjson:"gateway" db:"gateway"ServiceAddressjson:"serviceAddress" db:"service_address"json:"ipAddresses" db:"ip_addresses"MaxBandwidthjson:"maxBandwidth" db:"max_bandwidth"Monitorjson:"monitor" db:"monitor"MTUjson:"mtu" db:"mtu"infGetDefaultAddressGetDefaultAddressOrCIDRRouterHostNamejson:"routerHostName" db:"router_host_name"RouterPortNamejson:"routerPortName" db:"router_port_name"CacheGroupjson:"cacheGroup" db:"cachegroup"CacheGroupIDjson:"cacheGroupID" db:"cachegroup_id"CDNIDjson:"cdnID" db:"cdn_id"CDNjson:"cdn" db:"cdn_name"json:"configApplyTime,omitempty" db:"config_apply_time"json:"configUpdateTime,omitempty" db:"config_update_time"json:"configUpdateFailed" db:"config_update_failed"DomainNamejson:"domainName" db:"domain_name"GUIDjson:"guid" db:"guid"json:"hostName" db:"host_name"HTTPSPortjson:"httpsPort,omitempty" db:"https_port"ILOIPAddressjson:"iloIpAddress,omitempty" db:"ilo_ip_address"ILOIPGatewayjson:"iloIpGateway,omitempty" db:"ilo_ip_gateway"ILOIPNetmaskjson:"iloIpNetmask,omitempty" db:"ilo_ip_netmask"ILOPasswordjson:"iloPassword,omitempty" db:"ilo_password"ILOUsernamejson:"iloUsername,omitempty" db:"ilo_username"Interfacesjson:"interfaces" db:"interfaces"MgmtIPAddressjson:"mgmtIpAddress,omitempty" db:"mgmt_ip_address"MgmtIPGatewayjson:"mgmtIpGateway,omitempty" db:"mgmt_ip_gateway"MgmtIPNetmaskjson:"mgmtIpNetmask,omitempty" db:"mgmt_ip_netmask"OfflineReasonjson:"offlineReason" db:"offline_reason"PhysicalLocationjson:"physicalLocation" db:"phys_location"PhysicalLocationIDjson:"physicalLocationID" db:"phys_location_id"Profilesjson:"profiles,omitempty" db:"profile_name"Rackjson:"rack" db:"rack"RevalApplyTimejson:"revalApplyTime,omitempty" db:"revalidate_apply_time"RevalUpdateTimejson:"revalUpdateTime,omitempty" db:"revalidate_update_time"RevalUpdateFailedjson:"revalUpdateFailed" db:"revalidate_update_failed"json:"status" db:"status"StatusIDjson:"statusID" db:"status_id"StatusLastUpdatedjson:"statusLastUpdated,omitempty" db:"status_last_updated"TCPPortjson:"tcpPort" db:"tcp_port"json:"type" db:"server_type"TypeIDjson:"typeID" db:"server_type_id"XMPPIDjson:"xmppId" db:"xmpp_id"XMPPPasswdjson:"xmppPasswd" db:"xmpp_passwd"CacheGroupNullableV50LocalizationMethodShortNamejson:"shortName" db:"short_name"Latitudejson:"latitude" db:"latitude"Longitudejson:"longitude" db:"longitude"ParentNamejson:"parentCachegroupName" db:"parent_cachegroup_name"ParentCachegroupIDjson:"parentCachegroupId" db:"parent_cachegroup_id"SecondaryParentNamejson:"secondaryParentCachegroupName" db:"secondary_parent_cachegroup_name"SecondaryParentCachegroupIDjson:"secondaryParentCachegroupId" db:"secondary_parent_cachegroup_id"FallbackToClosestjson:"fallbackToClosest" db:"fallback_to_closest"LocalizationMethodsjson:"localizationMethods" db:"localization_methods"json:"typeName" db:"type_name"json:"typeId" db:"type_id"Fallbacksjson:"fallbacks" db:"fallbacks"ParameterV50json:"configFile" db:"config_file"json:"profiles" db:"profiles"json:"secure" db:"secure"json:"value" db:"value"ProfileNameDeliveryServiceDeliveryServiceActiveStateDeepCachingTypeDeliveryServiceMatchDSMatchTypejson:"type"SetNumberjson:"setNumber"json:"pattern"Activejson:"active" db:"active"AnonymousBlockingEnabledjson:"anonymousBlockingEnabled" db:"anonymous_blocking_enabled"CCRDNSTTLjson:"ccrDnsTtl" db:"ccr_dns_ttl"json:"cdnId" db:"cdn_id"CDNNamejson:"cdnName"CheckPathjson:"checkPath" db:"check_path"ConsistentHashQueryParamsjson:"consistentHashQueryParams"ConsistentHashRegexjson:"consistentHashRegex"json:"deepCachingType" db:"deep_caching_type"DisplayNamejson:"displayName" db:"display_name"DNSBypassCNAMEjson:"dnsBypassCname" db:"dns_bypass_cname"DNSBypassIPjson:"dnsBypassIp" db:"dns_bypass_ip"DNSBypassIP6json:"dnsBypassIp6" db:"dns_bypass_ip6"DNSBypassTTLjson:"dnsBypassTtl" db:"dns_bypass_ttl"DSCPjson:"dscp" db:"dscp"EcsEnabledjson:"ecsEnabled" db:"ecs_enabled"EdgeHeaderRewritejson:"edgeHeaderRewrite" db:"edge_header_rewrite"ExampleURLsjson:"exampleURLs"FirstHeaderRewritejson:"firstHeaderRewrite" db:"first_header_rewrite"FQPacingRatejson:"fqPacingRate" db:"fq_pacing_rate"GeoLimitjson:"geoLimit" db:"geo_limit"GeoLimitCountriesjson:"geoLimitCountries"GeoLimitRedirectURLjson:"geoLimitRedirectURL" db:"geolimit_redirect_url"GeoProviderjson:"geoProvider" db:"geo_provider"GlobalMaxMBPSjson:"globalMaxMbps" db:"global_max_mbps"GlobalMaxTPSjson:"globalMaxTps" db:"global_max_tps"HTTPBypassFQDNjson:"httpBypassFqdn" db:"http_bypass_fqdn"InfoURLjson:"infoUrl" db:"info_url"InitialDispersionjson:"initialDispersion" db:"initial_dispersion"InnerHeaderRewritejson:"innerHeaderRewrite" db:"inner_header_rewrite"IPV6RoutingEnabledjson:"ipv6RoutingEnabled" db:"ipv6_routing_enabled"LastHeaderRewritejson:"lastHeaderRewrite" db:"last_header_rewrite"LogsEnabledjson:"logsEnabled" db:"logs_enabled"LongDescjson:"longDesc" db:"long_desc"MatchListjson:"matchList"MaxDNSAnswersjson:"maxDnsAnswers" db:"max_dns_answers"MaxOriginConnectionsjson:"maxOriginConnections" db:"max_origin_connections"MaxRequestHeaderBytesjson:"maxRequestHeaderBytes" db:"max_request_header_bytes"MidHeaderRewritejson:"midHeaderRewrite" db:"mid_header_rewrite"MissLatjson:"missLat" db:"miss_lat"MissLongjson:"missLong" db:"miss_long"MultiSiteOriginjson:"multiSiteOrigin" db:"multi_site_origin"OriginShieldjson:"originShield" db:"origin_shield"OrgServerFQDNjson:"orgServerFqdn" db:"org_server_fqdn"ProfileDescjson:"profileDescription"ProfileIDjson:"profileId" db:"profile"json:"profileName"Protocoljson:"protocol" db:"protocol"QStringIgnorejson:"qstringIgnore" db:"qstring_ignore"RangeRequestHandlingjson:"rangeRequestHandling" db:"range_request_handling"RangeSliceBlockSizejson:"rangeSliceBlockSize" db:"range_slice_block_size"RegexRemapjson:"regexRemap" db:"regex_remap"Regionaljson:"regional" db:"regional"RegionalGeoBlockingjson:"regionalGeoBlocking" db:"regional_geo_blocking"RemapTextjson:"remapText" db:"remap_text"RequiredCapabilitiesjson:"requiredCapabilities" db:"required_capabilities"RoutingNamejson:"routingName" db:"routing_name"ServiceCategoryjson:"serviceCategory" db:"service_category"Signedjson:"signed"SigningAlgorithmjson:"signingAlgorithm" db:"signing_algorithm"SSLKeyVersionjson:"sslKeyVersion" db:"ssl_key_version"Tenantjson:"tenant"TenantIDjson:"tenantId" db:"tenant_id"TLSVersionsjson:"tlsVersions" db:"tls_versions"Topologyjson:"topology" db:"topology"TRResponseHeadersjson:"trResponseHeaders"TRRequestHeadersjson:"trRequestHeaders"json:"typeId" db:"type"XMLIDjson:"xmlId" db:"xml_id"DeliveryServiceServerjson:"s"json:"d"InvalidationJobjson:"id"AssetURLjson:"assetUrl"CreatedByjson:"createdBy"json:"deliveryService"TTLHoursjson:"ttlHours"InvalidationTypejson:"invalidationType"StartTimejson:"startTime"CDNV5DNSSECEnabledjson:"dnssecEnabled" db:"dnssec_enabled"TTLOverridejson:"ttlOverride,omitempty" db:"ttl_override"DeliveryServiceRegexesDeliveryServiceRegexRegexesjson:"regexes"DSNamejson:"dsName"DeliveryServiceNameURLSigKeysServerCapabilityCDNSSLKeysCDNSSLKeysCertificateCrtjson:"crt"json:"key"json:"deliveryservice"json:"certificate"json:"hostname"TopologyV5TopologyNodeV5json:"-" db:"id"Cachegroupjson:"cachegroup" db:"cachegroup"Parentsjson:"parents"json:"-" db:"last_updated"Nodesjson:"nodes"ConfigDataMetaDataReqMetaDataLastModifiedjson:"last_modified"json:"date"ETagjson:"etag"json:"cache_host_name"Serversjson:"servers"CacheGroupsjson:"cache_groups"GlobalParamsjson:"global_parameters"ServerProfilesParamsjson:"server_profiles_parameters"CacheKeyConfigParamsjson:"cachekey_config_parameters"RemapConfigParamsjson:"remap_config_parameters"ParentConfigParamsjson:"parent_config_parameters"DeliveryServicesjson:"delivery_services"DeliveryServiceServersjson:"delivery_service_servers"Jobsjson:"jobs"json:"cdn"json:"delivery_service_regexes"URISigningKeysjson:"uri_signing_keys"json:"url_sig_keys"ServerCapabilitiesjson:"server_capabilities"DSRequiredCapabilitiesjson:"delivery_service_required_capabilities"SSLKeysjson:"ssl_keys"Topologiesjson:"topologies"json:"servers,omitempty"json:"cache_groups,omitempty"json:"global_parameters,omitempty"json:"server_profiles_parameters,omitempty"ServerParamsjson:"server_params,omitempty"json:"cachekey_config_parameters,omitempty"json:"remap_config_parameters,omitempty"json:"parent_config_parameters,omitempty"json:"delivery_services,omitempty"json:"delivery_service_servers,omitempty"json:"server,omitempty"json:"jobs,omitempty"json:"cdn,omitempty"json:"delivery_service_regexes,omitempty"json:"uri_signing_keys,omitempty"json:"url_sig_keys,omitempty"json:"server_capabilities,omitempty"json:"delivery_service_required_capabilities,omitempty"json:"ssl_keys,omitempty"json:"topologies,omitempty"TrafficOpsAddressesjson:"traffic_ops_addresses,omitempty"TrafficOpsURLjson:"traffic_ops_url,omitempty"MetaDatajson:"metadata"TLSVersionListPluginsRevalOnlyViaReleaseSetDNSLocalBindATSMajorVersionParentCommentsDefaultEnableH2DefaultTLSVersionsCacheserver hostname is nil"server hostname is nil"CfgMetagenerating config files list: "generating config files list: "creating meta: "creating meta: "RegexRevalidateFileNameregex_revalidate.configgetting config file '"getting config file '"SSLMultiCertConfigFileNamegetting ssl key and cert config files: "getting ssl key and cert config files: ""Path"Line-Comment"Line-Comment"EncoderescapeHTMLindentBufindentPrefixindentValueencSetIndentSetEscapeHTMLNewEncoderencoding and writing configs: "encoding and writing configs: "DO NOT EDIT - Generated for %v by %v from %v ips %v on %v`DO NOT EDIT - Generated for %v by %v from %v ips %v on %v`(`(``,`)`)` GetAllConfigs gets all config files for cfg.CacheHostName. if 0 get dataconfig.go was unable to get DS capabilities using APIv5 because the end point has been removed and was added to the DS struct so we will get the data from DeliveryServices WriteConfigs writes the given configs as a RFC20465.1 MIME multipart/mixed message. logWarnings writes all strings in warnings to the warning log, with the context prefix. If warnings is empty, no log is written.Suffix/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/cfgfile/routing.gogetConfigFilethiscfglfpsfGetConfigFile %v took %v
"GetConfigFile %v took %v\n"GetConfigFile '"GetConfigFile '"astats.config"astats.config"bg_fetch.config"bg_fetch.config"cache.config"cache.config"drop_qstring.config"drop_qstring.config"hosting.config"hosting.config"ip_allow.yaml"ip_allow.yaml"logging.config"logging.config"logging.yaml"logging.yaml"logs_xml.config"logs_xml.config"parent.config"parent.config""regex_revalidate.config"ssl_server_name.yaml"ssl_server_name.yaml"sni.yaml"sni.yaml"strategies.yaml"strategies.yaml"storage.config"storage.config"volume.config"volume.config"HeaderRewriteFirstPrefixhdr_rw_first_.config".config"HeaderRewriteInnerPrefixhdr_rw_inner_HeaderRewriteLastPrefixhdr_rw_last_hdr_rw_mid_"hdr_rw_mid_" # DO NOT EDIT - Generated for odol-atsec-sea-22 by Traffic Ops (https://trafficops.comcast.net/) on Mon Oct 26 16:22:19 UTC 2020 GetConfigFile returns the text of the generated config file, the MIME Content Type of the config file, and any error./Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/cfgfile/sslkeys.gocertFilecertNamedsdsNamekeyFilekeyNamekeyPairErrpairErrkeysdsWarnsdsescertPemkeyPembase64tlscrypto/tls"crypto/tls"encoding/base64"encoding/base64"sslMultiCertDSDSTypeUsesDNSSECKeysIsHTTPIsDNSIsSteeringHasSSLKeysIsLiveIsNationalUsesMidCacheDeliveryServicesToSSLMultiCertDSesGetting SSL files: Making SSL MultiCert DSes: "Getting SSL files: Making SSL MultiCert DSes: "GetSSLMultiCertDotConfigDeliveryServicesEncoding64256encodedecodeMappadCharstrictWithPaddingStrictAppendEncodeEncodeToStringEncodedLendecodeQuantumAppendDecodeDecodeStringDecodedLenStdEncodingDelivery Service '"Delivery Service '"' skipping HTTPS certificate! Failed to decode cert: "' skipping HTTPS certificate! Failed to decode cert: "' skipping HTTPS certificate! Failed to decode key: "' skipping HTTPS certificate! Failed to decode key: "GetSSLMultiCertDotConfigCertAndKeyName/opt/trafficserver/etc/trafficserver/ssl/"/opt/trafficserver/etc/trafficserver/ssl/"PrivateKeySignatureSchemeSupportedSignatureAlgorithmsOCSPStapleLeafleafX509KeyPairIssue with keypair for %s: %s"Issue with keypair for %s: %s"Issue with keypair for "Issue with keypair for " it's going to be a file, needs a trailing newline to be POSIX-compliant. TODO read config, don't hard code/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/cfgfile/varnish.gohitchWarningsvclvclBuildervarnishcfggithub.com/apache/trafficcontrol/v8/lib/varnishcfg"github.com/apache/trafficcontrol/v8/lib/varnishcfg"VCLBuilderconfigureAccessControlconfigureDirectorsconfigureUncacheableDSesBuildVCLFilevbNewVCLBuilderGenerating varnish configuration files: "Generating varnish configuration files: "text/plain; charset=us-ascii"text/plain; charset=us-ascii"//"//"GetHitchConfigssl/"ssl/"Generating hitch configuration files: "Generating hitch configuration files: " GetVarnishConfigs returns varnish configuration files TODO: add varnishncsa and hitch configs TODO: should be parameterized and generated from varnishcfg path changed manually because GetSSLCertsAndKeyFiles hardcodes the directory certs and keys are written to. will be removed once GetSSLCertsAndKeyFiles uses proxy.config.ssl.server.cert.path parameter.vclFilebackendportimportsaclsbackendssubroutinesProfileDSOriginFQDNParentAbstractionParentAbstractionServiceParentAbstractionServiceParentFQDNWeightToParentDotConfigFormatpaParentAbstractionServiceParentSecondaryModeToParentDotConfigValmoParentAbstractionServiceRetryPolicypoCommentDestDomainSecondaryParentsSecondaryModeCachePeerResultParentIsProxyIgnoreQueryStringInParentSelectionMarkdownResponseCodesErrorResponseCodesMaxSimpleRetriesMaxMarkdownRetriesRetryPolicyDSToParentDotConfigLinesvcServicesPeersParentConfigOptsAddCommentsHdrComment/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/cfgfile/wrappers.gooptsremapAndCacheKeyParamsatsMajorVersionuintConfigFilesListOptsConfig12MFactsOptsATSDotRulesOptsAStatsDotConfigOptsMakeAStatsDotConfigBGFetchDotConfigOptsCacheDotConfigOptsChkconfigOptsDropQStringDotConfigOptsHostingDotConfigOptsIPAllowDotConfigOptsIPAllowDotYAMLOptsLoggingDotConfigOptsLoggingDotYAMLOptsSSLServerNameYAMLOptsVerboseCommentsSNIDotYAMLOptsLogsXMLDotConfigOptsPackagesOptsPluginDotConfigOptsRecordsConfigOptsReleaseViaStrDNSLocalBindServiceAddrRegexRevalidateDotConfigOptsParameterV5RemapDotConfigOptsUseStrategiesCoreSSLMultiCertDotConfigOptsStorageDotConfigOptsSysCtlDotConfOptsVolumeDotConfigOptsHeaderRewriteDotConfigOptsMakeHeaderRewriteDotConfigRegexRemapDotConfigOptsMakeRegexRemapDotConfigSetDSCPDotConfigOptsMakeSetDSCPDotConfigURLSigConfigOptsURISigningConfigOptsStrategiesYAMLOptsServerUnknownOptsMakeServerUnknown This file has wrappers that turn lib/go-atscfg Make funcs into ConfigFileFunc types. We don't want to make lib/go-atscfg functions take a TOData, because then users wanting to generate a single file would have to fetch all kinds of data that file doesn't need, or else pass objects they know it doesn't currently need as nil and risk it crashing if that func is changed to use it in the future. But it's useful to map filenames to functions for dispatch. Hence these wrappers. The atsMajorVersion may be 0 to default to the Server Package Parameter. MakeConfigFilesList returns the list of config files, any warnings, and any error. TODO add a CLI flag TODO add a CLI flag?/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/config/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/config/config.goErrBadRequestErrNotFoundExitCodeBadRequestExitCodeErrGenericExitCodeNotFoundValidateURLtlsVersiontlsVersionStrdefaultTLSVersionsStrsdefaultTLSVersionsdefaultTLSVersionsStrdisableParentConfigCommentslistPluginsrevalOnlyviaReleaset3c-generate"t3c-generate"not found"not found"bad request"bad request"list-plugins"list-plugins"Print the list of plugins."Print the list of plugins."revalidate-only"revalidate-only"y'y'121Whether to exclude files not named 'regex_revalidate.config'"Whether to exclude files not named 'regex_revalidate.config'""dir"D'D'68ATS config directory, used for config files without location parameters or with relative paths. May be blank. If blank and any required config file location parameter is missing or relative, will error."ATS config directory, used for config files without location parameters or with relative paths. May be blank. If blank and any required config file location parameter is missing or relative, will error."via-string-release"via-string-release"Whether to use the Release value from the RPM package as a replacement for the ATS version specified in the build that is returned in the Via and Server headers from ATS."Whether to use the Release value from the RPM package as a replacement for the ATS version specified in the build that is returned in the Via and Server headers from ATS."Whether to use the server's Service Addresses to set the ATS DNS local bind address."Whether to use the server's Service Addresses to set the ATS DNS local bind address."Disable adding a comments to parent.config individual lines"Disable adding a comments to parent.config individual lines"Comma-delimited list of default TLS versions for Delivery Services with no Parameter, e.g. '--default-tls-versions=1.1,1.2,1.3'. If omitted, all versions are enabled."Comma-delimited list of default TLS versions for Delivery Services with no Parameter, e.g. '--default-tls-versions=1.1,1.2,1.3'. If omitted, all versions are enabled."ats-version"ats-version"The ATS version, e.g. 9.1.2-42.abc123.el7.x86_64. If omitted, generation will attempt to get the ATS version from the Server Parameters, and fall back to lib/go-atscfg.DefaultATSVersion"The ATS version, e.g. 9.1.2-42.abc123.el7.x86_64. If omitted, generation will attempt to get the ATS version from the Server Parameters, and fall back to lib/go-atscfg.DefaultATSVersion"[true|false|old] default will set go_direct to false, you can set go_direct true, or old will be based on opposite of parent_is_proxy directive."[true|false|old] default will set go_direct to false, you can set go_direct true, or old will be based on opposite of parent_is_proxy directive."GetATSMajorVersionFromATSVersionparsing ATS version '"parsing ATS version '"DefaultDefaultTLSVersionsStringToTLSVersionTLSVersionInvalidunknown TLS Version '"unknown TLS Version '"' in '"' in '" should be false, true, or old" should be false, true, or old"go-direct should be false, true, or old app doesn't use the event logger. GetCfg gets the application configuration, from arguments and environment variables. The flag takes the full version, for forward-compatibility in case we need it in the future, but we only need the major version at the moment./Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/plugin/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/plugin/hello_world.goAddPluginFuncsHelloPathIsRequestHandledListModifyFilesDataModifyFilesFuncPluginsRequestHandledRequestUnhandledStartupDataStartupFuncgetAllhelloinitPluginspluginObjpluginsSlicehasHelloParamplugin/_hello_world"/_hello_world"TODataenable_hello_world"enable_hello_world"hello_world"hello_world"Hello, World!
"Hello, World!\n"text/plain"text/plain"hello.txt"hello.txt"/opt/trafficserver/etc/trafficserver/"/opt/trafficserver/etc/trafficserver/"
   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
 AddPlugin(10000, Funcs{modifyFiles: hello}) hello is an example "hello world" plugin. To test, create a Parameter assigned to the server you're running t3c-generate on, named "enable_hello_world", with the Config File "hello_world" and the value "true"onStartupmodifyFilesfuncspriorityLesssliceOnStartuppsModifyFiles/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/plugin/plugin.goappCfgpluginSliceenabledPluginspluginNamejruntimesort"runtime""sort"Sortuint64Caller Error plugin.AddPlugin: runtime.Caller failed, can't get plugin names" Error plugin.AddPlugin: runtime.Caller failed, can't get plugin names".go".go"AddPlugin adding "AddPlugin adding "plugins.ModifyFiles calling %+v plugins
"plugins.ModifyFiles calling %+v plugins\n"plugins.ModifyFiles plugging "plugins.ModifyFiles plugging " - no modifyFiles func" - no modifyFiles func" List returns the list of plugins compiled into the calling executable. print used here, because this is called in init, loggers don't exist yet initPlugins is where plugins are registered via their init functions. ModifyFiles returns a slice of config files to use. May return d.Files unmodified, or may add, remove, or modify files in d.Files./Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/t3c-generate.gomodifyFilesDatastartMsggithub.com/apache/trafficcontrol/v8/cache-config/t3c-generate/cfgfile"github.com/apache/trafficcontrol/v8/cache-config/t3c-generate/cfgfile"github.com/apache/trafficcontrol/v8/cache-config/t3c-generate/plugin"github.com/apache/trafficcontrol/v8/cache-config/t3c-generate/plugin"Getting config: "Getting config: "Starting t3c-generate"Starting t3c-generate"reading Traffic Ops data from stdin"reading Traffic Ops data from stdin"reading and parsing input Traffic Ops data: "reading and parsing input Traffic Ops data: "input had no server"input had no server"input server had no host name"input server had no host name"Generating varnish config for'"Generating varnish config for'"Writing configs for '"Writing configs for '"Getting config for'"Getting config for'"ATSConfigFiles t3c-generate is a tool for generating configuration files server-side on ATC cache servers. See README.md for usage. Because logs will be appended, we want a "start" message, so individual runs are easily distinguishable. log the "start" message to each distinct logger./Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/update-to-client/Users/test/Desktop/trafficcontrol/cache-config/t3c-generate/update-to-client/update-to-client.goupdateNewClientUsageupdateVendoredTOClientbranchworkingDirfuncStrnewLineerrVarnewLinesobjVarspacePrefixstateInFoundTOClientNewstateInTOClientNewUnsupportedBlockstateStartunsupportedVarappDirpathstoClientNewRefileBtsclientFilechangesetBtschangesetTxtchangesetTxtPathclientFileListclientFileListBtsclientFileListStrvendorClientDirvendorDirvendorFileInfovendorTCDirversionBtsversionPathGetwdError getting working directory: %s
"Error getting working directory: %s\n"Error updating vendored client: %s
"Error updating vendored client: %s\n"Error updating new client usage: %s
"Error updating new client usage: %s\n"usage: go run update-to-client.go /path/to/cache-config/t3c-generate branch-to-vendor

Example: go run update-to-client/update-to-client.go . 5.0.x

This script updates cache-config/t3c-generate after a Traffic Ops release is made.

Be aware! It can and will modify all .go files in the given directory! Back up any uncommitted changes!

Also be aware! This is very specific to the current code. If symbols or patterns are changed around how the master vs vendored client are used, this script will have to be updated.

Expecations:
- t3c-generate is at github.com/apache/trafficcontrol/v8/cache-config/t3c-generate
- The master TO client is at github.com/apache/trafficcontrol/v8/traffic_ops/v4-client
- The previous major version client is vendored at t3c-generate/toreq/vendor
- The master client wrapper for t3c-generate is at t3c-generate/toreqnew
- The clients are stored in config.TCCfg.TOClient and config.TCCfg.TOClientNew
- Every func in toreqnew.TOClient has a corresponding func with the same name in toreq.TOClient
- Every func in toreqnew.TOClient returns 3 variables: the object, boolean whether the request was unsupported, and an error.
- Every func in toreq.TOClient returns 2 variables: the object, and an error.
- Every usage of config.TOClientNew is immediately followed by a check 'if err == nil && unsupported', whose block calls the old client and sets defaults for the unsupported new feature.
- The script is running on a POSIX-like environment. Namely, cp and gofmt exist.

The arguments are the t3c-generate directory, and the name of the branch to vendor from.

This script should always be called from trafficcontrol/cache-config/t3c-generate.

It copies the traffic_ops/v4-client from that branch into toreq/vendor,
and then updates all references to cfg.TOClientNew to cfg.TOClient.

This must be done as soon as a release is made, before any new features are added to t3c-generate.
Thus, all existing toreqnew.TOClient function calls should exist in master.

If any new features were added after a release, before you ran this script,
you'll have to go back and fix compile errors for new client functions.

Further, if the new features were fields on existing functions, being moved
from toreqnew to toreq will make them still compile, but the fields will be nil!

It will also run gofmt on all go files in the directory (because it's much easier to manipulate code guaranteed to be gofmt'd).

Double check the results before you commit!
`usage: go run update-to-client.go /path/to/cache-config/t3c-generate branch-to-vendor

Example: go run update-to-client/update-to-client.go . 5.0.x

This script updates cache-config/t3c-generate after a Traffic Ops release is made.

Be aware! It can and will modify all .go files in the given directory! Back up any uncommitted changes!

Also be aware! This is very specific to the current code. If symbols or patterns are changed around how the master vs vendored client are used, this script will have to be updated.

Expecations:
- t3c-generate is at github.com/apache/trafficcontrol/v8/cache-config/t3c-generate
- The master TO client is at github.com/apache/trafficcontrol/v8/traffic_ops/v4-client
- The previous major version client is vendored at t3c-generate/toreq/vendor
- The master client wrapper for t3c-generate is at t3c-generate/toreqnew
- The clients are stored in config.TCCfg.TOClient and config.TCCfg.TOClientNew
- Every func in toreqnew.TOClient has a corresponding func with the same name in toreq.TOClient
- Every func in toreqnew.TOClient returns 3 variables: the object, boolean whether the request was unsupported, and an error.
- Every func in toreq.TOClient returns 2 variables: the object, and an error.
- Every usage of config.TOClientNew is immediately followed by a check 'if err == nil && unsupported', whose block calls the old client and sets defaults for the unsupported new feature.
- The script is running on a POSIX-like environment. Namely, cp and gofmt exist.

The arguments are the t3c-generate directory, and the name of the branch to vendor from.

This script should always be called from trafficcontrol/cache-config/t3c-generate.

It copies the traffic_ops/v4-client from that branch into toreq/vendor,
and then updates all references to cfg.TOClientNew to cfg.TOClient.

This must be done as soon as a release is made, before any new features are added to t3c-generate.
Thus, all existing toreqnew.TOClient function calls should exist in master.

If any new features were added after a release, before you ran this script,
you'll have to go back and fix compile errors for new client functions.

Further, if the new features were fields on existing functions, being moved
from toreqnew to toreq will make them still compile, but the fields will be nil!

It will also run gofmt on all go files in the directory (because it's much easier to manipulate code guaranteed to be gofmt'd).

Double check the results before you commit!
`WalkFuncWalk`.go`/vendor/`/vendor/``.`update-to-client.go`update-to-client.go`reading directory: "reading directory: "(\s+)([^\s]+), (.+), (.+) := (.+).TOClientNew.(.+)$`(\s+)([^\s]+), (.+), (.+) := (.+).TOClientNew.(.+)$`gofmt`gofmt`-w`-w`running gofmt on '"running gofmt on '"reading file '"reading file '".TOClientNew.`.TOClientNew.`7parsing file '"parsing file '"': line contains TOClientNew, but is unexpected format (only %v matches): '"': line contains TOClientNew, but is unexpected format (only %v matches): '", `, ` := ` := `.TOClient.`.TOClient.`if `if ` == nil && ` == nil && ` {` {` && ` && ` == nil ` == nil `': line contains TOClientNew, but is unexpected format: not followed by a check for the unsupported bool (or the parser failed to understand it)
"': line contains TOClientNew, but is unexpected format: not followed by a check for the unsupported bool (or the parser failed to understand it)\n"parsing modified file '"parsing modified file '"': appeared to be malformed (or maybe our parser is just broken, sorry)
"': appeared to be malformed (or maybe our parser is just broken, sorry)\n"writing modified file '"writing modified file '"toreq`toreq`vendor`vendor`github.com`github.com`apache`apache`trafficcontrol`trafficcontrol`traffic_ops`traffic_ops``client`getting vendor dir '"getting vendor dir '"' info: "' info: "' info: not a directory"' info: not a directory"removing vendor dir '"removing vendor dir '"creating vendor dir '"creating vendor dir '"`git`show`show`:../../client`:../../client`getting files from git: "getting files from git: "getting files from git: got no files"getting files from git: got no files"`/`getting client file '"getting client file '"' from git: "' from git: "Error writing vendored file '"Error writing vendored file '":VERSION`:VERSION`getting VERSION file from git: "getting VERSION file from git: "VERSION`VERSION`Error writing vendored VERSION file '"Error writing vendored VERSION file '"rev-parse`rev-parse`changeset.txt`changeset.txt`Error writing vendored changeset.txt file '"Error writing vendored changeset.txt file '" make the given directory absolute skip anything not a go file. skip vendored code skip .files (usually created by editors) skip this file gofmt the file, because the parsing relies on things being in that exact format. TODO is this really an error? Skip and continue? if there's a newline between the call and the unsupported check, skip it. continue without adding this line - we want to remove the check-and-fallback This is why we have to gofmt - if we didn't, we couldn't be guarnateed the block closing would be prefixed by exactly this many spaces. Then we'd have to parse the AST to find it. Ick. Whether or not we find the closing block, don't add it to the lines to output. We want to remove the TOClientNew check-and-fallback block from the output. first line is a header, remove it. fmt.Printf("DEBUG got client file list '''%+v'''\n", clientFileListStr) update VERSION in vendored dir/Users/test/Desktop/trafficcontrol/cache-config/t3c-preprocess/Users/test/Desktop/trafficcontrol/cache-config/t3c-preprocess/t3c-preprocess.goDataAndFilesPreprocessConfigFilereturnRegexaddrStraddriFaceipAddrserverfileIhostNamedataFilesflagSilentflagVerboselogDebuglogErrlogInflogWarnnet"net"github.com/apache/trafficcontrol/v8/cache-config/t3c-preprocess/util"github.com/apache/trafficcontrol/v8/cache-config/t3c-preprocess/util"t3c-preprocess"t3c-preprocess"\s*__RETURN__\s*`\s*__RETURN__\s*`Replace__SERVER_TCP_PORT__`__SERVER_TCP_PORT__`:__SERVER_TCP_PORT__`:__SERVER_TCP_PORT__```ParseIPParseCIDR__CACHE_IPV4__`__CACHE_IPV4__`Preprocessing: this server had a missing or malformed IPv4 Service Interface, cannot replace __CACHE_IPV4__ directives!"Preprocessing: this server had a missing or malformed IPv4 Service Interface, cannot replace __CACHE_IPV4__ directives!"Preprocessing: this server missing HostName, cannot replace __HOSTNAME__ directives!"Preprocessing: this server missing HostName, cannot replace __HOSTNAME__ directives!"__HOSTNAME__`__HOSTNAME__`Preprocessing: this server missing HostName or DomainName, cannot replace __FULL_HOSTNAME__ directives!"Preprocessing: this server missing HostName or DomainName, cannot replace __FULL_HOSTNAME__ directives!"__FULL_HOSTNAME__`__FULL_HOSTNAME__`__CACHEGROUP__`__CACHEGROUP__`Preprocessing: this server missing Cachegroup, cannot replace __CACHEGROUP__ directives!"Preprocessing: this server missing Cachegroup, cannot replace __CACHEGROUP__ directives!"json:"data"json:"files"Writing configs for server '"Writing configs for server '"`json:"data"``json:"files"`usage: t3c-preprocess [--help] [--version]
       <command> [<args>]

The 't3c-preprocess' app preprocesses generated config files, replacing directives with relevant data.

The stdin must be the JSON '{"data": \<data\>, "files": \<files\>}' where \<data\> is the output of 't3c-request --get-data=config' and \<files\> is the output of 't3c-generate'.
`usage: t3c-preprocess [--help] [--version]
       <command> [<args>]

The 't3c-preprocess' app preprocesses generated config files, replacing directives with relevant data.

The stdin must be the JSON '{"data": \<data\>, "files": \<files\>}' where \<data\> is the output of 't3c-request --get-data=config' and \<files\> is the output of 't3c-generate'.
` don't bother with the error, just skip TODO read log location arguments/Users/test/Desktop/trafficcontrol/cache-config/t3c-preprocess/util/Users/test/Desktop/trafficcontrol/cache-config/t3c-preprocess/util/util.go/Users/test/Desktop/trafficcontrol/cache-config/t3c-request/Users/test/Desktop/trafficcontrol/cache-config/t3c-request/config/Users/test/Desktop/trafficcontrol/cache-config/t3c-request/config/config.goLoadOldCfgTCCfgTOClientSessionUserNameUserAgentStrlatestSupportedAPIforceLatestAPIlastAPIVerCheckapiVerCheckIntervalapiVersionsAPIBasetoAPIVersionLatestAPIVersionloginloginWithTokenlogouterrorFromStatusCodegetURLReqRawRequestWithHdrRawRequestGetAboutAutoRenewCreateASNUpdateASNGetASNsDeleteASNGetAsyncStatusCreateCacheGroupUpdateCacheGroupGetCacheGroupsDeleteCacheGroupSetCacheGroupDeliveryServicesCreateCDNUpdateCDNGetCDNsDeleteCDNGetCDNSSLKeysQueueUpdatesForCDNGenerateCDNDNSSECKeysGetCDNDNSSECKeysDeleteCDNDNSSECKeysRefreshDNSSECKeysGenerateCDNDNSSECKSKGetDomainsCreateCDNLockGetCDNLocksDeleteCDNLocksGetCDNNotificationsCreateCDNNotificationDeleteCDNNotificationCreateCDNFederationGetCDNFederationsUpdateCDNFederationDeleteCDNFederationCreateCoordinateUpdateCoordinateGetCoordinatesDeleteCoordinateGetCRConfigSnapshotCRConfigGetCRConfigNewGetDeliveryServicesByServerGetDeliveryServicesCreateDeliveryServiceUpdateDeliveryServiceDeleteDeliveryServiceGetDeliveryServiceHealthGetDeliveryServiceCapacityGenerateSSLKeysForDSAddSSLKeysForDSDeleteDeliveryServiceSSLKeysGetDeliveryServiceSSLKeysGetDeliveryServicesEligibleGetDeliveryServiceURLSignatureKeysCreateDeliveryServiceURLSignatureKeysDeleteDeliveryServiceURLSignatureKeysGetDeliveryServiceURISigningKeysCreateDeliveryServiceURISigningKeysDeleteDeliveryServiceURISigningKeysSafeDeliveryServiceUpdateGetDeliveryServiceRegexesByDSIDGetDeliveryServiceRegexesPostDeliveryServiceRegexesByDSIDCreateDeliveryServiceRequestCommentUpdateDeliveryServiceRequestCommentGetDeliveryServiceRequestCommentsDeleteDeliveryServiceRequestCommentCreateDeliveryServiceRequestGetDeliveryServiceRequestsDeleteDeliveryServiceRequestUpdateDeliveryServiceRequestCreateDeliveryServicesRequiredCapabilityDeleteDeliveryServicesRequiredCapabilityGetDeliveryServicesRequiredCapabilitiesCreateDeliveryServiceServersDeleteDeliveryServiceServerAssignServersToDeliveryServiceGetServersByDeliveryServiceGetDeliveryServiceServersCreateDivisionUpdateDivisionGetDivisionsDeleteDivisionFederationsAllFederationsCreateFederationDeliveryServicesGetFederationDeliveryServicesDeleteFederationDeliveryServiceCreateFederationUsersGetFederationUsersDeleteFederationUserAddFederationResolverMappingsForCurrentUserDeleteFederationResolverMappingsForCurrentUserReplaceFederationResolverMappingsForCurrentUserGetFederationFederationResolversAssignFederationFederationResolverGetFederationResolversCreateFederationResolverDeleteFederationResolverGetOSVersionsCreateInvalidationJobDeleteInvalidationJobUpdateInvalidationJobGetInvalidationJobsGetLogsoriginIDsCreateOriginUpdateOriginGetOriginsDeleteOriginCreateParameterCreateMultipleParametersUpdateParameterGetParametersDeleteParameterCreatePhysLocationUpdatePhysLocationGetPhysLocationsDeletePhysLocationPingCreateProfileUpdateProfileGetParametersByProfileNameGetProfilesDeleteProfileExportProfileImportProfileCopyProfileCreateProfileParameterCreateMultipleProfileParametersCreateProfileWithMultipleParametersGetProfileParametersDeleteProfileParameterCreateRegionUpdateRegionGetRegionsDeleteRegionCreateRoleUpdateRoleGetRolesDeleteRoleCreateServerUpdateServerGetServersDeleteServerAssignDeliveryServiceIDsToServerIDGetServerIDDeliveryServicesGetServerUpdateStatusCreateServerServerCapabilityDeleteServerServerCapabilityGetServerServerCapabilitiesAssignMultipleServersCapabilitiesDeleteMultipleServersCapabilitiesUpdateServerStatusSetServerQueueUpdateSetUpdateServerStatusTimesCreateServerCapabilityGetServerCapabilitiesUpdateServerCapabilityDeleteServerCapabilityInsertServerCheckStatusGetServersChecksCreateServerCheckExtensionDeleteServerCheckExtensionGetServerCheckExtensionsCreateServiceCategoryUpdateServiceCategoryGetServiceCategoriesDeleteServiceCategorypostdelGetExpiringCertsCreateStaticDNSEntryUpdateStaticDNSEntryGetStaticDNSEntriesDeleteStaticDNSEntryGetSummaryStatsGetSummaryStatsLastUpdatedCreateSummaryStatsCreateStatusGetStatusesDeleteStatusSteeringCreateSteeringTargetUpdateSteeringTargetGetSteeringTargetsDeleteSteeringTargetGetTenantsCreateTenantUpdateTenantDeleteTenantCreateTopologyGetTopologiesUpdateTopologyDeleteTopologyTopologiesQueueUpdateGetTrafficMonitorConfigGetCurrentStatsCreateTypeUpdateTypeGetTypesDeleteTypeGetUsersGetUserCurrentUpdateCurrentUserCreateUserUpdateUserDeleteUserRegisterNewUserTrafficVaultPingGetCDNFederationsByNameCreateServerCapabilityV41GetServerCapabilitiesV41UpdateServerCapabilityV41NumRetriesclSetURLHTTPClientGetGlobalParametersGetServerByHostNameGetServerProfileParametersGetCDNDeliveryServicesGetConfigFileParametersGetCDNGetURLSigKeysGetURISigningKeysGetParametersByNameGetJobsGetServerCapabilitiesByIDGetDeliveryServiceRequiredCapabilitiesByIDSetServerUpdateStatusFellBackWriteFsCookieGetJobsCompatSetServerUpdateStatusCompatGetDataTODisableProxyOldCfgT3CVersionLoginDispersionPrintConfigdisableProxyPtrdispersiondispersionPtrgetDataPtroldCfgoldCfgPtrrevalOnlyPtrt3c-request"t3c-request"login-dispersion"login-dispersion"[seconds] wait a random number of seconds between 0 and [seconds] before login to traffic ops, default 0"[seconds] wait a random number of seconds between 0 and [seconds] before login to traffic ops, default 0"get-data"get-data"non-config-file Traffic Ops Data to get. Valid values are update-status, packages, chkconfig, system-info, and statuses"non-config-file Traffic Ops Data to get. Valid values are update-status, packages, chkconfig, system-info, and statuses"Traffic Ops URL. Must be the full URL, including the scheme. Required. May also be set with     the environment variable TO_URL"Traffic Ops URL. Must be the full URL, including the scheme. Required. May also be set with     the environment variable TO_URL"reval-only"reval-only"[true | false] whether to only fetch data needed to revalidate, versus all config data. Only used if get-data is config"[true | false] whether to only fetch data needed to revalidate, versus all config data. Only used if get-data is config"traffic-ops-disable-proxy"traffic-ops-disable-proxy"[true | false] whether to not use any configure Traffic Ops proxy parameter. Only used if get-data is config"[true | false] whether to not use any configure Traffic Ops proxy parameter. Only used if get-data is config"Traffic Ops password. Required. May also be set with the environment variable TO_PASS    "Traffic Ops password. Required. May also be set with the environment variable TO_PASS    "old-config"old-config"Old config from a previous config request. Optional. May be a file path, or 'stdin' to read from stdin. Used to make conditional requests."Old config from a previous config request. Optional. May be a file path, or 'stdin' to read from stdin. Used to make conditional requests."Print the app version"Print the app version"could not get the OS hostname, please supply a hostname: "could not get the OS hostname, please supply a hostname: "loading old config failed, old config will not be used! Error: %v
"loading old config failed, old config will not be used! Error: %v\n"using old config for IMS requests"using old config for IMS requests"CommandArgs: %s
"CommandArgs: %s\n"LogLocationError: %s
"LogLocationError: %s\n"LoginDispersion : %s
"LoginDispersion : %s\n"TOInsecure: %v
"TOInsecure: %v\n"TOTimeoutMS: %s
"TOTimeoutMS: %s\n"TOPass: xxxxxx
"TOPass: xxxxxx\n"loading old config took %v
"loading old config took %v\n"decoding old config from stdin: "decoding old config from stdin: "opening old config file '"opening old config file '"decoding old config file '"decoding old config file '" load old config after initializing the loggers, because we want to log how long it takes old config is optional.RequestOptionsQueryParametersDeliveryServiceHealthResponseDeliveryServiceHealthDeliveryServiceCacheGroupOnlinejson:"online"Offlinejson:"offline"TotalOnlinejson:"totalOnline"TotalOfflinejson:"totalOffline"json:"cacheGroups"AlertsAlertLeveljson:"level"json:"alerts"ToStringsalertsAddNewAlertAddAlertAddAlertsHasAlertsErrorStringjson:"response"ReqInfCacheHitStatusRespHeadersStaticDNSEntriesResponseStaticDNSEntryCacheGroupNamejson:"cachegroupId" db:"cachegroup_id"json:"deliveryservice" db:"dsname"DeliveryServiceIDjson:"deliveryserviceId" db:"deliveryservice_id"json:"host" db:"host"TTLjson:"ttl" db:"ttl"CacheGroupsNullableResponseV50CDNsResponseServerCheckExtensionNullablejson:"version" db:"version"json:"info_url" db:"info_url"ScriptFilejson:"script_file" db:"script_file"IsActivejson:"isactive" db:"isactive"AdditionConfigJSONjson:"additional_config_json" db:"additional_config_json"ServercheckShortNamejson:"servercheck_short_name" db:"servercheck_short_name"ServercheckColumnNamejson:"-" db:"servercheck_column_name"json:"type" db:"type_name"json:"-" db:"type"ValidateCDNFederationV5json:"id" db:"ds_id"json:"xmlID" db:"xml_id"CNamejson:"cname" db:"cname"json:"deliveryService,omitempty"CDNFederationV5ResponsePhysLocationV5Cityjson:"city" db:"city"Commentsjson:"comments" db:"comments"Emailjson:"email" db:"email"Phonejson:"phone" db:"phone"POCjson:"poc" db:"poc"RegionIDjson:"regionId" db:"region"RegionNamejson:"region" db:"region_name"json:"state" db:"state"Zipjson:"zip" db:"zip"TrafficStatsCDNStatsResponseTrafficStatsCDNsStatsTrafficStatsCDNStatsBandwidthjson:"bandwidth"Capacityjson:"capacity"Connnectionsjson:"connections"Statsjson:"currentStats"MultipleServersCapabilitiesjson:"serverCapabilities" db:"server_capability"ServerIDsjson:"serverIds" db:"server"PageTypejson:"pageType"DeleteDeliveryServiceResponseSteeringTargetsResponseSteeringTargetNullableJSONIntStrToInt64json:"deliveryService" db:"deliveryservice_name"json:"deliveryServiceId" db:"deliveryservice"Targetjson:"target" db:"target_name"TargetIDjson:"targetId" db:"target"stDeliveryServiceCapacityResponseDeliveryServiceCapacityAvailablePercentjson:"availablePercent"UnavailablePercentjson:"unavailablePercent"UtilizedPercentjson:"utilizedPercent"MaintenancePercentjson:"maintenancePercent"ProfileExportResponseProfileExportImportNullablejson:"description"ProfileExportImportParameterNullablejson:"config_file"json:"value"Profilejson:"profile"json:"parameters"AsyncStatusResponseAsyncStatusjson:"id,omitempty" db:"id"json:"status,omitempty" db:"status"json:"start_time,omitempty" db:"start_time"EndTimejson:"end_time,omitempty" db:"end_time"Messagejson:"message,omitempty" db:"message"TopologiesResponseTopologyNodeFederationResolverV50IPAddressjson:"ipAddress" db:"ip_address"json:"lastUpdated,omitempty" db:"last_updated"json:"typeId,omitempty" db:"type"FederationResolverResponseV50CDNFederationsV5ResponseCacheNameDeleteCDNDNSSECKeysResponseDeliveryServiceRequestCommentsResponseDeliveryServiceRequestCommentIDNoModAuthorIDjson:"authorId" db:"author_id"Authorjson:"author"DeliveryServiceRequestIDjson:"deliveryServiceRequestId" db:"deliveryservice_request_id"StatsSummaryResponseStatsSummaryjson:"cdnName"  db:"cdn_name"json:"deliveryServiceName"  db:"deliveryservice_name"StatNamejson:"statName"  db:"stat_name"StatValuejson:"statValue"  db:"stat_value"SummaryTimejson:"summaryTime"  db:"summary_time"StatDatejson:"statDate"  db:"stat_date"ssUserV4AddressLine1json:"addressLine1" db:"address_line1"AddressLine2json:"addressLine2" db:"address_line2"ChangeLogCountjson:"changeLogCount" db:"change_log_count"Companyjson:"company" db:"company"json:"country" db:"country"FullNamejson:"fullName" db:"full_name"GIDjson:"gid"LastAuthenticatedjson:"lastAuthenticated" db:"last_authenticated"LocalPasswordjson:"localPasswd,omitempty" db:"local_passwd"NewUserjson:"newUser" db:"new_user"PhoneNumberjson:"phoneNumber" db:"phone_number"json:"postalCode" db:"postal_code"PublicSSHKeyjson:"publicSshKey" db:"public_ssh_key"RegistrationSentjson:"registrationSent" db:"registration_sent"Rolejson:"role" db:"role"StateOrProvincejson:"stateOrProvince" db:"state_or_province"json:"-" db:"token"UCDNjson:"ucdn"UIDjson:"uid"json:"username" db:"username"DowngradeToLegacyCurrentUserCreateUserResponseV4RegionV50DivisionNamejson:"divisionName"Divisionjson:"division" db:"division"PostProfileParamjson:"profileId"ParamIDsjson:"paramIds"json:"replace"SanitizeppServerCheckExtensionResponseProfilesResponseV5ProfileV5ParameterNullablejson:"cdnName" db:"cdn_name"json:"cdn" db:"cdn"RoutingDisabledjson:"routingDisabled" db:"routing_disabled"json:"type" db:"type"json:"params,omitempty"StatusesResponseASNV50ASNjson:"asn" db:"asn"CachegroupIDCDNDNSSECKeysResponseDNSSECKeysDNSSECKeySetDNSSECKeyDNSSECKeyV11DNSSECKeyDSRecordV11json:"algorithm,string"DigestTypejson:"digestType,string"Digestjson:"digest"InceptionDateUnixjson:"inceptionDate"ExpirationDateUnixjson:"expirationDate"TTLSecondsjson:"ttl,string"EffectiveDateUnixjson:"effectiveDate"Publicjson:"public"Privatejson:"private"DSRecordjson:"dsRecord,omitempty"DNSSECKeyDSRecordZSKjson:"zsk"KSKjson:"ksk"FederationUsersResponseFederationUserjson:"role" db:"role_name"FederationResolverResponseFederationResolverfrLogsResponseLogjson:"lastUpdated"json:"message"TicketNumjson:"ticketNum"json:"user"UpgradeDeliveryServiceRequestResponseV5DeliveryServiceRequestV50DSRChangeTypedsrctDeliveryServiceV50TLSVersionsAlertsRequestStatusValidTransitionAssigneejson:"assignee"AssigneeIDjson:"-" db:"assignee_id"json:"-" db:"author_id"ChangeTypejson:"changeType" db:"change_type"CreatedAtjson:"createdAt" db:"created_at"LastEditedByjson:"lastEditedBy"LastEditedByIDjson:"-" db:"last_edited_by_id"Originaljson:"original,omitempty" db:"original"Requestedjson:"requested,omitempty" db:"deliveryservice"json:"-"dsrIsOpenIsClosedSetXMLIDDeliveryServiceFederationResolverMappingRequestDeliveryServiceFederationResolverMappingResolverMappingResolve4json:"resolve4,omitempty"Resolve6json:"resolve6,omitempty"Mappingsjson:"mappings"ProfileImportRequestprofileImportProfileImportResponseProfileImportResponseObjDeleteCDNFederationResponseDeliveryServiceRequestV41DeliveryServiceV41DeliveryServiceV40DeliveryServiceFieldsV31DeliveryServiceFieldsV30DeliveryServiceFieldsV15DeliveryServiceFieldsV14DeliveryServiceFieldsV13DeliveryServiceNullableFieldsV11json:"geoLimitCountries" db:"geo_limit_countries"LongDesc1json:"longDesc1,omitempty" db:"long_desc_1"LongDesc2json:"longDesc2,omitempty" db:"long_desc_2"GeoLimitCountriesTypeRemoveLD1AndLD2DowngradeToV31DeliveryServiceRequestResponseV40DeliveryServiceRequestV40dsrV40ServerQueueUpdateResponseServerQueueUpdateServerIDjson:"serverId"ServerV50RevalidationPendingTopologyResponseV5DeliveryServiceAddSSLKeysReqDeliveryServiceSSLKeysReqDeliveryServiceSSLKeysCertificateCSRjson:"csr"AuthTypejson:"authType,omitempty"json:"deliveryservice,omitempty"BusinessUnitjson:"businessUnit,omitempty"json:"city,omitempty"json:"organization,omitempty"json:"hostname,omitempty"json:"country,omitempty"json:"state,omitempty"json:"certificate,omitempty"validateSharedRequiredRequestFieldsSSLKeysAddResponseServersV4ResponseServerV40json:"deliveryServices,omitempty"json:"fqdn,omitempty"FqdnTimejson:"httpsPort" db:"https_port"json:"iloIpAddress" db:"ilo_ip_address"json:"iloIpGateway" db:"ilo_ip_gateway"json:"iloIpNetmask" db:"ilo_ip_netmask"json:"iloPassword" db:"ilo_password"json:"iloUsername" db:"ilo_username"json:"mgmtIpAddress" db:"mgmt_ip_address"json:"mgmtIpGateway" db:"mgmt_ip_gateway"json:"mgmtIpNetmask" db:"mgmt_ip_netmask"PhysLocationjson:"physLocation" db:"phys_location"PhysLocationIDjson:"physLocationId" db:"phys_location_id"ProfileNamesjson:"profileNames" db:"profile_name"json:"revalPending" db:"reval_pending"json:"statusId" db:"status_id"json:"typeId" db:"server_type_id"UpdPendingjson:"updPending" db:"upd_pending"json:"statusLastUpdated" db:"status_last_updated"json:"configUpdateTime" db:"config_update_time"json:"configApplyTime" db:"config_apply_time"json:"revalUpdateTime" db:"revalidate_update_time"json:"revalApplyTime" db:"revalidate_apply_time"ToServerV3FromV4ToServerV2FromV4Countjson:"count"Summaryjson:"summary"UseInTablejson:"useInTable"CDNFederationDeliveryServiceIDsDsIdjson:"id,omitempty" db:"ds_id"XmlIdjson:"xmlId,omitempty" db:"xml_id"UpdateCDNFederationResponseParameterjson:"param"json:"routingDisabled"TMConfigResponseTrafficMonitorConfigTrafficServerTSDeliveryServicejson:"xmlId"json:"cachegroup"json:"fqdn"HashIDjson:"hashId"json:"hostName"json:"httpsPort,omitempty"json:"interfaces"json:"port"ServerStatusToLegacyServerIPv4IPv6TMCacheGroupMonitoringCoordinatesjson:"latitude"json:"longitude"Coordinatesjson:"coordinates"TrafficMonitorIP6json:"ip6"json:"ip"TMDeliveryServiceTotalTPSThresholdjson:"TotalTpsThreshold"TotalKbpsThresholdjson:"TotalKbpsThreshold"json:"topology"HostRegexesjson:"hostRegexes,omitempty"TMProfileTMParametersHealthThresholdValComparatorHealthThresholdJSONParametersAvailableBandwidthInKbpsjson:"health.threshold.availableBandwidthInKbps,omitempty"LoadAveragejson:"health.threshold.loadavg,omitempty"QueryTimejson:"health.threshold.queryTime,omitempty"HealthConnectionTimeoutjson:"health.connection.timeout"HealthPollingURLjson:"health.polling.url"HealthPollingFormatjson:"health.polling.format"HealthPollingTypejson:"health.polling.type"HistoryCountjson:"history.count"MinFreeKbpsThresholdsjson:"health_threshold,omitempty"paramsCRConfigTopologyTrafficServersjson:"trafficServers,omitempty"json:"cacheGroups,omitempty"json:"config,omitempty"TrafficMonitorsjson:"trafficMonitors,omitempty"json:"profiles,omitempty"ToLegacyConfigtmcDeliveryServiceSSLKeysResponseDeliveryServiceSSLKeysOriginsResponseOriginCoordinatejson:"coordinate" db:"coordinate"CoordinateIDjson:"coordinateId" db:"coordinate_id"json:"deliveryService" db:"deliveryservice"json:"deliveryServiceId" db:"deliveryservice_id"json:"fqdn" db:"fqdn"IP6Addressjson:"ip6Address" db:"ip6_address"IsPrimaryjson:"isPrimary" db:"is_primary"json:"port" db:"port"json:"profile" db:"profile"json:"profileId" db:"profile_id"json:"tenant" db:"tenant"ToOriginV5ServerServerCapabilityjson:"serverHostName,omitempty" db:"host_name"json:"serverId" db:"server"json:"serverCapability" db:"server_capability"SSLKeyRequestFieldsjson:"version,omitempty"DeliveryServiceSSLKeysGenerationResponseRegionServiceCategoryV50CDNNotificationsResponseCDNNotificationNotificationjson:"notification" db:"notification"json:"user" db:"user"UpdateUserResponseV4DeliveryServiceResponseV5TopologyResponseProfileParameterCreationRequestParameterIDjson:"parameterId"TypesResponseV50TypeV50FederationResolversResponseDeliveryServicesRequiredCapabilityjson:"deliveryServiceID" db:"deliveryservice_id"RequiredCapabilityjson:"requiredCapability" db:"required_capability"json:"xmlID,omitempty" db:"xml_id"StatsSummaryLastUpdatedAPIResponseStatsSummaryLastUpdatedPutSnapshotResponsejson:"response,omitempty"DSServerResponseV40DSServerV4DSServerBaseV4json:"-" db:"server_capabilities"DeliveryServiceCapabilitiesjson:"-" db:"deliveryservice_capabilities"ToDSServerBasebaseV4ServerInterfacesOSVersionsAPIResponseLogsResponseV50LogV50ParametersResponseV50FederationDeliveryServicesResponseFederationDeliveryServiceNullableSnapshotResponseCRConfigCRConfigTrafficOpsServerCRConfigServerStatusjson:"cacheGroup,omitempty"Capabilitiesjson:"capabilities,omitempty"FqdnHashCountjson:"hashCount,omitempty"HashIdjson:"hashId,omitempty"HttpsPortInterfaceNamejson:"interfaceName"Ipjson:"ip,omitempty"Ip6json:"ip6,omitempty"LocationIdjson:"locationId,omitempty"json:"profile,omitempty"json:"status,omitempty"ServerTypejson:"type,omitempty"CRConfigRouterCRConfigRouterStatusAPIPortjson:"api.port,omitempty"json:"httpsPort"json:"location,omitempty"json:"port,omitempty"SecureAPIPortjson:"secure.api.port,omitempty"CRConfigDeliveryServiceCRConfigBypassDestinationjson:"cname,omitempty"json:"ttl,omitempty"CRConfigDispersionLimitjson:"limit"Shuffledjson:"shuffled,string"CRConfigGeoEnabledCountryCodejson:"countryCode"MatchSetRegexjson:"regex"MatchTypejson:"match-type"json:"protocol"json:"matchlist"CRConfigLatitudeLongitudeShortLatjson:"lat"Lonjson:"long"CRConfigDeliveryServiceProtocolAcceptHTTPjson:"acceptHttp,string,omitempty"AcceptHTTPSjson:"acceptHttps,string"RedirectOnHTTPSjson:"redirectToHttps,string"SOAAdminjson:"admin,omitempty"AdminTimeExpireSecondsjson:"expire,omitempty"ExpireSecondsTimeMinimumSecondsjson:"minimum,omitempty"MinimumSecondsTimeRefreshSecondsjson:"refresh,omitempty"RefreshSecondsTimeRetrySecondsjson:"retry,omitempty"RetrySecondsTimeCRConfigStaticDNSEntryjson:"ttl"CRConfigTTLASecondsjson:"A,omitempty"AAAASecondsjson:"AAAA,omitempty"DNSkeySecondsjson:"DNSKEY,omitempty"DSSecondsjson:"DS,omitempty"NSSecondsjson:"NS,omitempty"SOASecondsjson:"SOA,omitempty"json:"anonymousBlockingEnabled,omitempty"BypassDestinationjson:"bypassDestination,omitempty"json:"consistentHashQueryParams,omitempty"json:"consistentHashRegex,omitempty"CoverageZoneOnlyjson:"coverageZoneOnly,string"json:"deepCachingType"Dispersionjson:"dispersion,omitempty"Domainsjson:"domains,omitempty"json:"ecsEnabled,string,omitempty"GeoEnabledjson:"geoEnabled,omitempty"json:"geoLimitRedirectURL,omitempty"GeoLocationProviderjson:"geolocationProvider,omitempty"IP6RoutingEnabledjson:"ip6RoutingEnabled,string,omitempty"MatchSetsjson:"matchsets,omitempty"MaxDNSIPsForLocationjson:"maxDnsIpsForLocation,omitempty"MissLocationjson:"missLocation,omitempty"json:"protocol,omitempty"json:"regionalGeoBlocking,omitempty"RequestHeadersjson:"requestHeaders,omitempty"json:"requiredCapabilities,omitempty"ResponseHeadersjson:"responseHeaders,omitempty"json:"routingName,omitempty"Soajson:"soa,omitempty"SSLEnabledjson:"sslEnabled,string"StaticDNSEntriesjson:"staticDnsEntries,omitempty"json:"topology,omitempty"TTLsjson:"ttls,omitempty"CRConfigLatitudeLongitudeCRConfigBackupLocationsjson:"fallbackToClosest,string"json:"list,omitempty"BackupLocationsjson:"backupLocations,omitempty"json:"localizationMethods,omitempty"CRConfigMonitorCRConfigStatsjson:"CDN_name,omitempty"DateUnixSecondsjson:"date,omitempty"TMHostjson:"tm_host,omitempty"TMPathjson:"tm_path,omitempty"TMUserjson:"tm_user,omitempty"TMVersionjson:"tm_version,omitempty"ContentServersjson:"contentServers,omitempty"ContentRoutersjson:"contentRouters,omitempty"EdgeLocationsjson:"edgeLocations,omitempty"RouterLocationsjson:"trafficRouterLocations,omitempty"Monitorsjson:"monitors,omitempty"json:"stats,omitempty"DeliveryServiceRequestsResponseV5CDNSSLKeysResponseDeliveryServicesResponseV5CoordinateV50CoordinateResponseV5RoleV4Permissionsjson:"permissions" db:"permissions"roleDeliveryServiceServerResponsejson:"server" db:"server"Orderbyjson:"orderby"json:"size"OriginDetailResponseServercheckAPIResponseGenericServerCheckCommonCheckFieldsAdminStatejson:"adminState"json:"cacheGroup"json:"revalPending"json:"updPending"Checksjson:"checks,omitempty"InvalidationJobCreateV4TopologiesQueueUpdateRequestjson:"cdnId"TopologiesQueueUpdateResponseTopologyNameServerUpdateStatusResponseV50ServerUpdateStatusV50StatusV50ServerCapabilityV5ServerCapabilityDetailResponseV5DSServerResponseV50DSServerV50ServerV5StaticDNSEntriesResponseV50StaticDNSEntryV50UsersResponseV4ProfilesResponseServerUpdateStatusResponseV40ServerUpdateStatusV40susRolesResponseV4FederationsResponseAllDeliveryServiceFederationsMappingFederationResolverMappingjson:"cname"IsAllFederationsCacheGroupNullableCacheGroupDetailResponseServerServerCapabilitiesResponseV50ServerServerCapabilityV50AssignFederationFederationResolversResponseAssignFederationResolversRequestFedResolverIDsjson:"fedResolverIds"InvalidationJobV4CDNGenerateKSKReqExpirationDaysjson:"expirationDays"EffectiveDateGenerateCDNDNSSECKeysResponseTypesResponsejson:"active"ParentIDjson:"parentId"json:"parentName,omitempty" db:"parent_name"TenantResponseCDNQueueUpdateResponseRegionsResponseV50FederationFederationResolversResponseProfileParametersAPIResponseV5ProfileParamV5json:"parameter"ServerCapabilitiesResponseV5DeliveryServiceRequestCommentV5CDNLocksGetResponseCDNLockjson:"userName" db:"username"json:"message" db:"message"Softjson:"soft" db:"soft"SharedUserNamesjson:"sharedUserNames" db:"shared_usernames"ServiceCategoriesResponseV50PingResponsejson:"ping"CacheGroupDetailResponseV50DeliveryServiceSafeUpdateRequestjson:"displayName"json:"infoUrl"json:"longDesc"json:"longDesc1,omitempty"URLSignatureKeysResponseServerCapabilityDetailResponseSteeringResponseSteeringSteeringTargetOrderjson:"order"json:"weight"GeoOrderjson:"geoOrder,omitempty"json:"longitude,omitempty"json:"latitude,omitempty"SteeringFilterClientSteeringjson:"clientSteering"Targetsjson:"targets"Filtersjson:"filters"DeliveryServiceServerV50TenantV50json:"parentId" db:"parent_id"TenantResponseV50CDNLockDeleteResponseCDNNotificationRequestjson:"notification"CoordinatesResponseDeliveryServiceIDRegexResponseDeliveryServiceIDRegexTypeNamejson:"typeName"ProfileCopyExistingIDjson:"idCopyFrom"ExistingNamejson:"profileCopyFrom"ProfileCopyResponseUserCurrentResponseV4CacheGroupPostDSRespResponseCacheGroupPostDSRespServerNamesjson:"serverNames"json:"deliveryServices"DivisionV5ServerCapabilitiesResponseStatsSummaryV5DomainsResponsejson:"parameterId" db:"parameter_id"json:"profileName" db:"profile_name"ProfileDescriptionjson:"profileDescription" db:"profile_description"CoordinatesResponseV5FederationResolversResponseV50ServerServerCapabilitiesResponseDivisionsResponseCDNsV5ResponseOriginsResponseV50OriginV50DeliveryServicesResponseV41EmailAddressCDNLockCreateResponseASNsResponseASNsResponseV50DeliveryServicesRequiredCapabilitiesResponseDeliveryServiceServerResponseV50ServiceCategoriesResponseInvalidationJobsResponseV4PhysLocationsResponseV5DeliveryServiceRegexResponseParametersResponseTopologiesResponseV5DeliveryserviceserverResponseDSServerIDsjson:"dsId" db:"deliveryservice"DivisionsResponseV5RegionsResponseServerCapabilitiesResponseV41ServerCapabilityV41ServersV5ResponseOriginDetailResponseV50TrafficVaultPingResponsejson:"server"SSLKeyExpirationGetResponseSSLKeyExpirationInformationProviderjson:"provider"Expirationjson:"expiration"Federatedjson:"federated"ServerCapabilityDetailResponseV41ProfileParametersAPIResponseProfileParamDeliveryServiceSafeUpdateResponseV40CDNDNSSECGenerateReqCDNDNSSECGenerateReqDateKSKExpirationDaysjson:"kskExpirationDays"ZSKExpirationDaysjson:"zskExpirationDays"DeliveryServiceRequestCommentsResponseV5GetTenantsResponseV50GetTenantsResponseServerPutStatusJSONNameOrIDStrjson:"offlineReason"JWKSMapIteratorPairKeyOperationListKeyOperationopsKeyTypeMapVisitorVisitAsMapIterateKeyIDKeyOpsPrivateParamsThumbprintX509CertChainX509CertThumbprintX509CertThumbprintS256X509URLmakePairsgithub.com/lestrrat-go/jwx/jwk.makePairsLookupKeyIDksmCreateCDNFederationResponseCacheGroupsNullableResponseServercheckRequestNullablejson:"servercheck_short_name"scpServercheckPostResponseDeliveryServiceRegexPostStatsSummaryResponseV5CDNFederationResponseStatsSummaryLastUpdatedAPIResponseV5StatsSummaryLastUpdatedV5DeliveryServiceRequestsResponseV40PhysLocationsResponseLegacyTrafficServerTxDBConnectorCommitRollbackStmtResultLastInsertIdRowsAffectedRowsColumnsNumInputBeginPrepareDriverConnectdriverConndriverStmtsiclosedcloseErrdbcreatedAtcineedResetfinalClosedopenStmtinUsedbmuClosedreturnedAtonPutreleaseConndcremoveOpenStmtexpiredresetSessionvalidateConnectionprepareLockedcloseDBLockedfinalCloseconnRequestSetconnRequestAndIndexconnRequestconncurIdxCloseAndRemoveAllDeletedeleteIndexTakeRandomfinalCloserdatabase/sql.finalClosedepSetwaitDurationconnectornumClosedfreeConnconnRequestsnumOpenopenerChdeplastPutmaxIdleCountmaxOpenmaxLifetimemaxIdleTimecleanerChwaitCountmaxIdleClosedmaxIdleTimeClosedmaxLifetimeClosedstopaddDepaddDepLockedremoveDepremoveDepLockedpingDCPingContextmaxIdleConnsLockedshortestIdleTimeLockedSetMaxIdleConnsSetMaxOpenConnsSetConnMaxLifetimeSetConnMaxIdleTimestartCleanerLockedconnectionCleanerconnectionCleanerRunLockedmaybeOpenNewConnectionsconnectionOpeneropenNewConnectionnoteUnusedDriverStatementputConnputConnDBLockedretryPrepareContextprepareDCExecContextexecDCQueryContextqueryqueryDCQueryRowContextQueryRowBeginTxbeginbeginDCstmtConnGrabbergrabConndatabase/sql.grabConntxCtxdatabase/sql.txCtxconnStmtstickyErrclosemucgcgdsparentStmtcsslastNumClosedremoveClosedStmtLockedprepareOnConnLockedtxikeepConnOnRollbackstmtscancelawaitDoneisDoneclosemuRUnlockReleaseclosePreparedrollbackStmtContextCommonServerPropertiesjson:"profileDesc" db:"profile_desc"ServerNullableV2ServerNullableV11LegacyInterfaceDetailsInterfaceMtujson:"interfaceMtu" db:"interface_mtu"json:"interfaceName" db:"interface_name"IP6Gatewayjson:"ip6Gateway" db:"ip6_gateway"IPGatewayjson:"ipGateway" db:"ip_gateway"IPNetmaskjson:"ipNetmask" db:"ip_netmask"ToInterfaceslidToInterfacesV4IPIsServicejson:"ipIsService" db:"ip_address_is_service"IP6IsServicejson:"ip6IsService" db:"ip6_address_is_service"ToNonNullableUpgradeToV40DSServerBaseToDSServerBaseV4oldBaseRoleV11PrivLeveljson:"privLevel" db:"priv_level"json:"capabilities" db:"-"AlertLevelcommonUserFieldsConfirmLocalPasswordjson:"confirmLocalPasswd,omitempty" db:"confirm_local_passwd"RoleNamejson:"roleName,omitempty" db:"role_name"DeliveryServiceRequestNullableDeliveryServiceNullableV30DeliveryServiceV30DeliveryServiceNullableV15DeliveryServiceNullableV14DeliveryServiceNullableV13DeliveryServiceNullableV12DeliveryServiceNullableV11DeliveryServiceRemovedFieldsV11CacheURLjson:"cacheurl" db:"cacheurl"UpgradeToV4json:"assigneeId,omitempty" db:"assignee_id"json:"assignee,omitempty"json:"lastEditedById" db:"last_edited_by_id"json:"-" db:"xml_id"UserCurrentjson:"username"LocalUserjson:"localUser"json:"roleName"ServerV30ToServerV2LegacyTrafficMonitorConfigServerUpdateStatusV4rowsicloseStmtcontextDonelasterrclosemuScanHoldhitEOFlastcolslasterrOrErrLockedrsinitContextClosenextLockedNextResultSetrawbufsetrawbufColumnTypesclosemuRUnlockIfHeldByScanconnReuseStrategyconnRequestDelHandleidxRowrowsDBStatsMaxOpenConnectionsOpenConnectionsInUseIdleWaitCountWaitDurationMaxIdleClosedMaxIdleTimeClosedMaxLifetimeClosedToNullableTxOptionsIsolationLevelIsolationReadOnlyOncedoSlowreleaseConnOncereleaseConnCacheclosemuRUnlockCondReleaseConnRawBytesColumnTypehasNullablehasLengthhasPrecisionScalenullabledatabaseTypeprecisionscalescanTypeLengthDecimalSizeScanTypeNullableDatabaseTypeName/Users/test/Desktop/trafficcontrol/cache-config/t3c-request/t3c-request.gotorequtilgithub.com/apache/trafficcontrol/v8/cache-config/t3c-request/config"github.com/apache/trafficcontrol/v8/cache-config/t3c-request/config"github.com/apache/trafficcontrol/v8/cache-config/t3cutil/toreq"github.com/apache/trafficcontrol/v8/cache-config/t3cutil/toreq"github.com/apache/trafficcontrol/v8/cache-config/t3cutil/toreq/torequtil"github.com/apache/trafficcontrol/v8/cache-config/t3cutil/toreq/torequtil"configuration initialized"configuration initialized"%s
"%s\n"Traffic Ops does not support the latest version supported by this app! Falling back to previous major Traffic Ops API version!"Traffic Ops does not support the latest version supported by this app! Falling back to previous major Traffic Ops API version!"WriteDatawriting data: %s
"writing data: %s\n"CookieCachePath login to traffic ops./Users/test/Desktop/trafficcontrol/cache-config/t3c-tail/Users/test/Desktop/trafficcontrol/cache-config/t3c-tail/t3c-tail.godefaultTimeOutMstailStoptimeOuttimeOutMsgithub.com/nxadm/tail"github.com/nxadm/tail""t3c-tail""file"Path to file to watch"Path to file to watch""match"Regex pattern you want to match while running tail default is .*"Regex pattern you want to match while running tail default is .*"end-match"end-match"^timeout"^timeout"Regex pattern that will cause tail to exit before timeout"Regex pattern that will cause tail to exit before timeout"Int64Longtimeout-ms"timeout-ms"Timeout in milliseconds that will cause tail to exit default is 15000 MS"Timeout in milliseconds that will cause tail to exit default is 15000 MS"Please provide file path for t3c-tail"Please provide file path for t3c-tail"TailLineSeekInfoWhenceNumLeakyBucketFillLeakIntervalLastupdateupdateFillPourDrainedAtTimeToDrainTimeSinceLastUpdateSerialiseReOpenMustExistPollPipeFollowMaxLineSizeRateLimiterFileWatcherTombdyingdeadreasonDeadDyingKillfFileChangesModifiedTruncatedDeletedNotifyModifiedfcNotifyTruncatedNotifyDeletedBlockUntilExistsChangeEventsLineslineNumwatcherlkTellStopAtEOFcloseFilereopenreadLinetailFileSyncwaitForChangesopenReaderseekEndseekTosendLineCleanupTailFileerror running tail on "error running tail on "NewTimerusage: t3c-tail [--help]
	-f <path to file> -m <regex to match> -e <regex match to exit> -t <timeout in ms>

	file is  path to the file you want to tail

	match is regex string you wish to match on, default is '.*'

	endMatch is a regex used to exit tail when it is found in the logs with out waiting for timeout

	timeOutMs is when tail will stop if endMatch isn't found default is 15000
	`usage: t3c-tail [--help]
	-f <path to file> -m <regex to match> -e <regex match to exit> -t <timeout in ms>

	file is  path to the file you want to tail

	match is regex string you wish to match on, default is '.*'

	endMatch is a regex used to exit tail when it is found in the logs with out waiting for timeout

	timeOutMs is when tail will stop if endMatch isn't found default is 15000
	` defaultTimeOutMs is 15000 milliseconds, if not included in input.LeakyBucketSerDeSerialise/Users/test/Desktop/trafficcontrol/cache-config/t3c-update/Users/test/Desktop/trafficcontrol/cache-config/t3c-update/config/Users/test/Desktop/trafficcontrol/cache-config/t3c-update/config/config.goDebugConfigApplyBoolRevalApplyBoolparsedconfigApplyBoolFlagconfigApplyBoolPtrconfigApplyTimePtrconfigApplyTimeStringPtrrevalApplyBoolFlagrevalApplyBoolPtrrevalApplyTimePtrrevalApplyTimeStringPtrsetConfigApplyBoolFlagNamesetConfigApplyTimeFlagNamesetRevalApplyBoolFlagNamesetRevalApplyTimeFlagNamet3c-update"t3c-update"set-config-apply-time"set-config-apply-time"'q'113[RFC3339Nano Timestamp] sets the server's config apply time"[RFC3339Nano Timestamp] sets the server's config apply time"set-reval-apply-time"set-reval-apply-time"[RFC3339Nano Timestamp] sets the server's reval apply time"[RFC3339Nano Timestamp] sets the server's reval apply time"Print the version"Print the version"set-update-status"set-update-status"[false or nonexistent] Set the Update Status to false for the server`[false or nonexistent] Set the Update Status to false for the server`set-reval-status"set-reval-status"'z'122[false or nonexistent] Set the Reval Status to false for the server`[false or nonexistent] Set the Reval Status to false for the server`Must set either %s or %s. One is at least required.
"Must set either %s or %s. One is at least required.\n"%s must be a valid RFC3339Nano timestamp"%s must be a valid RFC3339Nano timestamp"set-update-status must be false or nonexistent"set-update-status must be false or nonexistent"set-reval-status must be false or nonexistent"set-reval-status must be false or nonexistent" Verify at least one flag is passed TODO: Remove once ATC (v7.0+) is deployed Validate that it can be parsed to a valid timestamp Booleans must trump time for backwards compatibility/Users/test/Desktop/trafficcontrol/cache-config/t3c-update/t3c-update.gocur_statusgithub.com/apache/trafficcontrol/v8/cache-config/t3c-update/config"github.com/apache/trafficcontrol/v8/cache-config/t3c-update/config"SetUpdateStatus%s, %s
"%s, %s\n"Microsecond1000Failed to set config_apply_time.
Sent: %v
Recv: %v"Failed to set config_apply_time.\nSent: %v\nRecv: %v"Failed to set reval_apply_time.
Sent: %v
Recv: %v"Failed to set reval_apply_time.\nSent: %v\nRecv: %v" Use SetUpdateStatus is preferrederr = t3cutil.SetUpdateStatusCompat(cfg.TCCfg, tc.CacheName(cfg.TCCfg.CacheHostName), cfg.ConfigApplyTime, cfg.RevalApplyTime, cfg.ConfigApplyBool, cfg.RevalApplyBool) When comparing equality, it must be done with microsecond precision (Round not Truncate). This is because Postgres stores Microsecond precision. Round also drops the monotonic clock reading. t3c (Nano) -> client (Nano) -> TO (Nano) -> Postgres (Micro) Postgres (Micro) -> TO (Micro) -> client (Micro) -> here / t3c (Micro)/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/actionlog.goApplyFilesFlagInvalidApplyServiceActionFlagInvalidChkConfigEntryFilterDSSFilterParamsGetChkconfigGetConfigDataGetDataFuncsGetPackagesMakeReqHdrMakeReqMetaDataMetaDataVersionParamsToMapParamsToMultiMapStrToApplyFilesFlagStrToApplyServiceActionFlagStrToUseStrategiesFlagSystemInfoParamConfigFileTrafficOpsProxyParameterNameUseStrategiesFlagInvalidWriteChkconfigWriteConfigWritePackagesWriteServerUpdateStatusWriteStatusesWriteSystemInfocombineParamsfilterUnusedDSSinstalldirrunParallelsortAndCombineStrsaction"apply-start""git-init""create-git-commit-initial""create-git-commit-final""update-files-all""update-files-reval""ats-reload""ats-restart""apply-end""failure"ACTION='`ACTION='`' STATUS='`' STATUS='``'` ActionLogAction is an action t3c performs which affects the state of the machine. Things that don't affect the state of the machine are not considered actions. For example, requesting Traffic Ops is not an 'action', but restarting ATS or modifying a config file is. Actions also include the t3c-apply run starting and finishing, to help delineate the actions of different runs in the log. ActionLogActionApplyStart is the start of the t3c-apply run. The status of this should always be success. ActionLogActionGitInit is creating a git repo in the ATS config directory. ActionLogActionGitCommitInitial is the initial commit at the start of the run. ActionLogActionGitCommitInitial is the final commit at the end of the run. ActionLogActionUpdateFilesAll is writing and updating ATS config files. ActionLogActionUpdateFilesReval is writing and updating only revalidate ATS config files. ActionLogActionATSReload is calling service reload on ATS. ActionLogActionATSReload is calling service restart on ATS. ActionLogActionApplyEnd is the end of the t3c-apply run. WriteActionLog writes the given action and status to both the info log and the given metadata object. The metaData may be nil, and should be if this is being called after the final git commit, to prevent modifying the file after the commit./Users/test/Desktop/trafficcontrol/cache-config/t3cutil/enum.go`/var/lib/trafficcontrol-cache-config/config-data.json`"invalid""none""core""all""badass""report""revalidate""syncds" ServiceNeeds represents whether we need to reload or restart Traffic Server, as returned by t3c-check-reload. Note the default is success, not invalid. With enums, typically invalid should be the default, but in this case, this represents the return of an app which returns nothing on successes (which is typical of POSIX apps), so we want the default empty string to represent that. Hence, the default value of ServiceNeeds is success, not invalid default is nothing, and print nothing if nothing needs done Mode is the t3c run mode - syncds, badass, etc./Users/test/Desktop/trafficcontrol/cache-config/t3cutil/getdata.godataFparamArrallPackageParamsreqInfserverPackageParamsallChkconfigParamsserverChkconfigParamsconfigApplyrevalApplyserverNamecfgData`update-status``packages``chkconfig``system-info``statuses``config`getting server '"getting server '"Getting data '"Getting data '"unknown data request '"unknown data request '"global`global`getting system info parameters: "getting system info parameters: "encoding system info parameters: "encoding system info parameters: "getting statuses: "getting statuses: "encoding statuses: "encoding statuses: "encoding server update status: "encoding server update status: "getting ORT server packages: "getting ORT server packages: "writing packages: "writing packages: "getting server: "getting server: "getting server: nil profile"getting server: nil profile"getting server: nil hostName"getting server: nil hostName"PackagesParamConfigFilepackageRequestInfoStrGetPackages.GetConfigFileParameters("GetPackages.GetConfigFileParameters("")"GetPackages.GetConfigFileParameters(package)' package parameters: "' package parameters: "GetServerParameterscalculating server '"calculating server '"getting chkconfig: "getting chkconfig: "writing chkconfig: "writing chkconfig: "ChkconfigParamConfigFileGetChkconfig.GetConfigFileParameters("GetChkconfig.GetConfigFileParameters("GetChkconfig.GetConfigFileParameters(chkconfig)' chkconfig parameters: "' chkconfig parameters: "`json:"value"`setting update statuses (Traffic Ops '"setting update statuses (Traffic Ops '"MaybeIPStr'): "'): "getting config data: "getting config data: "encoding config data: "encoding config data: " TODisableProxy is whether to not use a configured Traffic Ops Proxy. This is only used by WriteConfig, which is the only command that makes enough requests to matter. RevalOnly is whether to only fetch config data necessary to revalidate, versus all data necessary to generate config. This is only used by WriteConfig OldCfg is the previously fetched ConfigData, for 'config' requests. May be nil. T3CVersion is the version of the t3c app ecosystem This value will be the same for any t3c app. WriteSystemInfo writes the "system info" to output. This is the same info as the Traffic Ops API's /system/info endpoint, which is actually just all Parameters with the config_file 'global'. Note this is different than the more common "global parameters", which usually refers to all Parameters on the Profile named 'GLOBAL'. This is identical to the /system/info endpoint, except it does not include a	'{response: {parameters:' wrapper. WriteStatuses writes the Traffic Ops statuses to output. Note this is identical to /statuses except it omits the '{response:' wrapper. WriteServerUpdateStatus writes the Traffic Ops server update status to output. Note this is identical to the Traffic Ops API's /servers/{{host name}}/update_status endpoint except it omits the '[]' WriteORTServerPackages writes the packages for serverName to output. Note this is identical to /ort/serverName/packages. WriteChkconfig writes the chkconfig for cfg.CacheHostName to output. Note this is identical to /ort/serverName/chkconfig. SetUpdateStatus sets the queue and reval status of serverName in Traffic Ops. TODO need to move to toreq, add fallback SetUpdateStatusCompat sets the queue and reval status of serverName in Traffic Ops.func SetUpdateStatusCompat(cfg TCCfg, serverName tc.CacheName, configApply, revalApply *time.Time, configApplyBool, revalApplyBool *bool) error {
	// TODO need to move to toreq, add fallback
	reqInf, err := cfg.TOClient.SetServerUpdateStatusBoolCompat(serverName, configApply, revalApply, configApplyBool, revalApplyBool)
	if err != nil {
		return errors.New("setting update statuses (Traffic Ops '" + torequtil.MaybeIPStr(reqInf.RemoteAddr) + "'): " + err.Error())
	}
	return nil
} WriteConfig writes the Traffic Ops data necessary to generate config to output./Users/test/Desktop/trafficcontrol/cache-config/t3cutil/getdatacfg.golmhdrrespHdrglobalParamsreqHdrrealTOURLtoProxyURLStrtoServerserversdssuriSigningKeysurlSigKeysdssFuriSignKeysFurlSigKeysFprofileNameprofileNamePtrcdncdnFdsFjobsFserverParamsFserverParamsFssslFcacheGroupscapsparentConfigParamstopologiescacheKeyConfigParamsFcapsFcgFdisableProxydsCapsFdsrFerrsoldServerparentConfigParamsFremapConfigParamsFserverProfilesParamsserverProfilesParamsMetaDataserversFtoAddrSettoClienttopologiesFallParamsparamsArrprofileParamsfPtrdoneChandsIDsdssesfilteredserverIDsconfigFileomitNamempsvcdnIDcfgDSSrfcsync"sync"github.com/apache/trafficcontrol/v8/lib/go-rfc"github.com/apache/trafficcontrol/v8/lib/go-rfc"tm.rev_proxy.url`tm.rev_proxy.url``json:"servers,omitempty"`CacheGroupNullableV5`json:"cache_groups,omitempty"``json:"global_parameters,omitempty"``json:"server_profiles_parameters,omitempty"``json:"server_params,omitempty"``json:"cachekey_config_parameters,omitempty"``json:"remap_config_parameters,omitempty"``json:"parent_config_parameters,omitempty"``json:"delivery_services,omitempty"``json:"delivery_service_servers,omitempty"``json:"server,omitempty"``json:"jobs,omitempty"``json:"cdn,omitempty"``json:"delivery_service_regexes,omitempty"``json:"uri_signing_keys,omitempty"``json:"url_sig_keys,omitempty"``json:"server_capabilities,omitempty"``json:"delivery_service_required_capabilities,omitempty"``json:"ssl_keys,omitempty"``json:"topologies,omitempty"``json:"traffic_ops_addresses,omitempty"``json:"traffic_ops_url,omitempty"``json:"metadata"``json:"cache_host_name"``json:"servers"``json:"cache_groups"``json:"global_parameters"``json:"server_profiles_parameters"``json:"cachekey_config_parameters"``json:"remap_config_parameters"``json:"parent_config_parameters"``json:"delivery_services"``json:"delivery_service_servers"``json:"jobs"``json:"cdn"``json:"delivery_service_regexes"``json:"uri_signing_keys"``json:"url_sig_keys"``json:"server_capabilities"``json:"delivery_service_required_capabilities"``json:"ssl_keys"``json:"topologies"``json:"last_modified"``json:"date"``json:"etag"`ParseHTTPDateFormatHTTPDateIf-None-Match"If-None-Match"ETagHeaderGetTOData took %v
"GetTOData took %v\n"MaploadtryCompareAndSwapunexpungeLockedswapLockedtryLoadOrStoredeletetrySwaptryExpungeLockeddirtymissesloadReadOnlyLoadOrStoreLoadAndDeleteCompareAndDeleteRangemissLockeddirtyLockedold config version '%s' doesn't match current version '%s', old config will not be used!
"old config version '%s' doesn't match current version '%s', old config will not be used!\n""GetGlobalParameters"getting global parameters: "getting global parameters: "StatusNotModifiedGetting config: %v not modified, using old config"Getting config: %v not modified, using old config"Global Params"Global Params"Getting config: %v is modified, using new response"Getting config: %v is modified, using new response"using Traffic Ops proxy '"using Traffic Ops proxy '"Traffic Ops proxy '"Traffic Ops proxy '"' failed to get CDNs, falling back to real Traffic Ops"' failed to get CDNs, falling back to real Traffic Ops"Traffic Ops proxy enabled, but GLOBAL Parameter '"Traffic Ops proxy enabled, but GLOBAL Parameter '"' missing or empty, not using proxy"' missing or empty, not using proxy"Traffic Ops proxy enabled, but GLOBAL Parameter 'tm.rev_proxy.url' missing or empty, not using proxyTraffic Ops proxy is disabled, not checking or using GLOBAL Parameter '"Traffic Ops proxy is disabled, not checking or using GLOBAL Parameter '"Traffic Ops proxy is disabled, not checking or using GLOBAL Parameter 'tm.rev_proxy.urlserversF took %v
"serversF took %v\n""GetServers"getting servers: "getting servers: ""Servers"server '"server '" not found in servers" not found in servers" missing CDNName" missing CDNName" missing CDNID" missing CDNID" missing Profile" missing Profile"sslF took %v
"sslF took %v\n"GetCDNSSLKeys("GetCDNSSLKeys("getting cdn '"getting cdn '""SSLKeys"dsF took %v
"dsF took %v\n"GetCDNDeliveryServices("GetCDNDeliveryServices("getting delivery services: "getting delivery services: ""DeliveryServices"dssF took %v
"dssF took %v\n"GetDeliveryServiceServers("GetDeliveryServiceServers("getting delivery service servers: "getting delivery service servers: ""DeliveryServiceServers"uriF took %v
"uriF took %v\n"SigningAlgorithmURISigningGetURISigningKeys("GetURISigningKeys("Delivery service '"Delivery service '"' is uri_signing, but keys not found! Skipping!"' is uri_signing, but keys not found! Skipping!"getting uri signing keys for ds '"getting uri signing keys for ds '"URISigningKeys["URISigningKeys["]"]"urlF took %v
"urlF took %v\n"SigningAlgorithmURLSigurl_sigGetURLSigKeys("GetURLSigKeys("' is url_sig, but keys not found! Skipping!: "' is url_sig, but keys not found! Skipping!: "getting url sig keys for ds '"getting url sig keys for ds '"URLSigKeys["URLSigKeys["JoinErrsserverParamsF(%v) took %v
"serverParamsF(%v) took %v\n"GetServerProfileParameters("GetServerProfileParameters("getting server profile '"getting server profile '"' parameters: "' parameters: "' parameters: no parameters (profile not found?)"' parameters: no parameters (profile not found?)""ServerParams"ServerProfileParams("ServerProfileParams("cdnF took %v
"cdnF took %v\n"GetCDN("GetCDN(""CDN"jobsF took %v
"jobsF took %v\n"GetJobs("GetJobs("getting jobs: "getting jobs: ""Jobs"cfF took %v
"cfF took %v\n""GetCacheGroups"getting cachegroups: "getting cachegroups: ""CacheGroups"capsF took %v
"capsF took %v\n"Getting config: ServerCapabilities reqHdr %+v"Getting config: ServerCapabilities reqHdr %+v""GetServerCapabilitiesByID"getting server caps from Traffic Ops: "getting server caps from Traffic Ops: ""ServerCapabilities"dscapsF took %v
"dscapsF took %v\n""GetDeliveryServiceRequiredCapabilitiesByID"/api/5.0/deliveryservices_required_capabilities' does not exist"/api/5.0/deliveryservices_required_capabilities' does not exist"This endpoint was removed in APIv5 %s"This endpoint was removed in APIv5 %s"getting DS required capabilities: "getting DS required capabilities: ""DSRequiredCapabilities"dsrF took %v
"dsrF took %v\n""GetDeliveryServiceRegexes"getting delivery service regexes: "getting delivery service regexes: ""DeliveryServiceRegexes"cacheKeyConfigParamsF took %v
"cacheKeyConfigParamsF took %v\n"cachekey.config"cachekey.config"GetConfigFileParameters(cachekey.config)"GetConfigFileParameters(cachekey.config)"getting cache key parameters: "getting cache key parameters: "CacheKeyParams"CacheKeyParams"remapConfigParamsF took %v
"remapConfigParamsF took %v\n"GetConfigFileParameters(remap.config)"GetConfigFileParameters(remap.config)""RemapConfigParams"parentConfigParamsF took %v
"parentConfigParamsF took %v\n"GetConfigFileParameters(parent.config)"GetConfigFileParameters(parent.config)"getting parent.config parameters: "getting parent.config parameters: ""ParentConfigParams"topologiesF took %v
"topologiesF took %v\n""GetTopologies"getting topologies: "getting topologies: ""Topologies"["`["`"]`"]`config generation got multiple parameters for name '"config generation got multiple parameters for name '"' - ignoring '"' - ignoring '"DeliveryServiceServerV5filterUnusedDSS got server with nil id, skipping!"filterUnusedDSS got server with nil id, skipping!"filterUnusedDSS got server with nil cdnId, skipping!"filterUnusedDSS got server with nil cdnId, skipping!"filterUnusedDSS got delivery service with nil id, skipping!"filterUnusedDSS got delivery service with nil id, skipping!"filterUnusedDSS got delivery service with nil cdnId, skipping!"filterUnusedDSS got delivery service with nil cdnId, skipping!"filterUnusedDSS got deliveryserviceserver with nil server, skipping!"filterUnusedDSS got deliveryserviceserver with nil server, skipping!"filterUnusedDSS got deliveryserviceserver with nil deliveryservice, skipping!"filterUnusedDSS got deliveryserviceserver with nil deliveryservice, skipping!" Version is the version of the application which created the config data, primarily used for cache invalidation. Servers must be all the servers from Traffic Ops. May include servers not on the current cdn. CacheGroups must be all cachegroups in Traffic Ops with Servers on the current server's cdn. May also include CacheGroups without servers on the current cdn. GlobalParams must be all Parameters in Traffic Ops on the tc.GlobalProfileName Profile. Must not include other parameters. ServerProfilesParams must be all Parameters on the Profiles of the current server. Must not include other Parameters. ServerParams is constructed from Server and ServerParams. Must not include other Parameters. It's ok for other apps using this data to serialize and deserialize this to pass it around, but t3c-request must always use ServerProfilesParams to re-populate this, and do If-Modified-Since requests from that. This must never be used in an If-Modified-Since check, or populated wholesale from a single profile's endpoint. CacheKeyConfigParams must be all Parameters with the "cachekey.config" (compat) RemapConfigParams must be all Parameters with the ConfigFile "remap.config" ParentConfigParams must be all Parameters with the ConfigFile "parent.config. DeliveryServices must include all Delivery Services on the current server's cdn, including those not assigned to the server. Must not include delivery services on other cdns. DeliveryServiceServers must include all delivery service servers in Traffic Ops for all delivery services on the current cdn, including those not assigned to the current server. Server must be the server we're fetching configs from Jobs must be all Jobs on the server's CDN. May include jobs on other CDNs. CDN must be the CDN of the server. DeliveryServiceRegexes must be all regexes on all delivery services on this server's cdn. URISigningKeys must be a map of every delivery service which is URI Signed, to its keys. URLSigKeys must be a map of every delivery service which uses URL Sig, to its keys. ServerCapabilities must be a map of all server IDs on this server's CDN, to a set of their capabilities. May also include servers from other cdns. DSRequiredCapabilities must be a map of all delivery service IDs on this server's CDN, to a set of their required capabilities. Delivery Services with no required capabilities may not have an entry in the map. SSLKeys must be all the ssl keys for the server's cdn. Topologies must be all the topologies for the server's cdn. May incude topologies of other cdns. TrafficOpsAddresses is the list of IP addresses used to request data. Because of proxies and load balancers, multiple addresses may be used for the multiple requests necessary to fetch all data. ReqMetaData has response headers for Conditional Requests. add 1s, because TO rounds down, which will always be modified GetTOData gets all the data from Traffic Ops needed to generate config. Returns the data, the addresses of all Traffic Ops' requested, and any error. The toClient is the Traffic Ops client, which should already be initialized and connected. The disableProxy arg is whether to disable using any Traffic Ops proxy configured via the global TrafficOpsProxyParameterName. If the Parameter exists, this will connect to Traffic Ops to get the global parameters, get the Parameter, and then change the toClient to use it. The cacheHostName is the hostname of the cache to get config generation data for. The oldCfg is previous config data which was cached. May be nil, if the caller has no previous data. If it exists and is usable, If-Modified-Since requests will be made and the cache re-used where possible. The version is a unique version of the application, which should change with any compatibility changes. Old config with a different version than the current won't be used (though in the future, smarter compatibility could be added). The revalOnly arg is whether to only get data necessary to revalidate, versus all data necessary to generate cache config. each Traffic Ops request could get a different IP, so track them all map[atscfg.ProfileName][]tc.Parameter map[atscfg.ProfileName]ReqMetaData TODO TOAPI add /servers?cdn=1 query param TODO uncomment when MSO Origins are changed to not use DSS, to avoid the DSS call if it isn't necessary allDSesHaveTopologies := true for _, ds := range toData.DeliveryServices { 	if ds.CDNID == nil || *ds.CDNID != *server.CDNID { 		continue 	} 	if ds.Topology == nil { 		allDSesHaveTopologies = false 		break } TODO warn? TODO read meta config gen, and only include servers which are included in the meta (assigned to edge or all for mids? read the meta gen to find out) skip keys for reval-only, which doesn't need them TODO when MSO Origins are changed to not use DSS, we can add `&& !allDSesHaveTopologies` here, to avoid the DSS call if it isn't necessary skip DSS if reval-only (which doesn't need DSS) TODO use a single func/request, when TO has an endpoint to get all params on multiple profiles with a single request, e.g. `/parameters?profiles=a,b,c` must copy, because Go for-loops overwrite the variable every iteration skip ssl keys for reval only, which doesn't need them TODO change to not take a param; it doesn't use it to request TO anyway. this endpoint has been removed in APIv5, DS required capabilities will be populated by t3c-generate from the deliveryservice structure, /this is being kept for backwards compatability TODO make const in lib/go-atscfg skip data not needed for reval, if we're reval-only use a set to remove duplicates combineParams combines all the params from different profiles into a single array of parameters. the /profile/name/parameters endpoint doesn't return profiles like all the other endpoints, and we need it to layer, so fake it runParallel runs all funcs in fs in parallel goroutines, and returns after all funcs have returned. Returns a slice of the errors returned by each func. The order of the errors will not be the same as the order of fs. All funcs in fs must be safe to run in parallel. because functions are pointers, f will change in the loop. Need create a new variable here to close around. TODO filter only DSes on this server's CDN? Does anything ever needs DSS cross-CDN? Surely not.      Then, we can remove a bunch of config files that filter only DSes on the current cdn. FilterParams filters params and returns only the parameters which match configFile, name, and value. If configFile, name, or value is the empty string, it is not filtered. Returns a slice of parameters. ParamsToMap converts a []tc.Parameter to a map[paramName]paramValue. If multiple params have the same value, the first one in params will be used an an error will be logged. See ParamArrToMultiMap. ParamArrToMultiMap converts a []tc.Parameter to a map[paramName][]paramValue. filterUnusedDSS removes entries not on the given server's cdn from dsses, and returns a atscfg.DeliveryServiceServer. no log, this is normal if servers are fetched per-cdn no log, this is normal if dses are fetched per-cdnreadOnlyamended/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/t3cutil.goexecpathstatcmdStrversionNumbmaiasbibscombinedhtml"html"`json:"path"``json:"content_type"``json:"line_comment"``json:"secure"``json:"text"``json:"warnings"`Executable/usr/bin`/usr/bin`InstallDir setting to fallback: '%s', %v
"InstallDir setting to fallback: '%s', %v\n"Executable path is %s"Executable path is %s"Return Installdir '%s'"Return Installdir '%s'"Error getting file status"Error getting file status"error getting file status"error getting file status"Error reading file "Error reading file "UnescapeString1.0"1.0"`json:"server-hostname"``json:"reloaded-ats"``json:"restarted-ats"``json:"unset-update-flag"``json:"unset-reval-flag"``json:"installed-packages"``json:"owned-files"``json:"succeeded"``json:"partial-success"``json:"actions"``json:"action"``json:"status"`MarshalIndent  "  "marshalling metadata file: "marshalling metadata file: "Strings`json:"file"``json:"adding"` initializes InstallDir to executable dir If error, returns "/usr/bin" as default. ATSConfigFiles implements sort.Interface and sorts by the Location and then FileNameOnDisk, i.e. the full file path. CommentsFilter is used to remove comment PermCk will compare file permissions against existing file and octal permission provided. OwnershipCk will compare owner and group settings against existing file and owner/group settings provided. NewLineFilter removes carriage returns ReadFile reads a file and returns the file contents. UnencodeFilter translates HTML escape Do executes the given command and returns the stdout, stderr, and exit code. This is a convenience wrapper around os/exec. Since t3c only needs to make simple calls and get the stdout, stderr, and code, this provides a simpler and terser interface. If you need anything more complex, or don't find this simpler, you should probably use os/exec directly. Each arg must be passed as its own string. Unfortunately, Go doesn't have a way to pass multiple args as a single string, and splitting on spaces would require complex quote parsing. Note each arg must be passed without quotes. Go calls the app with args as if they were quoted. if you add quotes, they'll be passed to the command literally, as if you called 'mycommand "\"escaped-quotes\""`. Note if Go fails to run the command, the error from Go will be returned as the stderr and the code -1, which will differ from what would have been returned by a command line. DoInput is like Do but takes the stdin to pass to the command. VersionStr returns a common version string format for all t3c apps. The appName is the command itself, e.g. t3c-apply. The versionNum is the version number from the build system. It should include the major, minor, git revision, and a monotonically increasing number, e.g. '4.2.1234.abc123'. NewApplyMetaData creates a new, empty ApplyMetaData object. construct a slice, so JSON serializes '[]' not 'null'. construct a map, so JSON serializes '{}' not 'null'. MetaDataVersion is the version of the metadata file. This should update the major version with breaking changes, and t3c versions should strive to maintain compatibility at least one major version back, so features like tracking t3c-owned files continue to work through upgrades. ApplyMetaData is metadata about a t3c-apply run. Always use NewApplyMetaData, don't use a literal to construct a new object. Version is the metadata version of this metadata object or file. See MetaDataVersion. ServerFQDN is the FQDN of this server. The primary purpose of this field is to allow distinguishing metadata files from different servers. ReloadedATS is whether this run restarted ATS. Note this is whether ATS was actually restarted, not whether it would have been, e.g. because of --report-only or --service-action. RestartedATS is whether this run restarted ATS. UnsetUpdateFlag is whether this t3c-apply run unset the update flag for this server. Note this is whether the flag was actually unset, not whether it would have been e.g. because of --no-unset-update-flag or --report-only. UnsetRevalFlag is whether this t3c-apply run unset the revalidate flag for this server. because of --no-unset-reval-flag or --report-only. InstalledPackages is which yum packages are installed. Note this packages currently installed, not what would have been e.g. because of --install-packages=false or --report-only. OwnedFilePaths is the list of files t3c-apply produced in this run. This can be used to know which files in the ATS config directory were produced by t3c, and which were produced by some other means. Note this is all files produced, not necessarily all files written to disk. This will include files generated, but not changed on disk because they had no semantic diff from the existing file. This may be used in the future for t3c-apply to delete files produced by a previous run which no longer exist (for example, Header Rewrites from a Delivery Service no longer assigned to this server). Files are the full path and file name. Succeeded is whether this t3c-apply run generally succeeded. Note not all scenarios are black or white success-or-fail. For example, files may be successfully created, but reloading ATS may fail. In these scenarios, t3c-apply will attempt to set Succeeded to false, but also attempt to set other metadata about what was actually performed. But when partial failure occurrs, nothing is guaranteed in the metadata. Operators should consider the logs authoritative over the metadata. PartialSuccess indicates that some actions were successful, but later actions failed. This is a bad place to be, because it means some things were changed, but not everything that needed to be. This is often not fatal, because, for example, if config files were changed by ATS failed to reload, those config files typically needed placed anyway. But nevertheless, partial success is potentially catastrophic, and operators are strongly encouraged to set alarms and read logs in the event it occurs, to determine what was changed, what failed, and what actions need taken. Format prints the ApplyMetaData in a format designed to be written to a file, and structured but pretty-printed to work well with line-based diffs (e.g. in git). newline at the end of the file, so it's a valid POSIX text file CombineOwnedFilePaths combines the owned file paths of two metadata objects. This is primarily useful when a config run, such as revalidate, adds owned files, but not all owned files, but we don't want to write metadata incidating we don't own existing files, so this can be used to combine the new files with the previous metadata. Both am and bm are may be nil, in which case the files from the non-nil object is returned, or an empty array if both are nil. the func guarantees the returned array will always be sorted sortAndCombineStrs sorts as and bs, and then returns an array containing the unique strings in each, without duplicates. at this point we know they don't match so add the lesser, increment it, and loop (but don't add or increment the greater) at this point, we added everything up to the end of one of the arrays, but potentially not the other. So add the remaining strings in the other CheckRefsInputFileAndAdding is the input (stdin or file) for t3c-check-refs if --files-adding=input. If not, the input is simply the raw file to check./Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/client.goDeliveryServiceServersAlwaysGetAllGetCDNByNameGetCacheGroupByNameGetDeliveryServiceURLSigKeysGetParameterByNameAndConfigFileGetParametersByConfigFileGetProfileByNameInvalidationJobV4ForLegacyInvalidationJobV4FromLegacyInvalidationJobV4LegacyInvalidationJobV4PlusLegacyIsLatestSupportedLatestKnownAPIVersionReqOptsServerV40FromLegacyServerV40PlusLegacycheckLatestAndFallBackdsesToLatestjobsToLatestmakeTOURLStrnewWithCookienewWithPasswordserverToLatestserverUpdateStatusesToLatestserversToLatestnewURLcookiePathfsCookieinsecurepasstimeoutuserAgenterrIsUnsupportedVersiontoURLStrlatestSupportedoldClienttoAddrnewClienturierrSreqPathcookiejartoclienttoclientlibtoreqoldnet/http/cookiejar"net/http/cookiejar"github.com/apache/trafficcontrol/v8/cache-config/t3cutil/toreq/toreqold"github.com/apache/trafficcontrol/v8/cache-config/t3cutil/toreq/toreqold"github.com/apache/trafficcontrol/v8/traffic_ops/toclientlib"github.com/apache/trafficcontrol/v8/traffic_ops/toclientlib"github.com/apache/trafficcontrol/v8/traffic_ops/v5-client"github.com/apache/trafficcontrol/v8/traffic_ops/v5-client"URL: '"URL: '"' User: '"' User: '"' Pass len: '"' Pass len: '"FsCookiejson:"cookie"json:"cookies"GetHTTPCookiesGetFsCookieFailed to retrieve cached cookie for user '%v' at '%v', using password login: %v"Failed to retrieve cached cookie for user '%v' at '%v', using password login: %v"Cached cookie for user '%v' at '%v' not found, using password login"Cached cookie for user '%v' at '%v' not found, using password login"Cached cookie for user '%v' at '%v' found, attempting to reuse cookie to avoid login"Cached cookie for user '%v' at '%v' found, attempting to reuse cookie to avoid login"OptionsClientOptsForceLatestAPIInsecureRequestTimeoutAPIVersionCheckIntervalTraffic Ops URL string: '"Traffic Ops URL string: '"Login404501toreqnew.New logging into Traffic Ops '%v': got %v, falling back to older client
"toreqnew.New logging into Traffic Ops '%v': got %v, falling back to older client\n"Logging in to Traffic Ops '%v' code %v: %v"Logging in to Traffic Ops '%v' code %v: %v"NewSessionconnectMethodKeyproxyschemeonlyH1persistConnwrFlushrequestAndChanincomparabletransportRequestCancelCauseFuncextratraceextraHeaderstrsetErrorlogfresponseAndErrorrestreqchaddedGzipcontinueChcallerGonewriteRequestaltcacheKeytlsStatebrbwnwritereqchwritechclosechisProxysawEOFreadLimitwriteErrChwriteLoopDoneidleAtidleTimernumExpectedResponsescanceledErrbrokenreusedmutateHeaderFuncshouldRetryRequestaddTLSpconnmaxHeaderResponseSizeisBrokencanceledisReusedcancelRequestcloseConnIfStillIdlemapRoundTripErrorreadLoopreadLoopPeekFailLockedreadResponsewaitForContinuewriteLoopwroteRequestroundTripmarkReusedcloseLockedwantConnQueuewantConnconnectMethodproxyURLtargetSchemetargetAddrproxyAuthcmtlsHostCancelFuncconnOrErrorbeforeDialafterDialcancelCtxwaitinggetCtxForDialtryDeliverheadheadPospushBackpopFrontpeekFrontcleanFrontNotWaitingcleanFrontCanceledconnLRUElementnextprevlistPrevFrontBacklazyInitinsertinsertValuePushFrontPushBackInsertBeforeInsertAfterMoveToFrontMoveToBackMoveBeforeMoveAfterPushBackListPushFrontListllremoveOldestClientHelloInfoCipherSuitesSupportedCurvesSupportedPointsSignatureSchemesSupportedProtosSupportedVersionsSupportsCertificatechiCertificateRequestInfoAcceptableCAscriClientAuthTypeClientSessionCacheClientSessionStateSessionStateactiveCertExtraEarlyDataisClientcipherSuitesecretextMasterSecretpeerCertificatesactiveCertHandlesocspResponsesctsverifiedChainsalpnProtocoluseByageAddticketsessionResumptionStatePutRenegotiationSupportticketKeyaesKeyhmacKeycreatedCertificatesNameToCertificateGetCertificateGetClientCertificateGetConfigForClientVerifyPeerCertificateVerifyConnectionRootCAsNextProtosClientAuthClientCAsInsecureSkipVerifyPreferServerCipherSuitesSessionTicketsDisabledSessionTicketKeyUnwrapSessionWrapSessionMinVersionMaxVersionCurvePreferencesDynamicRecordSizingDisabledRenegotiationKeyLogWriterEncryptedClientHelloConfigListEncryptedClientHelloRejectionVerifymutexsessionTicketKeysautoSessionTicketKeysticketKeyFromBytesinitLegacySessionTicketKeyRLockedticketKeysSetSessionTicketKeyscipherSuitessupportedVersionsmaxSupportedVersioncurvePreferencessupportsCurvemutualVersiongetCertificateBuildNameToCertificatewriteKeyLogEncryptTicketencryptTicketDecryptTicketdecryptTicketquicStateQUICEventQUICEventKindQUICEncryptionLevelSuiteeventsnextEventeventArrstartedsignalcblockedccancelcwaitingForDrainreadbuftransportParamsenableSessionEvents12halfConn13ciphermacseqscratchBufnextCiphernextMactrafficSecretsetErrorLockedhcprepareCipherSpecchangeCipherSpecsetTrafficSecretincSeqexplicitNonceLendecryptencryptprevRunehandshakeFnquicisHandshakeCompletehandshakeMutexhandshakeErrvershaveVershandshakesdidResumedidHRRcurveIDsecureRenegotiationresumptionSecretechAcceptedclientFinishedIsFirstcloseNotifyErrcloseNotifySentclientFinishedserverFinishedclientProtocolrawInputhandbufferingsendBufbytesSentpacketsSentretryCountactiveCalltmpNetConnnewRecordHeaderErrorreadRecordreadChangeCipherSpecreadRecordOrCCSretryReadRecordreadFromUntilsendAlertLockedsendAlertmaxPayloadSizeForWriteflushwriteRecordLockedwriteHandshakeRecordwriteChangeCipherRecordreadHandshakeBytesreadHandshakeunmarshalHandshakeMessagehandleRenegotiationhandlePostHandshakeMessagehandleKeyUpdateCloseWritecloseNotifyHandshakeHandshakeContexthandshakeContextconnectionStateLockedmakeClientHelloclientHandshakeloadSessionpickTLSVersionverifyServerCertificategetClientCertificateclientSessionCacheKeyhandleNewSessionTicketserverHandshakereadClientHelloprocessCertsFromClientsendSessionTicketquicReadHandshakeBytesquicSetReadSecretquicSetWriteSecretquicWriteCryptoDataquicResumeSessionquicStoreSessionquicSetTransportParametersquicGetTransportParametersquicHandshakeCompletequicRejectedEarlyDataquicWaitForSignalsessionStateh2TransportidleMucloseIdleidleConnidleConnWaitidleLRUreqMureqCanceleraltMualtProtoconnsPerHostMuconnsPerHostconnsPerHostWaitdialsInProgressProxyOnProxyConnectResponseDialContextDialDialTLSContextDialTLSTLSClientConfigTLSHandshakeTimeoutDisableKeepAlivesDisableCompressionMaxIdleConnsMaxIdleConnsPerHostMaxConnsPerHostIdleConnTimeoutResponseHeaderTimeoutExpectContinueTimeoutTLSNextProtoProxyConnectHeaderGetProxyConnectHeaderMaxResponseHeaderBytesWriteBufferSizeReadBufferSizenextProtoOnceh2transporttlsNextProtoWasNilForceAttemptHTTP2writeBufferSizereadBufferSizehasCustomTLSDialeronceSetNextProtoDefaultsuseRegisteredProtocolalternateRoundTripperRegisterProtocolprepareTransportCancelCancelRequestconnectMethodForRequestputOrCloseIdleConnmaxIdleConnsPerHosttryPutIdleConnqueueForIdleConnremoveIdleConnremoveIdleConnLockeddialcustomDialTLSgetConnqueueForDialstartDialConnForLockeddialConnFordecConnsPerHostdialConnPublicSuffixListPublicSuffixPersistentHostOnlyCreationLastAccessseqNumidshouldSenddomainMatchpathMatchpsListentriesnextSeqNumcookiessetCookiesnewEntrydomainAndTypeerror creating cookie jar: "error creating cookie jar: "checking Traffic Ops '"checking Traffic Ops '"' support: "' support: "Traffic Ops '%v' supports this client's latest API version %v, using latest client
"Traffic Ops '%v' supports this client's latest API version %v, using latest client\n"Traffic Ops '%v' does not support the latest client API version %v, falling back to the previous
"Traffic Ops '%v' does not support the latest client API version %v, falling back to the previous\n"logging into old client: "logging into old client: "Latest Traffic Ops client version %v not supported, falling back to %v
"Latest Traffic Ops client version %v not supported, falling back to %v\n"NewNoAuthSession://"://"not implemented"not implemented"requestinfo path=%v ip=%v code=%v, date="%v" age=%v`requestinfo path=%v ip=%v code=%v, date="%v" age=%v`MaybeHdrStrAge toreq implements a Traffic Ops client for features in the latest version. This should only be used if an endpoint or field needed for config gen is in the latest. Users should always check the returned bool, and if it's false, call the vendored toreq client and set the proper defaults for the new feature(s). All TOClient functions should check for 404 or 503 and return a bool false if so. c is the "new" Traffic Ops client, for the latest major API. This MUST NOT be accessed without checking for nil. If the Traffic Ops server doesn't support the latest API, it will fall back, and c will be nil and old will not, and old must be used. **WARNING** This MUST NOT be accessed without checking for nil. See above. old is the "old" Traffic Ops client, for the previous major API. This will be nil unless the Traffic Ops Server doesn't support the latest API, in which case this will exist and c will be nil. NumRetries is the number of times to retry Traffic Ops server failures before giving up and returning an error to the caller. New logs into Traffic Ops, returning the TOClient which contains the logged-in client. we successfully logged in, but the login may not have used the latest API, double-check the client's API is supported. checkLatestAndFallBack takes a client and checks if it supports the latest Traffic ops API. If not, it attempts to fallback. The passed client.c may be nil if there was an error logging in, in which case it will be assumed that the latest API isn't supported and fallback will be tried. Returns a TOClient which is the latest if supported or has fallen back to the previous API if not, and any error. created for the version, because a real toClient could be nil if it had an error makeTOURLStr creates the Traffic Ops client URL string from uri. It specifically returns the scheme and host, but drops any path in uri. The uri must not be nil, and if the scheme or host is malformed the returned value will be malformed. FellBack() returns whether the client fell back to the previous major version, because Traffic Ops didn't support the latest. IsLatestSupported returns whether toClient supports the latest API, the address of the Traffic Ops connected to (which may be nil), and any error. A nil toClient may be passed, in which case it will be assumed that there was an error creating it and the latest isn't supported, and false will be returned with no address and no error. RequestInfoStr returns a loggable string with info about the Traffic Ops request. The returned string does not have a trailing newline, nor anything in the standard logger prefix (time, level, etc). If the string isn't going to be logged via lib/go-log, it's advisable to add a timestamp. This is safe to call even if the function returning a ReqInf returned an error; it checks for nil values in all cases, and the TO Client guarantees even if a non-nil error is returned, all ReqInf values are either nil or valid.RecordHeaderErrorMsgRecordHeaderrecordTypeKeywordjson:"keyword"transcriptHashhandshakeMessagemarshalcrypto/tls.marshalcrypto/tls.unmarshalclientHelloMsgkeySharegrouppskIdentitylabelobfuscatedTicketAgeoriginalsessionIdcompressionMethodsocspStaplingsupportedCurvessupportedPointsticketSupportedsessionTicketsupportedSignatureAlgorithmssupportedSignatureAlgorithmsCertsecureRenegotiationSupportedextendedMasterSecretalpnProtocolscookiekeySharesearlyDatapskModespskIdentitiespskBindersquicTransportParametersencryptedClientHellomarshalMsgmarshalWithoutBindersupdateBindersoriginalBytesclonealertkeySharePrivateKeysCurvePublicKeyECDHcurvepublicKeyboringGenerateKeyNewPrivateKeyNewPublicKeyecdhcrypto/ecdh.ecdhprivateKeyToPublicKeycrypto/ecdh.privateKeyToPublicKeyPrivateKeyECDHprivateKeypublicKeyOnceECDHDecapsulationKey2400encryptionKeynttElementfieldElement9decryptionKeydkEncapsulationKeyecdhekyberechContextechConfigechCipherKDFIDAEADIDechExtensionConfigIDKemIDSymmetricCipherSuiteMaxNameLengthPublicNameSenderAEADNonceSizeOverheadSealdhKEMhkdfKDFhashLabeledExtractkdfLabeledExpanddhsuiteIDnSecretExtractAndExpandEncapuint128hiloaddOneaeadkemsharedSecretbaseNonceexporterSecretnextNoncehpkeContextencapsulatedKeyinnerHelloinnerTranscriptkdfIDaeadIDechRejectedserverHelloMsgcompressionMethodsupportedVersionserverShareselectedIdentityPresentselectedIdentityserverNameAckselectedGroupnewSessionTicketMsgTLS13lifetimenoncemaxEarlyDatacipherSuiteTLS13crypto/tls.explicitNonceLenkeyLenexpandLabelderiveSecretextractnextTrafficSecrettrafficKeyfinishedHashexportKeyingMaterialkeyUpdateMsgupdateRequested/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/clientfuncs.gotoParamstoReqInftoServersasvoptoldCgtoCacheGroupsdsIDserverIDdsIDStrsqueryParamsserverIDStrstoDSSdsServercdnNamedsIDsMapdsIDsStrdsIDsToFetchdsServersfilteredDSServerssIDsToFetchserverIDsMapserverIDsStrsortIDsInHashserverProfileParameterstoDSestoTopologiestoCDNcdnstoCDNstoKeysparamNameregexestoRegexesoldJobstoJobsscserverCapstoServerCapsdsCapstoDSCapstoStatusError parsing Traffic ops URL: "Error parsing Traffic ops URL: "Error creating JSON cookie file: "Error creating JSON cookie file: "Writing temp file '%s'"Writing temp file '%s'"Error writing cooking file: "Error writing cooking file: "Error moving cookie file: "Error moving cookie file: "Copying temp file '%s' to real '%s'"Copying temp file '%s' to real '%s'"GetRetryprofile_global_parameters"profile_global_parameters"GlobalProfileNameGLOBALgetting global profile '"getting global profile '"' parameters from Traffic Ops '"' parameters from Traffic Ops '"getting global profile 'GLOBAL' parameters from Traffic Ops 'getting global profile 'GLOBAL' parameters: "servers"getting servers from Traffic Ops '"getting servers from Traffic Ops '"upgrading servers from Traffic Ops '"upgrading servers from Traffic Ops '"server-name-"server-name-""hostName"getting server name '"getting server name '"' from Traffic Ops '"' from Traffic Ops '"': no servers returned"': no servers returned"converting server to latest version: "converting server to latest version: "getting cachegroups from Traffic Ops '"getting cachegroups from Traffic Ops '"ToCacheGroupscachegroups"cachegroups"RawURLEncodingHashIntsdeliveryservice_servers_s"deliveryservice_servers_s"_d_"_d_"_cdn_"_cdn_"limit"limit"999999"999999""cdn"orderby"orderby"deliveryserviceids"deliveryserviceids"serverids"serverids"getting delivery service servers from Traffic Ops '"getting delivery service servers from Traffic Ops '"profile_"profile_"_parameters"_parameters"cdn_"cdn_"_deliveryservices"_deliveryservices"getting delivery services from Traffic Ops '"getting delivery services from Traffic Ops '"getting topologies from Traffic Ops '"getting topologies from Traffic Ops '"ToTopologies"topologies"config_file_"config_file_"getting config file parameters from Traffic Ops '"getting config file parameters from Traffic Ops '"getting cdn from Traffic Ops '"getting cdn from Traffic Ops '"ToCDNgetting cdn: "getting cdn: "getting cdns from Traffic Ops '"getting cdns from Traffic Ops '"ToCDNs"cdns"urlsigkeys_"urlsigkeys_"getting url sig keys from Traffic Ops '"getting url sig keys from Traffic Ops '"getting url sig keys: "getting url sig keys: "urisigningkeys_"urisigningkeys_"parameters_name_"parameters_name_"getting parameters name '"getting parameters name '"getting params name '"getting params name '"ds_regexes"ds_regexes"getting ds regexes from Traffic Ops '"getting ds regexes from Traffic Ops '"getting ds regexes: "getting ds regexes: "converting old []tc.Job to []tc.InvalidationJob: "converting old []tc.Job to []tc.InvalidationJob: "jobs_cdn_"jobs_cdn_"maxRevalDurationDays"maxRevalDurationDays"getting jobs from Traffic Ops '"getting jobs from Traffic Ops '"server_capabilities_s_"server_capabilities_s_"getting server caps from Traffic Ops '"getting server caps from Traffic Ops '"Traffic Ops returned Server Capability with nil server id! Skipping!"Traffic Ops returned Server Capability with nil server id! Skipping!"Traffic Ops returned Server Capability with nil capability! Skipping!"Traffic Ops returned Server Capability with nil capability! Skipping!"getting server server capabilities: "getting server server capabilities: "ds_capabilities_d_"ds_capabilities_d_"getting ds caps from Traffic Ops '"getting ds caps from Traffic Ops '"Traffic Ops returned Delivery Service Capability with nil ds id! Skipping!"Traffic Ops returned Delivery Service Capability with nil ds id! Skipping!"Traffic Ops returned Delivery Service Capability with nil capability! Skipping!"Traffic Ops returned Delivery Service Capability with nil capability! Skipping!"getting ds server capabilities: "getting ds server capabilities: "cdn_sslkeys_"cdn_sslkeys_"getting cdn ssl keys from Traffic Ops '"getting cdn ssl keys from Traffic Ops '"getting cdn ssl keys: "getting cdn ssl keys: "getting server update statuses from Traffic Ops '"getting server update statuses from Traffic Ops '"getting server update statuses: "getting server update statuses: "server_update_status_"server_update_status_"getting server update status from Traffic Ops '"getting server update status from Traffic Ops '"expected 1 update_status for the server, got "expected 1 update_status for the server, got "getting server update status: "getting server update status: "set_server_update_status_"set_server_update_status_"setting server update status in Traffic Ops '"setting server update status in Traffic Ops '"func (cl *TOClient) GetProfileByName(profileName string, reqHdr http.Header) (tc.Profile, toclientlib.ReqInf, error) {
	if cl.c == nil {
		return cl.old.GetProfileByName(profileName)
	}

	profile := tc.Profile{}
	reqInf := toclientlib.ReqInf{}
	err := torequtil.GetRetry(cl.NumRetries, "profile_"+profileName, &profile, func(obj interface{}) error {
		//		toProfiles, toReqInf, err := cl.c.GetProfileByNameWithHdr(profileName, reqHdr)
		toProfile, toReqInf, err := GetProfileByName(cl.c, profileName, ReqOpts(reqHdr))
		if err != nil {
			return errors.New("getting profile '" + profileName + "' from Traffic Ops '" + torequtil.MaybeIPStr(reqInf.RemoteAddr) + "': " + err.Error())
		}
		if toReqInf.StatusCode != http.StatusNotModified {
			profile := obj.(*tc.Profile)
			*profile = toProfile
		}
		reqInf = toReqInf
		return nil
	})

	if err != nil {
		return tc.Profile{}, reqInf, errors.New("getting profile '" + profileName + "': " + err.Error())
	}
	return profile, reqInf, nil
}toServers, toReqInf, err := cl.GetServersCompat(*ReqOpts(reqHdr))toServers, toReqInf, err := cl.GetServersCompat(toclient.RequestOptions{
			QueryParameters: params,
			Header:          reqHdr,
		}) DeliveryServiceServersAlwaysGetAll indicates whether to always get all delivery service servers from Traffic Ops, and cache all in a file (but still return to the caller only the objects they requested). This exists and is currently true, because with an ORT run, it's typically more efficient to get them all in a single request, and re-use that cache; than for every config file to get and cache its own unique set. If your use case is more efficient to only get the needed objects, for example if you're frequently requesting one file, set this false to get and cache the specific needed delivery services and servers. TODO add "no limit" param to DSS endpoint prevent unnecessary sorting of the response Older TO's may ignore the server ID list, so we need to filter them out manually to be sure. Also, if DeliveryServiceServersAlwaysGetAll, we need to filter here anyway. TODO warn? error? GetCDNDeliveryServices returns the data, the Traffic Ops address, and any error. GetTopologies returns the data, the Traffic Ops address, and any error. only get jobs with a start time within the window defined by the GLOBAL parameter 'maxRevalDurationDays' only get jobs for delivery services in this server's CDN GetJobsCompat can be changed back to 'cl.c.GetInvalidationJobs' when backwards compatibility with Traffic Ops from previous ATS 'master' changesets is no longer desired, presumably after the next major ATC release. TODO add list of IDs to API+Client GetServerUpdateStatus returns the data, the Traffic Ops address, and any error. SetServerUpdateStatus sets the server's update and reval statuses in Traffic Ops.	var updateStatus, revalStatus *bool
			if configApply != nil {
				*updateStatus = true
				revalStatus = nil
			}
			if revalApply != nil {
				*revalStatus = true
				updateStatus = nil
			}// SetServerUpdateStatusBoolCompat sets the server's update and reval statuses in Traffic Ops.
// *** Compatability requirement until ATC (v7.0+) is deployed with the timestamp features
func (cl *TOClient) SetServerUpdateStatusBoolCompat(cacheHostName tc.CacheName, configApply *time.Time, revalApply *time.Time, configApplyBool *bool, revalApplyBool *bool) (toclientlib.ReqInf, error) {
	if cl.c == nil {
		if configApply != nil && configApplyBool == nil {
			return toclientlib.ReqInf{}, errors.New("Traffic Ops older version doesn't support timestamps, but update boolean was nil and timestamp wasn't! Booleans must be passed to work with older Traffic Ops!")
		}
		if revalApply != nil && revalApplyBool == nil {
			return toclientlib.ReqInf{}, errors.New("Traffic Ops older version doesn't support timestamps, but reval boolean was nil and timestamp wasn't! Booleans must be passed to work with older Traffic Ops!")
		}
		if configApplyBool == nil && revalApplyBool == nil {
			return toclientlib.ReqInf{}, errors.New("Traffic Ops older version doesn't support timestamps, but both booleans were nil! Booleans must be passed to work with older Traffic Ops!")
		}
		return cl.old.SetServerUpdateStatus(cacheHostName, configApply, revalApply)
	}

	reqInf := toclientlib.ReqInf{}
	err := torequtil.GetRetry(cl.NumRetries, "set_server_update_status_"+string(cacheHostName), nil, func(obj interface{}) error {
		_, toReqInf, err := cl.SetServerUpdateStatusCompat(string(cacheHostName), configApply, revalApply, configApplyBool, revalApplyBool, *ReqOpts(nil))
		if err != nil {
			return errors.New("setting server update status in Traffic Ops '" + torequtil.MaybeIPStr(reqInf.RemoteAddr) + "': " + err.Error())
		}
		reqInf = toReqInf
		return nil
	})
	if err != nil {
		return reqInf, errors.New("getting server update status: " + err.Error())
	}
	return reqInf, nil
}/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/clienthlp.goprofilescgNamename '"name '" ' not found (no error, but len 0) reqInf %+v profiles %+v" ' not found (no error, but len 0) reqInf %+v profiles %+v"expected 1 profile, got len %v val %+v"expected 1 profile, got len %v val %+v""configFile" ' not found (no error, but len 0) reqInf %+v cdns %+v" ' not found (no error, but len 0) reqInf %+v cdns %+v"expected 1, got len %v val %+v"expected 1, got len %v val %+v"NewRequestOptionsCacheGroupsNullableResponseV5 GetProfileByName returns the profile with the given name from Traffic Ops. It is a helper function equivalent to calling GetProfiles with RequestOptions with the Values (query string) with the key name set to the Profile name. If opts.Values[name] exists, it is overwritten with name. GetParametersByConfigFile returns the parameters with the given config file from Traffic Ops. It is a helper function equivalent to calling GetParameters with RequestOptions with the Values (query string) with the key configFile set to the config file. If opts.Values[configFile] exists, it is overwritten with name. GetParametersByName returns the parameters with the given name from Traffic Ops. It is a helper function equivalent to calling GetParameters with RequestOptions with the Values (query string) with the key name set to the name. GetDeliveryServiceURLSigKeys gets the URL Sig keys from Traffic Ops for the given delivery service. It is a helper function that calls traffic_ops/v4-client.Session.GetDeliveryServiceURLSignatureKeys to avoid confusion around the protocol named URL Sig. ReqOpts takes an http.Header and returns a traffic_ops/v4-client.RequestOptions with that header. This is a helper function, for brevity. GetParameterByNameAndConfigFile returns the parameters with the given name from Traffic Ops. GetServerByHostName requests the server with the given hostname from Traffic Ops and returns it. If the server does not exist, an error is returned/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/conversions.gosrvsvsoldSvnewJobobjshourshoursStrparamPrefixparamSuffixnewToServersDeliveryServiceV5V5ToDeliveryServicesToInvalidationJobsToServerUpdateStatuses/jobs"/jobs"`json:"response"`?"?"MethodGetGETrequest: "request: "converting job from possible legacy format: "converting job from possible legacy format: "`json:"startTime"``json:"keyword"``json:"parameters"`JobV4TimeFormatJobLegacyTimeFormat2006-01-02 15:04:05-07malformed startTime"malformed startTime"JobLegacyParamPrefixTTL:JobLegacyParamSuffixlegacy job.Parameters was not nil, but unexpected format '"legacy job.Parameters was not nil, but unexpected format '"legacy job.Parameters was not nil, but hours not an integer: '"legacy job.Parameters was not nil, but hours not an integer: '"REFRESHJobLegacyRefetchSuffix##REFETCH##REFETCHJobLegacyRefreshSuffix##REFRESH##CacheHitStatusMissmissconfig_apply_time"config_apply_time"revalidate_apply_time"revalidate_apply_time"updated"updated"reval_updated"reval_updated"/servers/`/servers/`PathEscape/update`/update`MethodPostPOST`json:"profile" db:"profile"``json:"profileDesc" db:"profile_desc"``json:"profileId" db:"profile_id"`got server with neither profileNames nor profile"got server with neither profileNames nor profile"serversV40 := make([]tc.ServerV40, 0) GetJobsCompat gets jobs from any Traffic Ops built from the ATC `master` branch, and converts the different formats to the latest. This makes t3c work with old or new Traffic Ops deployed from `master`, though it doesn't make a version of t3c older than this work with a new TO, which isn't logically possible from the client. (InvalidationJobV4, error) { InvalidationJobV4ForLegacy is a type alias to prevent MarshalJSON recursion. InvalidationJobV4PlusLegacy has the data to deserialize both the latest and older versions that Traffic Ops could return. StartTime overrides the StartTime in InvalidationJobV4 in order to unmarshal any string format. A json.Unmarshal will place a 'startTime' value in this field, rather than the anonymous embedded InvalidationJobV4ForLegacy (tc.InvalidationJobV4). InvalidationJobV4FromLegacy will then parse multiple time formats that different Traffic Ops servers may return, and put the parsed time in tc.InvalidationJobV4.StartTime. SetServerUpdateStatusCompat is a bridge to send both styles of query parameters to the TO endpoint /servers/{hostname-or-id}/update. The current (old) is to send a bool value, however this has resulted in an accidental race condition. The attempt to fix this is to send a timestamp representing when the config or revalidation changes have been applied. To ensure T3C is compatible with both the current releases and future releases this function will send both "styles". Once both T3C and TO have been deployed with the timestamp only V4 TO API endpoint, this function can be removed and the V4 client function `SetUpdateServerStatusTimes` may be used instead (as intended). GetServersCompat gets servers from any Traffic Ops built from the ATC `master` branch, and converts the different formats to the latest.func (cl *TOClient) GetServersCompat(opts toclient.RequestOptions) (tc.ServersV5Response, toclientlib.ReqInf, error) {
	path := "/servers"
	objs := struct {
		Response []tc.ServerV5Response `json:"response"`
		tc.Alerts
	}{}

	if len(opts.QueryParameters) > 0 {
		path += "?" + opts.QueryParameters.Encode()
	}
	reqInf, err := cl.c.TOClient.Req(http.MethodGet, path, nil, opts.Header, &objs)
	if err != nil {
		return tc.ServersV5Response{}, reqInf, errors.New("request: " + err.Error())
	}

	resp := tc.ServersV5Response{Alerts: objs.Alerts}

	for _, sv := range objs.Response {
		resp.Response = append(resp.Response, sv.Response)
	}

	return resp, reqInf, nil
}/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/toreqold/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/toreqold/client.godeliveryServiceServersToLatestparametersToLatestserverUpdateStatusToLatestgithub.com/apache/trafficcontrol/v8/traffic_ops/v4-client"github.com/apache/trafficcontrol/v8/traffic_ops/v4-client"TO URL string: '"TO URL string: '"TO URL: '"TO URL: '"Logging in to Traffic Ops '"Logging in to Traffic Ops '" Package toreqold calls the previous Traffic Ops API major version. This should never be imported by anything except toreq. The toreq.Client will automatically fall back to the older client if necessary./Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/toreqold/clientfuncs.go"jobs"getting old server update status from Traffic Ops '"getting old server update status from Traffic Ops '"getting old server update status: "getting old server update status: "setting server update status from Traffic Ops '"setting server update status from Traffic Ops '"setting server update status: "setting server update status: "func (cl *TOClient) GetProfileByName(profileName string) (tc.Profile, toclientlib.ReqInf, error) {
	profile := tc.Profile{}
	reqInf := toclientlib.ReqInf{}
	err := torequtil.GetRetry(cl.NumRetries, "profile_"+profileName, &profile, func(obj interface{}) error {
		toProfiles, toReqInf, err := cl.c.GetProfileByName(profileName)
		if err != nil {
			return errors.New("getting profile '" + profileName + "' from Traffic Ops '" + torequtil.MaybeIPStr(reqInf.RemoteAddr) + "': " + err.Error())
		}
		if len(toProfiles) != 1 {
			return errors.New("getting profile '" + profileName + "'from Traffic Ops '" + torequtil.MaybeIPStr(reqInf.RemoteAddr) + "': expected 1 Profile, got " + strconv.Itoa(len(toProfiles)))
		}

		profile := obj.(*tc.Profile)
		*profile = toProfiles[0]
		reqInf = toReqInf
		return nil
	})

	if err != nil {
		return tc.Profile{}, reqInf, errors.New("getting profile '" + profileName + "': " + err.Error())
	}
	return profile, reqInf, nil
} SetServerUpdateStatus sets the server's update status in Traffic Ops./Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/toreqold/clienthlp.go/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/toreqold/conversions.gosvLatestnssv5DSesnStatnStatsnDssnpnParamsDeliveryServiceV4ToDeliveryServices serversToLatest converts a []tc.Server to []tc.ServerV30. This is necessary, because the old Traffic Ops client doesn't return the same type as the latest client. serverToLatest adds context serverToLatest converts a tc.Server to tc.ServerV30./Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/torequtil/Users/test/Desktop/trafficcontrol/cache-config/t3cutil/toreq/torequtil/torequtil.goCookieCacheDirCookieCacheFileNameCookiesToStringGetTOToolNameAndURLRetryBackoffSecondsStringToCookiesuserNamesleepSecondscurrentRetrygetternumRetriesobjNamehdrNamecookiesStrtoToolNamemath"math"/var/lib/trafficcontrol-cache-config/`/var/lib/trafficcontrol-cache-config/`.cookie".cookie"`json:"cookie"``json:"cookies"`getting uncached: "getting uncached: "getting '%v', sleeping for %v seconds: %v
"getting '%v', sleeping for %v seconds: %v\n"GetRetry %v retries %v took %v
"GetRetry %v retries %v took %v\n"Pow2.0float64file system cookie was empty"file system cookie was empty""Cookie"; "; "tm.toolname"tm.toolname"tm.url"tm.url"Global Parameter tm.toolname not found, config may not be constructed properly!"Global Parameter tm.toolname not found, config may not be constructed properly!"Global Parameter tm.url not found, config may not be constructed properly!"Global Parameter tm.url not found, config may not be constructed properly!" torequtil has utility functions used by toreq and toreqnew which don't require the Traffic Ops client, and thus can be shared. GetRetry attempts to get the given object, retrying with exponential backoff up to cfg.NumRetries. The objName is not used in actual fetching or logic, but only for logging. It can be any printable string, but should be unique and reflect the object being fetched. if the server returned a 404, retrying won't help TODO make backoff configurable? TODO make configurable? MaybeIPStr returns the addr string if it isn't nil, or the empty string if it is. This is intended for logging, to allow logging with one line, whether addr is nil or not. MaybeHdrStr returns the header text if hdr isn't nil, or the empty string if it is. This is intended for logging, to allow logging with one line, whether a header object is nil or not. The hdrName must be the canonically-capitalized header name. TODO move somewhere generic TODO error here? Perl doesn't./Users/test/Desktop/trafficcontrol/cache-config/testing/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/config/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/config/config.goDefaultLoadConfigLocationsTrafficOpsTrafficOpsDBUsersgetStructTagmultiErrorvalidateconfBytesconfPathmesbtoTagfieldNamethingDisallowedjson:"disallowed" envconfig:"TO_USER_DISALLOWED"json:"readOnly" envconfig:"TO_USER_READ_ONLY"Operationsjson:"operations" envconfig:"TO_USER_OPERATIONS"json:"admin" envconfig:"TO_USER_ADMIN"Portaljson:"portal" envconfig:"TO_USER_PORTAL"Federationjson:"federation" envconfig:"TO_USER_FEDERATION"json:"extension" envconfig:"TO_USER_EXTENSION"json:"URL" envconfig:"TO_URL"UserPasswordjson:"password" envconfig:"TO_USER_PASSWORD"json:"users"json:"sslInsecure" envconfig:"SSL_INSECURE"json:"dbname" envconfig:"TODB_NAME"json:"hostname" envconfig:"TODB_HOSTNAME"json:"user" envconfig:"TODB_USER"json:"password" envconfig:"TODB_PASSWORD"json:"port" envconfig:"TODB_PORT"DBTypejson:"type" envconfig:"TODB_TYPE"SSLjson:"ssl" envconfig:"TODB_SSL"json:"description" envconfig:"TODB_DESCRIPTION"TimeoutInSecsjson:"timeoutInSecs" envconfig:"SESSION_TIMEOUT_IN_SECS"json:"debug"Eventjson:"event"json:"error"json:"info"json:"warning"json:"session"json:"logLocations"IncludeSystemTestsjson:"includeSystemTests"json:"trafficOps"json:"trafficOpsDB"json:"default"UseIMSjson:"use_ims"envconfigreflect"reflect"github.com/kelseyhightower/envconfig"github.com/kelseyhightower/envconfig"`json:"trafficOps"``json:"trafficOpsDB"``json:"default"``json:"use_ims"``json:"URL" envconfig:"TO_URL"``json:"password" envconfig:"TO_USER_PASSWORD"``json:"users"``json:"sslInsecure" envconfig:"SSL_INSECURE"``json:"disallowed" envconfig:"TO_USER_DISALLOWED"``json:"readOnly" envconfig:"TO_USER_READ_ONLY"``json:"operations" envconfig:"TO_USER_OPERATIONS"``json:"admin" envconfig:"TO_USER_ADMIN"``json:"portal" envconfig:"TO_USER_PORTAL"``json:"federation" envconfig:"TO_USER_FEDERATION"``json:"extension" envconfig:"TO_USER_EXTENSION"``json:"dbname" envconfig:"TODB_NAME"``json:"hostname" envconfig:"TODB_HOSTNAME"``json:"user" envconfig:"TODB_USER"``json:"password" envconfig:"TODB_PASSWORD"``json:"port" envconfig:"TODB_PORT"``json:"type" envconfig:"TODB_TYPE"``json:"ssl" envconfig:"TODB_SSL"``json:"description" envconfig:"TODB_DESCRIPTION"``json:"session"``json:"logLocations"``json:"includeSystemTests"``json:"timeoutInSecs" envconfig:"SESSION_TIMEOUT_IN_SECS"``json:"debug"``json:"event"``json:"error"``json:"info"``json:"warning"`failed to read CDN configuration: %w"failed to read CDN configuration: %w"failed to parse configuration from '%s': %w"failed to parse configuration from '%s': %w"failed to validate configuration: %w"failed to validate configuration: %w"traffic-ops-client-tests"traffic-ops-client-tests"failed to parse configuration from environment: %w"failed to parse configuration from environment: %w"BuildercopyCheckFprintln"TrafficOps"'%s' must be configured in %s"'%s' must be configured in %s""URL"cannot lookup structTag: %s"cannot lookup structTag: %s"'%s.%s' must be configured in %s"'%s.%s' must be configured in %s""Disallowed""ReadOnly""Operations""Admin""Portal""Federation"TypeOf"json" Package config provides tools to load and validate configuration data for the t3c tests. Config reflects the structure of the test-to-api.conf file. It also implements github.com/apache/trafficcontrol/v8/lib/go-log.Config for logging. TrafficOps is the section of a Config dealing with Traffic Ops-related information. URL is the URL of a Traffic Ops instance being used for the tests. UserPassword is the password of *all* users in the 'Users' property. Users are the Traffic Ops users to be used in testing. Insecure instructs tests whether or not to skip certificate verification. Users structures are the "users" section of the "trafficOps" section of the testing configuration file, and are a collection of the usernames of  Traffic Ops users that are used in testing. Disallowed is the username of a "disallowed" Traffic Ops user. Deprecated: This is unused in t3c tests, and may be removed in the future. ReadOnly is the username of a Traffic Ops user with "read-only" Permissions. Operations is the username of a Traffic Ops user with "operations"-level Admin is the username of a Traffic Ops user with the special "admin" Role. Portal is the username of a Traffic Ops user with "portal"-level Federation is the username of a Traffic Ops user with "federation"-level Permissions. Extension is the username of a Traffic Ops user allowed to manipulate extensions (i.e. creating new serverchecks). These tests currently use Traffic Ops API version 3.0, so the only username that can possibly work is literally "extension". This property MUST be configured to be "extension", or the tests will erroneously fail, no matter what "Priv Level" and/or Permissions you give the user! TrafficOpsDB is the section of a Config dealing with Traffic Ops DB-related Name is the name of a PostgreSQL database used by the testing Traffic Ops instance. Hostname is the network hostname where the Traffic Ops database is running. User is the name of a PostgreSQL user/role that has permissions to manipulate the database identified in Name. Password is the password for the PostgreSQL user/role given in User. Port is the port on which PostgreSQL listens for connections to the database used by the testing Traffic Ops instance. DBType is a Go database/sql driver name to use when connecting to the Traffic Ops testing instance's database. This MUST be "Pg" (or omitted/blank/null, which uses the default value of "Pg"). Deprecated: Since Traffic Ops 3.0, only PostgreSQL databases are supported, so this field has no purpose and will probably be removed at some point. SSL instructs the database driver that the PostgreSQL instance used by the tests requires SSL-secured connections. Description is a textual description of the database. Deprecated: This unused field serves no purpose, and will likely be removed in the future. Default represents the default values of a set of options that can be overridden by command-line options. IncludeSystemTests has no effect or known purpose. Deprecated: This field has no effect or known purpose. Session contains default configuration options for authenticated sessions with the Traffic Ops API. Locations is a set of logging locations as defined by the github.com/apache/trafficcontrol/v8/lib/go-log package. LoadConfig reads the given configuration file into a Config. validate all required fields in the config. ErrorLog provides the location to which error-level messages should be logged. WarningLog provides the location to which warning-level messages should be InfoLog provides the location to which info-level messages should be DebugLog provides the location to which debug-level messages should be EventLog provides the location to which event-level messages should be/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/tcdata/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/tcdata/fixtures.goCDNFederationsCDNsCacheGroupsDeliveryServicesDeliveryServiceRequestCommentsDeliveryServiceRequestsDeliveryServicesRegexesDeliveryServicesRequiredCapabilitiesDivisionsFederationResolversFederationUsersNewTCDataNoAuthTOSessionOriginsPhysLocationsProfileParametersRegionsRolesServerCheckExtensionsServerChecksServerServerCapabilitiesServiceCategoriesSetupAPICapabilitiesSetupCapabilitiesSetupJobsSetupRoleCapabilitiesSetupRolesSetupTenantsSetupToExtensionsSetupTypesStatusesSteeringTargetsTCDataTCObjTCObjFuncsTOSessionTenantsTypesWrapClientWrapClientDatWrapClientDatDBWrapNewClientDatexecErrorexecSQLfixturesPathTrafficControlDeliveryServiceRegexesTestDSIDProfileParameterV5ASNsjson:"asns"json:"cdns"CDNLocksjson:"cdnlocks"json:"cachegroups"json:"capability"json:"deliveryServicesRegexes"json:"deliveryServiceRequests"json:"deliveryServiceRequestComments"json:"deliveryservices"json:"deliveryservicesRequiredCapabilities"DeliveryServiceServerAssignmentsjson:"deliveryServiceServerAssignments"TopologyBasedDeliveryServicesRequiredCapabilitiesjson:"topologyBasedDeliveryServicesRequiredCapabilities"json:"divisions"json:"federations"json:"federation_resolvers"json:"origins"json:"profiles"json:"profileParameters"json:"physLocations"json:"regions"json:"roles"json:"serverServerCapabilities"json:"serverCapabilities"json:"serviceCategories"json:"statuses"json:"staticdnsentries"StatsSummariesjson:"statsSummaries"json:"tenants"json:"servercheck_extensions"json:"types"json:"steeringTargets"Serverchecksjson:"serverchecks"InvalidationJobsjson:"invalidationJobs"InvalidationJobsRefetchjson:"invalidationJobsRefetch"TestDataLoadFixturesQueueUpdatesForServerSetupSessionTeardownSessionSwitchSessionOpenConnectionSetupTestDataSetupTmusersTeardownWithObjstcdataCannot unmarshal fixtures json %s"Cannot unmarshal fixtures json %s"Cannot unmarshal fixtures json %v"Cannot unmarshal fixtures json %v" LoadFixtures ...chattyPrinterlastNameMulastNameUpdatefhighPrecisionTimeranfailedskippedhelperPCshelperNamescleanupscleanupNamecleanupPcfinishedinFuzzFnchattybenchhasSubcleanupStartedrunnerisParallelparentcreatordurationbarrierlastRaceErrorsraceErrorLoggedtempDirMutempDirErrtempDirSeqcheckFuzzFnframeSkipdecorateflushToParentprivatesetRanFailFailedFailNowlogDepthLogfSkipSkipfSkipNowSkippedHelperTempDirrunCleanupresetRacescheckRacestestContextmatcherfilterMatchtesting.matchesverifytesting.verifyfiltermatchFuncsubNamesfullNameclearSubNamesuniqueisFuzzingstartParallelnumWaitingmaxParallelwaitParallelisEnvSetParallelpanicHandlingFrameopaquefuncInfoEntryFileLinestartLine_funcNotInHeapnihFuncIDFuncFlagentryOffnameOffdeferreturnpcsppcfilepclnnpcdatacuOffsetfuncIDnfuncdataisInlinedmoduledatapcHeadermagicpad1pad2minLCptrSizenfuncnfilestextStartfuncnameOffsetfiletabOffsetpctabOffsetpclnOffsetfunctabentryofffuncofftextsectvaddrbaseaddrITabInterFunptabEntrymodulehashmodulenamelinktimehashruntimehashinitTasknfnsbitvectorbytedataptrbitbvfuncnametabcutabfiletabpctabpclntableftabfindfunctabminpcmaxpcetextnoptrdataenoptrdataedatabssebssnoptrbssenoptrbsscovctrsecovctrsgcdatagcbsstypesetypesrodatagofunctextsectmaptypelinksitablinksptabpluginpathpkghashesinittasksmodulehasheshasmainbadgcdatamaskgcbssmasktypemaptextAddrtextOfffuncNamedatapvalid_FuncsrcFuncPCFunction/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/tcdata/servers.gohostnamerespServercannot GET Server by hostname '%s': %v"cannot GET Server by hostname '%s': %v"server '%s' had nil ID"server '%s' had nil ID"

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/tcdata/session.gotoReqTimeouttoNewPasstoNewUsertoOldPasstoOldUsergithub.com/lib/pq"github.com/lib/pq"to-api-v4-client-tests"to-api-v4-client-tests"LoginWithAgentLogoutWithAgent intentially skip errors so that we can continue with setup in the event of a 403/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/tcdata/tcdata.gototestgithub.com/apache/trafficcontrol/v8/cache-config/testing/ort-tests/config"github.com/apache/trafficcontrol/v8/cache-config/testing/ort-tests/config"github.com/apache/trafficcontrol/v8/lib/go-tc/totest"github.com/apache/trafficcontrol/v8/lib/go-tc/totest" Package tcdata provides dynamic loading/unloading of ATC objects to/from a Traffic Ops instance. This should ONLY be imported by tests, that's the library's only purpose./Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/tcdata/todb.gosslStrsqlsqlStmtencryptedPasswordauthdatabase/sql"database/sql"github.com/apache/trafficcontrol/v8/traffic_ops/traffic_ops_golang/auth"github.com/apache/trafficcontrol/v8/traffic_ops/traffic_ops_golang/auth"require"require"disable"disable"User: %s, Password: len %d, Hostname: %s, DB: %s
"User: %s, Password: len %d, Hostname: %s, DB: %s\n"postgres"postgres"postgres://%s:%s@%s/%s?sslmode=%s"postgres://%s:%s@%s/%s?sslmode=%s"opening database: %v
"opening database: %v\n"transaction failed: %w"transaction failed: %w"setting up Roles: %w"setting up Roles: %w"setting up capabilities: %w"setting up capabilities: %w"setting up roleCapabilities: %w"setting up roleCapabilities: %w"setting up APICapabilities: %w"setting up APICapabilities: %w"setting up tenants: %w"setting up tenants: %w"setting up tm_user: %w"setting up tm_user: %w"setting up types: %w"setting up types: %w"setting up to_extensions: %w"setting up to_extensions: %w"encountered error '%w' during execution of query: %s"encountered error '%w' during execution of query: %s"
INSERT INTO role (name, description, priv_level) VALUES ('disallowed','Block all access',0) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('read-only','Block all access', 10) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('operations','Block all access', 20) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('admin','super-user', 30) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('portal','Portal User', 2) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('steering','Steering User', 15) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('federation','Role for Secondary CZF', 15) ON CONFLICT DO NOTHING;
`
INSERT INTO role (name, description, priv_level) VALUES ('disallowed','Block all access',0) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('read-only','Block all access', 10) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('operations','Block all access', 20) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('admin','super-user', 30) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('portal','Portal User', 2) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('steering','Steering User', 15) ON CONFLICT DO NOTHING;
INSERT INTO role (name, description, priv_level) VALUES ('federation','Role for Secondary CZF', 15) ON CONFLICT DO NOTHING;
`
INSERT INTO capability (name, description) VALUES ('all-read','Full read access') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('all-write','Full write access') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('cdn-read','View CDN configuration') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('asns-read', 'Read ASNs') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('asns-write', 'Write ASNs') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('cache-groups-read', 'Read CGs') ON CONFLICT DO NOTHING;
`
INSERT INTO capability (name, description) VALUES ('all-read','Full read access') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('all-write','Full write access') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('cdn-read','View CDN configuration') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('asns-read', 'Read ASNs') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('asns-write', 'Write ASNs') ON CONFLICT DO NOTHING;
INSERT INTO capability (name, description) VALUES ('cache-groups-read', 'Read CGs') ON CONFLICT DO NOTHING;
`
INSERT INTO api_capability (http_method, route, capability) VALUES ('GET', '/asns', 'asns-read') ON CONFLICT DO NOTHING;
INSERT INTO api_capability (http_method, route, capability) VALUES ('POST', '/asns', 'asns-write') ON CONFLICT DO NOTHING;
INSERT INTO api_capability (http_method, route, capability) VALUES ('GET', '/cachegroups', 'cache-groups-read') ON CONFLICT DO NOTHING;
`
INSERT INTO api_capability (http_method, route, capability) VALUES ('GET', '/asns', 'asns-read') ON CONFLICT DO NOTHING;
INSERT INTO api_capability (http_method, route, capability) VALUES ('POST', '/asns', 'asns-write') ON CONFLICT DO NOTHING;
INSERT INTO api_capability (http_method, route, capability) VALUES ('GET', '/cachegroups', 'cache-groups-read') ON CONFLICT DO NOTHING;
`
INSERT INTO role_capability (role_id, cap_name) VALUES (4,'all-write') ON CONFLICT DO NOTHING;
INSERT INTO role_capability (role_id, cap_name) VALUES (4,'all-read') ON CONFLICT DO NOTHING;
`
INSERT INTO role_capability (role_id, cap_name) VALUES (4,'all-write') ON CONFLICT DO NOTHING;
INSERT INTO role_capability (role_id, cap_name) VALUES (4,'all-read') ON CONFLICT DO NOTHING;
`DerivePasswordpassword encryption failed %w"password encryption failed %w"
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`','`','`', 1, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 1, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 2, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 2, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 3, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 3, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 4, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 4, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 5, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 5, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 6, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 6, 1);
INSERT INTO tm_user (username, local_passwd, role, tenant_id) VALUES ('`', 3, 1);
`', 3, 1);
`
INSERT INTO tenant (name, active, parent_id, last_updated) VALUES ('root', true, null, '2018-01-19 19:01:21.327262');
INSERT INTO tenant (name, active, parent_id, last_updated) VALUES ('badtenant', true, 1, '2018-01-19 19:01:21.327262');
`
INSERT INTO tenant (name, active, parent_id, last_updated) VALUES ('root', true, null, '2018-01-19 19:01:21.327262');
INSERT INTO tenant (name, active, parent_id, last_updated) VALUES ('badtenant', true, 1, '2018-01-19 19:01:21.327262');
`
INSERT INTO job (id, ttl_hr, asset_url, start_time, entered_time, job_user, last_updated, job_deliveryservice, invalidation_type) VALUES (100, 24, 'http://cdn2.edge/job1/.*', '2018-01-19 21:01:14.000000', '2018-01-19 21:01:14.000000', (SELECT id FROM tm_user where username = 'admin'), '2018-01-19 21:19:32.468643', 100, 'REFRESH');
INSERT INTO job (id, ttl_hr, asset_url, start_time, entered_time, job_user, last_updated, job_deliveryservice, invalidation_type) VALUES (200, 36, 'http://cdn2.edge/job2/.*', '2018-01-19 21:09:34.000000', '2018-01-19 21:09:34.000000', (SELECT id FROM tm_user where username = 'admin'), '2018-01-19 21:19:32.450915', 200, 'REFETCH');
INSERT INTO job (id, ttl_hr, asset_url, start_time, entered_time, job_user, last_updated, job_deliveryservice, invalidation_type) VALUES (300, 72, 'http://cdn2.edge/job3/.*', '2018-01-19 21:14:34.000000', '2018-01-19 21:14:34.000000', (SELECT id FROM tm_user where username = 'admin'), '2018-01-19 21:19:32.460870', 100, 'REFRESH');
`
INSERT INTO job (id, ttl_hr, asset_url, start_time, entered_time, job_user, last_updated, job_deliveryservice, invalidation_type) VALUES (100, 24, 'http://cdn2.edge/job1/.*', '2018-01-19 21:01:14.000000', '2018-01-19 21:01:14.000000', (SELECT id FROM tm_user where username = 'admin'), '2018-01-19 21:19:32.468643', 100, 'REFRESH');
INSERT INTO job (id, ttl_hr, asset_url, start_time, entered_time, job_user, last_updated, job_deliveryservice, invalidation_type) VALUES (200, 36, 'http://cdn2.edge/job2/.*', '2018-01-19 21:09:34.000000', '2018-01-19 21:09:34.000000', (SELECT id FROM tm_user where username = 'admin'), '2018-01-19 21:19:32.450915', 200, 'REFETCH');
INSERT INTO job (id, ttl_hr, asset_url, start_time, entered_time, job_user, last_updated, job_deliveryservice, invalidation_type) VALUES (300, 72, 'http://cdn2.edge/job3/.*', '2018-01-19 21:14:34.000000', '2018-01-19 21:14:34.000000', (SELECT id FROM tm_user where username = 'admin'), '2018-01-19 21:19:32.460870', 100, 'REFRESH');
`
INSERT INTO type (name, description, use_in_table) VALUES ('CHECK_EXTENSION_BOOL', 'Extension for checkmark in Server Check', 'to_extension');
INSERT INTO type (name, description, use_in_table) VALUES ('CHECK_EXTENSION_NUM', 'Extension for int value in Server Check', 'to_extension');
INSERT INTO type (name, description, use_in_table) VALUES ('CHECK_EXTENSION_OPEN_SLOT', 'Open slot for check in Server Status', 'to_extension');
`
INSERT INTO type (name, description, use_in_table) VALUES ('CHECK_EXTENSION_BOOL', 'Extension for checkmark in Server Check', 'to_extension');
INSERT INTO type (name, description, use_in_table) VALUES ('CHECK_EXTENSION_NUM', 'Extension for int value in Server Check', 'to_extension');
INSERT INTO type (name, description, use_in_table) VALUES ('CHECK_EXTENSION_OPEN_SLOT', 'Open slot for check in Server Status', 'to_extension');
`
INSERT INTO to_extension (name, version, info_url, isactive, script_file, servercheck_column_name, type) VALUES ('OPEN', '1.0.0', '-', false, '', 'aa', (SELECT id FROM type WHERE name = 'CHECK_EXTENSION_OPEN_SLOT'));
INSERT INTO to_extension (name, version, info_url, isactive, script_file, servercheck_column_name, type) VALUES ('OPEN', '1.0.0', '-', false, '', 'ab', (SELECT id FROM type WHERE name = 'CHECK_EXTENSION_OPEN_SLOT'));
	`
INSERT INTO to_extension (name, version, info_url, isactive, script_file, servercheck_column_name, type) VALUES ('OPEN', '1.0.0', '-', false, '', 'aa', (SELECT id FROM type WHERE name = 'CHECK_EXTENSION_OPEN_SLOT'));
INSERT INTO to_extension (name, version, info_url, isactive, script_file, servercheck_column_name, type) VALUES ('OPEN', '1.0.0', '-', false, '', 'ab', (SELECT id FROM type WHERE name = 'CHECK_EXTENSION_OPEN_SLOT'));
	`
	DELETE FROM api_capability;
	DELETE FROM server_server_capability;
	DELETE FROM server_capability;
	DELETE FROM to_extension;
	DELETE FROM staticdnsentry;
	DELETE FROM job;
	DELETE FROM log;
	DELETE FROM asn;
	DELETE FROM tm_user;
	DELETE FROM role;
	DELETE FROM capability;
	ALTER SEQUENCE role_id_seq RESTART WITH 1;
	DELETE FROM deliveryservice_regex;
	DELETE FROM regex;
	DELETE FROM deliveryservice_server;
	DELETE FROM deliveryservice;
	DELETE FROM origin;
	DELETE FROM ip_address;
	DELETE FROM interface;
	DELETE FROM server;
	DELETE FROM phys_location;
	DELETE FROM region;
	DELETE FROM division;
	DELETE FROM profile;
	DELETE FROM parameter;
	DELETE FROM profile_parameter;
	DELETE FROM topology_cachegroup_parents;
	DELETE FROM topology_cachegroup;
	DELETE FROM topology;
	DELETE FROM cachegroup;
	DELETE FROM coordinate;
	DELETE FROM type;
	DELETE FROM status s WHERE s.name NOT IN ('OFFLINE', 'ONLINE', 'PRE_PROD', 'ADMIN_DOWN', 'REPORTED');
	DELETE FROM snapshot;
	DELETE FROM cdn;
	DELETE FROM service_category;
	DELETE FROM tenant;
	ALTER SEQUENCE tenant_id_seq RESTART WITH 1;
`
	DELETE FROM api_capability;
	DELETE FROM server_server_capability;
	DELETE FROM server_capability;
	DELETE FROM to_extension;
	DELETE FROM staticdnsentry;
	DELETE FROM job;
	DELETE FROM log;
	DELETE FROM asn;
	DELETE FROM tm_user;
	DELETE FROM role;
	DELETE FROM capability;
	ALTER SEQUENCE role_id_seq RESTART WITH 1;
	DELETE FROM deliveryservice_regex;
	DELETE FROM regex;
	DELETE FROM deliveryservice_server;
	DELETE FROM deliveryservice;
	DELETE FROM origin;
	DELETE FROM ip_address;
	DELETE FROM interface;
	DELETE FROM server;
	DELETE FROM phys_location;
	DELETE FROM region;
	DELETE FROM division;
	DELETE FROM profile;
	DELETE FROM parameter;
	DELETE FROM profile_parameter;
	DELETE FROM topology_cachegroup_parents;
	DELETE FROM topology_cachegroup;
	DELETE FROM topology;
	DELETE FROM cachegroup;
	DELETE FROM coordinate;
	DELETE FROM type;
	DELETE FROM status s WHERE s.name NOT IN ('OFFLINE', 'ONLINE', 'PRE_PROD', 'ADMIN_DOWN', 'REPORTED');
	DELETE FROM snapshot;
	DELETE FROM cdn;
	DELETE FROM service_category;
	DELETE FROM tenant;
	ALTER SEQUENCE tenant_id_seq RESTART WITH 1;
`transaction begin failed: %w"transaction begin failed: %w"transaction commit failed %w %v"transaction commit failed %w %v" OpenConnection ... SetupTestData sets up initial data needed by the test suite to perform any tests. SetupRoles ... SetupTmusers ... Creates users in different tenants SetupTenants ... TODO: root tenant must be present in initial database.  "badtenant" is needed for now so tests can be done with a tenant outside the user's tenant.  That should be removed once User API tests are in place rather than the SetupUsers defined above. SetupJobs ... SetupTypes Set up to_extension types SetupToExtensions setup open slot in to_extension table Teardown - ensures that the data is cleaned up for a fresh run execSQL .../Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/tcdata/withobjs.goclFdatwithFuncsasserttestingutils"testing"github.com/apache/trafficcontrol/v8/lib/go-util/assert"github.com/apache/trafficcontrol/v8/lib/go-util/assert"github.com/apache/trafficcontrol/v8/traffic_ops/testing/api/utils"github.com/apache/trafficcontrol/v8/traffic_ops/testing/api/utils"iota34CreateV5SessionRequireNoErrorCannot open db: %v"Cannot open db: %v"NoErrorUnable to close connection to db: %v"Unable to close connection to db: %v"CreateTestASNsDeleteTestASNsCreateTestCacheGroupsDeleteTestCacheGroupsCreateTestCachegroupsDeliveryServicesDeleteTestCachegroupsDeliveryServicesCreateTestCDNsDeleteTestCDNsCreateTestCDNFederationsDeleteTestCDNFederationsCreateTestCoordinatesDeleteTestCoordinatesCreateTestDeliveryServicesDeleteTestDeliveryServicesCreateTestDeliveryServicesRegexesDeleteTestDeliveryServicesRegexesCreateTestDeliveryServiceRequestsDeleteTestDeliveryServiceRequestsCreateTestDeliveryServiceRequestCommentsDeleteTestDeliveryServiceRequestCommentsCreateTestDeliveryServicesRequiredCapabilitiesDeleteTestDeliveryServicesRequiredCapabilities11CreateTestDivisionsDeleteTestDivisionsCreateTestFederationUsersDeleteTestFederationUsersCreateTestFederationResolversDeleteTestFederationResolvers14CreateTestJobsDeleteTestJobs15CreateTestOriginsDeleteTestOriginsCreateTestParametersDeleteTestParameters17CreateTestPhysLocationsDeleteTestPhysLocations18CreateTestProfilesDeleteTestProfiles19CreateTestProfileParametersDeleteTestProfileParameters20CreateTestRegionsDeleteTestRegions21CreateTestRolesDeleteTestRoles22CreateTestServerCapabilitiesDeleteTestServerCapabilities23CreateTestServerChecksDeleteTestServerChecks24CreateTestServerServerCapabilitiesDeleteTestServerServerCapabilities25CreateTestServersDeleteTestServers27CreateTestServiceCategoriesDeleteTestServiceCategories26CreateTestStatusesDeleteTestStatusesCreateTestStaticDNSEntriesDeleteTestStaticDNSEntries29StrPtrsteering"steering"pa$$word"pa$$word"CreateTestSteeringTargetsDeleteTestSteeringTargets30CreateTestTenantsDeleteTestTenants31CreateTestServerCheckExtensionsDeleteTestServerCheckExtensionsCreateTestTopologiesDeleteTestTopologies33CreateTestTypesDeleteTestTypesCreateTestUsersForceDeleteTestUsers CacheGroupParameters WrapClient is a temp func that creates a func(t *testing.T) from a *toclient.Session and a func(t *testing.T, toClient *toclient.Session). WrapClient is a temp func that creates a func(t *testing.T) from a *toclient.Session, totest.TrafficControl, and a func(t *testing.T, toClient *toclient.Session, dat totest.TrafficControl). WrapNewClientDat is like WrapClientDat but creates a new custom TO client instead of using the global variable. WithObjs creates the objs in order, runs f, and defers deleting the objs in the same order. Because deletion is deferred, using this ensures objects will be cleaned up if f panics or calls t.Fatal, as much as possible. Note that f itself may still create things which are not cleaned up properly, and likewise, the object creation and deletion tests themselves may fail. All tests in the Traffic Ops API Testing framework use the same Traffic Ops instance, with persistent data. Because of this, when any test fails, all subsequent tests should be considered invalid, irrespective whether they pass or fail. Users are encouraged to use `go test -failfast`. CacheGroupParameters:                 {WrapClientDat(&TOSession, r.TestData, totest.CreateTestCacheGroupParameters), WrapClient(&TOSession, totest.DeleteTestCacheGroupParameters)},/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/util/Users/test/Desktop/trafficcontrol/cache-config/testing/ort-tests/util/util.goDiffFilesRMGitfilterOutCommentsgitDiffFilesreadFilecntfileDatad1d1Datad2d2DatafirstFilesecondFilestr1str2filename is empty."filename is empty."--no-index"--no-index"git diff returned error: "git diff returned error: "FromSlashrefusing to delete / for safety"refusing to delete / for safety"rm"rm"-rf"-rf".git".git" DiffFiles returns the empty string if there was no diff or the diff if there was, and any error.	cmd.Dir = atsConfigDir no diff, files match some other error diff, files don't match RMGit attemps to remove the .git directory in the given dir, and returns any error. use filepath to normalize, e.g. `/././` will be normalized to `/`./Users/test/Desktop/trafficcontrol/docs/source/_templates/layout.html/Users/test/Desktop/trafficcontrol/docs/source/_templates/Users/test/Desktop/trafficcontrol/docs/source/Users/test/Desktop/trafficcontrol/docs{# Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. #}
{% extends "!layout.html" %}
{% block extrahead %}
    
{% endblock %}
linkhref{{ pathto('_static/theme_overrides.css', True) }}relstylesheettypetext/css/Users/test/Desktop/trafficcontrol/experimental/Users/test/Desktop/trafficcontrol/experimental/certificate_auth/Users/test/Desktop/trafficcontrol/experimental/certificate_auth/certs/Users/test/Desktop/trafficcontrol/experimental/certificate_auth/certs/generate_certs.goCertificateKeyPairCertificatePEMPairGenerateClientCertificateGenerateIntermediateCertificateGenerateRootCACertificateGenerateServerCertificateParseCertificateKeyPairVerifyCertificatesclientCNinterCNrootCNserverCNclientIntermediateChainclientPEMPairintermediatePEMPairrootCAPEMPairserverPEMPaircertPemBlockcertificatekeyPairpemPairprivPemBlockcertDERBytescertPEMcertPEMPaircertPrivKeycertPrivKeyByescertPrivKeyPEMserialNumberrootKeyPairintermediateintermediateKeyPairuidPkixclientCertintermediatePoolrootPoolserverCertasn1bigpkixrsacrypto/rand"crypto/rand"crypto/rsa"crypto/rsa"crypto/x509/pkix"crypto/x509/pkix"encoding/asn1"encoding/asn1""flag"math/big"math/big"NpubPrecomputedValuesCRTValueCoeffModulusNatlimbssetBigSetOverflowingBytescmpGeqassignshiftInExpandForresetFormaybeSubtractModulusmontgomeryRepresentationmontgomeryReductionmontgomeryMulExpShortVarTimeleadingm0invrrDpDqQinvCRTValuesPrimesPrecomputedprivDecryptPrecomputeCertificatePEMPrivateKeyPEMroot.local"root.local"intermediate.local"intermediate.local"client.local"client.local"server.local"server.local"userid"userid"StringVar"uid"[Optional] The User ID value to be added to the client certificate"[Optional] The User ID value to be added to the client certificate"Failed to generate and sign Root CA certificate
Err: %s
"Failed to generate and sign Root CA certificate\nErr: %s\n"rootca.crt.pem"rootca.crt.pem"rootca.key.pem"rootca.key.pem"Failed to generate and sign Intermediate certificate
Err: %s
"Failed to generate and sign Intermediate certificate\nErr: %s\n"intermediate.crt.pem"intermediate.crt.pem"intermediate.key.pem"intermediate.key.pem"Failed to generate and sign Server certificate
Err: %s
"Failed to generate and sign Server certificate\nErr: %s\n"server.crt.pem"server.crt.pem"server.key.pem"server.key.pem"Failed to generate and sign Client certificate
Err: %s
"Failed to generate and sign Client certificate\nErr: %s\n"client.crt.pem"client.crt.pem"client.key.pem"client.key.pem"client-intermediate-chain.crt.pem"client-intermediate-chain.crt.pem"failed to verify certificate: %s"failed to verify certificate: %s"ParsePKCS8PrivateKeyfailed to parse private key: %w"failed to parse private key: %w"failed to parse public key: %w"failed to parse public key: %w"NewIntMaxInt649223372036854775807ATC"ATC"Apache"Apache"US"US"Colorado"Colorado"Denver"Denver"KeyUsageDigitalSignatureKeyUsageCertSignKeyUsageCRLSign4096failed to generate RSA key: %w"failed to generate RSA key: %w"CreateCertificatefailed to create certificate: %w"failed to create certificate: %w"CERTIFICATE"CERTIFICATE"MarshalPKCS8PrivateKeyfailed to marshal private key to PKCS8: %w"failed to marshal private key to PKCS8: %w"PRIVATE KEY"PRIVATE KEY"Failed to parse root cert and key"Failed to parse root cert and key"ExtKeyUsageServerAuthExtKeyUsageClientAuth234219200300KeyUsageKeyAgreement127IPv6loopbackKeyUsageKeyEnciphermentFailed to parse intermediate cert and key"Failed to parse intermediate cert and key"NewCertPoolfailed to parse client cert and key: %w"failed to parse client cert and key: %w"failed to verify client cert and key: %w"failed to verify client cert and key: %w"failed to parse server cert and key: %w"failed to parse server cert and key: %w" CertificateKeyPair contains the parsed representation of a certificate and private key. CertificatePEMPair contains the PEM encoded certificate and private key. useEcdsa = false //TODO: Enable and refactor ParseCertificateKeyPair decodes the provided PEM pair (key, cert) and returns a parsed private key and x509 certificate. GenereateRootCACertificate creates a Root CA certificate that can be used for signing intermediate, client, and server x509 certificates. GenerateIntermediateCeertificate creates an intermediate based on the provided Root certificate. This certificate can be used for signing client and server certificates to establish a chain to the Root certificate. GenerateClientCertificate creates and signs a certificate based on the provided RootCA. This differs from the Server certificate in that it includes the OID for LDAP UID as well as Client Auth key usage. Currently the key is an RSA key, which also entails adding KeyEncipherment key usage. LDAP OID reference: https://ldap.com/ldap-oid-reference-guide/ 0.9.2342.19200300.100.1.1 	uid Attribute Type GenerateServerCertificate creates and signs a certificate based on the provided RootCA. This differs from the Client certificate in that it ServerAuth key usage. It also does NOT include the OID for LDAP UID. VerifyCertificates checks that the client and server certificates match the Root and Intermediate chains.choiceDecrypterOptsSignerOpts/Users/test/Desktop/trafficcontrol/experimental/certificate_auth/example/Users/test/Desktop/trafficcontrol/experimental/certificate_auth/example/client/Users/test/Desktop/trafficcontrol/experimental/certificate_auth/example/client/client.gorespBodyLoadX509KeyPair../certs/client-intermediate-chain.crt.pem"../certs/client-intermediate-chain.crt.pem"../certs/client.key.pem"../certs/client.key.pem"https://server.local:8443/api/4.0/user/login"https://server.local:8443/api/4.0/user/login"NewBufferString LoadX509KeyPair can also load certificate chain with intermediates Verify Success Verify Cookie(s)/Users/test/Desktop/trafficcontrol/experimental/certificate_auth/example/server/Users/test/Desktop/trafficcontrol/experimental/certificate_auth/example/server/server.goHelloHandlerhandlertlsConfigServeMuxroutingNodeHandlerResponseWriterWriteHeaderServeHTTPmappingfindeachPairchildrenmultiChildemptyChildaddPatternaddSegmentsaddChildfindChildmatchMethodAndPathmatchPathmatchingMethodsmatchingMethodsPathroutingIndexroutingIndexKeymultispossiblyConflictingPatternsserveMux121muxEntryeshostsmuxhandleFuncfindHandlerredirectToPathSlashshouldRedirectRLockedtreepatternsmux121matchOrRedirectHandleHandleFuncregisterregisterErrNewServeMuxRequestClientCertConnStateListenerconnReaderCondnotifyListnotifycopyCheckerLcheckerBroadcasthasBytebyteBufinReadabortedremaincrunlockstartBackgroundReadbackgroundReadabortPendingReadsetReadLimitsetInfiniteReadLimithitReadLimithandleReadErrorrwcremoteAddrwerrbufrbufwlastMethodcurReqcurStatehijackedvhijackedhijackLockedreadRequestfinalFlushcloseWriteAndWaitsetStategetStateserveWaitGroupwgDisableGeneralOptionsHandlerTLSConfigReadTimeoutReadHeaderTimeoutWriteTimeoutIdleTimeoutMaxHeaderBytesBaseContextConnContextinShutdowndisableKeepAlivesnextProtoErrlistenersactiveConnonShutdownlistenerGroupnewConnmaxHeaderBytesinitialReadLimitSizetlsHandshakeTimeoutRegisterOnShutdowncloseIdleConnscloseListenersLockedListenAndServeshouldConfigureHTTP2ForServeServeServeTLStrackListenertrackConnidleTimeoutreadHeaderTimeoutdoKeepAlivesshuttingDownSetKeepAlivesEnabledListenAndServeTLSsetupHTTP2_ServeTLSsetupHTTP2_ServeonceSetNextProtoDefaults_Serveserver.local:8443"server.local:8443"../certs/server.crt.pem"../certs/server.crt.pem"../certs/server.key.pem"../certs/server.key.pem"error listening to port: %v"error listening to port: %v"Client cert subject: "Client cert subject: "Hello"Hello"ReadWriterresponsechunkWriterheaderwroteHeaderchunkingcwwriteHeaderreqBodywants10KeepAlivewriteContinueMucanWriteContinuehandlerHeadercalledHeaderwrittencontentLengthcloseAfterReplyfullDuplexrequestBodyLimitHittrailershandlerDonedateBufclenBufstatusBufcloseNotifyChdidCloseNotifyEnableFullDuplexfinalTrailersdeclareTrailerrequestTooLargedisableWriteContinuebodyAllowedfinishRequestshouldReuseConnectionclosedRequestBodyEarlyFlushErrorsendExpectationFailedHijackCloseNotify/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/cypress/support/component-index.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/cypress/support/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/cypress/Users/test/Desktop/trafficcontrol/experimental/traffic-portal
  
    data-cy-roottitleComponents Appmetaviewportwidth=device-width,initial-scale=1.0http-equivX-UA-CompatibleIE=edgecharsetutf-8<!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/app.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/srctp-alerttp-sidebartp-header<!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/asns/detail/asn-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/asns/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/asns/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core

mat-cardappearanceoutlinedclasspage-content single-column
	
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="asn">
		
		
	</form>
mat-card-actionsalign
			<button mat-raised-button type="button" *ngIf="!isNew" color="warn" (click)="deleteAsn()">Delete</button>
			buttonmat-raised-buttonsubmitcolorprimarySavemat-card-contentcontainer
			mat-form-field*ngIf!isNew
				matInputlastUpdateddisabledreadonly[defaultValue]asn.lastUpdatedmat-labelLast Updated
				<mat-select name="cachegroup" [(ngModel)]="asn.cachegroupId" required>
					<mat-option *ngFor="let cachegroup of cacheGroups" [value]="cachegroup.id">{{cachegroup.name}}</mat-option>
				</mat-select>
				mat-hint
					<a mat-icon-button [disabled]="!asn.cachegroupId" class="small-icon-button" matTooltip="View Cache Group Details" aria-label="View Cache Group Details" color="primary" [routerLink]="'/core/cache-groups/' + asn.cachegroupId" target="_blank">
						
					</a>
				mat-iconCache Group
				<input matInput type="number" name="asn" required [(ngModel)]="asn.asn" />
			asn.idtp-loading!asn/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/asns/table/asns-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/asns/table


page-fabmat-fabCreate a new ASNauth.hasPermission('ASN:CREATE')routerLinkpage-content
	<tp-generic-table
		[data]="asns | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="asns"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>
search-container
		<input type="search" name="fuzzControl" aria-label="Fuzzy Search ASNs" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/cache-group-details/cache-group-details.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/cache-group-detailspage-content triple-column-responsive
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="cacheGroup">
		actions-container
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="delete()">Delete</button>
			pair
				<mat-checkbox name="fallbackToClosest" [(ngModel)]="cacheGroup.fallbackToClosest">Fall back to closest on localization failure</mat-checkbox>
			
					
					<mat-select name="fallbacks" multiple [(ngModel)]="cacheGroup.fallbacks">
						
					</mat-select>
				mat-option*ngForlet cg of fallbacks(){{cg.name}}
				<mat-select name="localizationMethods" multiple required [(ngModel)]="cacheGroup.localizationMethods" (selectionChange)="updateLocalizationMethods()">
					<mat-option *ngFor="let method of localizationMethods" [value]="method">{{localizationMethodToString(method)}}</mat-option>
				</mat-select>
			Allowed Client Localization Methods
					<input type="number" matInput min="-180" max="180" step="0.001" name="longitude" [(ngModel)]="cacheGroup.longitude" required/>
				
					<input type="number" matInput min="-90" max="90" step="0.001" name="latitude" [(ngModel)]="cacheGroup.latitude" required/>
				
				<mat-select [(ngModel)]="cacheGroup.secondaryParentCachegroupId" name="secondaryParentCacheGroup">
					
				</mat-select>
			mat-optgroupCache Groups
						<mat-option *ngFor="let cg of secondaryParentCacheGroups()" [value]="cg.id">{{cg.name}}</mat-option>
					[value]-- None --Secondary Parent
				<mat-select [(ngModel)]="cacheGroup.parentCachegroupId" name="parentCacheGroup">
					
						<mat-option *ngFor="let cg of parentCacheGroups()" [value]="cg.id">{{cg.name}}</mat-option>
					Parent!newcacheGroup.lastUpdatedcacheGroup.id
				<mat-select name="type" [formControl]="typeCtrl" required (selectionChange)="showErrors = false">
					<mat-option *ngFor="let type of types" [value]="type.id">{{type.name}}</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!cacheGroup.typeId" class="small-icon-button" matTooltip="View Type Details" aria-label="View Type Details" color="primary" [routerLink]="'/core/types/' + cacheGroup.typeId" target="_blank">
						
				<input matInput type="text" name="name" [(ngModel)]="cacheGroup.name" required/>
			mat-card-headerheaders-container
			<a mat-raised-button color="primary" [routerLink]="'/core/asns'" [queryParams]="{cacheGroup: cacheGroup.id}">View ASNs</a>
			<a mat-raised-button color="primary" [routerLink]="'/core/servers'" [queryParams]="{cacheGroup: cacheGroup.id}">View Servers</a>
		Queue Updates!cacheGroup/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/cache-group-table/cache-group-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/cache-group-tableCreate a new Cache Groupauth.hasPermission('CACHE-GROUP:CREATE')
	<tp-generic-table
		[data]="cacheGroups | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="cache-groups"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Cache Groups" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()"/>
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/coordinates/detail/coordinate-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/coordinates/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/coordinates
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="coordinate">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deleteCoordinate()">Delete</button>
			coordinate.lastUpdatedcoordinate.id
				<input type="number" matInput min="-180" max="180" step="0.001" name="longitude" [(ngModel)]="coordinate.longitude" required/>
			
				<input type="number" matInput min="-90" max="90" step="0.001" name="latitude" [(ngModel)]="coordinate.latitude" required/>
			
				<input matInput type="text" name="name" required [(ngModel)]="coordinate.name" />
			!coordinate/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/coordinates/table/coordinates-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/coordinates/tableCreate a new Coordinateauth.hasPermission('COORDINATE:CREATE')
	<tp-generic-table
		[data]="coordinates | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="coordinates"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Coordinates" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/divisions/detail/division-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/divisions/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/divisions
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="division">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deleteDivision()">Delete</button>
			division.lastUpdateddivision.id
				<input matInput type="text" name="name" required [(ngModel)]="division.name" />
			
			<a mat-raised-button color="primary" [routerLink]="'/core/regions'" [queryParams]="{division: division.name}">View Regions</a>
		!division/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/divisions/table/divisions-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/divisions/tableCreate a new Divisionauth.hasPermission('DIVISION:CREATE')
	<tp-generic-table
		[data]="divisions | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="divisions"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Divisions" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/regions/detail/region-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/regions/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/regions
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="region">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deleteRegion()">Delete</button>
			region.lastUpdatedregion.id
					<mat-select name="division"[(ngModel)]="region.division" required>
						<mat-option *ngFor="let division of divisions" [value]="division.id">{{division.name}}</mat-option>
					</mat-select>
					
						<a mat-icon-button [disabled]="!region.division" class="small-icon-button" matTooltip="View Division Details" aria-label="View Division Details" color="primary" [routerLink]="'/core/divisions/' + region.division" target="_blank">
							
						</a>
					
				<input matInput type="text" name="name" required [(ngModel)]="region.name" />
			
			<a mat-raised-button color="primary" [routerLink]="'/core/phys-locs'" [queryParams]="{region: region.name}">View Physical Locations</a>
		!region/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/regions/table/regions-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cache-groups/regions/tableCreate a new Regionauth.hasPermission('REGION:CREATE')
	<tp-generic-table
		[data]="regions | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="regions"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Regions" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cdns/cdn-detail/cdn-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cdns/cdn-detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cdns
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="cdn">
		
			<mat-checkbox [labelPosition]="'before'" name="dnssecEnabled" [(ngModel)]="cdn.dnssecEnabled">DNSSEC Enabled</mat-checkbox>
		
				<input matInput type="text" name="domainName" required [(ngModel)]="cdn.domainName" pattern="((?!-)(xn--)?[a-z0-9\-_]{0,61}[a-z0-9]{1,1}(?<!-)\.)*(xn--)?(?!-)[a-z0-9\-]{1,61}(?<!-)(\.[a-z]{2,})?">
			cdn.lastUpdatedcdn.id
				<input matInput type="text" name="name" required [(ngModel)]="cdn.name" pattern="(?!-)[A-Za-z0-9.\-]+(?<!-)">
			/core/servers[queryParams]{cdnName: cdn.name}View Servers/core/profiles{cdn: cdn.name}View ProfilesView Notifications!cdn/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cdns/cdn-table/cdn-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/cdns/cdn-tableCreate a new CDNauth.hasPermission('CDN:CREATE')
	<tp-generic-table
		[data]="cdns | async"
		[doubleClickLink]="doubleClickLink"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="cdns"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search CDNs" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()"/>
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/certs/cert-author/cert-author.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/certs/cert-author/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/certsauthororgauthor.orgUnit ?? ''Organization Unitauthor.orgName ?? ''triplelocalauthor.localityName ?? ''author.stateOrProvince ?? ''State or Provincecountryauthor.countryName ?? ''Country NamecommonNameauthor.commonNameCommon Name/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/certs/cert-detail/cert-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/certs/cert-detailmat-elevation-z2 interior-containersha1SHA 1sha256SHA 256squishedcert.serialNumberSerial Numbernumbercert.version.toString()sigTypeoidToName(cert.signatureOid)Signature Algorithmdoubleh2Miscmat-errorvalidAfterFormControl.hasError('outOfDate')Not currently validdatetime-local[formControl]validAfterFormControlvalidAfterNot Valid AftervalidBeforeFormControl.hasError('outOfDate')validBeforeFormControlvalidBeforeNot Valid BeforeValiditytp-cert-author[author]subjectissuer/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/certs/cert-viewer/cert-viewer.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/certs/cert-viewerdsCert !== undefinedmat-tab-group#matTabmat-tabTO Cert InfodsCerttab-content
						
						<textarea matInput name="crt" [(ngModel)]="cert.certificate.crt" cdkAutosizeMaxRows="15" cdkTextareaAutosize></textarea>
					
						<textarea matInput name="csr" [(ngModel)]="cert.certificate.csr" cdkAutosizeMaxRows="15" cdkTextareaAutosize></textarea>
					Certificate Signing Request
						<textarea matInput class="private-text" name="privateKey" [(ngModel)]="cert.certificate.key" cdkAutosizeMaxRows="15" cdkTextareaAutosize></textarea>
					Private Key
						<input type="text" matInput name="sans" [(ngModel)]="cert.sans" />
					SANs
						<input type="text" matInput name="expiration" [(ngModel)]="cert.expiration" />
					
						<input type="text" matInput name="commonName" [(ngModel)]="cert.hostname" />
					
						<input type="text" matInput name="version" [(ngModel)]="cert.version" />
					Certificate Details[disabled]certChain.length === 0mat-accordionmat-expansion-panellet c of certChain; let i = index;
							
							<tp-cert-detail *ngIf="!c.parseError" [cert]="c"></tp-cert-detail>
							c.parseErrorUnable to parse this certificate!mat-expansion-panel-header{{c.type}}
						<input matInput readonly name="order" [(ngModel)]="certOrder"/>
					Detected OrderInput Certificate!dsCertformngNativeValidate(submit)process(true)Submit
							<textarea matInput name="custom" [(ngModel)]="inputCert" cdkAutosizeMaxRows="15" cdkTextareaAutosize required></textarea>
						Certificate ChaindsCert === undefined/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/change-logs/change-logs.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/change-logs
	<tp-generic-table
		[data]="changeLogs | async"
		[cols]="columnDefs"
		[contextMenuItems]="contextMenuOptions"
		[fuzzySearch]="fuzzySubj"
		[tableTitleButtons]="titleBtns"
		(tableTitleButtonAction)="handleTitleButton($event)"
		(contextMenuAction)="handleContextMenu($event)"
		context="change-logs">
	</tp-generic-table>

	loading
		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Change Logs" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [(ngModel)]="searchText" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/change-logs/last-days/last-days.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/change-logs/last-days(ngSubmit)submit()mat-dialog-actions(click)cancel()mat-dialog-content
			<input matInput name="days" type="number" min="1" max="365" required [(ngModel)]="days" />
		Number of Daysmat-dialog-titleView Change-logs/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/currentuser/currentuser.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/currentuser

<button mat-fab id="edit" title="Edit Profile" type="button" (click)="edit()" *ngIf="!editMode"></button>
edit

	<form *ngIf="editMode && editUser" ngNativeValidate (submit)="submitEdit($event)">
		cancelEdit()stylegrid-area: m;accentgrid-area: l;updatePassword()Update Passwordgrid-area: k;grid-area: j;
				<input matInput [(ngModel)]="editUser.postalCode" name="postalCode" type="text"/>
			Postal Codegrid-area: i;
				<input matInput [(ngModel)]="editUser.country" name="country" type="text"/>
			grid-area: h;
				<input matInput [(ngModel)]="editUser.stateOrProvince" name="stateOrProvince" type="text"/>
			grid-area: g;
				<input matInput [(ngModel)]="editUser.city" name="city" type="text"/>
			grid-area: f;
				<input matInput [(ngModel)]="editUser.company" name="company" type="text"/>
			grid-area: e;
				<input matInput [(ngModel)]="editUser.addressLine2" name="addressLine2" type="text"/>
			Address Line 2grid-area: d;
				<input matInput [(ngModel)]="editUser.addressLine1" name="addressLine1" type="text"/>
			Address Line 1grid-area: c;
				<input matInput [(ngModel)]="editUser.phoneNumber" name="phoneNumber" type="tel"/>
			Telephonegrid-area: b;
				<input matInput [(ngModel)]="editUser.email" name="email" type="email"/>
			grid-area: z;
				<input matInput [(ngModel)]="editUser.fullName" name="fullName" type="text" required/>
			grid-area: a-start;
				<input matInput [(ngModel)]="editUser.username" name="username" type="text" required/>
			currentUser && !editMode
			<button mat-button type="button" (click)="themeSvc.loadTheme(theme)" *ngFor="let theme of themeSvc.themes">{{theme.name}}</button>
		User ThemeaddresshasBottomAddress()spancurrentUser.postalCode{{currentUser.postalCode}}currentUser.country{{currentUser.country}}currentUser.stateOrProvince{{currentUser.stateOrProvince}}currentUser.country || currentUser.postalCodecurrentUser.city{{currentUser.city}}currentUser.country || currentUser.stateOrProvince || currentUser.postalCodecurrentUser.company{{currentUser.company}}currentUser.addressLine2{{currentUser.addressLine2}}currentUser.addressLine1{{currentUser.addressLine1}}currentUser.email || currentUser.phoneNumbercurrentUser.phoneNumbertel:{{currentUser.phoneNumber}}{{currentUser.phoneNumber}}currentUser.email && currentUser.phoneNumbercurrentUser.emailmailto:{{currentUser.email}}{{currentUser.email}}h1{{currentUser.role}} usercurrentUser.fullName{{currentUser.fullName}}, /Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/currentuser/update-password-dialog/update-password-dialog.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/currentuser/update-password-dialogdialogsubmit($event)mat-stroked-button
			<input type="password" matInput [(ngModel)]="confirm" name="confirm" [customvalidity]="confirmValid" required/>
		Confirm Password
			<input type="password" matInput [(ngModel)]="password" name="password" required/>
		Change Password/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/dashboard/dashboard.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/dashboardcanCreateDeliveryServicesCreate a new Delivery Service/core/new.Delivery.Servicearticledeliveryservices[hidden]
		<ds-card *ngFor="let ds of filteredDSes; trackBy: tracker; let first=first; let last=last;" [deliveryService]="ds" [now]="now" [today]="today" [first]=first [last]=last></ds-card>
	<input type="search" role="search" aria-label="Fuzzy Search Delivery Service(s)" inputmode="search" name="fuzzControl" [formControl]="fuzzControl" (input)="updateURL($event)" accesskey="/" placeholder="Fuzzy Search"/>/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/deliveryservice.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice
		<canvas linechart chartTitle="Bandwidth of Cache Tiers" id="bandwidthData" [chartDataSets]="bandwidthData" chartYAxisLabel="Bandwidth (Kilobytes Per Second)" chartXAxisLabel="Date/Time" [chartDisplayLegend]="true" chartType="time">
			Your browser does not support canvases or Javascript. Normally, this would be a graph of bandwidth data.
		</canvas>
		
		 <canvas linechart chartTitle="Transactions at the Edge Tier" id="tpsChartData" [chartDataSets]="tpsChartData" chartYAxisLabel="Transactions Per Second" chartXAxisLabel="Date/Time" [chartDisplayLegend]="true" chartType="time">
			Your browser does not support canvases or Javascript. Normally, this would be a graph of transaction data.
		</canvas>
		invalidate/core/deliveryservice/{{deliveryservice.id}}/invalidation-jobsinvalidate contentaria-labelcleaning_services<!-- <img ngSrc="assets/invalidate.svg" title="Invalidate Content"> -->mat-dividertimespannewDateRange()actions
				<mat-icon *ngIf="steeringTargetsFor.size > 0" [matTooltip]="steeringTargetDisplay()" >assistant_direction</mat-icon>
			timespanRefreshRefreshtoTimeTo (time)totimetoDateTo (date)todateTofromTimeFrom (time)fromtime00:00fromDateFrom (date)fromdateFrom/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/ds-card/ds-card.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/ds-card{{deliveryService.xmlId}}[ngClass]{'inactive': !deliveryService.active, 'open': open, 'first': first, 'last': last}
	<mat-card-content class="card-content" *ngIf="open" [@enterAnimation]>
		
	</mat-card-content>
	openview-details/core/deliveryservice/{{deliveryService.id}}View Details
			View Details
		fieldsethealthmeterlow0.5high0.8optimum{{healthy}}{{healthy*100}} percent{{healthy*100}}%legendCache Group Healthcapacity{{deliveryService.id}}-maintenance{{maintenance}}{{maintenance}} percent{{maintenance}}%forUnder Maintenance:{{deliveryService.id}}-available7595{{available}}{{available}} percent{{available}}%Available:{{deliveryService.id}}-utilized{{utilized}}{{utilized}} percent{{utilized}}%Utilized:canvas-container{'graph-loading': !graphDataLoaded}
				<canvas *ngIf="open" linechart chartTitle="Today's Bandwidth" [chartDataSets]="chartData" chartYAxisLabel="Bandwidth (Kilobytes per second)" [chartDisplayLegend]="true" chartType="time">
					Your browser does not support canvases or Javascript. Normally, this would be a graph of the bandwidth data so far today.
				</canvas>
				!graphDataLoaded!deliveryService.exampleURLs || deliveryService.exampleURLs.length < 1No URLs configured!mat-nav-listdeliveryService.exampleURLsmat-list-itemlet url of deliveryService.exampleURLs{{url}}h3URLsdeliveryService.longDesc2{{deliveryService.longDesc2}}deliveryService.longDesc1{{deliveryService.longDesc1}}{{deliveryService.longDesc ? deliveryService.longDesc : 'NO DESCRIPTION'}}deliveryService.protocolProtocol: {{protocolString}}Key: {{deliveryService.xmlId}} ({{deliveryService.id}})mat-card-title-grouptoggle()mat-card-subtitle{{deliveryService.type ? deliveryService.type : ''}}mat-card-title{{deliveryService.displayName}}{{deliveryService.active ? '' : ' (inactive)'}}
			{{deliveryService.infoUrl}}deliveryService.infoUrlcolor-accent-inverted infonoopenertarget_blankMore Information/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/invalidation-jobs/invalidation-jobs.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/invalidation-jobsCreate a new content invalidation job for this Delivery ServicenewJob()jobs.length === 0No invalidation jobs for {{deliveryservice.displayName}}mat-listlet j of jobsinvalidation-jobinvalidation-actions
					<button
						mat-icon-button
						type="button"
						color="accent"
						title="Edit this content invalidation job"
						aria-label="Edit this content invalidation job"
						[disabled]="j.startTime <= now"
						(click)="editJob(j)">
						
					</button>
					<button
						mat-icon-button
						type="button"
						color="warn"
						title="Delete this content invalidation job"
						aria-label="Delete this content invalidation job"
						[disabled]="isInProgress(j)"
						(click)="deleteJob(j.id)">
						
					</button>
				invalidation-info{{j.assetUrl}} (active from  to [dateTime]endDate(j){{endDate(j) | date:'medium'}})j.startTime{{j.startTime | date:'medium'}}/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/invalidation-jobs/new-invalidation-job-dialog/new-invalidation-job-dialog.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/invalidation-jobs/new-invalidation-job-dialogonSubmit($event)footerttlminrequiredTime To Live
			<input matInput type="text" name="regexp" [formControl]="regexp" required [customvalidity]='regexpIsValid'/>
			A regular expression. Matching request paths will be invalidatedContent Pattern to Invalidate
			<input matInput [min]="startMinTime" name="startTime" [formControl]="startTime" type="time"/>
		Scheduled Start Time
			<input matInput [min]="startMin" name="startDate" [(ngModel)]="startDate" [matDatepicker]="picker" (dateChange)="dateChange()" required/>
			mat-datepicker#pickermat-datepicker-togglematSuffix[for]pickerScheduled Start DateNew Content Invalidation Job/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/new-delivery-service/new-delivery-service.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/deliveryservice/new-delivery-service
<mat-horizontal-stepper [linear]="true" aria-label="New Delivery Service Form" #stepper>
	
</mat-horizontal-stepper>
mat-stepInfrastructurengDefaultControlsetInfrastructureInformation()buttons-holdermatStepperPreviousPreviousform-contentbypassbypassable(deliveryService)<!-- Yeah, I know that's pretty gnarly, and it doesn't exactly validate IPv6 addresses but it's a good litmus test -->bypass-locbypassLoccan be either an IP (v4 or v6) address or a Fully Qualified Domain Name(^[A-z]([A-z\d\-]*[A-z\d])?(\.[A-z]([A-z\d\-]*[A-z\d])?)*$)|(^(1\d\d|2[0-4]\d|25[0-5]|\d\d?)(\.(1\d\d|2[0-4]\d|25[0-5]|\d\d?)){3}$)|(^[a-fA-F\d]{1,4}(::?([a-fA-F\d]){1,4})*$)When the Delivery Service traffic becomes too heavy, clients can be redirected hereBypass OptionscheckboxdisableIPv6Disable IPv6 Routingmat-radio-grouparia-labelledbyprotocol
						<mat-radio-button *ngFor="let p of protocols" [value]="p">{{protocolToString(p)}}</mat-radio-button>
					How to handle request protocolsselectdsTyperoutingType
						<option *ngFor="let t of dsTypes" [selected]="t.id === deliveryService.typeId" [ngValue]="t">{{t.description}}</option>
					Change routing typeadv-routing-sub-formsub-formChange Advanced Routing OptionshiddencdnObject
					<option *ngFor="let cdn of cdns" [selected]="cdn.id === deliveryService.cdnId" [ngValue]="cdn">{{cdn.name}}</option>
				This Delivery Service will be a part of this CDNStep 3 - Infrastructure[stepControl]form2.controlMeta Information
		<form #form2="ngForm" ngNativeValidate ngDefaultControl (ngSubmit)="setMetaInformation()">
			
		</form>
	infoURLplaceholdere.g. https://company.jira.com/ticket/9001info-URL-labelFor more information, people can look at this URLinfo-URL-sub-formAdd Informational URL
				<input type="text" title="This will be the name of the Delivery Service as it appears on the 'Home' screen" name="displayName" id="displayName" (change)="updateDisplayName()" [formControl]="displayName" placeholder="{{deliveryService.displayName}}" required>
				textarealongDescNo character limit - be as verbose as you like.e.g. This Delivery Service is for my website's image assets.descriptionPlease briefly describe this Delivery Service's purpose and functiondisplayNameThis Delivery Service's name will beStep 2 - Meta Informationform1.controlOrigin Server
		<form #form1="ngForm" ngNativeValidate ngDefaultControl (ngSubmit)="setOriginURL()">
			activeImmediatelyactive-immediatelyThis Delivery Service should become active immediatelyoriginURLoriginthis URLMust be a URL (should start with `http://` or `https://`)(https?|HTTPS?)://[a-zA-Z][a-zA-z0-9\-]*(\.[a-zA-Z][a-zA-z0-9\-]*)*(/[\w\.]+)*/?I want to create a Delivery Service forStep 1 - Origin Server/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/misc/isogeneration-form/isogeneration-form.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/misc/isogeneration-form/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/misc
	<form [formGroup]="form" (ngSubmit)="submit($event)">
		form.invalidDoes not match Root PasswordformControlNamerootPassConfirmConfirm Root User PasswordrootPassPassword for Root UserInvalid IPv4 NetmaskmgmtIpNetmaskManagement IPv4 NetmaskInvalid IPv4 addressmgmtIpGatewayManagement Gateway IPv4 AddressmgmtIpAddressManagement IPv4 AddressThis should be the name of the network device relative to mgmtInterfaceeth0Management Interface Device NameManagement Network Interface DetailsInvalid IPv6 addressipv6Gateway[required]!!form.controls.ipv6Address.valueIPv6 Gateway Addressipv6AddressIPv6 AddressIPv6 Network Details!useDHCPThis can be deduced from a "CIDR" if your intended address has one; if you don't know how, ask a network administrator to help you fill this in.ipv4NetmaskIPv4 NetmaskInvalid IPv4 Addressipv4GatewayIPv4 Gateway Addressipv4AddressIPv4 AddressIPv4 Network Detailsinput-warninghideMTUWarning() Network interface  values should almost always be either 1500 or 9000 - this value may not work correctly!abbrMaximum Transmission UnitinterfaceMTU9000mtuNetwork Interface interfaceNameNetwork Interface Device NameInvalid Fully Qualified Domain NamefqdnThis should be the name of the storage device relative to sdaDisk for OS Installationmat-selectosVersion
					<mat-option *ngFor="let version of osVersions" [value]="version[1]">{{version[0]}}</mat-option>
				Operating Systemform-headeropenCopyDialog()Copy Info From Servermat-slide-toggleuseDHCPUse DHCP?/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/origins/detail/origin-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/origins/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/origins
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="origin">
		
			<button
				mat-raised-button
				type="button"
				*ngIf="!new"
				color="warn"
				(click)="deleteOrigin()"
			>
				Delete
			</button>
			origin.lastUpdated
				<mat-select [(ngModel)]="origin.profileId" name="profileId">
					<mat-option *ngFor="let c of profiles" [value]="c.id">{{ c.name }}</mat-option>
				</mat-select>
			
				<mat-select [(ngModel)]="origin.cachegroupId" name="cachegroupId">
					<mat-option *ngFor="let c of cacheGroups" [value]="c.id">{{ c.name }}</mat-option>
				</mat-select>
			
				<mat-select [(ngModel)]="origin.coordinateId" name="coordinateId">
					<mat-option *ngFor="let c of coordinates" [value]="c.id">{{ c.name }}</mat-option>
				</mat-select>
			
				<mat-select [(ngModel)]="origin.deliveryServiceId" required name="deliveryServiceId">
					<mat-option *ngFor="let ds of deliveryServices" [value]="ds.id">{{ ds.displayName }}</mat-option>
				</mat-select>
			Delivery Service
				<input matInput type="text" name="port" [(ngModel)]="origin.port"/>
			TCP Port
				<mat-select [(ngModel)]="origin.protocol" required name="protocol">
					<mat-option *ngFor="let p of protocols" [value]="p">{{ p }}</mat-option>
				</mat-select>
			
				<input
					matInput
					type="text"
					name="ip6Address"
					[(ngModel)]="origin.ip6Address"
				/>
			
				<input
					matInput
					type="text"
					name="ipAddress"
					[(ngModel)]="origin.ipAddress"
				/>
			
				<input
					matInput
					type="text"
					name="fqdn"
					required
					[(ngModel)]="origin.fqdn"
				/>
			
				<mat-select [(ngModel)]="origin.tenantId" required name="tenantId">
					<mat-option *ngFor="let t of tenants" [value]="t.id">{{ t.name }}</mat-option>
				</mat-select>
			
				<input
					matInput
					type="text"
					name="name"
					required
					[(ngModel)]="origin.name"
				/>
			origin.id!origin/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/origins/table/origins-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/origins/tableCreate a new Originauth.hasPermission('ORIGIN:CREATE')
	<tp-generic-table
		[data]="origins | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="origins"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Origins" inputmode="search" role="search"
					 accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()"/>
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/parameters/detail/parameter-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/parameters/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/parameters
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="parameter">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deleteParameter()">Delete</button>
			
			<mat-slide-toggle required [(ngModel)]="parameter.secure" name="secure">Secure</mat-slide-toggle>
			parameter.lastUpdated
				<textarea matInput name="value" required [(ngModel)]="parameter.value" cdkTextareaAutosize></textarea>
			
				<input matInput type="text" name="configFile" required [(ngModel)]="parameter.configFile" />
			Config File
				<input matInput type="text" name="name" required [(ngModel)]="parameter.name" />
			parameter.id
			<a mat-raised-button color="primary" [routerLink]="'/core/profiles'" [queryParams]="{parameter: parameter.name}">View Profiles</a>
		!parameter/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/parameters/table/parameters-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/parameters/tableCreate a new Parameterauth.hasPermission('PARAMETER:CREATE')
	<tp-generic-table
		[data]="parameters | async"
		[doubleClickLink]="doubleClickLink"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="parameters"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Parameters" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/profiles/profile-detail/profile-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/profiles/profile-detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/profilespage-content double-column-responsive
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="profile">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deleteProfile()">Delete</button>
			profile['lastUpdated']
				<textarea matInput name="description" [(ngModel)]="profile['description']" required></textarea>
			
				<mat-select name="routingDisabled" [(ngModel)]="profile['routingDisabled']" required>
					FalseTrueRouting Disabled
				<mat-select name="type" [(ngModel)]="profile['type']" required>
					<mat-option [value]="type.value" *ngFor="let type of types">{{type.value}}</mat-option>
				</mat-select>
			
				<mat-select name="cdn" [(ngModel)]="profile['cdn']" required>
					<mat-option [value]="cdn.id" *ngFor="let cdn of cdns">{{cdn.name}}</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!profile.cdn" class="small-icon-button" matTooltip="View CDN Details" aria-label="View CDN Details" color="primary" [routerLink]="'/core/cdns/' + profile.cdn" target="_blank">
						
				<input matInput type="text" name="name" [(ngModel)]="profile['name']" required/>
			profile['id']
			<a mat-raised-button color="primary" [routerLink]="'/core/parameters'" [queryParams]="{profile: profile.id}">View Parameters</a>
			<a mat-raised-button color="primary" [routerLink]="'/core/servers'" [queryParams]="{profileName: profile.name}">View Servers</a>
		/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/profiles/profile-table/profile-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/profiles/profile-tableCreate a new Profileauth.hasPermission('PROFILE:CREATE')
	<tp-generic-table
		[data]="profiles | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="profiles"
		[doubleClickLink]="doubleClickLink"
		[tableTitleButtons]="titleBtns"
		(tableTitleButtonAction)="handleTitleButton($event)"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Profiles" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/capabilities/capabilities.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/capabilities/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/serversCreate a new Capabilityauth.hasPermission('SERVER-CAPABILITY:CREATE')/core/new-capability
	<tp-generic-table
		[data]="capabilities | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="capabilities"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Server Capabilities" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/capabilities/capability-details/capability-details.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/capabilities/capability-details
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="capability">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deleteCapability()">Delete</button>
			capability.lastUpdated
				<input matInput type="text" name="name" required [(ngModel)]="capability.name" />
			Manage ServersView Delivery Services!capability/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/phys-loc/detail/phys-loc-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/phys-loc/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/phys-loc
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="physLocation">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deletePhysicalLocation()">Delete</button>
			physLocation.lastUpdatedphysLocation.iddoubleColSpan
				<textarea matInput name="comments" [(ngModel)]="physLocation.comments" cdkTextareaAutosize></textarea>
			
				<mat-select name="region" [(ngModel)]="physLocation.regionId" required>
					<mat-option *ngFor="let region of regions" [value]="region.id">{{region.name}}</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!physLocation.regionId" class="small-icon-button" matTooltip="View Region Details" aria-label="View Region Details" color="primary" [routerLink]="'/core/regions/' + physLocation.regionId" target="_blank">
						
				<input matInput type="text" name="email" [(ngModel)]="physLocation.email" />
			
				<input matInput type="text" name="phone" [(ngModel)]="physLocation.phone" />
			
				<input matInput type="text" name="poc" [(ngModel)]="physLocation.poc" />
			Point of Contact
				<input matInput type="text" name="postalCode" required [(ngModel)]="physLocation.zip" />
			
				<input matInput type="text" name="state" required [(ngModel)]="physLocation.state" />
			
				<input matInput type="text" name="city" required [(ngModel)]="physLocation.city" />
			
				<input matInput type="text" name="address" required [(ngModel)]="physLocation.address" />
			
				<input matInput type="text" name="shortName" required [(ngModel)]="physLocation.shortName" />
			Short Name
				<input matInput type="text" name="name" required [(ngModel)]="physLocation.name" />
			
			<a mat-raised-button color="primary" [routerLink]="'/core/servers'" [queryParams]="{physLocation: physLocation.name}">View Servers</a>
		!physLocation/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/phys-loc/table/phys-loc-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/phys-loc/tableCreate a new Physical Locationauth.hasPermission('PHYSICAL-LOCATION:CREATE')
	<tp-generic-table
		[data]="physLocations | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="physLoc"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Physical Locations" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/server-details/server-details.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/server-details
	<form ngNativeValidate #serverForm="ngForm" class="triple-column-responsive" (ngSubmit)="submit($event)">
		
			<button mat-raised-button type="button" aria-label="Delete Server" *ngIf="!isNew" color="warn" (click)="delete()">Delete</button>
			Submit Server
					</mat-accordion>
				</div>
			</mat-expansion-panel>
			[expanded]expansion-content
						<input matInput name="mgmtIpNetmask" [(ngModel)]="server.mgmtIpNetmask"/>
						<mat-icon matSuffix [matTooltipClass]="'multi-line-tooltip'" [matTooltip]="'The IPv4 Netmask for the server\'s management interface\n\nDeprecated:\nThis field has been deprecated and will be removed in a future version of Traffic Control'">help_outline</mat-icon>
					IP Netmask
						<input matInput name="mgmtIpGateway" [(ngModel)]="server.mgmtIpGateway"/>
						<mat-icon matSuffix [matTooltipClass]="'multi-line-tooltip'" [matTooltip]="'The IPv4 Gateway for the server\'s management interface\n\nDeprecated:\nThis field has been deprecated and will be removed in a future version of Traffic Control'">help_outline</mat-icon>
					Gateway IP Address
						<input matInput name="mgmtIP" [(ngModel)]="server.mgmtIpAddress"/>
						<mat-icon matSuffix [matTooltipClass]="'multi-line-tooltip'" [matTooltip]="'The IP Address for the server\'s management interface\n\nDeprecated:\nThis field has been deprecated and will be removed in a future version of Traffic Control'">help_outline</mat-icon>
					IP Addressmat-panel-titleManagement Interface Details
						<tp-obscured-text-input name="iloPassword" [autocomplete]="autocompleteNew" [(value)]="server.iloPassword"></tp-obscured-text-input>
					
						<input matInput name="iloUsername" [(ngModel)]="server.iloUsername"/>
					
						<input matInput name="iloNetmask" [(ngModel)]="server.iloIpNetmask"/>
					
						<input matInput name="iloGateway" [(ngModel)]="server.iloIpGateway"/>
					
						<input matInput name="iloIP" [(ngModel)]="server.iloIpAddress"/>
					 DetailsIntegrated Lights-Out ManagementILOexpansion-container
						<mat-expansion-panel *ngFor="let inf of server.interfaces; index as infInd" [expanded]="true">
							
						</mat-expansion-panel>
					
								
									expansion-ip-contentlet ip of inf.ipAddresses; index as ipInd
										<mat-checkbox [labelPosition]="'before'" name="{{inf.name}}-{{ip.address}}-serviceAddress" id="{{inf.name}}-{{ip.address}}-serviceAddress" class="service-addr-cb" [(ngModel)]="ip.serviceAddress">Is a Service Address</mat-checkbox>
										
										mat-icon-buttondelete this IP addressremove-buttondeleteIP($event, inf, ipInd)
											
											<input matInput id="{{inf.name}}-{{ip.address}}-gateway" name="{{inf.name}}-{{ip.address}}-gateway" [(ngModel)]="ip.gateway" [pattern]="validGatewayPattern"/>
										
											<input matInput id="{{inf.name}}-{{ip.address}}" name="{{inf.name}}-{{ip.address}}" class="ip-input" [(ngModel)]="ip.address" [pattern]="validIPPattern" required placeholder="192.0.2.0/27" />
										mat-panel-descriptionexpansion-descriptionpanel-buttonaddIP($event, inf)
												
											IP Addresses
										
								<mat-checkbox [labelPosition]="'before'" id="{{inf.name}}-monitor" name="{{inf.name}}-monitor" [(ngModel)]="inf.monitor">Monitor this interface</mat-checkbox>
							
									<input matInput id="{{inf.name}}-max-bandwidth" [(ngModel)]="inf.maxBandwidth" min="0" type="number" name="{{inf.name}}-max-bandwidth"/>
									inf.maxBandwidth !== 0Cache servers will be unavailableMaximum Bandwidth
									<input matInput id="{{inf.name}}-mtu" name="{{inf.name}}-mtu" type="number" min="1500" max="9000" step="7500" [(ngModel)]="inf.mtu"/>
								
									<input matInput id="{{inf.name}}-name" name="{{inf.name}}-name" [(ngModel)]="inf.name" />
								deleteInterface($event, infInd)
									{{getInterfaceName(inf)}}
								Add An InterfaceaddInterface($event)
						Interfaces
					expansion-content-profileprofile-order
						Ordering
						drop-list mat-elevation-z3cdkDropList(cdkDropListDropped)drop($event)drop-list-item mat-elevation-z1let profile of server.profileNames; index as icdkDrag
								{{i+1}}: {{profile}}
								small-icon-buttonView Profile DetailsmatTooltip[href]'/core/profiles/' + profileNameToId(profile)
						<mat-select name="profiles" [(ngModel)]="server.profileNames" multiple required>
							<mat-option *ngFor="let profile of profiles"  [value]="profile.name">{{profile.name}}</mat-option>
						</mat-select>
					
						Profiles
					!isNew && server.statusLastUpdatedstatusLastUpdatedserver.statusLastUpdated.toLocaleString()Status Last UpdatedxmppIdserver.xmppIdHash ID!isNew && server.lastUpdatedserver.lastUpdated.toLocaleString()serverIdserver.id
				<input matInput name="rack" [(ngModel)]="server.rack"/>
			
					<input matInput name="httpsport" type="number" [(ngModel)]="server.httpsPort" min="1" max="65535"/>
				HTTPS Port
					<input matInput name="httpport" type="number" [(ngModel)]="server.tcpPort" min="1" max="65535"/>
				HTTP Port
				<mat-select name="type" [(ngModel)]="server.typeId" required>
					<mat-option *ngFor="let type of types" [value]="type.id">{{type.name}}</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!server.typeId" class="small-icon-button" color="primary" aria-label="View Type Details" matTooltip="View Type Details" [href]="'/core/types/' + server.typeId" target="_blank">
						
					</a>!isNew && server.offlineReasonofflineReasonserver.offlineReasonOffline Reason
				<input matInput name="status" disabled [value]="server.status" *ngIf="!isNew"/>
				<mat-select name="status" *ngIf="isNew" [(ngModel)]="server.statusId" required>
					<mat-option *ngFor="let status of statuses" [value]="status.id">{{status.name}}</mat-option>
				</mat-select>
			
				<mat-select name="physLocation" [(ngModel)]="server.physLocationId" required>
					<mat-option *ngFor="let physLocation of physicalLocations" [value]="physLocation.id">{{physLocation.name}}</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!server.physLocationId" class="small-icon-button" matTooltip="View Physical Location Details" aria-label="View Physical Location Details" color="primary" [href]="'/core/phys-locs/' + server.physLocationId" target="_blank">
						Physical Location
				<mat-select name="cachegroup" [(ngModel)]="server.cachegroupId" required>
					<mat-option *ngFor="let cg of cacheGroups" [value]="cg.id">{{cg.name}}</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!server.cachegroupId" class="small-icon-button" matTooltip="View Cache Group Details" aria-label="View Cache Group Details" color="primary" [href]="'/core/cache-groups/' + server.cachegroupId" target="_blank">
						
				<mat-select name="cdn" [(ngModel)]="server.cdnId" required>
					<mat-option *ngFor="let cdn of cdns" [value]="cdn.id">{{cdn.name}}</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!server.cdnId" class="small-icon-button" matTooltip="View CDN Details" aria-label="View CDN Details" color="primary" [routerLink]="'/core/cdns/' + server.cdnId" target="_blank">
						
				<input matInput [(ngModel)]="server.domainName" name="domainname" required maxlength="50"/>
			Domain Name
				<input matInput [(ngModel)]="server.hostName" name="hostname" required maxlength="50"/>
			Host Name!server!isNew && server
		<button [disabled]="!isCache()" mat-icon-button type="button" title="queue server updates" *ngIf="!server.updPending" (click)="queue()"></button>
		<button [disabled]="!isCache()" mat-icon-button type="button" title="clear server updates" *ngIf="server.updPending" (click)="dequeue()"></button>
		change server statuschangeStatus($event){{statusChangeIcon()}}schedule!isCache() || truemat-buttonManage Delivery ServicesManage Capabilities/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/servers-table/servers-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/servers-tableCreate a new Serverauth.hasPermission('SERVER:CREATE')
	<tp-generic-table
		[data]="servers | async"
		[doubleClickLink]="doubleClickLink"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="servers"
		[moreMenuButtons]="moreMenuButtons"
		(moreMenuButtonAction)="handleMoreMenu($event)"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Servers" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()"/>
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/update-status/update-status.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/servers/update-statusisOffline
			<input matInput [(ngModel)]="offlineReason" id="offlineReason" name="offlineReason" required maxlength="100"/>
		
			<mat-select name="status" [(ngModel)]="status" required>
				<mat-option *ngFor="let s of statuses" [value]="s" [disabled]="s.id === currentStatus">{{s.name}}</mat-option>
			</mat-select>
		New StatusChange status for {{serverName}}/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/statuses/status-details/status-details.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/statuses/status-details/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/statuses
	<form [formGroup]="statusDetailsForm" (ngSubmit)="onSubmit($event)" *ngIf="!loading">
		
			<button mat-raised-button type="button" color="warn" (click)="deleteStatus()" *ngIf="!new">Delete</button>
			
				{{new ? 'Create' : 'Save'}}
			statusDetails.lastUpdatedstatusDetails.id
			<a mat-raised-button color="primary" [routerLink]="'/core/servers'" [queryParams]="{status: statusDetails.name}">View Servers</a>
		/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/statuses/statuses-table/statuses-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/statuses/statuses-tableCreate a new Statusauth.hasPermission('STATUS:CREATE')
	<tp-generic-table
		[data]="statuses | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="statuses"
		[contextMenuItems]="contextMenuItems"
		[doubleClickLink]="doubleClickLink"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Search Statuses" inputmode="search" role="search" accesskey="/"
					 placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()"/>
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/topologies/topology-details/topology-details.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/topologies/topology-details/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/topologies
			<mat-tree [dataSource]="topologySource" [treeControl]="topologyControl">
				
			</mat-tree>
		mat-nested-tree-node*matTreeNodeDeflet node; when: hasChildexpand-nodeng-containermatTreeNodeOutletmat-tree-nodematTreeNodeTogglemat-menu-item[attr.aria-label]'Toggle ' + node.name
						{{node.name}}
					
				<textarea matInput name="description" [(ngModel)]="topology.description"></textarea>
			
				<input matInput type="text" name="name" required [(ngModel)]="topology.name">
			/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/types/detail/type-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/types/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/types
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="type">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deleteType()">Delete</button>
			type.lastUpdateduseInTablenew ? 'server' : type.useInTableUse In Table
				<input matInput type="text" name="description" required [(ngModel)]="type.description" />
			
				<input matInput type="text" name="name" required [(ngModel)]="type.name" />
			type.id
			<a mat-raised-button color="primary" *ngIf="type.useInTable === 'cachegroup'" [routerLink]="'/core/cache-groups'" [queryParams]="{typeName: type.name}">View Cache Groups</a>
			<a mat-raised-button color="primary" *ngIf="type.useInTable === 'server'" [routerLink]="'/core/servers'" [queryParams]="{type: type.name}">View Servers</a>
		!type/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/types/table/types-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/types/tableCreate a new Typeauth.hasPermission('TYPE:CREATE')
	<tp-generic-table
		[data]="types | async"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="types"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Types" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/roles/detail/role-detail.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/roles/detail/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/roles/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="role">
		
			<button mat-raised-button type="button" *ngIf="!new" color="warn" (click)="deleteRole()">Delete</button>
			
				<textarea matInput name="permissions" [(ngModel)]="permissions" [disabled]="role.name === 'admin'" cdkTextareaAutosize></textarea>
			
				<input matInput type="text" name="description" [(ngModel)]="role.description" [disabled]="role.name === 'admin'" />
			
				<input matInput type="text" name="name" required [(ngModel)]="role.name" [disabled]="role.name === 'admin'"/>
			/core/users{role: role.name}View Users!role/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/roles/table/roles-table.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/roles/tableCreate a new roleauth.hasPermission('ROLE:CREATE')/core/new-role
	<tp-generic-table
		[data]="roles | async"
		[doubleClickLink]="doubleClickLink"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="roles"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)">
	</tp-generic-table>

		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Roles" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [formControl]="fuzzControl" (input)="updateURL()" />
	<!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/tenants/tenant-details/tenant-details.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/tenants/tenant-details/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/tenants
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="tenant">
		
			<button mat-raised-button type="button" *ngIf="!new" [disabled]="disabled" color="warn" (click)="deleteTenant()">Delete</button>
			
			<mat-checkbox [disabled]="disabled" matInput name="active" [checked]="tenant.active">
				Active
			</mat-checkbox>
			<tp-tree-select [handle]="'parentTenant'" [disabled]="disabled" (nodeSelected)="update($event)" [initialValue]="tenant.parentId" [label]="'Parent Tenant'" [treeData]="[displayTenant]"></tp-tree-select>
		
				<input [disabled]="disabled" matInput type="text" name="name" required [(ngModel)]="tenant.name" />
			{tenant: tenant.name}!tenant/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/tenants/tenants.component.htmlCreate a new Tenantauth.hasPermission('TENANT:CREATE')
	<tp-generic-table
		[data]="tenants"
		[cols]="columnDefs"
		[fuzzySearch]="searchSubject"
		context="tenants"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
		(contextMenuAction)="handleContextMenu($event)"
	>
	</tp-generic-table>
	
		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Tenants" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [(ngModel)]="searchText" (input)="updateURL()"/>
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/user-details/user-details.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/user-details
	<form ngNativeValidate (ngSubmit)="submit($event)" *ngIf="user">
		
			<mat-checkbox name="newUser" [checked]="user.newUser" [disabled]="true" readonly>
				User Is New
			</mat-checkbox>
			isNew(user)
				<input required matInput [(ngModel)]="user.confirmLocalPasswd" name="confirmLocalPasswd" type="password"/>
			
				<input required matInput [(ngModel)]="user.localPasswd" name="localPasswd" type="password"/>
			ssh-container
				<textarea [(ngModel)]="user.publicSshKey" name="publicSshKey" matInput cols="80" wrap="hard" cdkTextareaAutosize></textarea>
			Public SSH key
				<input matInput type="number" name="uid" [(ngModel)]="user.uid"/>
				This property is deprecated and shouldn't be used
				<input matInput type="number" name="gid" [(ngModel)]="user.gid"/>
				isNew(user) ? '' : user.idisNew(user) ? '' : user.lastUpdated!.toLocaleString()
				<input matInput type="text" name="country" [(ngModel)]="user.country"/>
			
				<input matInput type="text" name="stateOrProvince" [(ngModel)]="user.stateOrProvince">
			State/Province
				<input matInput type="text" name="company" [(ngModel)]="user.company"/>
			
				<input matInput type="text" name="postalCode" [(ngModel)]="user.postalCode"/>
			
				<input matInput type="text" name="city" [(ngModel)]="user.city"/>
			
				<input matInput type="text" name="addressLine2" [(ngModel)]="user.addressLine2"/>
			
				<input matInput type="text" name="addressLine1" [(ngModel)]="user.addressLine1"/>
			
				<input matInput type="tel" name="phoneNumber" [(ngModel)]="user.phoneNumber"/>
			Phone Number
				<input matInput type="email" name="email" required [(ngModel)]="user.email">
			
				<mat-select name="tenant" [value]="tenant()" (selectionChange)="updateTenant($event)">
					<mat-option *ngFor="let tenant of tenants" [value]="tenant">{{tenant.name}} (#{{tenant.id}})</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!user.tenantId" class="small-icon-button" matTooltip="View Tenant Details" aria-label="View Tenant Details" color="primary" [routerLink]="'/core/tenants/' + user.tenantId" target="_blank">
						
				<mat-select name="role" [value]="role()" (selectionChange)="updateRole($event)">
					<mat-option *ngFor="let role of roles" [value]="role">{{role.name}}</mat-option>
				</mat-select>
				
					<a mat-icon-button [disabled]="!user.role" class="small-icon-button" matTooltip="View Role Details" aria-label="View Role Details" color="primary" [routerLink]="'/core/roles/' + user.role" target="_blank">
						
				<input matInput type="text" name="fullName" required [(ngModel)]="user.fullName"/>
			
				<input matInput type="text" name="username" required [(ngModel)]="user.username"/>
			
			<a mat-raised-button color="primary" [routerLink]="'/core/change-logs'" [queryParams]="{username: user.username}">View Change Logs</a>
			!user/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/user-registration-dialog/user-registration-dialog.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/user-registration-dialogmat-dialog-close
			<mat-select [(ngModel)]="tenant" required name="tenant">
				<mat-option *ngFor="let t of tenants" [value]="t">{{t.name}}</mat-option>
			</mat-select>
		
			<mat-select [(ngModel)]="role" required name="role">
				<mat-option *ngFor="let r of roles" [value]="r">{{r.name}}</mat-option>
			</mat-select>
		
			<input matInput type="email" required name="email" [(ngModel)]="email"/>
		Email AddressRegister a new User/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/core/users/users.component.html

<button *ngIf="canCreateUsers()" class="expandable-fab" type="button" (cdkMenuClosed)="toggleMenu('closed')" (cdkMenuOpened)="toggleMenu('opened')" mat-fab [cdkMenuTriggerFor]="menu" aria-label="Add a user" title="Add a user">
	
</button>
ng-template#menumenu@fadeInOut@slideInOutcdkMenu
	  cdkMenuItemmat-mini-fabRegister a new user by emailregister()contact_mailCreate user from scratchperson_add{'open': menuIsOpen}
	<tp-generic-table
		[data]="users"
		[cols]="columnDefs"
		[fuzzySearch]="fuzzySubject"
		context="users"
		[doubleClickLink]="doubleClickLink"
		[contextMenuItems]="contextMenuItems"
	>
	</tp-generic-table>
	
		<input type="search" name="fuzzControl" aria-label="Fuzzy Search Users" inputmode="search" role="search" accesskey="/" placeholder="Fuzzy Search" [(ngModel)]="searchText" (input)="updateURL()"/>
	/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/login/login.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/loginsubmitLogin()resetPassword()Forgot Password
				<tp-obscured-text-input [autocomplete]="passwordAutocomplete" required="true" [(value)]="p" name="p"></tp-obscured-text-input>
			
				<input matInput required type="text" [(ngModel)]="u" name="u"/>
			Traffic PortalimgngSrc/assets/logo.svgApache Traffic Control logoheightwidth/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/login/reset-password-dialog/reset-password-dialog.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/login/reset-password-dialog
			<input matInput name="email" type="email" autocomplete="email" [(ngModel)]="email"/>
		Reset Password/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/alert/alert.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/alert/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/dialogs/collection-choice-dialog/collection-choice-dialog.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/dialogs/collection-choice-dialog/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/dialogs
	<button type="submit" mat-button [disabled]="!selected" [mat-dialog-close]="selected">Confirm</button>
	[mat-dialog-close]
		<mat-select name="{{dialogData.label}}" [(ngModel)]="selected" required>
			<mat-option *ngFor="let item of dialogData.collection" [value]="item.value">{{item.label}}</mat-option>
		</mat-select>
		dialogData.hint
			{{dialogData.hint}}
		{{dialogData.label}}{{dialogData.message}}{{dialogData.title}}/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/dialogs/decision-dialog/decision-dialog.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/dialogs/decision-dialogConfirm/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/dialogs/text-dialog/text-dialog.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/dialogs/text-dialogOk/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/generic-table/download-options/download-options-dialog.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/generic-table/download-options/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/generic-tableonSubmit()undefined
		<mat-checkbox name="includeHeaders" [(ngModel)]="includeHeaders">Include Headers</mat-checkbox>
		<mat-checkbox name="includeHidden" *ngIf="this.visibleColumns.length !== this.columns.length" [(ngModel)]="includeHidden">Include Hidden Columns ({{this.visibleColumns.length}}/{{this.columns.length}} visible)</mat-checkbox>
		<mat-checkbox name="includeFiltered" *ngIf="visibleRows !== allRows" [(ngModel)]="includeFiltered">Include Filtered Rows ({{visibleRows}}/{{allRows}} visible)</mat-checkbox>
		<mat-checkbox name="onlySelected" *ngIf="selectedRows" [(ngModel)]="onlySelected">Only Selected Rows ({{selectedRows}}/{{allRows}} selected)</mat-checkbox>
	
			<input name="delimiter" matInput type="text" [(ngModel)]="seperator" required />
		Delimiter
			<input name="fileName" matInput type="text" [(ngModel)]="fileName" required />
		File Name (no extension)Export Options<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/generic-table/generic-table.component.html
<ag-grid-angular
	[rowData]="data"
	[columnDefs]="cols"
	class="ag-theme-material"
	[components]="components"
	[gridOptions]="gridOptions"
	(gridReady)="setAPI($event)"
	(filterChanged)="storeFilter($event)"
	(sortChanged)="storeColumns()"
	(columnMoved)="storeColumns()"
	(columnVisible)="storeColumns(true)"
	(cellContextMenu)="onCellContextMenu($event)"
	(contextmenu)="preventDefault($event)">
</ag-grid-angular>

<menu #contextmenu type="contextmenu" [hidden]="!showContextMenu" [ngStyle]="menuStyle" *ngIf="contextMenuItems && contextMenuItems.length > 0">
	
</menu>
ullilet item of contextMenuItemsmenuitem
			<button name="{{itemName(item)}}" *ngIf="isAction(item)" type="button" (click)="emitContextMenuAction(item.action, item.multiRow, $event)" [disabled]="isDisabled(item)">{{item.name}}</button>
		!isAction(item)
				<a *ngIf="!isDisabled(item)" [routerLink]="href(item)" [queryParams]="queryParameters(item)" [fragment]="fragment(item)" [target]="item.newTab ? '_blank' : '_self'">{{item.name}}</a>
				isDisabled(item){{item.name}}extra-actions
	<button mat-flat-button type="button"*ngFor="let btn of tableTitleButtons" (click)="emitTitleButtonAction(btn.action)">{{btn.text}}</button>
	toggle-columnsExtra Table Actions
		<button type="button" mat-flat-button [matMenuTriggerFor]="extraMenu" #extraTrigger="matMenuTrigger">
			
		</button>
		mat-menu#extraMenumatMenu
			<button mat-menu-item type="button" *ngFor="let btn of moreMenuButtons" (click)="emitMoreButtonAction(btn.action)">{{btn.text}}</button>
			gridAPI.sizeColumnsToFit()Resizedownload()save as CSVExport Gridcaret{'rotate': extraTrigger.menuOpen}expand_moremenu_openSelect Table Columns
		<button type="button" mat-flat-button [matMenuTriggerFor]="menu" #trigger="matMenuTrigger">
			 
			column-menu
				<button type="button" mat-menu-item *ngFor="let c of columns" (click)="toggleVisibility($event, c.getColId())">
					<mat-checkbox [checked]="c.isVisible()" [name]="c.getColDef().headerName">
						{{c.getColDef().headerName}}
					</mat-checkbox>
				</button>
			{'rotate': trigger.menuOpen}view_columnmat-flat-buttonclear all active filtersclearFilters() Clearfilter_listde-select all rowsselectAll(true)De-Select Allselect all rowsselectAll()Select All/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/import-json-txt/import-json-txt.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/import-json-txt
	<button mat-raised-button type="button" [mat-dialog-close]="inputTxt" [disabled]="!file">Submit</button>
import-content{'active':dragOn}

	json-txtfiles.length !== 1pre{{inputTxt | json}}!fileDatafile-name{{fileData}}dropzone
		<label #inputLabel
			for="profile-upload"
			tabindex="0"
			(keydown.enter)="inputLabel.click()"
			(keydown.space)="inputLabel.click()"
		>Click or Drop your file here to upload</label>
		<input
			type="file"
			id="profile-upload"
			[accept]="allowedType.join(', ')"
			[files]="files"
			(change)="uploadFile($event)"
			hidden
			aria-describedby="file-name json-txt"
		/>
		smallhint{{mimeAlertMsg}}{{data.title}}/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/loading/loading.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/loadingsvg-containerLoading...svgxmlns:rdfhttp://www.w3.org/1999/02/22-rdf-syntax-ns#xmlnshttp://www.w3.org/2000/svg1.1xmlns:cchttp://creativecommons.org/ns#xmlns:dchttp://purl.org/dc/elements/1.1/viewBox0 0 789 789animatetransformattributeTypexmlattributeNametransformrotate0 0 0360 0 0dur0.6repeatCountindefinite#f49224translate(-260,-37)rectmatrix(0,1,-1,0,830,42)152360354161620613m416.60182 396h87.60049c-2.74774 11.55266-4.20231 23.60647-4.20231 36 0 85.60414 69.39586 155 155 155s155-69.39586 155-155-69.39586-155-155-155c-12.03638 0-23.75233 1.37194-35 3.96798v-87.51196c11.26664-1.61848 22.78551-2.45602 34.5-2.45602 132.82448 0 240.5 107.67552 240.5 240.5s-107.67552 240.5-240.5 240.5-240.5-107.67552-240.5-240.5c0-12.0613 0.88787-23.91524 2.60182-35.5zm933.48337 152.57612-56.57065 56.57064c-56.83481-56.34409-135.05947-91.14676-221.41272-91.14676-173.69355 0-314.5 140.80645-314.5 314.5s140.80645 314.5 314.5 314.5c87.08597 0 165.90482-35.39579 222.85484-92.58567l55.56865 55.56864c-71.42727 71.66699-170.24613 116.01703-279.42349 116.01703-217.87633 0-394.5-176.62367-394.5-394.5s176.62367-394.5 394.5-394.5c108.9533 0 207.59056 44.168182 278.98337 115.57612zdescA perpetually spinning logo used to indicate loadingLoading Logo/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/navigation/tp-header/tp-header.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/navigation/tp-header/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/navigationmat-toolbar!hidden#themeMenu
		<button type="button" mat-menu-item *ngFor="let theme of themeSvc.themes" (click)="themeSvc.loadTheme(theme)">{{theme.name}}</button>
	navcollapsed#collapsedMenulet nav of vertNavs
				<a *ngIf="navShown(nav, 'anchor')" mat-menu-item [routerLink]="navRouterLink(nav)">{{nav.text}}</a>
				<button type="button" *ngIf="navShown(nav, 'button')" mat-menu-item (click)="navClick(nav)">{{nav.text}}</button>
			[matMenuTriggerFor]themeMenuThemelet nav of horizNavscollapsedMenuexpanded#expandedMenu
						<a *ngIf="navShown(nav, 'anchor')" mat-menu-item [routerLink]="navRouterLink(nav)">{{nav.text}}</a>
						<button type="button" *ngIf="navShown(nav, 'button')" mat-menu-item (click)="navClick(nav)">{{nav.text}}</button>
					expandedMenumanage_accounts
				<a *ngIf="navShown(nav, 'anchor')" mat-button [routerLink]="navRouterLink(nav)">{{nav.text}}</a>
				<button type="button" *ngIf="navShown(nav, 'button')" mat-button (click)="navClick(nav)">{{nav.text}}</button>
			{{title}}/core/ATC logo/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/navigation/tp-sidebar/tp-sidebar.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/navigation/tp-sidebar
<div class="expander" [ngClass]="{closed: !sidenav.opened}" *ngIf="user.loggedIn">
	
</div>
sidenav.toggle()animate
			chevron_left
		mat-sidenav-containersidenav-root[autosize]mat-sidenav-contentsidenav-contentrouter-outletheight:100%mat-sidenavsidenav#sidenavside
					<mat-divider *ngIf="isRoot(node)"></mat-divider>
				</mat-nested-tree-node>
			</mat-tree>
			
		</div>
	mat-treecollapseAll()Collapse all sidebar entriesunfold_lesssidenav-container
			<mat-tree [dataSource]="dataSource" [treeControl]="treeCtrl" id="sidebar-nav-tree">
				
					<div class="expand-node" [@slide]="treeCtrl.isExpanded(node) ? 'show' : 'hide'" role="group">
						
					</div>
					isRoot(node)node-icon{expanded: treeCtrl.isExpanded(node)}
							chevron_right
						let node
				
					#absolute
						<a class="mat-tree-node" mat-menu-item [attr.aria-label]="'Navigate to ' + node.name" [href]="node.href"
							target="_blank">
							{{node.name}}
						</a>
					<!-- Checking whether href is absolute URL - For TPv1 redirect purpose -->#relative
						<a class="mat-tree-node" mat-menu-item [attr.aria-label]="'Navigate to ' + node.name" [routerLink]="node.href"
							[routerLinkActive]="['boldNode']" [routerLinkActiveOptions]="routeOptions">
							{{node.name}}
						</a>
					<!-- Checking whether href is relative URL -->isAbsoluteURL(node.href); then absolute else relative<!-- load either redirect or relative path href -->/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/obscured-text-input/obscured-text-input.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/obscured-text-input
<div (focusin)="focus()" (focusout)="blur($event)">
	<input
		matInput
		[type]="type"
		[formControl]="control"
		[placeholder]="placeholder"
		[required]="required"
		[disabled]="disabled"
		[attr.aria-describedby]="describedBy"
		[attr.aria-labelledby]="parentFormField?.getLabelId()"
		[name]="name"
		(change)="onChange($event)"
		[attr.autocomplete]="autocomplete"
	/>
	matIconSuffix{{ type === "password" ? "visibility" : "visibility_off"}}/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/boolean-filter/boolean-filter.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/boolean-filter/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components
	<input type="checkbox" id="booleanFilterShould" [ngModel]="shouldFilter" (ngModelChange)="onChange($event, 'should')"/>
	
	<input type="checkbox" id="booleanFilterValue" [ngModel]="value" (ngModelChange)="onChange($event, 'value')"/>
booleanFilterValuebooleanFilterShouldFilter/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/email-cell-renderer/email-cell-renderer.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/email-cell-renderer{{value}}/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/ssh-cell-renderer/ssh-cell-renderer.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/ssh-cell-renderer/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/telephone-cell-renderer/telephone-cell-renderer.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/telephone-cell-renderer/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/update-cell-renderer/update-cell-renderer.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/table-components/update-cell-renderer{cleared: !value, icon: true}{{this.value ? 'schedule' : "done"}}/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/tree-select/tree-select.component.html/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/app/shared/tree-select
				<div [style.display]="(!treeControl.isExpanded(node) && !node.containerNeeded) ? 'none' : 'block'" role="group">
					<ng-container matTreeNodeOutlet></ng-container>
				</div>
			</mat-nested-tree-node>
		</mat-tree>
	</div>
</div>
tree-select-rootcombobox
			</mat-tree-node>
			
				</div>
				[style.display](!treeControl.isExpanded(node) && !node.containerNeeded) ? 'none' : 'block'isVisible(node)
					<div mat-menu-item (click)="select(node)" (keypress.enter)="select(node)">
						{{node.name}}
					mat-icon-rt1-mirror
							{{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
						tree-select-contentshown
		<mat-tree [dataSource]="treeData" [treeControl]="treeControl">
			<mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle [style.display]="!isVisible(node) ? 'none' : 'block'">
				<div mat-menu-item (click)="select(node)" (keypress.enter)="select(node)">
						{{node.name}}
				$event.stopPropagation()search(input)filterChanged($event)filter-{{handle}}
		<input type="text" class="tree-selection" id="{{handle}}-tree-select" name="{{handle}}-tree-select" matInput required readonly (click)="toggle($event)" [(ngModel)]="selected.name" [disabled]="disabled"/>
	{{label}}/Users/test/Desktop/trafficcontrol/experimental/traffic-portal/src/index.htmllangenapp-rootshortcut iconimage/svg+xmliconmanifestapplication/manifest+json/assets/manifest.webmanifestbasetheme-color#2A3F54A user-friendly UI for managing Traffic Control CDNswidth=device-width, initial-scale=1generatorAngular CLIApache Software Foundationocket8888application-name/Users/test/Desktop/trafficcontrol/experimental/traffic_ops_auth/Users/test/Desktop/trafficcontrol/experimental/traffic_ops_auth/traffic_ops_auth.goAllowedCreateUserRolesCookieNameCreateUserPathDBTableGetRoutesHandleCreateUserHandleLoginHandleUserInfoLoginPathTokenDataTrafficOpsDomainUserInfoUserInfoPathadminExistsauthRolesStrcreateConnectionStringPostgrescreateUsergetConfiggetDBgetTokenDatagetUserrandGUIDStrconnStringdatabaserolesjwtSigningKeypartsencTokenhasRolehasUserroleInterfaceroleIsStruserInterfaceuserIsStrsignedjsonUserInfoconfigJsonconnStrguidauthRolesCounthashedPasshashedPassBytessaltsentHashedPassfirstAllowedCreateRoledbHasAdminrouteswrapHandleFuncjwajwtsha512crypto/sha512"crypto/sha512"github.com/lestrrat-go/jwx/jwa"github.com/lestrrat-go/jwx/jwa"github.com/lestrrat-go/jwx/jwt"github.com/lestrrat-go/jwx/jwt"localhost"localhost"access_token"access_token"traffic_ops_auth_users"traffic_ops_auth_users"admin"admin"DBServerjson:"database_server"DBPortjson:"database_port"DBNamejson:"database_name"DBUserjson:"database_user"DBPassjson:"database_password"AdminUserjson:"admin_user"AdminPassjson:"admin_pass"TokenKeyjson:"token_key"`json:"database_server"``json:"database_port"``json:"database_name"``json:"database_user"``json:"database_password"``json:"admin_user"``json:"admin_pass"``json:"port"``json:"token_key"`dbname=%s user=%s password=%s sslmode=disable"dbname=%s user=%s password=%s sslmode=disable" host=%s" host=%s"65536 port=%d" port=%d""("/create_user/"/create_user/"%s ERROR unauthorized: %s
"%s ERROR unauthorized: %s\n"StatusUnauthorized401%s ERROR unauthorized: %s role %s is not allowed to create users
"%s ERROR unauthorized: %s role %s is not allowed to create users\n"%s ERROR invalid request: not enough parts: '%s'. Syntax is '/create_user/name/pass/role
"%s ERROR invalid request: not enough parts: '%s'. Syntax is '/create_user/name/pass/role\n"StatusBadRequest400StatusInternalServerError500%s ERROR failed to insert into database: '%v'
"%s ERROR failed to insert into database: '%v'\n"StatusOKAudienceIssuedAtJwtIDPrivateClaimsParseOptionReadFileOptionIdentreadFileOptiongithub.com/lestrrat-go/jwx/jwt.readFileOptionparseOptiongithub.com/lestrrat-go/jwx/jwt.parseOptionWithVerifyHS256"user""role"token missing claims"token missing claims"/login/"/login/"%s ERROR invalid request: not enough parts: '%s'. Syntax is '/get_user/name/pass'
"%s ERROR invalid request: not enough parts: '%s'. Syntax is '/get_user/name/pass'\n"%s ERROR failed to get user '%s' with %v
"%s ERROR failed to get user '%s' with %v\n"claimsClaimBuildNewBuilder`user``role`ERROR creating token: %s"ERROR creating token: %s"SignOptionsignOptiongithub.com/lestrrat-go/jwx/jwt.signOption%s ERROR creating token for '%s': %v
"%s ERROR creating token for '%s': %v\n"SetCookie%s got user %s role %s
"%s got user %s role %s\n"json:"role"`json:"user"``json:"role"`/user_info"/user_info"%s ERROR marshalling userinfo %v: %s
"%s ERROR marshalling userinfo %v: %s\n"%s"%s"SELECT COUNT(1) FROM "`SELECT COUNT(1) FROM "`" WHERE role IN `" WHERE role IN `SELECT COUNT(1) FROM "traffic_ops_auth_users" WHERE role IN ;`;`insert into "`insert into "`" (username, hash, salt, role) VALUES ($1, $2, $3, $4);`" (username, hash, salt, role) VALUES ($1, $2, $3, $4);`insert into "traffic_ops_auth_users" (username, hash, salt, role) VALUES ($1, $2, $3, $4);select salt, hash, role from "`select salt, hash, role from "`" where username = $1;`" where username = $1;`select salt, hash, role from "traffic_ops_auth_users" where username = $1;authentication failed"authentication failed"config.json"config.json"Token key is too short. Must be at least 128 bits. Suggested alternative: '%s'
"Token key is too short. Must be at least 128 bits. Suggested alternative: '%s'\n"Error checking for admin: %v
"Error checking for admin: %v\n"Error: no admin in config or database"Error: no admin in config or database"ERROR creating initial admin user: no roles are allowed to create users
"ERROR creating initial admin user: no roles are allowed to create users\n"ERROR creating initial admin user: %v
"ERROR creating initial admin user: %v\n"INFORMATION created initial admin user: %s
"INFORMATION created initial admin user: %s\n"WARNING admin exists in both database and config: ignoring config admin
"WARNING admin exists in both database and config: ignoring config admin\n" AllowedCreateUserRoles returns the database roles which are allowed to create users. This should be treated as a constant, and only exists because Go doesn't allow constant map literals. Config holds the configuration of the server. authRolesStr returns a string of roles allowed to create users, as expected by SQL `IN` clauses. strip trailing , handleCreateUser is the HTTP handler for the create_user endpoint. It checks that the current logged in user is authorized to create users, and if so, creates the user. hasAdmin is a mutable pointer, so we don't have to check every time. Once an admin exists, the pointer is set to true TODO change to POST TODO return 400 if the error is that the user exists we signed it: this should never happen	w.Header().Set("Content-Type", "text/plain")Secure: true, // TODO uncomment when https is implemented prevents the cookie being accessed by Javascript. DO NOT remove, security vulnerability Generates a base64-encoded 128-bit random number. TODO prepare query getUser returns the user's role, if authentication was successful. If authentication fails, err != nil/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/availableservers/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/availableservers/availableservers.goAvailableServersAvailableServersMapTestcgsnewCsavailableserversdeliveryservice not found"deliveryservice not found"cachegroup not found"cachegroup not found"dsOne"dsOne"cgOne"cgOne"cacheOne"cacheOne"cacheTwo"cacheTwo"testAvailableServers as %+v
"testAvailableServers as %+v\n"testAvailableServers err "testAvailableServers err "testAvailableServers caches "testAvailableServers caches "
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
  AvailableServers provides access to the currently available servers, by Delivery Service and Cache Group. This is safe for access by multiple goroutines. TODO put in _test.go file/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/cgsrch/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/cgsrch/cgsrch.goCGSearcherNewThsThsThsTlefttopcrcqtDataTObjTObjNearestquadtreecgsrchgithub.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/quadtree"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/quadtree"CRConfig is nil"CRConfig is nil"QuadtreeNoderightbottomtopLefttopRightbottomLeftbottomRightelementshasSplitinsertAppropriateChildnearestInsert CGSearcher is the interface that wraps the Nearest method. Nearest searches its list of objects and returns the closest to the given point. TODO change to Searcher interface? ThsT is the Threadsafe type used by this package. ThsT should usually be a pointer or an interface which holds a pointer. Ths provides threadsafe access to a ThsT NewThs creates a new Threadsafe Ths container. Set sets the given object in the threadsafe container. The given object MUST NOT be modified after calling this. Get returns the object held by the threadsafe container. The object MUST NOT be modified./Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/config/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/config/config.goLogLocationsjson:"log_location_error"json:"log_location_warning"json:"log_location_info"json:"log_location_debug"LogLocationEventjson:"log_location_event"json:"monitors"ReqTimeoutjson:"request_timeout_ms"CRConfigIntervaljson:"crconfig_poll_interval_ms"CRStatesIntervaljson:"crstates_poll_interval_ms"TrafficOpsURIjson:"traffic_ops_uri"TrafficOpsUserjson:"traffic_ops_user"TrafficOpsPassjson:"traffic_ops_pass"TrafficOpsInsecurejson:"traffic_ops_insecure"TrafficOpsClientCachejson:"traffic_ops_client_cache"TrafficOpsTimeoutjson:"traffic_ops_timeout_ms"CoverageZoneFilejson:"coverage_zone_file"newU`json:"monitors"``json:"request_timeout_ms"``json:"crconfig_poll_interval_ms"``json:"crstates_poll_interval_ms"``json:"traffic_ops_uri"``json:"traffic_ops_user"``json:"traffic_ops_pass"``json:"traffic_ops_insecure"``json:"traffic_ops_client_cache"``json:"traffic_ops_timeout_ms"``json:"coverage_zone_file"`loading "loading "parsing "parsing "`json:"log_location_error"``json:"log_location_warning"``json:"log_location_info"``json:"log_location_debug"``json:"log_location_event"`Unquoteunquoting string: "unquoting string: "ParseRequestURIparsing URL: "parsing URL: "ParseIntconverting string to number: "converting string to number: " Fulfill the log.Logger interface ParseRequestURI is absolute, Parse may be relative; we want absolute. Duration is a JSON config time.Duration, which is marshalled and unmarshalled as milliseconds. Therefore, JSON keys of this type should be suffixed with '_ms'./Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/coveragezone/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/coveragezone/coveragezone.goCoverageZoneJSONCoverageZoneCacheGroupJSONCoverageZonescoverageZonenetPosnetsnet6scidrnetworkjcgjczcoveragezoneNetwork6CoverageZonesjson:"coverageZones"CustomerNamejson:"customerName"Revisionjson:"revision"`json:"coverageZones"``json:"customerName"``json:"revision"`error parsing cachegroup '"error parsing cachegroup '"' Network '"' Network '"' Network6 '"' Network6 '"':"':"unmarshalling JSON '"unmarshalling JSON '" TODO put in lib/go-tc TODO change to Time with Marshal func? TODO rename CRConfigLatitudeLongitude TODO change to IPNet with Unmarshal func/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfig/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfig/crconfigths.gocrconfig/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfig/ths.go Ths provides threadsafe access to a ThsT pointer. Note the object itself is not safe for multiple access, and must not be mutated, either by the original owner after calling Set, or by future users who call Get. If you need to mutate, perform a deep copy./Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfigdsservers/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfigdsservers/crconfigdsservers.goDSServerDSServerscrconfigdsserversDSFQDNs TODO handle Steering TOOD determine if neccessary, how to index/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfigpoller/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfigpoller/crconfigpoller.gocreateCGSearchercreateNextCachercgSearcherthscrcRgxnewBtsnextCacherfetcherintervalprevBtsprevCrcthsCGSearcherthsCrcthsCrcRgxthsNextCachercrconfigregexfetchnextcachecrconfigpollergithub.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/cgsrch"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/cgsrch"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crconfig"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crconfig"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crconfigregex"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crconfigregex"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/fetch"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/fetch"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/nextcache"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/nextcache"CDN name of new CRConfig is null"CDN name of new CRConfig is null"CDN name of new CRConfig '"CDN name of new CRConfig '"' doesn't match old '"' doesn't match old '"Date of new CRConfig is null"Date of new CRConfig is null"Date of new CRConfig "Date of new CRConfig " less than old " less than old "creating searcher: "creating searcher: "NextCacherNextCacheFetcherFetchDirectMatchesDotStartSlashDotFooSlashDotDotStarRegexMatchERROR CRConfig read error: "ERROR CRConfig read error: "INFO CRConfig unchanged."INFO CRConfig unchanged."INFO CRConfig changed."INFO CRConfig changed."ERROR CRConfig unmarshalling: "ERROR CRConfig unmarshalling: "ERROR not using invalid new CRConfig: "ERROR not using invalid new CRConfig: "ERROR not using invalid new CRConfig: failed to get Regexes "ERROR not using invalid new CRConfig: failed to get Regexes "ERROR not using invalid new CRConfig: failed to create Cachegroup searcher: "ERROR not using invalid new CRConfig: failed to create Cachegroup searcher: "INFO CRConfig set new"INFO CRConfig set new" createCGSearcher creates and returns the Cache Group Searcher, which can be used to efficiently find the nearest cachegroup to a given point. createNextCacher creates and returns a NextCacher, which can be used to get the next cache to use for each Delivery Service (e.g. via round-robin, consistent hash, etc). TODO implement HTTP poller/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfigregex/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfigregex/crconfigregex.gocreateRegexesregexdomainsubdomainsubsubdomainmatchsetdsDatadsNameStrdsRegexesotherDsmatchStrsuffixregexStrregexStrsdsToRegexCRConfig missing regex for '"CRConfig missing regex for '"CRConfig missing Regex for '"CRConfig missing Regex for '".*\.`.*\.`\..*`\..*`duplicate regex "duplicate regex " (" (") in ") in " and " and "ContainsAny[]^\:{}()|?+*,=%@<>!'`[]^\:{}()|?+*,=%@<>!'`duplicate Regex "duplicate Regex " in " in "Compileregex "regex " failed to compile: " failed to compile: " TODO remove duplication with Traffic Monitor Regexes maps Delivery Service Regular Expressions to delivery services. For performance, we categorize Regular Expressions into 3 categories: 1. Direct string matches, with no regular expression matching characters 2. .*\.foo\..* expressions, where foo is a direct string match with no regular expression matching characters 3. Everything else This allows us to do a cheap match on 1 and 2, and only regex match the uncommon case. DeliveryService returns the delivery service which matches the given fqdn, or false. NewRegexes constructs a new Regexes object, initializing internal pointer members. getDeliveryServiceRegexes gets the regexes of each delivery service, for the given CDN, from Traffic Ops. Returns a map[deliveryService][]regex. TODO precompute, move to TOData; call when we get new delivery services, instead of every time we create new stats TODO warn? regex matches are unusual/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfigregex/crconfigregexths.go/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crconfigregex/ths.go/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crstates/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crstates/crstatesths.gocrstatesCRStatesIsAvailablejson:"isAvailable"Ipv4Availablejson:"ipv4Available"Ipv6Availablejson:"ipv6Available"DirectlyPolledLastPolljson:"lastPoll"CRStatesDeliveryServiceDisabledLocationsjson:"disabledLocations"Cachesjson:"caches"CopyDeliveryServicesCopyCaches/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crstates/ths.go/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crstatespoller/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/crstatespoller/crstatespoller.goupdateAvailableServersserverNameStrcrcThscrscrsThsnewASavailableServersthsCrscrstatespollergithub.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/availableservers"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/availableservers"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crstates"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crstates"ERROR updateAvailableServers CRConfig server "ERROR updateAvailableServers CRConfig server " cachegroup is nil" cachegroup is nil"updateAvailableServers setting new "updateAvailableServers setting new "ERROR CRStates read error: "ERROR CRStates read error: "INFO CRStates unchanged."INFO CRStates unchanged."INFO CRStates changed."INFO CRStates changed."ERROR CRStates unmarshalling: "ERROR CRStates unmarshalling: "INFO CRStates set new"INFO CRStates set new" TODO update AvailableServers when CRStates OR CRConfig is update, via channel and manager goroutine? TODO update AvailableServers/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/fetch/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/fetch/fetch.goNewFileNewFileRoundRobinNewHTTPNewHTTPRoundRobinNewRoundRobinfileFetcherhttpFetcher Fetcher is the interface that wraps the Fetch method. A Fetcher should return the same resource with every fetch, and `Fetch` should only return different data when the resource changes. Fetch returns bytes fetched from some source, and any error.fetchers/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/fetch/file.go TODO round-robin retry on error?/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/fetch/http.go"GET"HTTP creating request '"HTTP creating request '"User-Agent"User-Agent"HTTP request '"HTTP request '"HTTP reading response body '"HTTP reading response body '"/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/fetch/roundrobin.gonextIatomicsync/atomic"sync/atomic"AddUint64/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/httpsrvr/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/httpsrvr/httpsrvr.goDefaultPosUseXForwardedForgetHandlercgDatcgSrchfqdnPartsipStrnextSrvrIsrvrsrvrsavailSrvrscgSrchThscznextCacherThshttpsrvrgithub.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/coveragezone"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/coveragezone"39.57924439.5792440000000027572785141695781343/70368744177664104.934282104.9342819999999960652467141/500000-104.93428199999999606-1846023411381213/17592186044416HandlerFuncEVENT request '"EVENT request '"' doesn't have enough parts (must be 'subsubdomain.subdomain.domain'), returning 404"' doesn't have enough parts (must be 'subsubdomain.subdomain.domain'), returning 404"StatusNotFoundDEBUG request '"DEBUG request '"' split ssd '"' split ssd '"' sd '"' sd '"' d '"' d '"' has no match, returning 404"' has no match, returning 404"EVENT "EVENT " request '" request '"' matched "' matched "X-Forwarded-For"X-Forwarded-For"SplitHostPortERROR request from"ERROR request from" failed to parse: " failed to parse: "DEBUG "DEBUG " IP '" IP '" IP failed to parse." IP failed to parse."request from"request from" IP " IP " not found, using default" not found, using default"LATLON: Request from"LATLON: Request from" got %+v
" got %+v\n" has no nearest cachegroup (should only happen if there are no cachegroups)" has no nearest cachegroup (should only happen if there are no cachegroups)"' with cg '"' with cg '"' ds '"' ds '"' failed to get available servers, returning 404: "' failed to get available servers, returning 404: "DEBUG GOT AVAILABLE SERVERS %+v
"DEBUG GOT AVAILABLE SERVERS %+v\n"' no available servers, returning 500"' no available servers, returning 500"ERROR request '"ERROR request '"' not found in Nextcacher, returning 500"' not found in Nextcacher, returning 500"StatusFound302Serving: "Serving: " TODO config var DefaultPos = tc.CRConfigLatitudeLongitude{Lat: 39.578968, Lon: -104.934333} host := r.Header.Get("Host") TODO parse subdomains more efficiently TODO better code? should never happen/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/ipmap/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/ipmap/ipmap.goDummyLocationsLatLonipmaplocations127.0.0.1"127.0.0.1"192.168.0.1"192.168.0.1"::1"::1" TODO implement, with Coverage Zone File + Maxmind DB DummyLocations returns dummy locations for IPs. TODO remove when real geo lookup is implemented Get takes an IP and returns the Latitude and Longitude. TODO: get IP via req.RemoteAddr => net.SplitHostPort => net.ParseIP/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/nextcache/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/nextcache/nextcache.go New creates and returns a new NextCacher. The returned NextCacher is safe for use by multiple goroutines. NextCacher is the interface that wraps the NextCache method. NextCache returns the next cache to use for the given delivery service. This is neither pure nor idempotent, and successive calls will return different numbers. The underlying mechanism may not be aware of the number of caches, and the returned number MAY exceed the number of caches. Typically, callers should mod the returned number by the size of their cache list, to determine the cache to use. Returns false if the given delivery service is not found./Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/nextcache/nextcacheths.go/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/nextcache/ths.go/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/quadtree/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/quadtree/quadtree.gocreateGenericdistSqelementSizeelementsInRectinRectleftMidtopMidbottomLeftElementsbottomRightElementstopLeftElementstopRightElementslatlonrbottomrleftrrightrtopinLeftinTopcandidatebestbestDistcandidatesaleftatopbleftbtop180.0180-18090.090-90MaxFloat641.7976931348623157081e+308179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368 top left MUST be 1 for the search to work properly it has split, if any child nodes are non-nil Create Returns a latitude-longitude Quadtree Note this creates a latlon quadtree. In Lat Lon, right > left and top > bottom TODO add CreateAndInsert func, for optimisation? Insert inserts the given data into the quadtree split splits the node, IFF len(elements) > size. Does NOT split if splitting is unnecessary. Allow multiple objects at the same location - the first one inserted will be returned. TODO warn? get returns the data in the given rect Nearest returns the nearest object to the given coordinates, and whether an element was found. Returns false iff the tree is empty. TODO add NearestN - n nearest objs, e.g. in case no cache in the nearest cachegroup is available. TODO add NearestAll - all nearest objs with the same coords, e.g. so multiple cachegroups at the same coordinate can be round-robined if the quadrant with the given point is empty, check all quadrants TODO memoize by returning? distSq returns the distance squared between two points. Because calculating the root is expensive, this is useful as an optimisation to compare distances, when the actual distance isn't necessary./Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/toutil/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/toutil/toutil.goGetMonitorURIsMonitorAvailableStatusesavailableStatusesmonitorstoctoutilgithub.com/apache/trafficcontrol/v8/traffic_ops/v3-client"github.com/apache/trafficcontrol/v8/traffic_ops/v3-client"ONLINE"ONLINE"REPORTED"REPORTED"GetAPICapabilitiesUpdateASNByIDGetASNsWithHeaderDeleteASNByASNCreateCacheGroupNullableUpdateCacheGroupNullableByIDWithHdrUpdateCacheGroupNullableByIDGetCacheGroupsNullableWithHdrGetCacheGroupsNullableGetCacheGroupNullableByIDWithHdrGetCacheGroupNullableByIDGetCacheGroupNullableByNameWithHdrGetCacheGroupNullableByNameGetCacheGroupNullableByShortNameWithHdrGetCacheGroupNullableByShortNameDeleteCacheGroupByIDGetCacheGroupsByQueryParamsGetCacheGroupsByQueryParamsWithHdrSetCachegroupDeliveryServicesGetCacheGroupParametersWithHdrGetCacheGroupParametersGetCacheGroupParametersByQueryParamsWithHdrGetCacheGroupParametersByQueryParamsgetCacheGroupParametersGetAllCacheGroupParametersWithHdrGetAllCacheGroupParametersDeleteCacheGroupParameterCreateCacheGroupParameterGetCapabilitiesWithHdrGetCapabilitiesGetCapabilityWithHdrGetCapabilityUpdateCDNByIDWithHdrUpdateCDNByIDGetCDNsWithHdrGetCDNByIDWithHdrGetCDNByIDGetCDNByNameWithHdrDeleteCDNByIDGetCDNSSLKeysWithHdrGetDomainsWithHdrCreateCDNFederationByNameGetCDNFederationsByNameWithHdrGetCDNFederationsByNameWithHdrReturnListGetCDNFederationsByIDWithHdrGetCDNFederationsByIDUpdateCDNFederationsByIDWithHdrUpdateCDNFederationsByIDDeleteCDNFederationByIDUpdateCoordinateByIDWithHdrUpdateCoordinateByIDGetCoordinatesWithHdrGetCoordinateByIDWithHdrGetCoordinateByIDGetCoordinateByNameGetCoordinateByNameWithHdrDeleteCoordinateByIDSnapshotCRConfigWithHdrSnapshotCRConfigByIDGetDeliveryServicesByServerV30WithHdrGetDeliveryServicesByServerWithHdrGetDeliveryServicesV30WithHdrGetDeliveryServicesNullableWithHdrGetDeliveryServicesNullableGetDeliveryServicesByCDNIDWithHdrGetDeliveryServicesByCDNIDGetDeliveryServiceNullableWithHdrGetDeliveryServiceNullableGetDeliveryServiceByXMLIDNullableWithHdrGetDeliveryServiceByXMLIDNullableCreateDeliveryServiceV30CreateDeliveryServiceNullableUpdateDeliveryServiceV30WithHdrUpdateDeliveryServiceNullableUpdateDeliveryServiceNullableWithHdrGetDeliveryServiceHealthWithHdrGetDeliveryServiceCapacityWithHdrDeleteDeliveryServiceSSLKeysByIDDeleteDeliveryServiceSSLKeysByVersionGetDeliveryServiceSSLKeysByIDGetDeliveryServiceSSLKeysByIDWithHdrGetDeliveryServicesEligibleWithHdrGetDeliveryServiceURLSigKeysWithHdrGetDeliveryServiceURISigningKeysWithHdrSafeDeliveryServiceUpdateV30WithHdrUpdateDeliveryServiceSafeGetAccessibleDeliveryServicesByTenantGetDeliveryServiceRegexesWithHdrUpdateDeliveryServiceRequestCommentByIDWithHdrUpdateDeliveryServiceRequestCommentByIDGetDeliveryServiceRequestCommentsWithHdrGetDeliveryServiceRequestCommentByIDWithHdrGetDeliveryServiceRequestCommentByIDDeleteDeliveryServiceRequestCommentByIDGetDeliveryServiceRequestsWithHdrGetDeliveryServiceRequestByXMLIDWithHdrGetDeliveryServiceRequestByXMLIDGetDeliveryServiceRequestByIDWithHdrGetDeliveryServiceRequestByIDUpdateDeliveryServiceRequestByIDWithHdrUpdateDeliveryServiceRequestByIDDeleteDeliveryServiceRequestByIDGetDeliveryServicesRequiredCapabilitiesWithHdrGetDeliveryServiceServerGetDeliveryServiceServerWithHdrGetDeliveryServiceServersWithHdrGetDeliveryServiceServersNWithHdrGetDeliveryServiceServersNGetDeliveryServiceServersWithLimitsWithHdrGetDeliveryServiceServersWithLimitsgetDeliveryServiceServersUpdateDivisionByIDWithHdrUpdateDivisionByIDGetDivisionsWithHdrGetDivisionByIDWithHdrGetDivisionByIDGetDivisionByNameWithHdrGetDivisionByNameDeleteDivisionByIDSetDeliveryServiceUserDeleteDeliveryServiceUserFederationsWithHdrAllFederationsWithHdrAllFederationsForCDNWithHdrAllFederationsForCDNGetFederationDeliveryServicesWithHdrGetFederationUsersWithHdrGetFederationFederationResolversByIDgetFederationResolversGetFederationResolversWithHdrGetFederationResolverByIDWithHdrGetFederationResolverByIDGetFederationResolverByIPAddressWithHdrGetFederationResolverByIPAddressGetFederationResolversByTypeWithHdrGetFederationResolversByTypeGetInvalidationJobsWithHdrGetLogsByQueryParamsGetLogsByLimitGetLogsByDaysUpdateOriginByIDWithHdrUpdateOriginByIDGetOriginsByQueryParamsGetOriginByIDGetOriginByNameGetOriginsByDeliveryServiceIDDeleteOriginByIDUpdateParameterByIDWithHdrUpdateParameterByIDGetParametersWithHdrGetParameterByIDWithHdrGetParameterByIDGetParameterByNameWithHdrGetParameterByNameGetParameterByConfigFileWithHdrGetParameterByConfigFileGetParameterByNameAndConfigFileWithHdrGetParameterByNameAndConfigFileAndValueWithHdrGetParameterByNameAndConfigFileAndValueDeleteParameterByIDUpdatePhysLocationByIDWithHdrUpdatePhysLocationByIDGetPhysLocationsWithHdrGetPhysLocationByIDWithHdrGetPhysLocationByIDGetPhysLocationByNameWithHdrGetPhysLocationByNameDeletePhysLocationByIDUpdateProfileByIDWithHdrUpdateProfileByIDGetParametersByProfileNameWithHdrGetProfilesWithHdrGetProfileByIDWithHdrGetProfileByIDGetProfileByNameWithHdrGetProfileByParameterWithHdrGetProfileByParameterGetProfileByParameterIdWithHdrGetProfileByParameterIdGetProfileByCDNIDWithHdrGetProfileByCDNIDDeleteProfileByIDGetProfileParametersWithHdrGetProfileParameterByQueryParamsWithHdrGetProfileParameterByQueryParamsDeleteParameterByProfileParameterUpdateRegionByIDWithHdrUpdateRegionByIDGetRegionsWithHdrGetRegionByIDWithHdrGetRegionByIDGetRegionByNameWithHdrGetRegionByNameDeleteRegionByIDUpdateRoleByIDWithHdrUpdateRoleByIDGetRolesWithHdrGetRoleByIDWithHdrGetRoleByIDGetRoleByNameWithHdrGetRoleByNameGetRoleByQueryParamsWithHdrGetRoleByQueryParamsDeleteRoleByIDCreateServerWithHdrUpdateServerByIDWithHdrUpdateServerByIDGetServersWithHdrGetFirstServerGetServerDetailsByHostNameWithHdrGetServerDetailsByHostNameDeleteServerByIDGetServerFQDNWithHdrGetServerFQDNGetServersShortNameSearchWithHdrGetServersShortNameSearchGetServerIDDeliveryServicesWithHdrGetServerUpdateStatusWithHdrGetServerServerCapabilitiesWithHdrSetUpdateServerStatusesGetServerCapabilitiesWithHdrGetServerCapabilityWithHdrGetServerCapabilityUpdateServiceCategoryByNameGetServiceCategoriesWithHdrDeleteServiceCategoryByNameerrUnlessOKOrNotModifiedUpdateStaticDNSEntryByIDWithHdrUpdateStaticDNSEntryByIDGetStaticDNSEntriesWithHdrGetStaticDNSEntryByIDWithHdrGetStaticDNSEntryByIDGetStaticDNSEntriesByHostWithHdrGetStaticDNSEntriesByHostDeleteStaticDNSEntryByIDCreateStatusNullableUpdateStatusByIDWithHdrUpdateStatusByIDGetStatusesWithHdrGetStatusByIDWithHdrGetStatusByIDGetStatusByNameWithHdrGetStatusByNameDeleteStatusByIDSteeringWithHdrUpdateSteeringTargetWithHdrGetSteeringTargetsWithHdrTenantsWithHdrTenantWithHdrTenantByNameWithHdrTenantByNameUpdateTenantWithHdrGetTopologiesWithHdrGetTopologyWithHdrGetTopologyGetTrafficMonitorConfigMapUpdateTypeByIDWithHdrUpdateTypeByIDGetTypesWithHdrGetTypeByIDWithHdrGetTypeByIDGetTypeByNameWithHdrGetTypeByNameDeleteTypeByIDGetUsersWithHdrGetUsersByRoleWithHdrGetUsersByRoleGetUserByIDWithHdrGetUserByIDGetUserByUsernameWithHdrGetUserByUsernameGetUserCurrentWithHdrUpdateUserByIDDeleteUserByID"type"MonitorTypeNameRASCALServersV3Responsegetting servers by type from '"getting servers by type from '"http://"http://" MonitorAvailableStatuses returns a set of the status names that indicate a Traffic Monitor instance is "available". GetMonitorURIs returns a list of URLs for the root of all Traffic Monitor instances in the given CDN - or an error if one occurred.DeliveryServiceNullableProfileParameterCreateUserResponseCacheGroupParameterjson:"configFile"StatsSummaryLastUpdatedResponseDeliveryServiceRequestDeliveryServiceV13DeliveryServiceV11json:"anonymousBlockingEnabled"json:"cacheurl"json:"ccrDnsTtl"json:"checkPath"DNSBypassCnamejson:"dnsBypassCname"json:"dnsBypassIp"json:"dnsBypassIp6"json:"dnsBypassTtl"json:"dscp"json:"edgeHeaderRewrite"json:"geoLimit"json:"geoProvider"json:"globalMaxMbps"json:"globalMaxTps"json:"httpBypassFqdn"json:"initialDispersion"json:"ipv6RoutingEnabled"json:"logsEnabled"json:"longDesc1"json:"longDesc2"json:"matchList,omitempty"json:"maxDnsAnswers"json:"midHeaderRewrite"json:"missLat"json:"missLong"json:"multiSiteOrigin"json:"orgServerFqdn"json:"profileId,omitempty"json:"qstringIgnore"json:"rangeRequestHandling"json:"regexRemap"json:"regionalGeoBlocking"json:"remapText"json:"routingName"json:"typeId"json:"tenantId"json:"fqPacingRate,omitempty"json:"trRequestHeaders,omitempty"json:"trResponseHeaders,omitempty"json:"assigneeId,omitempty"json:"authorId"json:"changeType"json:"createdAt"json:"lastEditedBy,omitempty"json:"lastEditedById,omitempty"UpdateUserResponseDeleteTenantResponseTenantAlertServerDetailV30ServerDetailjson:"deliveryservices,omitempty"HardwareInfojson:"hardwareInfo"CapabilityJobCacheGroupParametersResponseNullablejson:"cachegroup"  db:"cachegroup"json:"parameter"  db:"parameter"json:"last_updated,omitempty"  db:"last_updated"UpdateDeliveryServiceNullableResponseCreateDeliveryServiceNullableResponseUserDeliveryServicePostResponseDeliveryServiceUserPostUserIDjson:"userId"CacheGroupParametersPostResponseCacheGroupParameterRequestjson:"cacheGroupId"TrafficMonitorConfigMapCDNQueueUpdateRequestAPICapabilityResponseAPICapabilityHTTPMethodjson:"httpMethod" db:"http_method"Routejson:"httpRoute" db:"route"json:"capability" db:"capability"DSServerResponseV30UserDeliveryServiceDeleteResponseInvalidationJobInputdsid/Users/test/Desktop/trafficcontrol/experimental/traffic_router_golang/traffic_router_golang.goCRConfigPathCRStatesPathDefaultConfigFilesrvscrconfigFetchercrstatesFetcherthsCRConfigthsCRConfigRegexesthsCRStatestoURIStrgithub.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/config"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/config"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crconfigpoller"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crconfigpoller"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crstatespoller"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/crstatespoller"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/httpsrvr"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/httpsrvr"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/toutil"github.com/apache/trafficcontrol/v8/experimental/traffic_router_golang/toutil"0.1"0.1"traffic_router_golang/"traffic_router_golang/"traffic_router_golang/0.1./cfg.json"./cfg.json"/publish/CrConfig"/publish/CrConfig"/publish/CrStates"/publish/CrStates""cfg"The config file path"The config file path"Error loading config file '"Error loading config file '"Error creating log writers: "Error creating log writers: "Starting with config %+v
"Starting with config %+v\n"Error loading coverage zone file '"Error loading coverage zone file '"TO URI Str: "TO URI Str: "logging in to Traffic Ops (%v): %v
"logging in to Traffic Ops (%v): %v\n"Connected to Traffic Ops "Connected to Traffic Ops "getting monitors from Traffic Ops (%v): %v
"getting monitors from Traffic Ops (%v): %v\n"Got Traffic Ops Monitors: %+v
"Got Traffic Ops Monitors: %+v\n"Could not get initial CRConfig: "Could not get initial CRConfig: "Could not get initial CRStates from: "Could not get initial CRStates from: "10000000000CRConfig nil"CRConfig nil"CRConfig no CDN Name"CRConfig no CDN Name"CRConfig no Date"CRConfig no Date"CDN: "CDN: " Date: " Date: "CRStates nil"CRStates nil"CRStates: deliveryservices: "CRStates: deliveryservices: " caches: " caches: "my-delivery-service-xmlid"my-delivery-service-xmlid"my-cachegroup-name"my-cachegroup-name"availableServers err"availableServers err""availableServers" Version is the utility's version. UserAgent is the string passed by the utility in the HTTP User-Agent header. DefaultConfigFile is the relative file path used as the default configuration file location CRConfigPath is the Traffic Monitor API path used to retrieve the CDN Snapshot. CRStatesPath is the Traffic Monitor API path used to retrieve the states of the monitored cache servers. TODO re-fetch monitors on interval debug crconfigFetcher := fetch.NewFile("./crconfig.json") crstatesFetcher := fetch.NewFile("./crstates.json")/Users/test/Desktop/trafficcontrol/experimental/webfront/Users/test/Desktop/trafficcontrol/experimental/webfront/simpleserver/Users/test/Desktop/trafficcontrol/experimental/webfront/simpleserver/simpleserver.goHitting "Hitting " with " with "LdateLtimeLshortfileserver.pem"server.pem"server.key"server.key"

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
 Make sure you have the server.pem and server.key file. To gen self signed: openssl genrsa -out server.key 2048 openssl req -new -x509 -key server.key -out server.pem -days 3650/Users/test/Desktop/trafficcontrol/experimental/webfront/webfront.goNewServerRulemakeHandlerparseRulesprintUsagerejectNoTokenexampleConfigdecoderpollcapabilitiesisAuthorizedruleForwardlastrulesgetRulerefreshRulesloadRulesmtimehttputilnet/http/httputil"net/http/httputil"RuleFilejson:"rule-file"PollIntervaljson:"poll-interval"ListenPortjson:"listen-port"`json:"rule-file"``json:"poll-interval"``json:"listen-port"`{
	"listen-port":   9000,
	"rule-file":     "rules.json",
	"poll-interval": 60
}`{
	"listen-port":   9000,
	"rule-file":     "rules.json",
	"poll-interval": 60
}`Usage: "Usage: " config-file secret" config-file secret"Example config-file:"Example config-file:"Error opening config file:"Error opening config file:"Error reading config file:"Error reading config file:"DefaultTransportserver.pem file not found"server.pem file not found"server.key file not found"server.key file not found"Starting webfront on port %d..."Starting webfront on port %d..."Error loading rules file: "Error loading rules file: "%v %v No mapping in rules file!"%v %v No mapping in rules file!"Not found"Not found"ParseHeaderAuthorization`Authorization`Token Error:"Token Error:"%v %v Valid token required, but none found!"%v %v Valid token required, but none found!"StatusForbidden403`cap`%v %v Valid token. Subject=%v, ExpiresAt=%v, Capabilities=%v, Required=%v, Authorized=%v"%v %v Valid token. Subject=%v, ExpiresAt=%v, Capabilities=%v, Required=%v, Authorized=%v"Not Authorized"Not Authorized"Bad rule: %#v"Bad rule: %#v"ReverseProxyProxyRequestSetXForwardedBufferPoolRewriteDirectorFlushIntervalModifyResponseErrorHandlerdefaultErrorHandlergetErrorHandlermodifyResponseflushIntervalcopyResponsecopyBufferhandleUpgradeResponse Started with https://github.com/nf/webfront/blob/master/main.go by Andrew Gerrand <adg@golang.org> TODO(amiry) - Handle refresh tokens Server implements an http.Handler that acts as a reverse proxy guards the fields below Rule represents a rule in a configuration file. to match against request Host header to match against a path (start) reverse proxy map-to protect with jwt? map HTTP methods to capabilitues override the default so we can use self-signed certs on our microservices and use a self-signed cert in this server NewServer constructs a Server that reads rules from file with a period specified by poll. ServeHTTP matches the Request with a Rule and, if found, serves the request with the Rule's handler. If the rule's secure field is true, it will only allow access if the request has a valid JWT bearer token. Authorization: Check is the list of capabilities in the token's claims contains the reqired capability that is listed in the rule Save this to use in the logging later Some clients include a port in the request host; strip it. Logger.Printf("Found rule") Logger.Printf("Rule not found") refreshRules polls file periodically and refreshes the Server's rule set if the file has been modified. Logger.Printf("loading rule file") loadRules tests whether file has been modified since its last invocation and, if so, loads the rule set from file. no change parseRules reads rule definitions from file, constructs the Rule handlers, and returns the resultant Rules. makeHandler constructs the appropriate Handler for the given Rule. req.URL.Path = "/boo1" // TODO JvD - regex to change path here/Users/test/Desktop/trafficcontrol/go.modmodulegithub.com/apache/trafficcontrol/v8// Licensed to the Apache Software Foundation (ASF) under one// or more contributor license agreements.  See the NOTICE file// distributed with this work for additional information// regarding copyright ownership.  The ASF licenses this file// to you under the Apache License, Version 2.0 (the// "License"); you may not use this file except in compliance// with the License.  You may obtain a copy of the License at//   http://www.apache.org/licenses/LICENSE-2.0// Unless required by applicable law or agreed to in writing,// software distributed under the License is distributed on an// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY// KIND, either express or implied.  See the License for the// specific language governing permissions and limitations// under the License.go1.22.0code.cloudfoundry.org/bytefmtv0.0.0-20211005130812-5bb3c17173e5github.com/GehirnInc/cryptv0.0.0-20200316065508-bb7000b8a962github.com/asaskevich/govalidatorv0.0.0-20210307081110-f21760c49a8dgithub.com/basho/riak-go-clientv1.7.1-0.20170327205844-5587c16e0b8bgithub.com/cbroglie/mustachev1.4.0github.com/cihub/seelogv0.0.0-20170130134532-f561c5e57575github.com/dchest/siphashv1.2.2github.com/fsnotify/fsnotifyv1.5.1github.com/go-acme/legov2.7.2+incompatiblegithub.com/go-ldap/ldap/v3v3.4.1github.com/go-ozzo/ozzo-validationv3.6.0+incompatiblev0.8.1github.com/golang-migrate/migrate/v4v4.15.1github.com/google/uuidv1.3.0github.com/hydrogen18/stoppableListenerv0.0.0-20161101122645-827d760f0663github.com/influxdata/influxdbv1.9.5github.com/jmoiron/sqlxv1.3.4github.com/json-iterator/gov1.1.12github.com/kylelemons/godebugv1.1.1-0.20201107061927-e693023230a4github.com/lestrrat-go/jwxv1.2.29v1.10.4github.com/miekg/dnsv1.1.43github.com/onsi/ginkgov1.16.5github.com/onsi/gomegav1.17.0v2.1.0github.com/pkg/errorsv0.9.1go.etcd.io/bboltv1.3.6golang.org/x/cryptov0.21.0golang.org/x/netgolang.org/x/sysv0.18.0gopkg.in/DATA-DOG/go-sqlmock.v1gopkg.in/yaml.v2v2.4.0gopkg.in/yaml.v3v3.0.1github.com/Azure/go-ntlmsspv0.0.0-20200615164410-66371956d46c// indirectgithub.com/basho/backoffv0.0.0-20150307023525-2ff7c4694083github.com/cenkalti/backoffv2.2.1+incompatiblegithub.com/decred/dcrd/dcrec/secp256k1/v4v4.2.0github.com/go-asn1-ber/asn1-bergithub.com/goccy/go-jsonv0.10.2github.com/golang/protobufv1.5.2github.com/hashicorp/errwrapv1.0.0github.com/hashicorp/go-multierrorv1.1.0github.com/lestrrat-go/backoff/v2v2.0.8github.com/lestrrat-go/blackmagicv1.0.2github.com/lestrrat-go/httpccv1.0.1github.com/lestrrat-go/itergithub.com/lestrrat-go/optiongithub.com/modern-go/concurrentv0.0.0-20180306012644-bacd9c7ef1ddgithub.com/modern-go/reflect2v1.4.8go.uber.org/atomicv1.6.0google.golang.org/protobufv1.33.0gopkg.in/square/go-jose.v2v2.5.1gopkg.in/tomb.v1v1.0.0-20141024135613-dd632973f1e7github.com/Shopify/saramav1.27.2github.com/klauspost/compressv1.13.6github.com/davecgh/go-spewv1.1.1github.com/eapache/go-resiliencyv1.2.0github.com/eapache/go-xerial-snappyv0.0.0-20180814174437-776d5712da21github.com/eapache/queuegithub.com/golang/snappyv0.0.4github.com/hashicorp/go-uuidgithub.com/jcmturner/goforkgithub.com/pierrec/lz4v2.5.2+incompatiblegithub.com/rcrowley/go-metricsv0.0.0-20200313005456-10cdbea86bc0golang.org/x/textv0.14.0gopkg.in/jcmturner/aescts.v1gopkg.in/jcmturner/dnsutils.v1gopkg.in/jcmturner/gokrb5.v7v7.5.0gopkg.in/jcmturner/rpc.v1/Users/test/Desktop/trafficcontrol/grove/Users/test/Desktop/trafficcontrol/grove/cache/Users/test/Desktop/trafficcontrol/grove/cache/handler.goCodeConnectFailureDefaultParentRespDataDefaultRespCodeGetAndCacheHandlerPointerModifiedSinceHdrNewHandlerNewHandlerPointerNewResponderNewRetrierRespondFuncResponderRetriercopyPluginContextisCacheHitisFailuremakeRuleThrottlersretryingGetrealHandlernewHandlerconnectionCloseconnshttpConnshttpsConnspluginContextremapperruleLimitstatsstrictRFCremapRulesruleThrottlersnewVrealConnbeforeParentRequestDatabeforeRespDatabodyPtrcodePtrhdrsPtroldCacheObjbeforeCacheLookUpDatacacheObjcanReuseStoredclientIPHTTPRequestRemapperRemappingProducerRemapRuleRemapRuleBaseQueryStringRuleRemapjson:"remap"json:"cache"json:"from"CertificateFilejson:"certificate-file"CertificateKeyFilejson:"certificate-key-file"ConnectionClosejson:"connection-close"QueryStringjson:"query-string"ConcurrentRuleRequestsjson:"concurrent_rule_requests"RetryNumjson:"retry_num"PluginsSharedjson:"plugins_shared"ParentSelectionTypeRemapRuleToRemapRuleToBasejson:"url"ProxyURLRetryCodesATSConsistentHashOrderedMapUint64NodeIteratorATSConsistentHashNodeFailedAtFailCountUpAtNextWrapFirstLookupHashLookupIterCacheObjCacheControlMapccmReqHeadersRespCacheControlCodeOriginCodeReqTimeReqRespTimeRespRespTimeHitCountComputeSizeKeysParentSelectionAllowDenyConsistentHashAllowedURIuriGetTouriGetToConsistentHashCacheKeyoldURIfailuresOverrideCacheKeyPluginCfgFirstFQDNProxyStrGetNextRemapRulesStatsstatRulesPluginSharedCfgRulesStatRulesGetterThrottlerThrottleStatsRemapsStatsRemapAddCacheHitAddCacheMissAddInBytesAddOutBytesAddStatus2xxAddStatus3xxAddStatus4xxAddStatus5xxCacheHitsCacheMissesInBytesOutBytesStatus2xxStatus3xxStatus4xxStatus5xxStatsSystemAddConfigReloadAddConfigReloadRequestsAstatsLoadConfigReloadRequestsConfigReloadsLastReloadLastReloadRequestSetAstatsLoadSetLastReloadSetLastReloadRequestInterceptConnbytesReadbytesWrittenBytesReadBytesWrittenRealSetDSCPCacheCapacityCacheCapacityByNameCacheKeysCacheNamesCachePeekCacheSizeCacheSizeByNameConnectionsSystemConnMapLoadFuncAfterRespondDataReqDataClientIPToFQDNSrvrDataParentRespDataReuseOriginReqSuccessOriginConnectFailedOriginBytesRespDataRespCodeRespSuccessCacheHitRequestIDBeforeCacheLookUpDataCacheKeyOverrideFuncDefaultCacheKeyBeforeParentRequestDataBeforeRespondDataHdrOnRequestDataHTTPConnsHTTPSConnsCacheFilejson:"size_bytes"RFCCompliantjson:"rfc_compliant"json:"https_port"DisableHTTP2json:"disable_http2"CacheSizeBytesjson:"cache_size_bytes"RemapRulesFilejson:"remap_rules_file"CertFilejson:"cert_file"KeyFilejson:"key_file"json:"interface_name"json:"connection_close"LogLocationWarningjson:"plugins"ReqTimeoutMSjson:"parent_request_timeout_ms"ReqKeepAliveMSjson:"parent_request_keep_alive_ms"ReqMaxIdleConnsjson:"parent_request_max_idle_connections"ReqIdleConnTimeoutMSjson:"parent_request_idle_connection_timeout_ms"ServerIdleTimeoutMSjson:"server_idle_timeout_ms"ServerWriteTimeoutMSjson:"server_write_timeout_ms"ServerReadTimeoutMSjson:"server_read_timeout_ms"CacheFilesjson:"cache_files"FileMemBytesjson:"file_mem_bytes"SharedLoadFuncsOnAfterRespondOnBeforeCacheLookupOnBeforeParentRequestOnBeforeRespondOnRequestrequestIDonReqDatapluginCfgremappingProducerreqCacheControlreqDatareqHeaderreqHeadersreqHostreqIDreqTimeresponderretriersrvrDatatoFQDNcachedataremapunsafeweb"unsafe"github.com/apache/trafficcontrol/v8/grove/cachedata"github.com/apache/trafficcontrol/v8/grove/cachedata"github.com/apache/trafficcontrol/v8/grove/plugin"github.com/apache/trafficcontrol/v8/grove/plugin"github.com/apache/trafficcontrol/v8/grove/remap"github.com/apache/trafficcontrol/v8/grove/remap"github.com/apache/trafficcontrol/v8/grove/stat"github.com/apache/trafficcontrol/v8/grove/stat"github.com/apache/trafficcontrol/v8/grove/thread"github.com/apache/trafficcontrol/v8/grove/thread"github.com/apache/trafficcontrol/v8/grove/web"github.com/apache/trafficcontrol/v8/grove/web"LoadPointerStorePointergetting  hostname: %v
"getting  hostname: %v\n"NewGetterNewThrottlerRemoteAddr '%v' not in Conns (reqid %v)
"RemoteAddr '%v' not in Conns (reqid %v)\n"Could not get Conn info: Conn is not an InterceptConn: %T (reqid %v)
"Could not get Conn info: Conn is not an InterceptConn: %T (reqid %v)\n": could not set DSCP: ": could not set DSCP: " (reqid " (reqid "FormatUintCopyHeaderGetClientIPPortPluginContextResponseCodeSetResponseErrRuleNotFoundrule not found for %v (reqid %v)
"rule not found for %v (reqid %v)\n"ErrIPNotAllowedIP %v not allowed (reqid %v)
"IP %v not allowed (reqid %v)\n"request error: %v (reqid %v)
"request error: %v (reqid %v)\n"ParseCacheControlServe got Cache-Control %+v (reqid %v)
"Serve got Cache-Control %+v (reqid %v)\n"ReqHdrReqCacheControlReqIDcache.Handler.ServeHTTP: '%v' not in cache (reqid %v)
"cache.Handler.ServeHTTP: '%v' not in cache (reqid %v)\n"retrying get error (in uncached): %v (reqid %v)
"retrying get error (in uncached): %v (reqid %v)\n"CanReuseStoredReuseCancache.Handler.ServeHTTP: '%v' cache hit! (reqid %v)
"cache.Handler.ServeHTTP: '%v' cache hit! (reqid %v)\n"ReuseCannotcache.Handler.ServeHTTP: '%v' can't reuse (reqid %v)
"cache.Handler.ServeHTTP: '%v' can't reuse (reqid %v)\n"retrying get error (in reuse-cannot): %v (reqid %v)
"retrying get error (in reuse-cannot): %v (reqid %v)\n"ReuseMustRevalidatecache.Handler.ServeHTTP: '%v' must revalidate (reqid %v)
"cache.Handler.ServeHTTP: '%v' must revalidate (reqid %v)\n"retrying get error: %v (reqid %v)
"retrying get error: %v (reqid %v)\n"ReuseMustRevalidateCanStalecache.Handler.ServeHTTP: '%v' must revalidate (but allowed stale) (reqid %v)
"cache.Handler.ServeHTTP: '%v' must revalidate (but allowed stale) (reqid %v)\n"retrying get error - serving stale as allowed: %v (reqid %v)
"retrying get error - serving stale as allowed: %v (reqid %v)\n"cache.Handler.ServeHTTP: '%v' responding with %v (reqid %v)
"cache.Handler.ServeHTTP: '%v' responding with %v (reqid %v)\n" doesn't need threadsafe keys, because it's never added to or deleted after creation. TODO fix for hot rule reloading Atomic - DO NOT access or modify without atomic operations keyThrottlers     Throttlers nocacheThrottlers Throttlers func (h *cacheHandler) checkoutKeyThrottler(k string) Throttler { 	keyThrottlersM.Lock() 	defer keyThrottlersM.Unlock() 	if t, ok := keyThrottlers[k]; !ok { 		keyThrottlers[k] = NewThrottler 	return keyThrottlers[k] NewHandler returns an http.Handler object, which may be pipelined with other http.Handlers via `http.ListenAndServe`. If you prefer pipelining functions, use `GetHandlerFunc`. This needs rate-limited in 3 ways. 1. ruleLimit - Simultaneous requests to the origin (remap rule) should be configurably limited. For example, "only allow 1000 simultaneous requests to the origin 2. keyLimit - Simultaneous requests, on cache miss, for the same key (Method+Path+Qstring), should be configurably limited. For example, "Only allow 10 simultaneous requests per unique URL on cache miss. Additional requestors must wait until others complete. Once another requestor completes, all waitors for the same URL are signalled to use the cache, or proceed to the third uncacheable limiter" 3. nocacheLimit - If simultaneous requestors exceed the URL limiter, and some request for the same key gets a result which is uncacheable, waitors for the same URL may then proceed at a third configurable limit for uncacheable requests. Note these only apply to cache misses. Cache hits are not limited in any way, the origin is not hit and the cache value is immediately returned to the client. This prevents a large number of uncacheable requests for the same URL from timing out because they're required to proceed serially from the low simultaneous-requests-per-URL limit, while at the same time only hitting the origin with a very low limit for many simultaneous cacheable requests. Example: Origin limit is 10,000, key limit is 1, the uncacheable limit is 1,000. Then, 2,000 requests come in for the same URL, simultaneously. They are all within the Origin limit, so they are all allowed to proceed to the key limiter. Then, the first request is allowed to make an actual request to the origin, while the other 1,999 wait at the key limiter. The connectionClose parameter determines whether to send a `Connection: close` header. This is primarily designed for maintenance, to drain the cache of incoming requestors. This overrides rule-specific `connection-close: false` configuration, under the assumption that draining a cache is a temporary maintenance operation, and if connectionClose is true on the service and false on some rules, those rules' configuration is probably a permament setting whereas the operator probably wants to drain all connections if the global setting is true. If it's necessary to leave connection close false on some rules, set all other rules' connectionClose to true and leave the global connectionClose unset. keyThrottlers:     NewThrottlers(keyLimit), nocacheThrottlers: NewThrottlers(nocacheLimit), must give each request a copy, because they can modify in parallel if we failed to get a remapping, there's no DSCP to set. copy request header, because it's not guaranteed valid after actually issuing the request create new pointers, so plugins don't modify the cacheObj run the BeforeParentRequest hook for revalidations / ReuseCannotRemapping/Users/test/Desktop/trafficcontrol/grove/cache/responder.gohdrsarDatarespDatarespSuccessoriginCodereuseServeErrMethodHeadRespond%s %s %s %v : responding: %v"%s %s %s %v : responding: %v"TryFlush Responder is an object encapsulating the cache's response to the client. It holds all the data necessary to respond, log the response, and add the stats. NewResponder creates a Responder, which defaults to a generic error response. SetResponse is a helper which sets the RespondFunc of r to `web.Respond` with the given code, headers, body, and connectionClose. Note it takes a pointer to the headers and body, which may be modified after calling this but before the Do() sends the response. Do responds to the client, according to the data in r, with the given code, headers, and body. It additionally writes to the event log, and adds statistics about this request. This should always be called for the final response to a client, in order to properly log, stat, and other final operations. For cache misses, reuse should be ReuseCannot. For parent connect failures, originCode should be 0. TODO move plugins.BeforeRespond here? How do we distinguish between success, and know to set headers? r.OriginReqSuccess? TODO remove? Let plugins do it, if they need to? TODO move to web? remap?/Users/test/Desktop/trafficcontrol/grove/cache/retryinggetter.gocanReusegetAndCachegetReqIDgotObjremappingretryFailuresretryGetFuncretryAllowedcachedObjgetCacheObjfailureCoderetryCodesnewRespHeaderlastModifiedproxyURLStrreqRespTimerespCoderespHeaderrespRespTimecacheFailureremapNameretryNumrevalidateObjruleThrottlercacheobjicachegithub.com/apache/trafficcontrol/v8/grove/cacheobj"github.com/apache/trafficcontrol/v8/grove/cacheobj"github.com/apache/trafficcontrol/v8/grove/icache"github.com/apache/trafficcontrol/v8/grove/icache"StatusBadGateway502CanReuseRetrier.Get Y URI %v %v %v remapping.CacheKey %v rule %v parent %v code %v headers %+v len(body) %v getterid %v (reqid %v)
"Retrier.Get Y URI %v %v %v remapping.CacheKey %v rule %v parent %v code %v headers %+v len(body) %v getterid %v (reqid %v)\n"ErrNoMoreRetriesremapping producer allows no requests"remapping producer allows no requests"GetAndCache calling request %v %v %v %v %v (reqid %v)
"GetAndCache calling request %v %v %v %v %v (reqid %v)\n"RFC1123Mon, 02 Jan 2006 15:04:05 MSTGetAndCache web.Request URI %v %v %v cacheKey %v rule %v parent %v error %v reval %v code %v len(body) %v (reqid %v)
"GetAndCache web.Request URI %v %v %v cacheKey %v rule %v parent %v error %v reval %v code %v len(body) %v (reqid %v)\n"Parent error for URI %v %v %v cacheKey %v rule %v parent %v error %v (reqid %v)
"Parent error for URI %v %v %v cacheKey %v rule %v parent %v error %v (reqid %v)\n"StatusTextGetAndCache request returned %v headers %+v (reqid %v)
"GetAndCache request returned %v headers %+v (reqid %v)\n"GetHTTPDaterequest %v returned no Date header - RFC Violation! Using local response timestamp (reqid %v)
"request %v returned no Date header - RFC Violation! Using local response timestamp (reqid %v)\n"h.cache.Add %v (reqid %v)
"h.cache.Add %v (reqid %v)\n"GetAndCache respCode %v (reqid %v)
"GetAndCache respCode %v (reqid %v)\n"GetAndCache new %v (reqid %v)
"GetAndCache new %v (reqid %v)\n"CanCacheGetAndCache revalidating %v len(revalidateObj.Body) %v (reqid %v)
"GetAndCache revalidating %v len(revalidateObj.Body) %v (reqid %v)\n"rule %v not in ruleThrottlers map. Requesting with no origin limit! (reqid %v)
"rule %v not in ruleThrottlers map. Requesting with no origin limit! (reqid %v)\n"NewNoThrottler Get takes the HTTP request and the cached object if there is one, and makes a new request, retrying according to its RemappingProducer. If no cached object exists, pass a nil obj. Along with the cacheobj.CacheObj, a string pointer to the request hostname used to fetch the cacheobj.CacheObj is returned. return true for Revalidate, and issue revalidate requests separately. retryingGet takes a function, and retries failures up to the RemappingProducer RetryNum limit. On failure, it creates a new remapping. The func f should use `remapping` to make its request. If it hits failures up to the limit, it returns the last received cacheobj.CacheObj TODO refactor to not close variables - it's awkward and confusing. GetAndCache makes a client request for the given `http.Request` and caches it if `CanCache`. THe `ruleThrottler` may be nil, in which case the request will be unthrottled. TODO this is awkward, with 'revalidateObj' indicating whether the request is a Revalidate. Should Getting and Caching be split up? How? TODO figure out why respReqTime isn't used by rules TODO Verify overriding the passed reqTime is the right thing to do if no Date was returned using the client response time simulates latency 0 return without caching must copy, because this cache object may be concurrently read by other goroutines no need to +1 here, the cache Get did that TODO store pointer?/Users/test/Desktop/trafficcontrol/grove/cachedata/Users/test/Desktop/trafficcontrol/grove/cachedata/cachedata.go cachedata exists as a package to avoid import cycles ParentResponseData contains data about the parent/origin response. OriginConnectFailed is whether the connection to the origin succeeded. It's possible to get a failure response from an origin, but have the connection succeed. HandlerData contains data generally held by the Handler, and known as soon as the request is received./Users/test/Desktop/trafficcontrol/grove/cacheobj/Users/test/Desktop/trafficcontrol/grove/cacheobj/cacheobj.gorevalidateCanReuse our client's time when the object was requested our client's time when the object was received the origin server's Date time when the object was sent the origin LastModified if it exists, or Date if it doesn't the number of times this object was hit ComputeSize computes the size of the given CacheObj. This computation is expensive, as the headers must be iterated over. Thus, the size should be computed once and stored, not computed on-the-fly for every new request for the cached object. TODO include headers size copyHeader(reqHeader, &obj.reqHeaders) copyHeader(respHeader, &obj.respHeaders) CanReuse is a helper wrapping github.com/apache/trafficcontrol/v8/lib/go-rfc.CanReuseStored, returning a boolean rather than an enumerated "Reuse" value, for when it's known whether MustRevalidate can be used./Users/test/Desktop/trafficcontrol/grove/chash/Users/test/Desktop/trafficcontrol/grove/chash/atsconsistenthash.goDefaultSimpleATSConsistentHashReplicasNewSimpleATSConsistentHashNewSimpleOrderedMapUint64NodeNewSimpleOrderedMapUint64NodeIteratorOrderedMapUint64NodeSimpleATSConsistentHashSimpleOrderedMapUInt64NodeSimpleOrderedMapUint64NodeIteratorSortableUint64roundnodeweighthashValreplicasInsertBulkLastLowerBoundReplicasNodeMaphashKeyhashStrnumInsertssiphashchash"github.com/dchest/siphash"1/2Copysignlookup name is empty"lookup name is empty" This is specifically designed to match the Apache Traffic Server Parent Selection Consistent Hash, so that Grove deployed alongside ATS will hash to the same parent (mid-tier) caches, and thus result in the same mids caching the same content Transliterated from https://raw.githubusercontent.com/apache/trafficserver/master/lib/ts/HashSip.cc via https://github.com/floodyberry/siphash via https://131002.net/siphash/ type HashRing interface { 	Get(key string) string 	// Add(val string) 	// AddWeighted(val string, weight int) type ATSHashRing struct { Lookup returns the found node, its map iterator, and whether the lookup wrapped (*iter)++;O/Users/test/Desktop/trafficcontrol/grove/chash/atsorderedmap.goprevISimpleOrderedMapUInt64Node InsertBulk failed - len(keys) != len(vals)"SimpleOrderedMapUInt64Node InsertBulk failed - len(keys) != len(vals)" func NewATSHashRing(vals []string) HashRing { TODO move Weighted to a separate struct, `ATSWeightedHashRing` func NewATSHashRingWeighted(vals map[string]int) HashRing { func (h *ATSHashRing) Add(val string) { func (h *ATSHashRing) AddWeighted(val string, weight int) { ATSConsistentHashNode is an ATS ParentRecord pRecord fields (ParentSelection.h) fmt.Println("InsertBulk " + strconv.FormatUint(keys[i], 10) + ": " + vals[i].String() + " " + vals[i].ProxyURL.String()) clear, in case there were previous inserts TODO change to binary search First returns the iterator to the first element in the map. Returns nil if the map is empty Last returns the iterator to the last element in the map. Returns nil if the map is empty/Users/test/Desktop/trafficcontrol/grove/config/Users/test/Desktop/trafficcontrol/grove/config/config.goDefaultConfigMSPerSecbytesPerGibibytebytesPerMebibyteconfigBytes10485761073741824`json:"rfc_compliant"``json:"https_port"``json:"disable_http2"``json:"cache_size_bytes"``json:"remap_rules_file"``json:"concurrent_rule_requests"``json:"cert_file"``json:"key_file"``json:"interface_name"``json:"connection_close"``json:"plugins"``json:"parent_request_timeout_ms"``json:"parent_request_keep_alive_ms"``json:"parent_request_max_idle_connections"``json:"parent_request_idle_connection_timeout_ms"``json:"server_idle_timeout_ms"``json:"server_write_timeout_ms"``json:"server_read_timeout_ms"``json:"cache_files"``json:"file_mem_bytes"``json:"size_bytes"`443100000LogLocationStdout90000100003000104857600 RFCCompliant determines whether `Cache-Control: no-cache` requests are honored. The ability to ignore `no-cache` is necessary to protect origin servers from DDOS attacks. In general, CDNs and caching proxies with the goal of origin protection should set RFCComplaint false. Cache with other goals (performance, load balancing, etc) should set RFCCompliant true. Port is the HTTP port to serve on CacheSizeBytes is the size of the memory cache, in bytes. ConcurrentRuleRequests is the number of concurrent requests permitted to a remap rule, that is, to an origin. Note this is overridden by any per-rule settings in the remap rules. ConnectionClose determines whether to send a `Connection: close` header. This is primarily designed for maintenance, to drain the cache of incoming requestors. This overrides rule-specific `connection-close: false` configuration, under the assumption that draining a cache is a temporary maintenance operation, and if connectionClose is true on the service and false on some rules, those rules' configuration is probably a permament setting whereas the operator probably wants to drain all connections if the global setting is true. If it's necessary to leave connection close false on some rules, set all other rules' connectionClose to true and leave the global connectionClose unset. TODO rename "parent_request" to distinguish from client requests FileMemBytes is the amount of memory to use as an LRU in front of each name in CacheFiles, that is, each named group of files. E.g. if there are 10 files, the amount of memory used will be 10*FileMemBytes+CacheSizeBytes. DefaultConfig is the default configuration for the application, if no configuration file is given, or if a given config setting doesn't exist in the config file. LoadConfig loads the given config file. If an empty string is passed, the default config is returned./Users/test/Desktop/trafficcontrol/grove/diskcache/Users/test/Desktop/trafficcontrol/grove/diskcache/diskcache.goBucketNameDiskCacheMultiDiskCacheNewMulticacheSizeBytescursorFreelistType281474976710655pgidsequencetxidpageSizeflagsfreelistchecksumcopysum64pagecountleafPageElementleafPageElementsbranchPageElementbranchPageElementshexdumpnodesinodesinodeisLeafunbalancedspilledminKeyssizeLessThanpageElementSizechildAtchildIndexnumChildrennextSiblingprevSiblingsplitTwosplitIndexspillrebalanceremoveChilddereferencefreerootNodeFillPercentRootWritableCursoropenBucketCreateBucketCreateBucketIfNotExistsDeleteBucketSequenceSetSequenceNextSequenceForEachforEachPageforEachPageNode_forEachPageNodeinlineablemaxInlineBucketSizepageNodeTxStatsPageCountPageAllocCursorCountNodeCountNodeDerefRebalanceRebalanceTimeSpillSpillTimeWriteTimewritablemanagedpagescommitHandlersWriteFlagOnCommitcommitFreelistnonPhysicalRollbackCopyFileCheckallocatewriteMetaPageFreePageNPendingPageNFreeAllocFreelistInuseTxNOpenTxNtxPendingidsalloctxlastReleaseBeginpidSetpgidsmergefreelistTypeallocspendingfreemapsforwardMapbackwardMapfree_countmergeSpansgetFreePageIDsreadIDsarrayFreeCountpending_countcopyallarrayAllocatereleaseRangefreedarrayReadIDsarrayGetFreePageIDsnoSyncReloadreindexarrayMergeSpanshashmapFreeCounthashmapAllocatehashmapReadIDshashmapGetFreePageIDshashmapMergeSpansmergeWithExistingSpanaddSpandelSpanPoollocalSizevictimvictimSizegetSlowpinpinSlowbatchcallstriggerrunwriteAtStrictModeNoSyncNoFreelistSyncNoGrowSyncMmapFlagsMaxBatchSizeMaxBatchDelayAllocSizeMlockopenFiledatarefdataszfileszmeta0meta1openedrwtxtxsfreelistLoadpagePoolbatchMumetalockmmaplockstatlockloadFreelisthasSyncedFreelistmmapmunmapmmapSizemunlockmlockmrelockbeginTxbeginRWTxfreePagesremoveTxUpdateViewBatchpageInBufferIsReadOnlyfreepagesLRUlElemsRemoveOldestsizeBytesmaxSizeByteslruResetAfterRestartgcevictionnewSizeBytesvalBytesfoundboltgobdiskcacheencoding/gob"encoding/gob"github.com/apache/trafficcontrol/v8/grove/lru"github.com/apache/trafficcontrol/v8/grove/lru""go.etcd.io/bbolt""b"InitialMmapSizePageSize5000000000opening database '"opening database '"creating bucket: "creating bucket: "creating bucket for database '"creating bucket for database '"NewLRUStarting cache recovery from disk for: %s... "Starting cache recovery from disk for: %s... "elemRefstackfirstsearchNodesearchPagensearchkeyValueCache recovery from disk for %s done (%d bytes). "Cache recovery from disk for %s done (%d bytes). "DiskCache Add CALLED key '%+v' size '%+v'
"DiskCache Add CALLED key '%+v' size '%+v'\n"typeIdgobTypeencoderStateencBufferscratchwriteBytesendZerofieldnumencodeUintencodeIntsentcountStatefreeListnewEncoderStatefreeEncoderStateencodeSingleencodeStructencodeArrayencodeMapencodeInterfaceencodeGobEncoderwriterpushWriterpopWriterwriteMessagesendActualTypesendTypesendTypeDescriptorsendTypeIdEncodeValueDiskCache.Add encoding cache object: "DiskCache.Add encoding cache object: "bucket does not exist"bucket does not exist"DiskCache.Add inserting '"DiskCache.Add inserting '"' in database: "' in database: "DiskCache Add SUCCESS key '%+v' size '%+v' valBytes '%+v' c.sizeBytes '%+v'
"DiskCache Add SUCCESS key '%+v' size '%+v' valBytes '%+v' c.sizeBytes '%+v'\n"DiskCache.gc cacheSizeBytes %+v > c.maxSizeBytes %+v
"DiskCache.gc cacheSizeBytes %+v > c.maxSizeBytes %+v\n"sizeBytes %v > %v maxSizeBytes, but LRU is empty!? Setting cache size to 0!
"sizeBytes %v > %v maxSizeBytes, but LRU is empty!? Setting cache size to 0!\n"StoreUint64DiskCache.gc deleting key '"DiskCache.gc deleting key '"removing '"removing '"' from cache: "' from cache: "DiskCache.Get getting '"DiskCache.Get getting '"' from cache and updating LRU"' from cache and updating LRU"DiskCache.Get key '"DiskCache.Get key '"DiskCache.Peek getting '"DiskCache.Peek getting '"DiskCache.Peek key '"DiskCache.Peek key '"' CACHE MISS"' CACHE MISS"decBufferDropwireTypearrayTypeCommonTypesetIdsafeStringsliceTypestructTypefieldTypemapTypegobEncoderTypeArrayTSliceTStructTMapTGobEncoderTBinaryMarshalerTTextMarshalerTdecEnginedecInstrdecOpdecoderStatedecodeUintdecodeIntgetLengthfieldovflinstrnumInstrdecoderCacheignorerCachecountBufignoreDepthnewDecoderStatefreeDecoderStatedecodeSingledecodeStructignoreStructignoreSingledecodeArrayHelperdecodeArrayignoreArrayHelperignoreArrayignoreMapdecodeSliceignoreSlicedecodeInterfaceignoreInterfacedecodeGobDecoderignoreGobDecoderdecOpFordecIgnoreOpForgobDecodeOpForcompatibleTypetypeStringcompileSinglecompileIgnoreSinglecompileDecgetDecEnginePtrgetIgnoreEnginePtrdecodeValuedecodeIgnoredValuerecvTyperecvMessagereadMessagenextIntnextUintdecodeTypeSequenceDecodeValueDiskCache.Peek decoding '"DiskCache.Peek decoding '"' CACHE HIT"' CACHE HIT"LoadUint64 ResetAfterRestart rebuilds the LRU with an arbirtrary order and sets sizeBytes. This seems crazy, but it is better than doing nothing, sice gc is based on the LRU and sizeBytes. In the future, we may want to periodically sync the LRU to disk, but we'll still need to iterate over all keys in the disk DB to avoid orphaning objects. Note: this assumes the LRU is empty. Don't run twice Add takes a key and value to add. Returns whether an eviction occurred The size is taken to fulfill the Cache interface, but the DiskCache doesn't use it. Instead, we compute size from the serialized bytes stored to disk. Note DiskCache.Add does garbage collection in a goroutine, and thus it is not possible to determine eviction without impacting performance. This always returns false. gc does garbage collection, deleting stored entries until the DiskCache's size is less than maxSizeBytes. This is threadsafe, and should be called in a goroutine to avoid blocking the caller. The given cacheSizeBytes must be `c.Size()`; it's passed here, because gc should be called immediately after an insert updates the size, so it saves an atomic instruction to pass rather than calling Size() again. TODO change lru to use strings subtract sizeBytes Get takes a key, and returns its value, and whether it was found, and updates the lru-ness and hitcount TODO directly call c.ll.MoveToFront Peek takes a key, and returns its value, and whether it was found, without changing the lru-ness or hitcountencOpencInstrindirencHelperencoding/gob.idencoding/gob.nameencoding/gob.safeStringencoding/gob.setIdencoding/gob.stringuserTypeInfoexternalEncexternalDecencIndirdecIndirBucketStatsBranchPageNBranchOverflowNLeafPageNLeafOverflowNKeyNDepthBranchAllocBranchInuseLeafAllocLeafInuseBucketNInlineBucketNInlineBucketInuseencEngineksizevsizekeyIdxPageInfoOverflowCountpoolLocalpoolLocalInternalpoolChainpoolChainEltpoolDequeueefaceheadTailunpackpackpushHeadpopHeadpopTailshared96decHelper/Users/test/Desktop/trafficcontrol/grove/diskcache/multi.gocachesmdcsumgithub.com/apache/trafficcontrol/v8/grove/config"github.com/apache/trafficcontrol/v8/grove/config"creating disk cache '"creating disk cache '"MultiDiskCache.Add key '%+v' size '%+v' mapped to %+v
"MultiDiskCache.Add key '%+v' size '%+v' mapped to %+v\n"MultiDiskCache.Get key '%+v' mapped to %+v
"MultiDiskCache.Get key '%+v' mapped to %+v\n" MultiDiskCache is a disk cache using multiple files. It exists primarily to allow caching across multiple physical disks, but may be used for other purposes. For example, it may be more performant to use multiple files, or it may be advantageous to keep each remap rule in its own file. Keys are evenly distributed across the given files via consistent hashing. should this be optional? KeyIdx gets the consistent-hashed index of which DiskCache the key is mapped to. TODO Fix this - each cache is an independent LRU, and the below doesn't make sense.ShutdownTimeoutcachesChangedcreateCachesloadCertsprofilesignalReloaderstartServerdebugWerrWeventWhttpCacheHandlerhttpsCacheHandlerinfoWoldRemapperwarnWbaseTransportbuildHandlercertsconfigFileNamedefaultCerthttpConnStateCallbackhttpHandlerhttpListenerhttpServerhttpsConnStateCallbackhttpsHandlerhttpsListenerhttpsServerpprofreadTimeoutreloadConfigreqIdleConnTimeoutreqKeepAlivereqMaxIdleConnsreqTimeoutshowVersionwriteTimeoutsigh2ConfconnStateh2DisabledlistenermultiDiskCachememCacheBytesnameFilesnameMemBytesnewCfgfsnotifyhttp2memcacheremapdatatiercache"context"os/signal"os/signal"runtime/pprof"runtime/pprof"golang.org/x/net/http2"golang.org/x/net/http2"golang.org/x/sys/unix"golang.org/x/sys/unix"github.com/apache/trafficcontrol/v8/grove/cache"github.com/apache/trafficcontrol/v8/grove/cache"github.com/apache/trafficcontrol/v8/grove/diskcache"github.com/apache/trafficcontrol/v8/grove/diskcache"github.com/apache/trafficcontrol/v8/grove/memcache"github.com/apache/trafficcontrol/v8/grove/memcache"github.com/apache/trafficcontrol/v8/grove/remapdata"github.com/apache/trafficcontrol/v8/grove/remapdata"github.com/apache/trafficcontrol/v8/grove/tiercache"github.com/apache/trafficcontrol/v8/grove/tiercache"GOMAXPROCS"pprof"Whether to profile"Whether to profile"Print the application version"Print the application version" Error starting service: The -cfg argument is required" Error starting service: The -cfg argument is required" Error starting service: loading config: " Error starting service: loading config: "GetLogWriters Error starting service: failed to create log writers: " Error starting service: failed to create log writers: "starting service: creating caches: "starting service: creating caches: "NewRemappingTransportLoadRemapperstarting service: loading remap rules: %v
"starting service: loading remap rules: %v\n"starting service: loading certificates: %v
"starting service: loading certificates: %v\n"starting service: loading default certificate: %v
"starting service: loading default certificate: %v\n"InterceptListentcp"tcp":%d":%d"creating HTTP listener %v: %v
"creating HTTP listener %v: %v\n"InterceptListenTLScreating HTTPS listener %v: %v
"creating HTTPS listener %v: %v\n"reloading config"reloading config"reloading config: failed to load config file, keeping existing config: "reloading config: failed to load config file, keeping existing config: "reloading config: failed to get log writers from '"reloading config: failed to get log writers from '"', keeping existing log locations: "', keeping existing log locations: "reloading config: caches changed in new config! Dynamic cache reloading is not supported! Old cache files and sizes will be used, and new cache config will NOT be loaded! Restart service to apply cache changes!"reloading config: caches changed in new config! Dynamic cache reloading is not supported! Old cache files and sizes will be used, and new cache config will NOT be loaded! Restart service to apply cache changes!"reloading config: failed to load remap rules, keeping existing rules: "reloading config: failed to load remap rules, keeping existing rules: "reloading config: creating HTTP listener %v: %v
"reloading config: creating HTTP listener %v: %v\n"config certificate changed, but port did not. Cannot recreate listener on same port without stopping the service. Restart the service to load the new certificate."config certificate changed, but port did not. Cannot recreate listener on same port without stopping the service. Restart the service to load the new certificate."WithTimeoutBackgroundDeadlineExceededclosing http server: connections didn't close gracefully in %v, forcefully closing.
"closing http server: connections didn't close gracefully in %v, forcefully closing.\n"closing http server: %v
"closing http server: %v\n"closing https server: connections didn't close gracefully in %v, forcefully closing.
"closing https server: connections didn't close gracefully in %v, forcefully closing.\n"closing https server: %v
"closing https server: %v\n"unixSIGHUPgrove%d.pprof"grove%d.pprof"creating profile: %v
"creating profile: %v\n"StartCPUProfileStopCPUProfileNotifyConfigureServer server configuring HTTP/2: " server configuring HTTP/2: "disabling HTTP2 Server per configuation setting."disabling HTTP2 Server per configuation setting."listening on %s://%d
"listening on %s://%d\n"serving %s port %v: %v
"serving %s port %v: %v\n"ToUpperrule "rule " has a certificate but no key, using default certificate
" has a certificate but no key, using default certificate\n" has a key but no certificate, using default certificate
" has a key but no certificate, using default certificate\n"loading rule "loading rule " certificate: " certificate: "MemCachecacheMgcChandoGCgcManagercreating cache '"creating cache '"TierCachesecondDeepEqual DEBUG TODO pass total size for all file groups? TODO add config to not serve HTTP (only HTTPS). If port is not set? TODO add cache file reloading The problem is, the disk db needs file locks, so there's no way to close and create new files without making all requests cache miss in the meantime. Thus, the file paths must be kept, diffed, only removed paths' dbs closed, only new paths opened, and dbs for existing paths passed into the new caches object. TODO copy stats from old stats object? startServer starts an HTTP or HTTPS server on the given port, and returns it. HTTP2 is enabled if config.DisableHTTP2 is false TODO configurable H2 timeouts and buffer sizes createCaches creates the caches specified in the config. The nameFiles is the map of names to groups of files, nameMemBytes is the amount of memory to use for each named group, and memCacheBytes is the amount of memory to use for the default memory cache. default empty names to the mem cache/Users/test/Desktop/trafficcontrol/grove/grovetccfg/Users/test/Desktop/trafficcontrol/grove/grovetccfg/grovetccfg.goAvailableStatusesBackupFileConfigHistoryCopyAndGzipFileDefaultCertificateDirDefaultRetryCodesDefaultRetryNumDefaultRuleConnectionCloseDefaultRuleParentSelectionDefaultRuleWeightDefaultTimeoutDeliveryServiceQueryStringCacheAndRemapDeliveryServiceQueryStringNoCacheNoRemapDeliveryServiceQueryStringNoCacheRemapExitErrorClearingUpdateFlagExitErrorReloadingServiceExitSuccessGetRemapPathGroveConfigFileGroveConfigPathNewFilenameProtocolHTTPProtocolHTTPAndHTTPSProtocolHTTPSProtocolHTTPToHTTPSProtocolStrRemapHistoryWriteAndBackupWriteNewFilebuildFrombuildToclearUpdatePendingcreateCertificateFilescreateGroveCfgcreateRulesOldcreateRulesOldAPIdsTypeSkipsMidfilterParentsgetAllowIPgetCertFileNamegetCertKeyFileNamegetParentsgetQueryStringRulehasUpdatePendingmakeACLmakeAllowIPmakeCDNMapmakeCachegroupsNameMapmakeDSCertMapmakeDeliveryserviceRegexMapmakeModHdrsmakeProfileNameMapmakeServersHostnameMapsetConfigParametertrimLiteralRegexdstdstFdstFGzipsrcFbackupDirbackupDirectorybackupFilebackupPathfileTimeFormatnewPathupdrevalPendingneedsUpdatecfgBytesupdateRequiredcertDirhostProfilehostServerignoreUpdateFlagjsonRulesnoServiceReloadprettyprofilesArrremapPathrevalPendingStatusserversArruseCacheareEqualcurrCfgserverParameterscachegroupsArrcdnSSLKeyscdnsArrdeliveryserviceRegexArrdeliveryserviceRegexesdsCertsparentssameCDNserverAvailabledsrssslkeysslKeyscachegroupincludenewParentsisHTTPcdnDomainpatternLiteralRegexttypeoriginURIparentServerdsQstringIgnorecidrnetcidrsremapTextJSONruleTodsRegexprotocolStracldsRemaphasCertorgServerFQDNprotocolStrsqueryStringRuletoClientHeaderstoOriginHeadersallowedIPsglobalHeadersglobalPluginshostParamsparentSelectionserverHeadersetHeaderscertFileNamecrtkeyFileNameendAddrStrmaskmaskBitsstartAddrStrallBitsallowStrremapsallowremapTxttoOriginedgeHRWedgeHRWinremapTXTremapTXTintoClientListtoOriginListgzipcompress/gzip"compress/gzip"0.2"0.2"grove-tc-cfg/"grove-tc-cfg/"grove-tc-cfg/0.290000000000/etc/grove/ssl"/etc/grove/ssl"grove.cfg"grove.cfg"/etc/grove/"/etc/grove/"/etc/grove/grove.cfgcfg_history/"cfg_history/"remap_history/"remap_history/"reported"reported"online"online"loading Grove config file: "loading Grove config file: "opening source file: "opening source file: "creating destination file: "creating destination file: "OScompressorcompressionLevelgoodlazynicechainfastSkipHashinghuffmanBitWriter248huffmanEncoderhcodeliteralNodeliteralfreqbyLiteralbyFreqcodesfreqcachebitCountlnslfsbitLengthbitCountsassignEncodingAndSizebitscodegenFreqnbytesliteralFreqoffsetFreqcodegenliteralEncodingoffsetEncodingcodegenEncodingwriteBitswriteBytesgenerateCodegendynamicSizefixedSizestoredSizewriteCodewriteDynamicHeaderwriteStoredHeaderwriteFixedHeaderwriteBlockwriteBlockDynamicindexTokenswriteTokenswriteBlockHuffdeflateFasttableEntry16384tablecurmatchLenshiftOffsets13107232768257bulkHasherbestSpeedchainHeadhashHeadhashPrevhashOffsetwindowwindowEndblockStartbyteAvailabletokensmaxInsertIndexhashMatchfillDeflatefillWindowfindMatchwriteStoredBlockencSpeedinitDeflatedeflatefillStorestorestoreHuffsyncFlushdictdigestwriteStringNewWritercopying source to destination: "copying source to destination: "closing destination gzip writer: "closing destination gzip writer: "flushing copy to destination: "flushing copy to destination: "2006-01-02T15_04_05_999999999Z07_00"2006-01-02T15_04_05_999999999Z07_00"MkdirAllModePerm511backuping up remap file: "backuping up remap file: ".new".new"creating file: "creating file: "writing file: "writing file: "flushing file: "flushing file: "backing up file: "backing up file: "writing new file: "writing new file: "copying new file to real location: "copying new file to real location: "getting update from Traffic Ops: "getting update from Traffic Ops: "Want exactly one server with hostname '%s', got %d"Want exactly one server with hostname '%s', got %d"Failed to update reval_pending: %v"Failed to update reval_pending: %v"Want exactly one server with hostname '%s', got '%d'"Want exactly one server with hostname '%s', got '%d'"setting update pending on Traffic Ops: %v (Alerts: %+v)"setting update pending on Traffic Ops: %v (Alerts: %+v)"tourl"tourl"The Traffic Ops URL"The Traffic Ops URL"touser"touser"The Traffic Ops username"The Traffic Ops username"topass"topass"The Traffic Ops password"The Traffic Ops password""pretty"Whether to pretty-print output"Whether to pretty-print output"Whether to fetch and apply the config, without checking or updating the Traffic Ops Update Pending flag"Whether to fetch and apply the config, without checking or updating the Traffic Ops Update Pending flag""host"The hostname of the server whose config to generate"The hostname of the server whose config to generate""insecure"Whether to allow invalid certificates with Traffic Ops"Whether to allow invalid certificates with Traffic Ops"certdir"certdir"Directory to save certificates to"Directory to save certificates to"no-service-reload"no-service-reload"Whether to avoid trying to reload the Grove service"Whether to avoid trying to reload the Grove service" and 'host' is required, use '-host'" and 'host' is required, use '-host'" Error connecting to Traffic Ops: " Error connecting to Traffic Ops: " Error checking Traffic Ops update pending: " Error checking Traffic Ops update pending: " Error getting Traffic Ops Servers: " Error getting Traffic Ops Servers: " Error: host '" Error: host '"' not in Servers
"' not in Servers\n" Error getting Traffic Ops Profiles: " Error getting Traffic Ops Profiles: " Error: profile '" Error: profile '"' not in Profiles
"' not in Profiles\n"GroveProfileTypeGROVE_PROFILE Error getting config rules for '" Error getting config rules for '"' :"' :" Error creating JSON Remap Rules: " Error creating JSON Remap Rules: " Error writing new config file: " Error writing new config file: " Warning: the profile '" Warning: the profile '"' is not a '"' is not a '"', will not build a config from it."', will not build a config from it."RemapRulesRemapRulesBase Error creating rules: " Error creating rules: "RemapRulesJSONRemapRuleJSONRemapRuleToJSONjson:"proxy_url"TimeoutMSjson:"timeout_ms"json:"retry_codes"json:"parent_selection"json:"to"json:"allow"json:"deny"json:"cache_name"RemapRulesStatsJSONjson:"rules"json:"stats"RemapRulesToJSON Error marshalling rules JSON: " Error marshalling rules JSON: " Error getting remap config path: " Error getting remap config path: ""service"grove"grove" Error restarting grove service (but successfully updated config file): " Error restarting grove service (but successfully updated config file): " Error clearing update pending flag in Traffic Ops (but successfully updated config): " Error clearing update pending flag in Traffic Ops (but successfully updated config): " Error loading current config from '" Error loading current config from '"' "' " Error getting Traffic Ops Parameters for host '" Error getting Traffic Ops Parameters for host '"' profile '"' profile '""plugins" Error setting config parameter '" Error setting config parameter '" There are no changes needed to '" There are no changes needed to '" Config updates are required to '" Config updates are required to '"rfc_compliant"rfc_compliant"ParseBool"port"https_port"https_port"cache_size_bytes"cache_size_bytes"concurrent_rule_requests"concurrent_rule_requests"remap_rules_file"remap_rules_file"cert_file"cert_file"key_file"key_file"interface_name"interface_name"connection_close"connection_close"log_location_error"log_location_error"log_location_warning"log_location_warning"log_location_info"log_location_info"log_location_debug"log_location_debug"log_location_event"log_location_event"parent_request_timeout_ms"parent_request_timeout_ms"parent_request_keep_alive_ms"parent_request_keep_alive_ms"parent_request_max_idle_connections"parent_request_max_idle_connections"parent_request_idle_connection_timeout_ms"parent_request_idle_connection_timeout_ms"server_idle_timeout_ms"server_idle_timeout_ms"server_write_timeout_ms"server_write_timeout_ms"server_read_timeout_ms"server_read_timeout_ms"file_mem_bytes"file_mem_bytes"No such config parameter '"No such config parameter '"', parameter ignored"', parameter ignored" Error getting Traffic Ops Cachegroups: " Error getting Traffic Ops Cachegroups: " Error getting Traffic Ops Deliveryservices: " Error getting Traffic Ops Deliveryservices: " Error getting Traffic Ops Deliveryservice Regexes: " Error getting Traffic Ops Deliveryservice Regexes: " Error getting Traffic Ops CDNs: " Error getting Traffic Ops CDNs: " Error getting '" Error getting '"' parents: "' parents: "' SSL keys: "' SSL keys: "hostname not found in Servers"hostname not found in Servers"server cachegroup '%v' not found in Cachegroups"server cachegroup '%v' not found in Cachegroups"edge."edge."http_no_cache"http_no_cache"http_live"http_live"dns_live"dns_live"live"live"natnl"natnl"unknown delivery service qstringIgnore value '%v'"unknown delivery service qstringIgnore value '%v'"5000ParentSelectionTypeConsistentHashconsistent-hashallow_ip"allow_ip"allow_ip6"allow_ip6"/128"/128"/32"/32"error parsing CIDR '%s': %v"error parsing CIDR '%s': %v"getting allowed IPs: %v"getting allowed IPs: %v"getting deliveryservice %v Query String Rule: %v"getting deliveryservice %v Query String Rule: %v"deliveryservice '%v' CDN '%v' not found"deliveryservice '%v' CDN '%v' not found"Fprint HTTPS delivery service: " HTTPS delivery service: " has no certificate!
" has no certificate!\n" HTTPS delivery service " HTTPS delivery service " failed to create certificate: " failed to create certificate: "dns"dns" createRules skipping deliveryservice %v - unknown type %v" createRules skipping deliveryservice %v - unknown type %v"ModHdrsjson:"set"json:"drop"AnymhMaking headers for delivery service '"Making headers for delivery service '" createRules skipping deliveryservice '" createRules skipping deliveryservice '"' - unsupported ACL "' - unsupported ACL "deliveryservice '%v' has no regexes"deliveryservice '%v' has no regexes"%s.%s.%s.%s"%s.%s.%s.%s"error parsing deliveryservice %v proxy_url: %v"error parsing deliveryservice %v proxy_url: %v"modify_headers"modify_headers"modify_parent_request_headers"modify_parent_request_headers"parsing deliveryservice '%v' remap text '%v' marshalling JSON: %v"parsing deliveryservice '%v' remap text '%v' marshalling JSON: %v"RemapTextKeyremap_texterror parsing deliveryservice %v parent %v proxy_url: %v"error parsing deliveryservice %v parent %v proxy_url: %v""Server"Grove/0.33"Grove/0.33"modify_response_headers_global"modify_response_headers_global"PathSeparator47*."*.".crt".crt"base64decoding certificate file "base64decoding certificate file "writing certificate file "writing certificate file "base64decoding certificate key "base64decoding certificate key "writing certificate key file "writing certificate key file "@action=allow"@action=allow"malformed remapTxt '"malformed remapTxt '"128@src_ip="@src_ip="error parsing allow string: %v, %v"error parsing allow string: %v, %v"CIDRMask DEBUG base: " DEBUG base: " end:" end:" maskBits:" maskBits:"Trim-header"-header"__RETURN__"__RETURN__"[L]"[L]"edge header rewrite: malformed line '"edge header rewrite: malformed line '""cond"%{SEND_RESPONSE_HDR_HOOK}"%{SEND_RESPONSE_HDR_HOOK}"%{SEND_REQUEST_HDR_HOOK}"%{SEND_REQUEST_HDR_HOOK}"set-header"set-header"add-header"add-header"rm-header"rm-header" Exit codes are defined in the documentation, DO NOT change to iota, to avoid ambiguity. CopyAndGzipFile reads the src file, gzips the contents, and writes the result to dst. BackupFile copies the given file to a new file in the subdirectory "/remap_history", with the name suffixed by the current timestamp. Returns nil if the given file doesn't exist (nothing to back up). this is time.RFC3339Nano with : replaced by _ WriteAndBackup creates a backup of the existing file at the given path, then writes the given bytes to the path. The write is fail-safe on operating systems with atomic file rename (Linux is). hasUpdatePending returns whether an update is pending, the revalPending status (which will be needed later in the clear update POST), and any error. clearUpdatePending clears the given host's update pending flag in Traffic Ops. It takes the host to clear, and the old revalPending flag to send. if the host was not specified on the command line, get it from the kernel if no error and no update necessary, return success and print nothing TODO remove this once converted to 1.3 API using the 1.2 API end of API 1.2 stuff if *api == "1.3" { 	rules, err = createRulesNewAPI(toc, *host, *certDir) } else { TODO remove once 1.3 / traffic_ops_golang is deployed to production. TODO add app/option to print config to stdout load the servers current config parameters. make sure this array is sorted for later comparison load config parameters from the servers profile no update is required if the configs are the same updates are required, send the new config func createRulesNewAPI(toc *to.Session, host string, certDir string) (remap.RemapRules, error) { 	cacheCfg, err := toc.CacheConfig(host) 	if err != nil { 		fmt.Printf("Error getting Traffic Ops Cache Config: %v\n", err) 		os.Exit(1) 	rules := []remapdata.RemapRule{} 	allowedIPs, err := makeAllowIP(cacheCfg.AllowIP) 		return remap.RemapRules{}, fmt.Errorf("creating allowed IPs: %v", err) 	cdnSSLKeys, err := toc.CDNSSLKeys(cacheCfg.CDN) 		fmt.Printf("Error getting %v SSL keys: %v\n", cacheCfg.CDN, err) 	dsCerts := makeDSCertMap(cdnSSLKeys) 	weight := DefaultRuleWeight 	retryNum := DefaultRetryNum 	timeout := DefaultTimeout 	parentSelection := DefaultRuleParentSelection 	for _, ds := range cacheCfg.DeliveryServices { 		protocol := ds.Protocol 		queryStringRule, err := getQueryStringRule(ds.QueryStringIgnore) 		if err != nil { 			return remap.RemapRules{}, fmt.Errorf("getting deliveryservice %v Query String Rule: %v", ds.XMLID, err) 		} 		protocolStrs := []ProtocolStr{} 		switch protocol { 		case ProtocolHTTP: 			protocolStrs = append(protocolStrs, ProtocolStr{From: "http", To: "http"}) 		case ProtocolHTTPS: 			protocolStrs = append(protocolStrs, ProtocolStr{From: "https", To: "https"}) 		case ProtocolHTTPAndHTTPS: 		case ProtocolHTTPToHTTPS: 			protocolStrs = append(protocolStrs, ProtocolStr{From: "http", To: "https"}) 		cert, hasCert := dsCerts[ds.XMLID] 		// DEBUG 		// if protocol != ProtocolHTTP { 		// 	if !hasCert { 		// 		fmt.Fprint(os.Stderr, "HTTPS delivery service: "+ds.XMLID+" has no certificate!\n") 		// 	} else if err := createCertificateFiles(cert, certDir); err != nil { 		// 		fmt.Fprint(os.Stderr, "HTTPS delivery service "+ds.XMLID+" failed to create certificate: "+err.Error()+"\n") 		// 	} 		// } 		dsType := strings.ToLower(ds.Type) 		if !strings.HasPrefix(dsType, "http") && !strings.HasPrefix(dsType, "dns") { 			fmt.Printf("createRules skipping deliveryservice %v - unknown type %v", ds.XMLID, ds.Type) 			continue 		for _, protocolStr := range protocolStrs { 			for _, dsRegex := range ds.Regexes { 				rule := remapdata.RemapRule{} 				pattern, patternLiteralRegex := trimLiteralRegex(dsRegex) 				rule.Name = fmt.Sprintf("%s.%s.%s.%s", ds.XMLID, protocolStr.From, protocolStr.To, pattern) 				rule.From = buildFrom(protocolStr.From, pattern, patternLiteralRegex, host, dsType, cacheCfg.Domain) 				if protocolStr.From == "https" && hasCert { 					rule.CertificateFile = getCertFileName(cert, certDir) 					rule.CertificateKeyFile = getCertKeyFileName(cert, certDir) 					// fmt.Fprintf(os.Stderr, "HTTPS delivery service: "+ds.XMLID+" certificate %+v\n", cert) 				} 				for _, parent := range cacheCfg.Parents { 					to, proxyURLStr := buildToNew(parent, protocolStr.To, ds.OriginFQDN, dsType) 					proxyURL, err := url.Parse(proxyURLStr) 					if err != nil { 						return remap.RemapRules{}, fmt.Errorf("error parsing deliveryservice %v parent %v proxy_url: %v", ds.XMLID, parent.Host, proxyURLStr) 					} 					ruleTo := remapdata.RemapRuleTo{ 						RemapRuleToBase: remapdata.RemapRuleToBase{ 							URL:      to, 							Weight:   &weight, 							RetryNum: &retryNum, 						}, 						ProxyURL:   proxyURL, 						RetryCodes: DefaultRetryCodes(), 						Timeout:    &timeout, 					rule.To = append(rule.To, ruleTo) 					// TODO get from TO? 					rule.RetryNum = &retryNum 					rule.Timeout = &timeout 					rule.RetryCodes = DefaultRetryCodes() 					rule.QueryString = queryStringRule 					rule.DSCP = ds.DSCP 						return remap.RemapRules{}, err 					rule.ConnectionClose = DefaultRuleConnectionClose 					rule.ParentSelection = &parentSelection 				rules = append(rules, rule) 			} 	remapRules := remap.RemapRules{ 		Rules:           rules, 		RetryCodes:      DefaultRetryCodes(), 		Timeout:         &timeout, 		ParentSelection: &parentSelection, 		Stats:           remap.RemapRulesStats{Allow: allowedIPs}, 	return remapRules, nil trimLiteralRegex removes the prefix and suffix in .*\.foo\.* delivery service regexes. Traffic Ops Delivery Services have regexes of this form, which aren't really regexes, and the .*\ and \.* need stripped to construct the "to" FQDN. Returns the trimmed string, and whether it was of the form `.*\.foo\.*` buildFrom builds the remap "from" URI prefix. It assumes ttype is a delivery service type HTTP or DNS, behavior is undefined for any other ttype. buildTo returns the to URL, and the Proxy URL (if any) TODO add port? // buildToNew returns the to URL, and the Proxy URL (if any) func buildToNew(parent tc.CacheConfigParent, protocol string, originURI string, dsType string) (string, string) { 	// TODO add port? 	to := originURI 	proxy := "" 	if !dsTypeSkipsMid(dsType) { 		proxy = "http://" + parent.Host + "." + parent.Domain + ":" + strconv.FormatUint(uint64(parent.Port), 10) 	return to, proxy fmt.Fprintf(os.Stderr, "HTTPS delivery service: "+ds.XMLID+" certificate %+v\n", cert) if the delivery service skips the mid's ie, http_no_cache, http_live, and dns_live only add the url rule to the origin. TODO get from TO? makeACL is a hack to take the very ATS/TrafficControl remap_text field ACLs, and turn them into grove ACLs note that the astats ACL input already has CIDR notation, but the DS ACL input is IP ranges. We only have @action=allow not @action=deny, and only @scr_ip= not @in_op= so only worrying about that here. not sure if v6 works, only tested with our v4 ACLs. This error catches all unexpected (but valid) options. TODO remove? makeModHdrs is a pretty nasty hack to take the very ATS/TrafficControl specific config stuff from Traffic Ops and turn it into header manipulation rules for grove. Returns the client header modifications, the origin header modifications, and any error. Normalize the whitespaces to just a single " " Technically these are different/Users/test/Desktop/trafficcontrol/grove/icache/Users/test/Desktop/trafficcontrol/grove/icache/icache.go TODO change to return errors/Users/test/Desktop/trafficcontrol/grove/integration_test/Users/test/Desktop/trafficcontrol/grove/integration_test/compare_gets.gocompareResponsesequalBodiesequalStringSliceshttpGetinStringSliceresponseTypehdrStringheadersstrEntMPBoundarycontentTypeHdrhdrKeyignoreHdrsignoreMPBresponse1response2cacheHdrscacheURLcrespignoreMultiPartBoundaryorgHdrsERROR in httpGet"ERROR in httpGet""Host"ERROR in httpGet (readall)"ERROR in httpGet (readall)"Content-type"Content-type"Content-Type"Content-Type"Content-Length"Content-Length"multipart/byteranges"multipart/byteranges"ERROR hdr %v doesn't match: "%v" != "%v"
"ERROR hdr %v doesn't match: \"%v\" != \"%v\"\n""org"http://localhost"http://localhost"The origin URL (default: "http://localhost")"The origin URL (default: \"http://localhost\")"http://localhost:8080"http://localhost:8080"The cache URL (default: "http://localhost:8080")"The cache URL (default: \"http://localhost:8080\")"The path to GET"The path to GET"ohdrs"ohdrs"Comma seperated list of headers to add to origin request"Comma seperated list of headers to add to origin request"chdrs"chdrs"Comma separated list of headers to add to cache request"Comma separated list of headers to add to cache request"ignorehdrs"ignorehdrs"Server,Date"Server,Date"Comma separated list of headers to ignore in the compare"Comma separated list of headers to ignore in the compare"ignorempb"ignorempb"Ignore multi part boundary in body comparison."Ignore multi part boundary in body comparison."FAIL: Body bytes don't match 
%s
 != 
%s
"FAIL: Body bytes don't match \n%s\n != \n%s\n"PASS"PASS"log.Printf(">>>%v<<< %v\n", headers, len(strings.Split(headers, ".")))log.Println(">>> ", hdrString)log.Println("> ", parts)log.Printf(">>>> %v", req) the boundary will be differentfmt.Println("ignoreing", contentTypeHdr, response1)log.Println("+++")log.Printf("%s\n", string(response1.Body))log.Printf("%s\n", response1.Body)fmt.Printf(">>>>> %v\n", hdrKey)/Users/test/Desktop/trafficcontrol/grove/lru/Users/test/Desktop/trafficcontrol/grove/lru/lru.golistObjoldSizecontainer/list"container/list" Add adds the key to the LRU, with the given size. Returns the size of the the old size, or 0 if no key existed. RemoveOldest returns the key, size, and true if the LRU is nonempty; else false. Keys returns a string array of the keys/Users/test/Desktop/trafficcontrol/grove/memcache/Users/test/Desktop/trafficcontrol/grove/memcache/memcache.gosizeChangeMemCache.New: creating cache with %d capacity."MemCache.New: creating cache with %d capacity."MemCache.gc cacheSizeBytes %+v > c.maxSizeBytes %+v
"MemCache.gc cacheSizeBytes %+v > c.maxSizeBytes %+v\n"MemCache.gc sizeBytes %v > %v maxSizeBytes, but LRU is empty!? Setting cache size to 0!
"MemCache.gc sizeBytes %v > %v maxSizeBytes, but LRU is empty!? Setting cache size to 0!\n"MemCache.gc deleting key '"MemCache.gc deleting key '" MemCache is a threadsafe memory cache with a soft byte limit, enforced via LRU. threadsafe. mutexed: MUST NOT access without locking cacheM. TODO test performance of sync.Map TODO test performance of one mutex for lru+cache atomic: MUST NOT access without sync.atomic constant: MUST NOT be modified after creation TODO remove eviction from interface; it's unnecessary and expensive doGC kicks off garbage collection if it isn't already. Does not block. don't block if GC is already running gcManager is the garbage collection manager function, designed to be run in a goroutine. Never returns. gc executes garbage collection, until the cache size is under the max. This should be called in a singleton manager goroutine, so only one goroutine is ever doing garbage collection at any time./Users/test/Desktop/trafficcontrol/grove/plugin/Users/test/Desktop/trafficcontrol/grove/plugin/ats_log.goAfterRespondFuncBeforeCacheLookupFuncBeforeParentRequestFuncBeforeRespondFuncCacheStatsEndpointCallGCEndpointLoadRemapStatsLoadSystemStatsMAXINT64MemStatsEndpointNSPerSecOnRequestFuncStatsEndpointatsEventLogStratsLogbyteRangecacheinspectcallgcgetCacheHitStrgetParentStringshelloCtxAfterResphelloCtxStartifModifiedSinceloadFileAndLogloadFileAndLogGreploadFileAndLogIntmemstatsmodOrgReqHdrmodOrgReqHdrLoadmodRespGlblHdrmodRespGlblHdrLoadmodRespHdrmodRespHdrLoadparseRangeparseRangeHeaderrangeReqHandleBeforeCacheLookuprangeReqHandleBeforeParentrangeReqHandleBeforeRespondrangeReqHandleLoadrangeReqHandlerOnRequestrangeRequestConfigrecordStatswriteHTMLPageFooterwriteHTMLPageHeadericfgproxyHierarchyStrproxyNameStrhitproxyStroriginConnectFailedcacheHitcfscclientRespSuccessclientUserAgentoriginBytesoriginHostoriginReqSuccessoriginStatuspfscproxyUsedreqPortselfHostnamethisProxyNametimeToServetimestampunixFracunixFracStrunixNanoxmtstartuponRequestbeforeCacheLookUpbeforeParentRequestbeforeRespondafterRespond20000TryGetBytesWrittenEventRawX-Money-Trace"X-Money-Trace"NONE"NONE"PARENT_HIT"PARENT_HIT"DIRECT"DIRECT"EMPTY"EMPTY"ERR_CONNECT_FAIL"ERR_CONNECT_FAIL"TCP_HIT"TCP_HIT"TCP_MISS"TCP_MISS""0"FIN"FIN"INTR"INTR"`"``"-"` chi=" chi=" phn=" phn=" php=" php=" shn=" shn=" url=" url=" cqhn=" cqhn=" cqhv=" cqhv=" pssc=" pssc=" ttms=" ttms=" b=" b=" sssc=" sssc=" sscl=" sscl=" cfsc=" cfsc=" pfsc=" pfsc=" crc=" crc=" phr=" phr=" pqsn=" pqsn=" uas=" uas=" xmt=" xmt=" reqid=" reqid=" getParentStrings returns the phr and pqsn ATS log event strings (in that order). This covers almost all occurences that we currently see from ATS. the most common case (hopefully), do this first getCacheHitStr returns the event log string for whether the request was a cache hit. For a request not in the cache, pass `ReuseCannot` to indicate a cache miss. (prefix) chi phn php shn url cqhm cqhv pssc ttms b sssc sscl cfsc pfsc crc phr pqsn client user agent moneytrace header Grove tracing ID - not part of real ATS log format gives fractional seconds to three decimal points, like the ATS logs. leading zeros, so e.g. a fraction of '42' becomes '1234.042' not '1234.42' TODO escape quotes within useragent, moneytrace 	1505408269.011 chi=2001:beef:cafe:f::2 phn=cdn-ec-nyc-001-01.nyc.kabletown.net php=80 shn=disc-org.kabletown.net url=http://edge.disc.kabletown.net/250001/3306/lb.xml cqhm=GET cqhv=HTTP/1.1 pssc=200 ttms=0 b=1778 sssc=000 sscl=0 cfsc=FIN pfsc=FIN crc=TCP_MEM_HIT phr=NONE pqsn=- uas="Go-http-client/1.1" xmt="-"StatsSystemJSONjson:"inf.name"InterfaceSpeedjson:"inf.speed"ProcNetDevjson:"proc.net.dev"ProcLoadAvgjson:"proc.loadavg"json:"configReloadRequests"json:"lastReloadRequest"json:"configReloads"json:"lastReload"json:"astatsLoad"Somethingjson:"something"json:"application_version"Endjson:"mode"MultiPartBoundary/Users/test/Desktop/trafficcontrol/grove/plugin/hello_context.go42Hello World! Start set context: %+v
"Hello World! Start set context: %+v\n"Hello World! After Response got context: %+v %+v
"Hello World! After Response got context: %+v %+v\n"/Users/test/Desktop/trafficcontrol/grove/plugin/hello_world.goHello World! I'm a startup plugin! We're starting with %v bytes!
"Hello World! I'm a startup plugin! We're starting with %v bytes!\n"/Users/test/Desktop/trafficcontrol/grove/plugin/http_cacheinspector.gocNameArrcNamePresentcacheObjecthLinecNameagefreshForheadStrtailStrcacheNamesdoSearchsearchArrkeyArrshowKeycacheToDisplayqstringOptionsshowSelectCachebytefmt"code.cloudfoundry.org/bytefmt"/_cacheinspect"/_cacheinspect"text/html"text/html"
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Grove Cache Inspector</title>
</head>
<body>
<pre>
`
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Grove Cache Inspector</title>
</head>
<body>
<pre>
`
</pre>
</body>
</html>
`
</pre>
</body>
</html>
`plugin onrequest http_cacheinspect returning, not in path '"plugin onrequest http_cacheinspect returning, not in path '"plugin onrequest http_cacheinspect calling
"plugin onrequest http_cacheinspect calling\n"GetIPstatHandler ServeHTTP failed to get IP: "statHandler ServeHTTP failed to get IP: "statHandler.ServeHTTP IP "statHandler.ServeHTTP IP " FORBIDDEN" FORBIDDEN""key"Key: %s cache: "%s"

"Key: %s cache: \"%s\"\n\n"  > %s: %s
"  > %s: %s\n"  < %s: %s
"  < %s: %s\n"  Code:                         %d
"  Code:                         %d\n"  OriginCode:                   %d
"  OriginCode:                   %d\n"  ProxyURL:                     %s
"  ProxyURL:                     %s\n"  ReqTime:                      %v
"  ReqTime:                      %v\n"  ReqRespTime:                  %v
"  ReqRespTime:                  %v\n"  RespRespTime:                 %v
"  RespRespTime:                 %v\n"  LastModified:                 %v
"  LastModified:                 %v\n"  HitCount:                     %v
"  HitCount:                     %v\n"Not Found"Not Found""search"Jump to:"Jump to:"<a href=#%s>%s</a>  "<a href=#%s>%s</a>  "<a name=%s></a>"<a name=%s></a>"

<b>*** Cache "%s" ***</b>
"\n\n<b>*** Cache \"%s\" ***</b>\n"
  * Size of in use cache:      %s 
"\n  * Size of in use cache:      %s \n"ByteSize  * Cache capacity:            %s 
"  * Cache capacity:            %s \n"  * Number of elements in LRU: %d
"  * Number of elements in LRU: %d\n"Error converting tail value to int: %v"Error converting tail value to int: %v""head"Error converting head value to int: %v"Error converting head value to int: %v"  * Objects in cache sorted by Least Recently Used on top, "  * Objects in cache sorted by Least Recently Used on top, "showing only strings matching %s:
"showing only strings matching %s:\n"showing only first %d and last %d:

"showing only first %d and last %d:\n\n"<b>            #    Code      Size                   Age              FreshFor    HitCount      Key</b>
"<b>            #    Code      Size                   Age              FreshFor    HitCount      Key</b>\n"FreshFor     %8d%8d%10s%22v%22v%12d      <a href="http://%s%s?key=%s&cache=%s">%s</a>
"     %8d%8d%10s%22v%22v%12d      <a href=\"http://%s%s?key=%s&cache=%s\">%s</a>\n"QueryEscape CacheStatsEndpoint is our reserved path TODO access log? Stats byte count? TODO event? The default cache = "", which is the default memcache tail is how much from the top of the LRU to display, top of the LRU is most recently used. head is the other side. TODO add eventId?/Users/test/Desktop/trafficcontrol/grove/plugin/http_callgc.go/_callgc"/_callgc"plugin onrequest http_callgc calling
"plugin onrequest http_callgc calling\n"GCStatusNoContent204 log, so we know if someone is hitting this endpoint when they shouldn't be. GC is expensive, this could become an accidental DDOS./Users/test/Desktop/trafficcontrol/grove/plugin/http_memstats.go/_memstats"/_memstats"plugin onrequest http_memstats returning, not in path '"plugin onrequest http_memstats returning, not in path '"plugin onrequest http_memstats calling
"plugin onrequest http_memstats calling\n"MemStatsMallocsFrees61AllocTotalAllocLookupsHeapAllocHeapSysHeapIdleHeapInuseHeapReleasedHeapObjectsStackInuseStackSysMSpanInuseMSpanSysMCacheInuseMCacheSysBuckHashSysGCSysOtherSysNextGCLastGCPauseTotalNsPauseNsPauseEndNumGCNumForcedGCGCCPUFractionEnableGCDebugGCBySizeReadMemStatsapplication/json"application/json" TODO gzip TODO cache for 1 second/Users/test/Desktop/trafficcontrol/grove/plugin/http_stats.goruleNamestatsRemapjsonStatsstatsRemapsgrepStrunicode"unicode"/_astats"/_astats"plugin onrequest http_stats returning, not in path '"plugin onrequest http_stats returning, not in path '"plugin onrequest http_stats calling
"plugin onrequest http_stats calling\n""server"6.2.1"6.2.1"application"application"StatsJSONATSjson:"ats"json:"system"/sys/class/net/%v/speed"/sys/class/net/%v/speed"/proc/net/dev"/proc/net/dev"/proc/loadavg"/proc/loadavg"here"here"plugin.remap_stats."plugin.remap_stats.".in_bytes".in_bytes".out_bytes".out_bytes".status_2xx".status_2xx".status_3xx".status_3xx".status_4xx".status_4xx".status_5xx".status_5xx".cache_hits".cache_hits".cache_misses".cache_misses"proxy.process.http.current_client_connections"proxy.process.http.current_client_connections"proxy.process.http.cache_hits"proxy.process.http.cache_hits"proxy.process.http.cache_misses"proxy.process.http.cache_misses"proxy.process.http.cache_capacity_bytes"proxy.process.http.cache_capacity_bytes"proxy.process.http.cache_size_bytes"proxy.process.http.cache_size_bytes"reading system stat file %v: %v
"reading system stat file %v: %v\n"TrimLeftFuncIsSpacereading system stat file %v looking for %v: not found
"reading system stat file %v looking for %v: not found\n"parsing system stat file %v: %v
"parsing system stat file %v: %v\n" TODO goroutine on a timer? emulate existing ATS Astats behavior remap has 8 members: in, out, 2xx, 3xx, 4xx, 5xx, hits, misses emulate a good ATS version/Users/test/Desktop/trafficcontrol/grove/plugin/if_modified_since.gomodifiedSince if we don't have a cacheobj from the origin, there's no object to have been modified./Users/test/Desktop/trafficcontrol/grove/plugin/modify_headers.gomodifyheaders loading config, unmarshalling JSON: "modifyheaders loading config, unmarshalling JSON: "modifyheaders load success: %+v
"modifyheaders load success: %+v\n"modifyheaders calling
"modifyheaders calling\n"modifyheaders has no config, returning."modifyheaders has no config, returning."modifyheaders config '%v' type '%T' expected *web.ModHdrs
"modifyheaders config '%v' type '%T' expected *web.ModHdrs\n"modifyheaders config len(set) %+v len(drop) %+v
"modifyheaders config len(set) %+v len(drop) %+v\n"/Users/test/Desktop/trafficcontrol/grove/plugin/modify_parent_request_headers.gomodify_parent_request_headers loading config, unmarshalling JSON: "modify_parent_request_headers loading config, unmarshalling JSON: "modify_parent_request_headers load success: %+v
"modify_parent_request_headers load success: %+v\n"modify_parent_request_headers calling
"modify_parent_request_headers calling\n"modify_parent_request_headers has no config, returning."modify_parent_request_headers has no config, returning."modify_parent_request_headers config '%v' type '%T' expected *ModHdrs
"modify_parent_request_headers config '%v' type '%T' expected *ModHdrs\n"modify_parent_request_headers config len(set) %+v len(drop) %+v
"modify_parent_request_headers config len(set) %+v len(drop) %+v\n"/Users/test/Desktop/trafficcontrol/grove/plugin/modify_response_headers_global.gomod_response_headers_global  loading config, unmarshalling JSON: "mod_response_headers_global  loading config, unmarshalling JSON: "mod_response_headers_global: load success: %+v
"mod_response_headers_global: load success: %+v\n"mod_response_headers_global calling
"mod_response_headers_global calling\n"mod_response_headers_global has no config, returning."mod_response_headers_global has no config, returning."mod_response_headers_global config '%v' type '%T' expected *ModGlblHdrs
"mod_response_headers_global config '%v' type '%T' expected *ModGlblHdrs\n"mod_response_headers_global config len(set) %+v len(drop) %+v
"mod_response_headers_global config len(set) %+v len(drop) %+v\n"/Users/test/Desktop/trafficcontrol/grove/plugin/plugin.gocfgsenabledMictx print, because this is called in init, loggers don't exist yet Shared is the "plugins_shared" data for all rules. This is a `map[ruleName][key]value`. Keys and values are arbitrary data. This allows plugins to do pre-processing on the config, and store computed data in the context, to save processing during requests. BeforeRespondData holds the data passed to plugins. The objects pointed to MAY NOT be modified, however, the location pointed to may be changed for the Code, Hdr, and Body. That iss, `*d.Hdr = myHdr` is ok, but `d.Hdr.Add("a", "b") is not. If that's confusing, recall `http.Header` is a map, therefore Hdr and Body are both pointers-to-pointers. CacheObj is the object to be cached, containing information about the origin request. The code, headers, and body should not be considered authoritative. Look at Code, Hdr, and Body instead, as the actual values about to be sent. Note CacheObj may be nil, if an error occurred (e.g. the Origin failed to respond). OnRequest returns a boolean whether to immediately stop processing the request. If a plugin returns true, this is immediately returned with no further plugins processed./Users/test/Desktop/trafficcontrol/grove/plugin/range_req_handler.gomultipartBoundaryBytesbyteRangesrHeadernewKeybSlicerangeStringthisRangemultipartmultipartBoundaryStringoriginalContentTypetotalContentLengthbRangethisRangeStringcollapsedRangesrHdrValrangeStringParts639223372036854775808`json:"mode"`rangeReqHandleLoad loading: %s
"rangeReqHandleLoad loading: %s\n"range_rew_handler  loading config, unmarshalling JSON: "range_rew_handler  loading config, unmarshalling JSON: "get_full_serve_range"get_full_serve_range"patch"patch"Unknown mode for range_req_handler plugin: %s
"Unknown mode for range_req_handler plugin: %s\n"Error with rand.Read: %v
"Error with rand.Read: %v\n"%x-%x-%x-%x-%x"%x-%x-%x-%x-%x"range_rew_handler: load success: %+v
"range_rew_handler: load success: %+v\n""Range"No Range header found
"No Range header found\n"Range string is: %s
"Range string is: %s\n"range_req_handler config '%v' type '%T' expected *rangeRequestConfig
"range_req_handler config '%v' type '%T' expected *rangeRequestConfig\n"store_ranges"store_ranges"&"&"grove_range_req_handler_plugin_data="grove_range_req_handler_plugin_data="range_req_handler: store_ranges default key:%s, new key:%s
"range_req_handler: store_ranges default key:%s, new key:%s\n"rangeReqHandleBeforeParent calling."rangeReqHandleBeforeParent calling."No Range header found"No Range header found"rangeReqHandleBeforeRespond calling
"rangeReqHandleBeforeRespond calling\n"Invalid context: %v
"Invalid context: %v\n"multipart/byteranges; boundary=%s"multipart/byteranges; boundary=%s"Invalid Content-Length header: %v
"Invalid Content-Length header: %v\n"bytes "bytes "range:%d-%d
"range:%d-%d\n"
--"\r\n--"Content-type: "Content-type: "Content-range: "Content-range: "

"\r\n\r\n"Content-Range"Content-Range"--
"--\r\n"StatusPartialContent206Error converting rangeString start '%v' to numbers
"Error converting rangeString start '%v' to numbers\n"Error converting rangeString end '%v' to numbers
"Error converting rangeString end '%v' to numbers\n"Not a valid Range type: "%s"
"Not a valid Range type: \"%s\"\n" not in the json rangeReqHandleLoad loads the configuration Use UUID format rangeReqHandlerOnRequest determines if there is a Range header, and puts the ranges in *d.Context as a []byteRanges put the ranges [] in the context so we can use it later rangeReqHandleBeforeCacheLookup is used to override the cacheKey when in store_ranges mode. rangeReqHandleBeforeParent changes the parent request if needed (mode == get_full_serve_range) get_full_serve_range means get the whole thing from parent/org, but serve the requested range. Just remove the Range header from the upstream request rangeReqHandleBeforeRespond builds the 206 response Assume all the needed ranges have been put in cache before, which is the truth for "get_full_serve_range" mode which gets the whole object into cache. If mode == store_ranges, do nothing, we just return the object stored-as is there was no (valid) range header no need to do anything here. mode != store_ranges copy the headers, we don't want to mod the cacheObj if the end range is "", or too large serve until the end -1 means from the end MAXINT64 means till the end if there is just one range, return, and don't incur the overhead of determining overlaps Collapse overlapping byte range requests, first sort the array by Start Then, copy ranges into collapsedRanges if applicable, collapse as needed Most normal case, the ranges are not overlapping; add the range to the collapsedRanges array Don't add the entry at i, it is part of the entry at i-1 Overlapping ranges, combine into one/Users/test/Desktop/trafficcontrol/grove/plugin/record_stats.go/Users/test/Desktop/trafficcontrol/grove/remap/Users/test/Desktop/trafficcontrol/grove/remap/remap.goDefaultReplicasHdrModderLoadRemapRulesNewHTTPRequestRemapperNewLiteralPrefixRemapperRemapRuleToToJSONRemapperRemapperToHTTPbuildRemapRuleToJSONgetFQDNliteralPrefixRemappermakeIPNetmakeIPNetsmakeRuleHashmakeTosimpleHTTPRequestRemapperhrschemePosschemeStrslashPosnewReqnewURIloadFloadercacheNamejsonRulepluginConfigLoadersremapRulesJSONnewTransporttoJSONtostosJSONnetStrnetStrsrcsdenyretryCodeclientHeadersJSONBytesgithub.com/apache/trafficcontrol/v8/grove/chash"github.com/apache/trafficcontrol/v8/grove/chash"DialerKeepAliveConfigEnableIntervalResolverGroupdupschansDoChandoCallForgetUnsharedPreferGoStrictErrorslookupGroupresolveAddrListexchangetryOneNamegoLookupHostOrdergoLookupIPgoLookupIPCNAMEOrdergoLookupCNAMEgoLookupPTRinternetAddrListpreferGostrictErrorsgetLookupGroupLookupHostLookupIPAddrLookupIPLookupNetIPlookupIPAddrLookupPortLookupCNAMELookupSRVLookupMXLookupNSLookupTXTLookupAddrgoLookupSRVgoLookupMXgoLookupNSgoLookupTXTlookupHostlookupIPlookupPortlookupCNAMElookupSRVlookupMXlookupNSlookupTXTlookupAddrmptcpStatusDualStackFallbackDelayKeepAliveControlContextdualStackresolverfallbackDelayMultipathTCPSetMultipathTCP50000000https://"https://"remap rule not found"remap rule not found"IP not allowed"IP not allowed"retry num exceeded"retry num exceeded"parsing client IP: %v"parsing client IP: %v"Allowed %v
"Allowed %v\n"creating new request: %v
"creating new request: %v\n"CopyHeaderToGetNext oldUri: %v, Host: %v
"GetNext oldUri: %v, Host: %v\n"GetNext newURI: %v, fqdn: %v
"GetNext newURI: %v, fqdn: %v\n"GetNext rule name: %v
"GetNext rule name: %v\n"`json:"allow"``json:"deny"``json:"retry_num"``json:"plugins_shared"``json:"rules"``json:"retry_codes"``json:"timeout_ms"``json:"parent_selection"``json:"stats"``json:"proxy_url"``json:"to"``json:"cache_name"` Loading Remap Rules" Loading Remap Rules" Loaded Remap Rules" Loaded Remap Rules"decoding JSON: %s"decoding JSON: %s"ValidHTTPCodeserror parsing rules: retry code invalid: %v"error parsing rules: retry code invalid: %v"error parsing rules: timeout must be positive: %v"error parsing rules: timeout must be positive: %v"ParentSelectionTypeFromStringParentSelectionTypeInvaliderror parsing rules: parent selection invalid: '%v'"error parsing rules: parent selection invalid: '%v'"error parsing rules allows: %v"error parsing rules allows: %v"error parsing rules denys: %v"error parsing rules denys: %v" Creating Remap Rule " Creating Remap Rule "error parsing rule %v retry code invalid: %v"error parsing rule %v retry code invalid: %v"error parsing rule %v timeout must be positive: %v"error parsing rule %v timeout must be positive: %v"error parsing rule %v: cache name %v not found"error parsing rule %v: cache name %v not found"error parsing rule %v allows: %v"error parsing rule %v allows: %v"error parsing rule %v denys: %v"error parsing rule %v denys: %v"error parsing rule %v to: %v"error parsing rule %v to: %v"error parsing rule %v parent selection invalid: '%v'"error parsing rule %v parent selection invalid: '%v'"error parsing rule %v - no parent_selection - must be set at rules or rule level"error parsing rule %v - no parent_selection - must be set at rules or rule level"error parsing rule %v - no to - must have at least one parent"error parsing rule %v - no to - must have at least one parent" ERROR  makeRuleHash " ERROR  makeRuleHash " NodeMap empty!" NodeMap empty!"error parsing to %v proxy_url: %v"error parsing to %v proxy_url: %v"error parsing to %v timeout must be positive: %v"error parsing to %v timeout must be positive: %v"error parsing to %v retry code invalid: %v"error parsing to %v retry code invalid: %v"error parsing to %v - no retry_num - must be set at rules, rule, or to level"error parsing to %v - no retry_num - must be set at rules, rule, or to level"error parsing to %v - no timeout_ms - must be set at rules, rule, or to level"error parsing to %v - no timeout_ms - must be set at rules, rule, or to level"error parsing to %v - no retry_codes - must be set at rules, rule, or to level"error parsing to %v - no retry_codes - must be set at rules, rule, or to level"error parsing CIDR %v: %v"error parsing CIDR %v: %v"error marshalling plugin '"error marshalling plugin '" Remap returns the remapped request, the matched rule name, whether the requestor's IP is allowed, whether to connection close, whether a match was found, and any error. Remap(r *http.Request, scheme string, failures int) Remapping global plugins, outside the individual remap rules PluginSharedCfg returns the plugins_shared, for every remap rule. This gives plugins a chance on startup to precompute data for each remap rule, store it in the Context, and save computation during requests. getFQDN returns the FQDN. It tries to get the FQDN from a Remap Rule. Remap Rules should always begin with the scheme, e.g. `http://`. If the given rule does not begin with a valid scheme, behavior is undefined. TODO test invalid rule, doesn't start with a scheme rule is just the scheme+FQDN, perfectly normal strip off the path RemappingProducer takes an HTTP Request and returns a Remapping to be used for that request. TODO rename? interface? TODO verify To is not allowed to be constructed with < 1 element TODO const? RequestURI returns the URI of the given request. This must be used, because Go does not populate the scheme of requests that come in from clients. GetNext returns the remapping to use to request, whether retries are allowed (i.e. if this is the last retry), or any error Remapper provides a function which takes strings and maps them to other strings. This is designed for URL prefix remapping, for a reverse proxy. Remap returns the given string remapped, the unique name of the rule found, and whether a remap rule was found Rules returns the unique names of every remap rule. PluginCfg returns the global plugins, outside the individual remap rules TODO change to use a prefix tree, for speed PluginSharedCfg returns a map of remap rule names, to a map of keys to arbitrary JSON values. For example, if a JSON rule object with the name "foo" contains the key and value `"plugins_shared": {"bar": "baz"}`, the returned map will contain m["foo"]["bar"]"baz". The value may be any JSON type. Remap returns the remapped string, the remap rule name, the remap rule's options, and whether a remap was found LoadRemapRules returns the loaded rules, the global plugins, the Stats remap rules, and any error default string is the default cache See b7953cc239 for the reasoning behind copying the Transport.SRVPriorityMXPrefhostLookupOrderdnsConfigndotsattemptsunknownOptsoffsetsingleRequestuseTCPtrustADnoReloadnameListconfserverOffsetNS255addrListforResolveaddrspartitionParserquestionsanswersauthoritiesadditionalssectionresHeaderValidresHeaderOffsetresHeaderTyperesHeaderLengthcheckAdvanceresourceresourceHeaderskipResourceQuestionAllQuestionsSkipQuestionSkipAllQuestionsAnswerHeaderAnswerAllAnswersSkipAnswerSkipAllAnswersAuthorityHeaderAuthorityAllAuthoritiesSkipAuthoritySkipAllAuthoritiesAdditionalHeaderAdditionalAllAdditionalsSkipAdditionalSkipAllAdditionalsCNAMEResourceMXResourceNSResourcePTRResourceSOAResourceTXTResourceSRVResourceAResourceAAAAResourceOPTResourceUnknownResourceisZeronotsubOnehalvesbitsSetFrombitsClearedFromv4v6v6u16Is4Is4In6Is6UnmapWithZonewithoutZonehasZoneAs16As4AsSliceAppendTostring4appendTo4string4In6appendTo4In6string6appendTo6StringExpandedmarshalBinaryWithTrailingBytesOpCodeRCodeAuthoritativeRecursionDesiredRecursionAvailableAuthenticDataCheckingDisabledResourceResourceHeaderfixLenSetEDNS0DNSSECAllowedExtendedRCodeResourceBodyvendor/golang.org/x/net/dns/dnsmessage.packrealTypevendor/golang.org/x/net/dns/dnsmessage.realTypebitsPlusOneIsSingleIPcompareMaskedOverlapsAAAAPTRMBoxSerialRetryExpireMinTTLTXTCNAMEOption/Users/test/Desktop/trafficcontrol/grove/remapdata/Users/test/Desktop/trafficcontrol/grove/remapdata/remapdata.goParentSelectionTypeRoundRobinfromHashfromURIproxyURI"consistent-hash"round-robin"round-robin"deny contains ip
"deny contains ip\n"Allowed len 0
"Allowed len 0\n"allow contains ip
"allow contains ip\n"`json:"from"``json:"certificate-file"``json:"certificate-key-file"``json:"connection-close"``json:"query-string"``json:"dscp"`RemapRule.URI: Rule '%v': Unknown Parent Selection type %v - using first URI in rule
"RemapRule.URI: Rule '%v': Unknown Parent Selection type %v - using first URI in rule\n"RemapRule.URI: Rule '%v': Parent Selection Type ConsistentHash, but rule.ConsistentHash is nil! Using first parent
"RemapRule.URI: Rule '%v': Parent Selection Type ConsistentHash, but rule.ConsistentHash is nil! Using first parent\n"RemapRule.URI: Rule '%v': Error looking up Consistent Hash! Using first parent
"RemapRule.URI: Rule '%v': Error looking up Consistent Hash! Using first parent\n"`json:"url"``json:"weight"``json:"remap"``json:"cache"` remapdata exists as a package to avoid import cycles, for packages that need remap objects and are also included by remap. ParentSelectionType is the algorithm to use for selecting parents. ConcurrentRuleRequests is the number of concurrent requests permitted to a remap rule, that is, to an origin. If this is 0, the global config is used. URI takes a request URI and maps it to the real URI to proxy-and-cache. The `failures` parameter indicates how many parents have tried and failed, indicating to skip to the nth hashed parent. Returns the URI to request, and the proxy URL (if any) fmt.Println("RemapRule.URI fromURI " + fromHash) uriGetTo is a helper func for URI. It returns the To URL, based on the Parent Selection type. In the event of failure, it logs the error and returns the first parent. Also returns the URL's Proxy URI (if any). uriGetToConsistentHash is a helper func for URI, uriGetTo. It returns the To URL using Consistent Hashing. In the event of failure, it logs the error and returns the first parent. Also returns the Proxy URI (if any). fmt.Printf("DEBUGL uriGetToConsistentHash RemapRule %+v\n", r) fmt.Printf("DEBUGL uriGetToConsistentHash\n") if r.ConsistentHash.First() == nil { 	fmt.Printf("DEBUGL uriGetToConsistentHash NodeMap empty!\n") fmt.Printf("DEBUGL uriGetToConsistentHash fromURI '%v' err %v returning '%v'\n", fromURI, err, r.To[0].URL) TODO don't cache on `to`, since it's affected by Parent Selection TODO add parent selection HEAD uses the same key as GET/Users/test/Desktop/trafficcontrol/grove/stat/Users/test/Desktop/trafficcontrol/grove/stat/stats.goATSVersionNewStatsRemapNewStatsRemapsNewStatsSystemgetFromFQDNstatsSystemreqFQDNcacheCapacityBytescacheHitscacheMisseswFlusherremapRuleStatscNamespathStartschemeEndinBytesoutBytesstatus2xxstatus3xxstatus4xxstatus5xxconfigReloadRequestslastReloadRequestUnixNanoconfigReloadslastReloadUnixNanoastatsLoadUnixNanoRemap rule %v not in Stats
"Remap rule %v not in Stats\n"FlusherResponseWriter is not a Flusher, could not flush written bytes, stat out_bytes will be inaccurate!
"ResponseWriter is not a Flusher, could not flush written bytes, stat out_bytes will be inaccurate!\n"responded with invalid code %v
"responded with invalid code %v\n"300600`://`LoadInt64StoreInt645.3.2"5.3.2"`json:"inf.name"``json:"inf.speed"``json:"proc.net.dev"``json:"proc.loadavg"``json:"configReloadRequests"``json:"lastReloadRequest"``json:"configReloads"``json:"lastReload"``json:"astatsLoad"``json:"something"``json:"application_version"``json:"ats"``json:"system"` Write writes to the remapRuleStats of s, and returns the bytes written to the connection TODO get somehow? Count body? Sum header? get the more accurate interceptConn bytes written, if we can Don't log - the Handler has already logged the failure to get the conn bytesRead, bytesWritten := getConnInfoAndDestroyWriter(w, stats, remapRuleName) stats fulfills the Stats interface CacheSizeByName returns the size of tha cache for a particular cache CacheSize() returns the combined size of all caches. CacheNames returns an array of all the cache names CacheKeys returns an array of all the cache keys for the cache cacheName CachePeek returns the cached object *without* changing the recent-used-ness. must pre-allocate, for threadsafety, so users are never changing the map itself, only the value pointed to. statsRemaps fulfills the StatsRemaps interface of course, we're not really ATS. We're terrible liars. type StatsATSJSON struct { 	Server string            `json:"server"` 	Remap  map[string]uint64 `json:"remap"`/Users/test/Desktop/trafficcontrol/grove/testorigin/Users/test/Desktop/trafficcontrol/grove/testorigin/testorigin.goGetRandPagepageLenBytespageBytes%v %v %v
"%v %v %v\n"The port to serve on"The port to serve on"pagebytes"pagebytes"The number of random bytes to serve as a page"The number of random bytes to serve as a page"usage: testorigin -port 8080 -pagebytes 350000
"usage: testorigin -port 8080 -pagebytes 350000\n"Serving on %d
"Serving on %d\n"Error serving: %v
"Error serving: %v\n" w.Header().Set("Content-Type", "application/octet-stream")/Users/test/Desktop/trafficcontrol/grove/thread/Users/test/Desktop/trafficcontrol/grove/thread/getter.goGetterRespNewThrottlersThrottlersnothrottlerthrottlerthrottlersactualGetcanUsewaitChanwaitRespGetReqIDwaiterswaitersMgetChanisAuthor getter implements Getter, and does a fan-in so only one real request is made to the parent at any given time, and then that object is given to all concurrent requesters. When a request for a key with no-one currently processing it comes in, that requestor becomes the Author. Subsequent requests become Waiters. The initial Author inserts a new constructed (but empty) slice into the waiters map. Then, when other requests come in, they see that waiters[key] exists, and add themselves to it, and block reading from their chan. Then, when the Author gets its response, it iterates over the Waiters and sends the response to all of them, at the same time (with the same lock, atomically) clearing the waiters for the next request that comes in. If the Author response can't be used, all Waiters make their own requests. Note this assumes an uncacheable response for one request is likely uncacheable for all, and it's faster and less load on the origin if so. If it's likely the author request is uncacheable, but a different waiter is cacheable for all other waiters, this will be more network, more origin load, and more work. If that's the case for you, consider creating another type that fulfills the Getter interface, and making the Getter configurable. waiters is a map of cache keys to chans for getters. Buffered for performance, so the author can iterate over all wait chans without blocking. Note this is unused if isAuthor becomes true. if the Author response can't be used, all Waiters make their own requestscheckoutCountcheckoutThrottlercheckinThrottler/Users/test/Desktop/trafficcontrol/grove/thread/limiter.go Throttlers provides a threadsafe way to map throttlers to string keys, and delete the throttler when it is no longer being used (i.e. there's nothing requesting that key). NewNoThrottler creates and returns a Throttler which doesn't actually throttle, but Throttle(f) immediately calls f./Users/test/Desktop/trafficcontrol/grove/tiercache/Users/test/Desktop/trafficcontrol/grove/tiercache/tiercache.goaevictbevictTierCache.Get '"TierCache.Get '"' calling"' calling"' FOUND FIRST: %+v
"' FOUND FIRST: %+v\n"' FOUND SECOND: %+v
"' FOUND SECOND: %+v\n" TierCache wraps two icache.Caches and implements icache.Cache. Adding adds to both caches. Getting tries the first cache first, and if it isn't found, it then tries the second. Thus, the first should be smaller and faster (memory) and the second should be larger and slower (disk). This is more suitable for more less-frequently-requested items, with a separate cache for fewer frequently-requested items. An alternative implementation would be to Add to the first only, and when an object is evicted from the first, then store in the second. That would be more efficient for any given frequency, but less efficient for known infrequent objects. New creates a new TierCache with the given first and second caches to use. Get returns the object if it's in the first cache. Else, it returns the object from the second cache. Else, false. if it was in second but not first, add back to first (LRU behavior) Peek returns the object if it's in the first cache. Else, it returns the object from the second cache. Else, false. Peek does not change the lru-ness, or the first cache Add adds to both internal caches. Returns whether either reported an eviction. Size returns the size of the second cache. This is because, since all objects are added to both, they are presumed to have the same content, and the second is presumed to be larger. For example, if the first is a memory cache and the second is a disk cache, it's most useful to report the size used on disk. Keys returns the keys of the second tier only. The first is just an accelerator. Capacity returns the maximum size in bytes of the cache/Users/test/Desktop/trafficcontrol/grove/version.go/Users/test/Desktop/trafficcontrol/grove/web/Users/test/Desktop/trafficcontrol/grove/web/cachecontrol.goHTTPResponseWriterTeeInterceptListenerNewConnMapNewHTTPResponseWriterTeeServeReqErrgetConnStateCallbackrealListenerconnMaprealWriterWrittenHeader/Users/test/Desktop/trafficcontrol/grove/web/connmap.go "github.com/apache/trafficcontrol/v8/traffic_monitor_golang/common/log" log.Debugf("ConnMap pushing '%v'\n", conn.RemoteAddr().String()) log.Debugf("ConnMap getting '%v'\n", remoteAddr) log.Debugf("ConnMap removing '%v'\n", remoteAddr)/Users/test/Desktop/trafficcontrol/grove/web/httptee.gowrote HTTPResponseWriterTee fulfills `http.ResponseWriter` headers       http.Header copy, because after Write is called, no more headers are written to the real connection. if we didn't copy, someone could call Write() then change the headers, and we'd get the changed but unwritten headers. emulate http.ResponseWriter.Write behavioriconnladdrinterceptListenertlsListenerinterceptConnerrStrdscpipv4Erripv6Errgolang.org/x/net/ipv4"golang.org/x/net/ipv4"golang.org/x/net/ipv6"golang.org/x/net/ipv6"StateClosedStateIdleConnState callback: idle conn is not a InterceptConn: '%T'
"ConnState callback: idle conn is not a InterceptConn: '%T'\n"StateActiveConnState callback: active conn is not a InterceptConn: '%T'
"ConnState callback: active conn is not a InterceptConn: '%T'\n"Listen"h2"NewListenerAccept err: %v
"Accept err: %v\n"Conn is nil"Conn is nil"real Conn is nil"real Conn is nil"ipv4NewConnSetTOSipv6SetTrafficClasssetting IPv4 TOS: "setting IPv4 TOS: "setting IPv6 TrafficClass: "setting IPv6 TrafficClass: " MUST be zeroed when the conn moves to Idle, because the Active callback happens _after_ some/all bytes have been read InterceptListen creates and returns a net.Listener via net.Listen, which is wrapped with an intercepter, which counts Conn read and write bytes. If you want a `grove.NewCacheHandler` to be able to count in and out bytes per remap rule in the stats interface, it must be served with a listener created via InterceptListen or InterceptListenTLS. InterceptListenTLS is like InterceptListen but for serving HTTPS. It returns the tls.Config, which must be set on the http.Server using this listener for HTTP/2 to be set up. TODO stats? SetDSCP attempts to set the DSCP flag on the TCP connection of the InterceptConn (TOS in IPv4, Traffic Class in IPv6). Returns any error. Note this is not guaranteed to succeed on all operating systems. In particular, these functions are known to fail on OS X, and may or may not succeed on various Linux kernels and distributions. Callers should expect failure, and it is recommended the connection and request continue to be handled./Users/test/Desktop/trafficcontrol/grove/web/util.govvdestsourcexForwardedForclientIPStrrespTimedH`json:"set"``json:"drop"`modifyheaders: Header is  a nil map"modifyheaders: Header is  a nil map"modifyheaders: Dropping header %s
"modifyheaders: Dropping header %s\n"modifyheaders: Setting header %s: %s 
"modifyheaders: Setting header %s: %s \n"X-FORWARDED-FOR"X-FORWARDED-FOR"malformed client address '"malformed client address '"malformed client IP address '"malformed client IP address '"request requesting %v headers %v
"request requesting %v headers %v\n"request error: "request error: "reading response body: "reading response body: "Connection"Connection""close"ResponseWriter is not a Flusher, could not flush written bytes, stat out_bytes will be inaccurate!"ResponseWriter is not a Flusher, could not flush written bytes, stat out_bytes will be inaccurate!""remap_text" Any returns whether any header modifications exist Mod drops and sets the headers in h according to its rules. this happens on a dial tcp timeout GetClientIPPort returns the client IP address of the given request, and the port. It returns the first x-forwarded-for IP if any, else the RemoteAddr. TODO log? TryFlush calls Flush on w if it's an http.Flusher. If it isn't, it returns without error. request makes the given request and returns its response code, headers, body, the request time, response time, and any error. TODO determine if respTime should go here Respond writes the given code, header, and body to the ResponseWriter. If connectionClose, a Connection: Close header is also written. Returns the bytes written, and any error. TODO move connectionClose to modhdr plugin get the less-accurate body bytes written, in case we can't get the more accurate intercepted data bytesWritten = int(WriteStats(stats, w, conn, reqFQDN, remoteAddr, code, uint64(bytesWritten))) // TODO write err to stats? ServeReqErr writes the appropriate response to the client, via given writer, for a generic request error. Returns the code sent, the body bytes written, and any write error. ServeErr writes the given error code to w, writes the text for that code to the body, and returns the code sent, bytes written, and any write error. TryGetBytesWritten attempts to get the real bytes written to the given conn. It takes the bytesWritten as returned by Write(). It forcibly calls Flush() in order to force a write to the conn. Then, it attempts to get the more accurate bytes written to the Conn. If this fails, the given and less accurate bytesWritten is returned. If everything succeeds, the accurate bytes written to the Conn is returned. RemapTextKey is the plugin shared data key inserted by grovetccfg for the Remap Line of the Delivery Service in Traffic Control, Traffic Ops./Users/test/Desktop/trafficcontrol/infrastructure/Users/test/Desktop/trafficcontrol/infrastructure/cdn-in-a-box/Users/test/Desktop/trafficcontrol/infrastructure/cdn-in-a-box/enroller/Users/test/Desktop/trafficcontrol/infrastructure/cdn-in-a-box/enroller/enroller.gocreateFederationResolversOfTypedirWatcherenrollASNenrollCDNenrollCachegroupenrollDeliveryServiceenrollDeliveryServiceServerenrollDeliveryServicesRequiredCapabilityenrollDivisionenrollFederationenrollOriginenrollParameterenrollPhysLocationenrollProfileenrollRegionenrollServerenrollServerCapabilityenrollServerServerCapabilityenrollStatusenrollTenantenrollTopologyenrollTypeenrollUserlogConfignewDirWatchernewSessionstartWatchingstartedFiletoSessionparametersgetParameterdsUpdatedsrceparamnewAlertscreateProfiledeliveryServicexmlIDresolverIDsresolversresolverArraysresolverTypesallResolverIDscdnFederationfederationipAddressipAddressesresolverTypeNametypeIDtypeNameStringnewNameoriginalNameeventemptyCountmaxEmptyTriesoriginalNameRegexprocessedrejecteddwWatcherpathInfoisDirEventsErrorskqwatchesexternalWatchesdirFlagsisClosedaddWatchreadEventswatchDirectoryFilessendDirectoryChangeEventssendFileCreatedEventIfNewinternalWatchwatchedwatchwatchdirdispatcherwatchDirbaseEPhttpPorttoCredswaitforever"github.com/fsnotify/fsnotify"enroller-started"enroller-started"cdn-in-a-box-enroller"cdn-in-a-box-enroller"getting Parameters: %v - alerts: %+v"getting Parameters: %v - alerts: %+v"no parameter matching name %s, configFile %s, value %s"no parameter matching name %s, configFile %s, value %s"TypeV5error decoding Type: %s"error decoding Type: %s"ErrorLevelalready exists"already exists"Type '%s' already exists"Type '%s' already exists"error creating Type: %v - alerts: %+v"error creating Type: %v - alerts: %+v"error decoding CDN: %v"error decoding CDN: %v"CDN '%s' already exists"CDN '%s' already exists"error creating CDN: %v - alerts: %+v"error creating CDN: %v - alerts: %+v"ASNV5error decoding ASN: %s
"error decoding ASN: %s\n"asn %d already exists"asn %d already exists"error creating ASN: %s - alerts: %+v"error creating ASN: %s - alerts: %+v"error decoding Cache Group: '%s'"error decoding Cache Group: '%s'"Cache Group '%s' already exists"Cache Group '%s' already exists"error creating Cache Group: %v - alerts: %+v"error creating Cache Group: %v - alerts: %+v"EOFerror decoding Topology: %s"error decoding Topology: %s"topology %s already exists"topology %s already exists"error creating Topology: %v - alerts: %+v"error creating Topology: %v - alerts: %+v"error decoding DeliveryService: %v"error decoding DeliveryService: %v"Delivery Service '%s' already exists"Delivery Service '%s' already exists"error creating Delivery Service: %v - alerts: %+v"error creating Delivery Service: %v - alerts: %+v"error decoding Delivery Services Required Capability: %s
"error decoding Delivery Services Required Capability: %s\n"required capability had no XMLID"required capability had no XMLID"xmlId"xmlId"getting Delivery Service by XMLID %s: %s"getting Delivery Service by XMLID %s: %s"could not find a Delivey Service with XMLID %s"could not find a Delivey Service with XMLID %s""description"error creating Server Capability: %v"error creating Server Capability: %v"error creating Delivery Services Required Capability: %v"error creating Delivery Services Required Capability: %v"error decoding DeliveryServiceServer: %s
"error decoding DeliveryServiceServer: %s\n"no deliveryservice with name "no deliveryservice with name "Deliveryservice with name "Deliveryservice with name " has a nil ID" has a nil ID"no server with hostName "no server with hostName "error assigning servers %v to Delivery Service #%d: %v - alerts: %+v"error assigning servers %v to Delivery Service #%d: %v - alerts: %+v"error decoding Division: %s"error decoding Division: %s"division %s already exists"division %s already exists"error creating Division: %v - alerts: %+v"error creating Division: %v - alerts: %+v"OriginV5error decoding Origin: %v"error decoding Origin: %v"Origin '%s' already exists"Origin '%s' already exists"error creating Origin: %v - alerts: %+v"error creating Origin: %v - alerts: %+v"error decoding Parameter: %s
"error decoding Parameter: %s\n"error updating parameter %d: %v with %+v - alerts: %+v "error updating parameter %d: %v with %+v - alerts: %+v "error creating parameter: %v from %+v - alerts: %+v"error creating parameter: %v from %+v - alerts: %+v"%v"%v"no profile with name "no profile with name "error decoding Physical Location: %v"error decoding Physical Location: %v"Physical Location %s already exists"Physical Location %s already exists"error creating Physical Location '%s': %v - alerts: %+v"error creating Physical Location '%s': %v - alerts: %+v"RegionV5error decoding Region: %s
"error decoding Region: %s\n"a Region named '%s' already exists"a Region named '%s' already exists"error creating Region '%s': %v - alerts: %+v"error creating Region '%s': %v - alerts: %+v"StatusV5error decoding Status: %s"error decoding Status: %s"status %s already exists"status %s already exists"error creating Status: %v - alerts: %+v"error creating Status: %v - alerts: %+v"TenantV5error decoding Tenant: %s"error decoding Tenant: %s"tenant %s already exists"tenant %s already exists"error creating Tenant: %v - alerts: %+v"error creating Tenant: %v - alerts: %+v"User is %++v
"User is %++v\n"error decoding User: %v"error decoding User: %v"user %s already exists
"user %s already exists\n"error creating User: %v - alerts: %+v"error creating User: %v - alerts: %+v"error decoding Profile: %s
"error decoding Profile: %s\n"missing name on profile"missing name on profile"profile %s already exists"profile %s already exists"error creating profile from %+v: %v - alerts: %+v"error creating profile from %+v: %v - alerts: %+v"error getting profile ID from %+v: %v - alerts: %+v"error getting profile ID from %+v: %v - alerts: %+v"no results returned for getting profile ID from %+v"no results returned for getting profile ID from %+v"creating"creating"updating"updating"error "error " from %s: %s" from %s: %s"creating param %+v"creating param %+v"can't create parameter %+v: %s, %v"can't create parameter %+v: %s, %v"error getting new parameter %+v: 
"error getting new parameter %+v: \n"found param %+v
"found param %+v\n"param ID not found for %v"param ID not found for %v"error creating profileparameter %+v: %v - alerts: %+v"error creating profileparameter %+v: %v - alerts: %+v"error decoding Server: %v"error decoding Server: %v"error creating Server: %v - alerts: %+v"error creating Server: %v - alerts: %+v"error decoding Server Capability: %v"error decoding Server Capability: %v"error creating Server Capability: %v - alerts: %+v"error creating Server Capability: %v - alerts: %+v"error decoding Server Capability: %s
"error decoding Server Capability: %s\n"mapping found with null or undefined CName and/or TTL: %+v"mapping found with null or undefined CName and/or TTL: %+v"getting Delivery Service '%s': %v - alerts: %+v"getting Delivery Service '%s': %v - alerts: %+v"wanted 1 Delivery Service with XMLID %s but received %d Delivery Services"wanted 1 Delivery Service with XMLID %s but received %d Delivery Services"creating CDN Federation: %v - alerts: %+v"creating CDN Federation: %v - alerts: %+v"assigning Delivery Service %s to Federation with ID %d: %v - alerts: %+v"assigning Delivery Service %s to Federation with ID %d: %v - alerts: %+v"getting the Current User: %v - alerts: %+v"getting the Current User: %v - alerts: %+v"current user returned from Traffic Ops had null or undefined ID"current user returned from Traffic Ops had null or undefined ID"assigning User '%s' to Federation with ID %d: %v - alerts: %+v"assigning User '%s' to Federation with ID %d: %v - alerts: %+v"FederationResolverTypeFederationResolverType4RESOLVE4FederationResolverType6RESOLVE6assigning Federation Resolvers to Federation with ID %d: %v - alerts: %+v"assigning Federation Resolvers to Federation with ID %d: %v - alerts: %+v""id"getting CDN Federation with ID %d: %v - alerts: %+v"getting CDN Federation with ID %d: %v - alerts: %+v"unable to GET a CDN Federation ID %d in CDN %s"unable to GET a CDN Federation ID %d in CDN %s"encoding CDNFederation %s with ID %d: %v"encoding CDNFederation %s with ID %d: %v"getting resolver type '%s': %v - alerts: %+v"getting resolver type '%s': %v - alerts: %+v"unable to get a type with name %s"unable to get a type with name %s"FederationResolverV5creating Federation Resolver with IP address %s: %v - alerts: %+v"creating Federation Resolver with IP address %s: %v - alerts: %+v"ServerServerCapabilityV5error decoding Server/Capability relationship: %s"error decoding Server/Capability relationship: %s"server/Capability relationship did not specify a server"server/Capability relationship did not specify a server"getting server '%s': %v - alerts: %+v"getting server '%s': %v - alerts: %+v"could not find Server %s"could not find Server %s"found more than 1 Server with hostname %s"found more than 1 Server with hostname %s"error creating Server Server Capability: %v - alerts: %+v"error creating Server Server Capability: %v - alerts: %+v"NewWatcher.processed".processed".rejected".rejected".retry".retry"(\.retry)*$`(\.retry)*$`event not ok"event not ok"skipping "skipping "new file :"new file :"creating "creating " from " from "100000000empty json object %s: %s
tried file %d out of %d times"empty json object %s: %s\ntried file %d out of %d times"error renaming %s to %s: %s"error renaming %s to %s: %s"error creating %s from %s: %s
"error creating %s from %s: %s\n"no method for creating %s
"no method for creating %s\n"error renaming %s to %s: %s
"error renaming %s to %s: %s\n"error from fsnotify: ok? %v;  error: %v
"error from fsnotify: ok? %v;  error: %v\n"ModeDir214748364844807002147484096cannot watch "cannot watch ": not a directory": not a directory"watching "watching "could not close file"could not close file"/api/4.0/"/api/4.0/"could not close reader"could not close reader"stopping server: %v
"stopping server: %v\n"panichttp service started on "http service started on ""started"file indicating service was started"file indicating service was started"base directory to watch"base directory to watch"act as http server for POST on this port (e.g. :7070)"act as http server for POST on this port (e.g. :7070)"envconfig:"TO_URL"envconfig:"TO_USER"envconfig:"TO_PASSWORD"`envconfig:"TO_URL"``envconfig:"TO_USER"``envconfig:"TO_PASSWORD"`Starting TrafficOps session"Starting TrafficOps session"error starting TrafficOps session: "error starting TrafficOps session: "TrafficOps session established"TrafficOps session established""types""profiles""parameters"server_capabilities"server_capabilities"server_server_capabilities"server_server_capabilities"asns"asns""deliveryservices"deliveryservices_required_capabilities"deliveryservices_required_capabilities"deliveryservice_servers"deliveryservice_servers"divisions"divisions"federations"federations"origins"origins"phys_locations"phys_locations"regions"regions"tenants"tenants"users"users"Starting http server on "Starting http server on "http server on "http server on " failed: " failed: "Watching directory "Watching directory "could not close dirwatcher"could not close dirwatcher"dirwatcher on %s failed: %s"dirwatcher on %s failed: %s"Created "Created " Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements.  See the NOTICE file distributed with this work for additional information regarding copyright ownership.  The ASF licenses this file to you under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License.  You may obtain a copy of the License at   http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the License for the specific language governing permissions and limitations under the License. TODO: s.GetParameterByxxx() does not seem to work with values with spaces -- doing this the hard way for now enrollType takes a json file and creates a Type object using the TO API enrollCDN takes a json file and creates a CDN object using the TO API enrollCachegroup takes a json file and creates a Cachegroup object using the TO API enrollDeliveryServicesRequiredCapability takes a json file and creates a DeliveryServicesRequiredCapability object using the TO API DeliveryServiceServers lists ds xmlid and array of server names.  Use that to create multiple DeliveryServiceServer objects existing param -- update link parameter with profiles the original code didn't actually do anything if the error wasn't that the Profile/Parameter association already exists. TODO: handle other errors? enrollProfile takes a json file and creates a Profile object using the TO API get a copy of the parameters no profile by that name -- need to create it updating - ID needs to match create itenc := json.NewEncoder(os.Stdout) enrollServer takes a json file and creates a Server object using the TO API enrollServerCapability takes a json file and creates a ServerCapabilityV41 object using the TO API enrollFederation takes a json file and creates a Federation object using the TO API. It also assigns a Delivery Service, the CDN in a Box admin user, IPv4 resolvers, and IPv6 resolvers to that Federation. createFederationResolversOfType creates Federation Resolvers of either RESOLVE4 type or RESOLVE6 type. enrollServerServerCapability takes a json file and creates a ServerServerCapability object using the TO API ignore all but Create events skip already processed files what directory is the file in?  Invoke the matching func Sleep for 100 milliseconds so that the file content is probably there when the directory watcher sees the file If a file is empty, try reading from it 10 times before giving up on that file rename the file indicating if processed or rejected watch starts f when a new file is created in dir attempt to create dir watch for file creation in directories Set up the log config -- all messages go to stdout if neither -dir nor -http provided, default to watching the current dir dispatcher maps an API endpoint name to a function to act on the JSON input Reader create this file to indicate the enroller is ready/Users/test/Desktop/trafficcontrol/infrastructure/cdn-in-a-box/origin/content/index.html/Users/test/Desktop/trafficcontrol/infrastructure/cdn-in-a-box/origin/content/Users/test/Desktop/trafficcontrol/infrastructure/cdn-in-a-box/originThis is a test "origin" server for Apache Traffic ControlTest Origin
		html {
			height: 100vh;
			width: 100vw;
		}

		body {
			text-align: center;
			background-image: url(/tc_logo.svg);
			background-color: black;
			background-position: center;
			background-repeat: no-repeat;
			background-size: 25%;
			font-family: "Ubuntu Mono","Consolas",sans-serif;
			color: white;
			margin: 0;
			padding-top: 0.67em;
			max-width: 100%;
		}

		h1 {
			margin-top: 0.67em;
		}

		p {
			text-align: left;
			width: 80vw;
			min-width: 320px;
			margin: auto;
		}
	A simple test origin for Apache Traffic Controlpublishershortcut-icon/tc_logo.svgwidth=device-width; height=device-height; initial-scale=1CDN In a Box<!-- Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License. -->/Users/test/Desktop/trafficcontrol/infrastructure/cdn-in-a-box/varnish/Users/test/Desktop/trafficcontrol/infrastructure/cdn-in-a-box/varnish/vstats.gogetStatsgetSystemDatavstatsinfSpeedFileloadavgprocNetDevspeedspeedStrencoderlistenAddressProcLoadavgInfSpeedjson:"inf_speed"NotAvailablejson:"not_available"`json:"inf_speed"``json:"not_available"`failed to read /proc/loadavg: %s
"failed to read /proc/loadavg: %s\n"failed to read /proc/net/dev: %s
"failed to read /proc/net/dev: %s\n"/sys/class/net/%s/speed"/sys/class/net/%s/speed"failed to read %s: %s
"failed to read %s: %s\n"failed to convert speed '%s' to int: %s
"failed to convert speed '%s' to int: %s\n"systemctl"systemctl"varnish.service"varnish.service"failed to run systemctl: %s
"failed to run systemctl: %s\n"inf.name"inf.name""eth0"failed to write Varnish stats: %s"failed to write Varnish stats: %s"IntVar2000port to run vstats on"port to run vstats on"server stopped %s"server stopped %s" TODO: stats assume default eth0?/Users/test/Desktop/trafficcontrol/lib/Users/test/Desktop/trafficcontrol/lib/go-atscfg/Users/test/Desktop/trafficcontrol/lib/go-atscfg/astatsdotconfig.goATSDotRulesFileNameActionAllowActionDenyAstatsFileNameAstatsSeparatorBoolOnOffCacheGroupTypeCacheUrlPrefixCfgFileChkconfigFileNameConfigSuffixContentType12MFactsContentTypeATSDotRulesContentTypeAstatsDotConfigContentTypeBGFetchDotConfigContentTypeCacheDotConfigContentTypeChkconfigContentTypeDropQStringDotConfigContentTypeHeaderRewriteDotConfigContentTypeHostingDotConfigContentTypeIPAllowDotConfigContentTypeIPAllowDotYAMLContentTypeLoggingDotConfigContentTypeLoggingDotYAMLContentTypeLogsDotXMLContentTypePackagesContentTypeParentDotConfigContentTypePluginDotConfigContentTypeRecordsDotConfigContentTypeRegexRemapDotConfigContentTypeRegexRevalidateDotConfigContentTypeRemapDotConfigContentTypeSNIDotYAMLContentTypeSSLMultiCertDotConfigContentTypeSSLServerNameYAMLContentTypeServerUnknownConfigContentTypeSetDSCPDotConfigContentTypeStorageDotConfigContentTypeStrategiesDotYAMLContentTypeSysctlDotConfContentTypeTextASCIIContentTypeURISigningDotConfigContentTypeURLSigContentTypeVolumeDotConfigContentTypeYAMLDefaultATSVersionDefaultCoalesceMaskLenV4DefaultCoalesceMaskLenV6DefaultCoalesceNumberV4DefaultCoalesceNumberV6DefaultDefaultEnableH2DefaultFirstRemapConfigTemplateStringDefaultIgnoreQueryStringInParentSelectionDefaultInnerRemapConfigTemplateStringDefaultLastRemapConfigTemplateStringDefaultMaxRevalDurationDaysDefaultParentAbstractionServiceRetryPolicyDefaultParentWeightDefaultSimpleRetryCodesDefaultUnavailableServerRetryCodesDropQStringDotConfigFileNameDropQStringDotConfigParamNameFilterServersFirstHeaderRewriteConfigFileNameGetAllowedCIDRsForMidGetAnyCastPartnersGetCoalesceMaskAndNumberGetDSParametersGetDSRequestFQDNsGetHostPortFromURIGetProfileDSesGetPurgeIPsGetServerSSLDataHeaderCommentDateFormatHeaderRewriteMidPrefixHeaderRewritePrefixHostingConfigFileNameHostingConfigParamConfigFileIPAllowConfigFileNameIPAllowYamlFileNameInnerHeaderRewriteConfigFileNameInvalidIDIsGoDirectJobKeywordPurgeJobLegacyKeywordJobToInvalidationJobJobsToInvalidationJobsLastHeaderRewriteConfigFileNameLayerProfilesLineComment12MFactsLineCommentATSDotRulesLineCommentAstatsDotConfigLineCommentBGFetchDotConfigLineCommentCacheDotConfigLineCommentChkconfigLineCommentDropQStringDotConfigLineCommentHashLineCommentHeaderRewriteDotConfigLineCommentHostingDotConfigLineCommentIPAllowDotConfigLineCommentIPAllowDotYAMLLineCommentLoggingDotConfigLineCommentLoggingDotYAMLLineCommentLogsDotXMLLineCommentPackagesLineCommentParentDotConfigLineCommentPluginDotConfigLineCommentRecordsDotConfigLineCommentRegexRemapDotConfigLineCommentRegexRevalidateDotConfigLineCommentRemapDotConfigLineCommentSNIDotYAMLLineCommentSSLMultiCertDotConfigLineCommentSSLServerNameYAMLLineCommentSetDSCPDotConfigLineCommentStorageDotConfigLineCommentStrategiesDotYAMLLineCommentSysctlDotConfLineCommentURISigningDotConfigLineCommentURLSigLineCommentVolumeDotConfigLineCommentYAMLLineTemplatesLoggingFileNameLoggingYAMLFileNameLogsXMLFileNameMakeDSRegexMapMakeParentConfigRetryKeysWithPrefixMakeParentDotConfigDataMaxLogObjectsMaxOriginConnectionsNoMaxMethodAllMethodDeleteMethodPurgeMethodPushMethodSeparatorOriginHostPackagesFileNameParamCoalesceMaskLenV4ParamCoalesceMaskLenV6ParamCoalesceNumberV4ParamCoalesceNumberV6ParamDrivePrefixParamPurgeAllowIPParamRAMDrivePrefixParentAbstractionServiceParentSecondaryModeAlternateParentAbstractionServiceParentSecondaryModeDefaultParentAbstractionServiceParentSecondaryModeExhaustParentAbstractionServiceParentSecondaryModeInvalidParentAbstractionServiceParentSecondaryModePeeringParentAbstractionServiceParentsToParentDotConfigLineParentAbstractionServiceRetryPolicyConsistentHashParentAbstractionServiceRetryPolicyFirstParentAbstractionServiceRetryPolicyInvalidParentAbstractionServiceRetryPolicyLatchedParentAbstractionServiceRetryPolicyRoundRobinIPParentAbstractionServiceRetryPolicyRoundRobinStrictParentAbstractionServicesParentConfigCacheParamNotAParentParentConfigCacheParamPortParentConfigCacheParamRankParentConfigCacheParamUseIPParentConfigCacheParamWeightParentConfigDSParamDefaultMSOAlgorithmParentConfigDSParamDefaultMSOParentRetryParentConfigDSParamDefaultMSOUnavailableServerRetryResponsesParentConfigDSParamDefaultMaxSimpleRetriesParentConfigDSParamDefaultMaxUnavailableServerRetriesParentConfigFileNameParentConfigGoDirectEdgeParentConfigGoDirectFirstParentConfigGoDirectInnerParentConfigGoDirectLastParentConfigGoDirectMidParentConfigGoDirectParamParentConfigParamAlgorithmParentConfigParamMSOAlgorithmParentConfigParamMSOMaxSimpleRetriesParentConfigParamMSOMaxUnavailableServerRetriesParentConfigParamMSOParentRetryParentConfigParamMSOUnavailableServerRetryResponsesParentConfigParamMaxSimpleRetriesParentConfigParamMaxUnavailableServerRetriesParentConfigParamMergeGroupsParentConfigParamParentRetryParentConfigParamQStringParentConfigParamQStringHandlingParentConfigParamSecondaryModeParentConfigParamUnavailableServerRetryResponsesParentConfigRetryKeysParentConfigRetryKeysDefaultParentConfigRetryKeysFirstParentConfigRetryKeysInnerParentConfigRetryKeysLastParentConfigRetryKeysMSOParentDotConfigParentSeparatorParentSelectAlgorithmToParentAbstractionServiceRetryPolicyParentSelectParamQStringHandlingToBoolParseRetryResponsesPluginFileNamePluginSeparatorProfilesMatchRecordsFileNameRecordsSeparatorRefetchSuffixRefreshSuffixRegexRemapPrefixRegexRevalidateMaxRevalDurationDaysParamNameRegexRevalidateMinTTLRemapConfigCachekeyDirectiveRemapConfigDropQstringConfigFileRemapConfigRangeDirectiveRemapConfigRegexRemapDirectiveRemapConfigTemplateFirstRemapConfigTemplateInnerRemapConfigTemplateLastRemapFileRemapLineTemplatesRemapLinesRemapTagsRemoveParentDuplicatesRevalTypeRevalTypeDefaultRevalTypeMissRevalTypeStaleSNIDotYAMLFileNameSSLDataSSLServerNameYAMLFileNameSSLServerNameYAMLParamEnableH2SSLServerNameYAMLParamTLSVersionsServerCacheDotConfigIncludeInactiveDSesServerHostingDotConfigEdgeIncludeInactiveServerHostingDotConfigMidIncludeInactiveServerProfilesMatchServiceCategoryHeaderStorageFileNameStrategyConfigUsePeeringSysctlFileNameSysctlSeparatorTLSVersion1p0TLSVersion1p1TLSVersion1p2TLSVersion1p3ToCacheGroupToTopologyTopologyCacheTierTopologyCacheTierFirstTopologyCacheTierInnerTopologyCacheTierInvalidTopologyCacheTierLastTopologyPlacementTsDefaultRequestHeaderMaxSizeVolumeFileNameYAMLActionAllowYAMLActionDenyYAMLDocumentEndYAMLDocumentStartYAMLMethodAlladdMetaObjConfigDiraddRecordsDotConfigDNSLocaladdRecordsDotConfigOutgoingIPaddRecordsDotConfigOverridesaddRecordsDotConfigViaStrallowAllallowAllButPushPurgeallowAllButPushPurgeDeletebuildEdgeRemapLinecachekeyArgsForcdnDSchkConfigEntrieschkConfigEntryclassifyConfigParamsconfigProfileParamscreateTopologydefaultParentServerParamsdeliveryServiceRegexesSortByTypeThenSetNumdeliveryServicesAllParentsKeydeliveryServicesToCDNDSesdenyAlldsAssignedServerdsUsesServerdsesSortByNamedsesToProfileDSesedgeHeaderRewriteConfigFileNameensureConfigFilefilterConfigFileDSesfilterDSSfilterJobsfilterParamsgenericProfileConfiggetATSMajorVersiongetATSMajorVersionFromParamsgetAssignedEdgesgetAssignedMidsgetAssignedTierPeersgetCachegroupsInSameTopologyTiergetDSFromURISigningConfigFileNamegetDSFromURLSigConfigFileNamegetDSOriginsgetGoDirectOverRidesgetLocationParamsgetMSOParentStrsgetMaxRequestHeaderParamgetNodesWithSameOriginDistancesgetNumVolumesgetOriginDistancegetOriginFQDNAndPortgetOriginServersgetOriginURIgetParentCacheGroupDatagetParentDSParamsgetParentStrsgetProfileParentConfigParamsgetQStringIgnoreRemapgetSecondaryModeStrgetServerConfigRemapDotConfigForEdgegetServerConfigRemapDotConfigForMidgetServerIPAddressgetServerParentConfigParamsgetServerUnknownConfigCommentTypegetServiceAddressesgetStrategyErrorCodesgetStrategyGroupsgetStrategyGroupsSectiongetStrategyHostsSectiongetStrategyHostsSectionHostgetStrategyHostsSectionPeergetStrategyNamegetStrategyParentHostEntryNamegetStrategyPolicygetStrategySecondaryModegetStrategyStrategiesSectiongetTOURLAndReverseProxygetTierHeaderRewritegetTierHeaderRewriteTopologygetTopologyDirectChildrengetTopologyGoDirectgetTopologyGoDirectOldgetTopologyParentConfigLinegetTopologyParentIsProxyStrgetTopologyParentsgetTopologyPlacementgetTopologyQueryStringIgnoregetTopologyRoundRobingetTopologyTierServersgetURISignedDSeshasRequiredCapabilitiesheaderRewriteServerIsLastTierheaderRewriteTopologyTierintsToStrsipAllowDataipAllowDatasipAllowServeripAllowYAMLDataipAllowYAMLDatasisTopLevelCachejobsSortkeyValkeyValslastPrePostRemapLinesForlayerProfilesFromMaplayerProfilesFromWithmakeATCHeaderRewriteDirectiveMaxOriginConnsmakeATCHeaderRewriteDirectiveMaxRequestHeaderSizemakeATCHeaderRewriteDirectiveServiceCategoryHdrmakeATCHeaderRewriteDirectivesmakeCGMapmakeCacheDotConfigEdgemakeCacheDotConfigMidmakeDSOriginsmakeDSProfilesConfigParamsmakeDSTopologyHeaderRewriteTxtmakeEdgeDSDataRemapLinesmakeErrmakeErrfmakeFQDNmakeHdrCommentmakeOCGMapmakeParentCommentmakeParentInfosmakeServerPackageParamDatamakeStorageVolumeTextmakeTopologyNameMapmidHeaderRewriteConfigFileNamenoTopologyServerIsLastCacheForDSparameterWithProfilesparameterWithProfilesMapparameterWithProfilesToMapparamsSortparamsStringForparamsStringOldForparamsToMapparamsToMultiMapparentAbstractionToParentDotConfigparentAbstractionToStrategiesDotYamlparentCacheGroupsparentDSParamsparentInfoparentInfoSortByRankparentInfosparentServerParamspeersSortprocessRefetchremapFilterDSesremapLinereplaceLineSuffixesrequiredFilesrequiredFiles8requiredFiles9returnRerevalJobselfHealParamserverCacheConfigDSserverIsLastCacheForDSserverIsMidserverParentCacheGroupDataserverParentStrserverParentageParamsserverWithParamsserversSortByNameserversWithParamsSortByRankserviceGroupParentsNameserviceGroupSecondaryParentsNamesortParamsstrategyDirectivetcParamsToParamsWithProfilestlsVersionsToATStopologyIncludesServertopologyIncludesServerNullabletrimParamUnderscoreNumSuffixunavailableServerRetryResponsesValidvolumeTextyamlAllowAllyamlAllowAllButPushPurgeyamlAllowAllButPushPurgeDeleteyamlDenyAllparamDataparamWarnsserverParamsserver missing Profile"server missing Profile"location"location" AstatsSeparator is the string used by astats.config to separate configuration option names from values. AstatsFileName is the name of the file used to contain configuration for the astats_over_http Traffic Server plugin. ContentTypeAstatsDotConfig is the MIME type of the content of astats.config file. LineCommentAstatsDotConfig is the string used to mark the beginning of a line comment as understood by parsers of astats.config files. AStatsDotConfigOpts contains settings to configure generation options. HdrComment is the header comment to include at the beginning of the file. This should be the text desired, without comment syntax (like # or //). The file's comment syntax will be added. To omit the header comment, pass the empty string. MakeAStatsDotConfig constructs an astats.config file for the given server with the given Parameters and header comment content. TODO: Rename to 'MakeAstatsDotConfig' for consistency with other exported symbols? If no params exist, don't send "not found," but an empty file. We know the profile exists.ParentRetrySimpleRetryResponsesMaxUnavailableRetriesUnavailableRetryResponsesSrcParentTypeSecondaryParentIDSecondaryParentTypeksInTopologyIsFirstCacheTierIsInnerCacheTierIsLastCacheTierIsLastTierUseIPRankNotAParentParamsRequestFQDNsEnableH2PrimaryParentSecondaryParentToAbstractPrimarySecondaryNullsPurgeEndjbTemplatePartialProviderotagctagcurlineelemsforceRawpartialTagstmplreadStringreadTextreadTagparsePartialparseSectionparserenderTemplateFRenderRenderRenderInLayoutFRenderInLayoutltsQueryStringHandlingHasRetryParamsMaxUnavailableServerRetriesSimpleServerRetryResponsesUnavailableServerRetryResponsesTryAllPrimariesBeforeSecondaryUsePeeringMergeGroupsFillParentRetriesdspFillParentSvcRetriesdsparamsDestinationStrategyDscpHeaderRewriteDropQstringSigningCachekeyPacingRangeRequestsRawTextAnyMidOptionsSetisPreTagTypepartialElementindentprovtagReadingResultstandalonesectionElementinvertedstartlinetextReadingResultpaddingmayStandalone/Users/test/Desktop/trafficcontrol/lib/go-atscfg/atscfg.goacagcacheGrouptopologytgadajcgMapparentCGparentCGIDparentCGTypesecondaryParentCGIDsecondaryParentCGTypeserverCGhdrCommentdotPosmajorVermajorVerStrseparatorunderscorePosnodeIparentIparentNodehasChildrenhasParentsisMSOparentIsOriginserverNodeserverNodeIndextopoNamessvNodeItopotcParamtcParamsip4verWarnsatsMajorVeratsVersionParamsizeIglobalRequestHeaderMaxSizereqCapreqCapsoldJobinvalTypestartTimefilteredServersprofileNamesparamsMapparamkeyParamKeyallProfileParamsgetParamKeylayeredParamMaplayeredParamspb"5"Mon Jan 2 15:04:05 MST 2006"Mon Jan 2 15:04:05 MST 2006"`text/plain; charset=us-ascii`ServerUpdateStatusV5DSActiveStateInactiveINACTIVEgot cachegroup with nil name!'"got cachegroup with nil name!'"server missing cachegroup"server missing cachegroup"server missing hostname"server missing hostname"' cachegroup '"' cachegroup '"' not found in CacheGroups"' not found in CacheGroups"' parent '"' parent '"got cachegroup '"got cachegroup '"' with nil ID!'"' with nil ID!'"' with nil Type!'"' with nil Type!'"' secondary parent '"' secondary parent '"CacheGroupOriginTypeNameORG_LOC# "# ""\n\n"ParseUint9999unexpected version format '"unexpected version format '"', expected e.g. '7.1.2.whatever'"', expected e.g. '7.1.2.whatever'"LastIndex__`__`ParseFloatserver missing Cachegroup"server missing Cachegroup""first"inner"inner""last"nodeFortopology '"topology '"' has node with parent larger than nodes size! Config Generation will be malformed!"' has node with parent larger than nodes size! Config Generation will be malformed!"' has node with cachegroup '"' has node with cachegroup '"' that wasn't found in cachegroups! Config Generation will be malformed!"' that wasn't found in cachegroups! Config Generation will be malformed!"ATS config generation: cachegroup '"ATS config generation: cachegroup '"' with nil type! Config Generation will be malformed!"' with nil type! Config Generation will be malformed!"unmarshalling JSON from parameter '"unmarshalling JSON from parameter '"got multiple parameters for name '"got multiple parameters for name '""package"ATS version Parameter (config_file 'package' name 'trafficserver') not found on Server Profile, using default"ATS version Parameter (config_file 'package' name 'trafficserver') not found on Server Profile, using default"getting ATS major version from server Profile Parameter, using default: "getting ATS major version from server Profile Parameter, using default: "getting ATS major version from default version! Should never happen! Using 0, config will be malformed! : "getting ATS major version from default version! Should never happen! Using 0, config will be malformed! : "CONFIG proxy.config.http.request_header_max_size"CONFIG proxy.config.http.request_header_max_size"Couldn't convert string to int for max_req_header_size"Couldn't convert string to int for max_req_header_size"(warnings: `(warnings: `) `) ``json:"s"``json:"d"`converting old tc.Job to tc.InvalidationJob: "converting old tc.Job to tc.InvalidationJob: ""2006-01-02 15:04:05-07"`##REFETCH##``##REFRESH##`"TTL:""h"PURGE"PURGE"unmarshalling time: "unmarshalling time: "unmarshalling ttl: "unmarshalling ttl: ""off"parsing parameters profiles: "parsing parameters profiles: "DSTypeHTTPNoCacheHTTP_NO_CACHEDSTypeHTTPLiveHTTP_LIVEDSTypeDNSLiveDNS_LIVE InvalidID is used as a placeholder value when determining the ID of a parent Cache Group. This is not strictly invalid; when a Cache Group's Parent's ID is "detected" as this value, then it may simply mean that the Cache Group is "top-level", and has no parent. TODO: unexport this? It's highly specific to this package, and isn't used anywhere else. DefaultATSVersion is the version of Traffic Server assumed when one is not directly specified in a server's Parameters. TODO: Emulates Perl; change to 6? ATC no longer officially supports ATS 5. HeaderCommentDateFormat is an unused format for dates and times. TODO: Remove this, it's unused. ContentTypeTextASCII is the MIME type for plain text using an ASCII character set. TODO: Move to lib/go-rfc package? LineCommentHash is the string that denotes the beginning of a line comment, for grammars that use the number sign for line comments. TODO: Unexport? This is only used, it seems, to group multiple usages into a single symbol not used outside this package. It's conceivable to want to know the line comment string for a given grammar, but it's unlikely that anyone importing this package would find an alias for "#" itself helpful, with no other attached semantics. ConfigSuffix is a suffix (or "file extension") appended to many configuration file names, most notably those for the Header Rewrite Traffic Server plugin. TODO: Unexport? This is only used by the header rewrite configuration file generation functions, and doesn't have much practical purpose outside of that limited usage. TsDefaultRequestHeaderMaxSize is the default maximum request header size that will be allowed by ATS unless otherwise specified on a server's Profile. For more information, refer to the ATS documentation for the reconds.config configuration option 'proxy.config.http.request_header_max_size'. DeliveryServiceID is used internally to represent a Delivery Service ID. TODO: Unexport? This isn't used outside of this package. Alternatively: remove? lib/go-tc and cache-config/* use ints, so all this is doing is causing spurious casting back and forth. ProfileID is used internally to represent a Profile ID. ServerID is used internally to represent a server ID. ProfileName is used internally to represent a Profile Name. TopologyName is used internally to represent a Topology Name. Deprecated: github.com/apache/trafficcontrol/lib/go-tc provides the an identical type by the same name, but that is the type actually used by the Go client and Traffic Ops. Therefore, new code should use that type instead of this one. CacheGroupType is used internally to represent the Name of the Type of a remove? lib/go-tc and cache-config/* use strings, so all this is doing is ServerCapability is used to represent the Name of a Capability that a server has OR that a Delivery Service requires. Server is a tc.Server for the latest lib/go-tc and traffic_ops/vx-client type. This allows atscfg to not have to change the type everywhere it's used, every time ATC changes the base type, but to only have to change it here, and the places where breaking symbol changes were made. DeliveryService is a tc.DeliveryService for the latest lib/go-tc and traffic_ops/vx-client type. InvalidationJob is a tc.InvalidationJob for the latest lib/go-tc and traffic_ops/vx-client type. ServerUpdateStatus is a tc.ServerUpdateStatus for the latest lib/go-tc and traffic_ops/vx-client type. This allows atscfg to not have to change the type everywhere it's used, every time ATC changes the base type, but to only have to change it here, and the places where breaking symbol changes were made.type CDN tc.CDNV5 ToDeliveryServices converts a slice of the latest lib/go-tc and traffic_ops/vx-client type to the local alias. V50ToDeliveryServices converts a slice of the traffic_ops/v5-client type to the local alias. ToInvalidationJobs converts a slice of the latest lib/go-tc and traffic_ops/vx-client type to the local alias. ToServers converts a slice of the latest lib/go-tc and traffic_ops/vx-client type to the local alias. ToServerUpdateStatuses converts a slice of the latest lib/go-tc and traffic_ops/vx-client type to the local alias. CfgFile is all the information necessary to create an ATS config file, including the file name, path, data, and metadata. This is provided as a convenience and unified structure for users. The lib/go-atscfg library doesn't actually use or return this. See ATSConfigFileData. Cfg is the data and metadata for an ATS Config File. This includes the text, the content type (which is necessary for HTTP, multipart, and other things), and the line comment syntax if any. This is what is generated by the lib/go-atscfg library. Note it does not include the file name or path, which this library doesn't have enough information to return and is not part of generation. That information should be fetched from Traffic Ops, along with the data used to generate config files, or else generated from the machine. See CfgFile. getParentCacheGroupData returns the parent CacheGroup IDs and types for the given server. Takes a server and a CG map. To create a CGMap from an API CacheGroup slice, use MakeCGMap. If server's CacheGroup has no parent or secondary parent, returns InvalidID and "" with no error. isTopLevelCache returns whether server is a top-level cache, as defined by traditional CacheGroup parentage. This does not consider Topologies, and should not be used if the Delivery Service being considered has a Topology. Takes a ServerParentCacheGroupData, which may be created via GetParentCacheGroupData. GetATSMajorVersionFromATSVersion returns the major version of the given profile's package trafficserver parameter. The atsVersion is typically a Parameter on the Server's Profile, with the configFile "package" name "trafficserver". Returns an error if atsVersion is empty or does not start with an unsigned integer followed by a period or nothing. if there's no '.' then assume the whole string is just a major version. genericProfileConfig generates a generic profile config text, from the profile's parameters with the given config file name. This does not include a header comment, because a generic config may not use a number sign as a comment. If you need a header comment, it can be added manually via ats.HeaderComment, or automatically with WithProfileDataHdr. GetProfileParamData(tx, profileID, fileName) trimParamUnderscoreNumSuffix removes any trailing "__[0-9]+" and returns the trimmed string. topologyIncludesServer returns whether the given topology includes the given server. topologyIncludesServerNullable returns whether the given topology includes the given server. TopologyCacheTier is the position of a cache in the topology. Note this is the cache tier itself, notwithstanding MSO. So for an MSO service, Caches immediately before the origin are the TopologyCacheTierLast, even for MSO. These are the allowed values for a TopologyCacheTier. TopologyPlacement contains data about the placement of a server in a topology. InTopology is whether the server is in the topology at all. IsFirstCacheTier is whether the server is the first cache tier. Note if the server is the only tier, both IsFirstCacheTier and IsLastCacheTier may be true. IsInnerCacheTier is whether the server is an inner cache tier. This will never be true if IsFirstCacheTier or IsLstCacheTier are true. IsLastCacheTier is whether the server is the last cache tier. Note if the server is the only tier, both IsFirstCacheTier and IsLastCacheTier may be true. Note this is distinct from IsLastTier, which will be false for the last cache tier of MSO. IsLastTier is whether the server is the last tier in the topology. Note this is different than IsLastCacheTier for MSO vs non-MSO. For MSO, the last tier is the Origin. For non-MSO, the last tier is the last cache tier. getTopologyPlacement returns information about the cachegroup's placement in the topology, and any error. - Whether the cachegroup is the last tier in the topology. - Whether the cachegroup is in the topology at all. - Whether it's the first, inner, or last cache tier before the Origin. TODO extra safety: check other parents, and warn if parents have different types? If the parent CG is an Origin CG, but this DS is not MSO, then ignore the Topology and declare this the last tier getTopologyDirectChildren returns the cachegroups which are immediate children of the given cachegroup in any topology. this cg wasn't in the topology tcParamsToParamsWithProfiles unmarshals the Profiles that the tc struct doesn't. filterParams filters params and returns only the parameters which match configFile, name, and value. paramsToMap converts a []tc.Parameter to a map[paramName]paramValue. Warnings will be returned if any parameters have the same name but different values. Returns the parameter map, and any warnings. paramArrToMultiMap converts a []tc.Parameter to a map[paramName][]paramValue. getServerIPAddress gets the old IPv4 tc.Server.IPAddress from the new tc.Server.Interfaces. If no IPv4 address set as a ServiceAddress exists, returns nil Malformed addresses are ignored and skipped. Valid IPv4, return it IP, but not v4, keep looking not an IP, try a CIDR TODO log? Not a CIDR or IP, keep looking got a valid CIDR CIDR is V4, return its IP valid CIDR, but not v4, keep looking getServiceAddresses returns the first "service" addresses for IPv4 and IPv6 that it finds. If an IPv4 or IPv6 "service" address is not found, returns nil for that IP. TODO log error? Not an IP or CIDR getATSMajorVersion takes a config variable of the version, the Server Parameters, and a pointer to warnings to populate. This allows callers to use the config variable if it was given, or get the ATS version from the Server Parameters if it wasn't, and add to a warnings variable, in a single line. If more flexibility is needed, getATSMajorVersionFromParams may be called directly; but it should generally be avoided, functions should always take a config variable for the ATS version, in case a user wants to manage the ATS package outside ATC. getATSMajorVersionFromParams should generally not be called directly. Rather, functions should always take the version as a config parameter which may be omitted, and call getATSMajorVersion. It returns the ATS major version from the config_file 'package' name 'trafficserver' Parameter on the given Server Profile Parameters. If no Parameter is found, or the value is malformed, a warning or error is logged and DefaultATSVersion is returned. Returns the ATS major version, and any warnings getMaxRequestHeaderParam returns the 'CONFIG proxy.config.http.request_header_max_size' if configured in the Server Profile Parameters. If the parameter is not configured it will return the traffic server default request header max size. hasRequiredCapabilities returns whether the given caps has all the required capabilities in the given reqCaps. makeErr takes a list of warnings and an error string, and combines them to a single error. Configs typically generate a list of warnings as they go. When an error is encountered, we want to combine the warnings encountered and include them in the returned error message, since they're likely hints as to why the error occurred. makeErrf is a convenience for formatting errors for makeErr. todo also unused, maybe remove? DeliveryServiceServer is a compact version of DeliveryServiceServer. The Delivery Service Servers is massive on large CDNs not using Topologies, compacting it in JSON and dropping the timestamp drastically reduces the size. The t3c apps will also drop any DSS from Traffic Ops with null values, which are invalid and useless, to avoid pointers and further reduce size. JobsToInvalidationJobs converts a set of tc.Job structures into their equivalent InvalidationJob structures, by calling JobToInvalidationJob on each of them in turn. This will bail on the first error encountered when converting, so other jobs afterward may also have problems, but they won't be reported. These are the formats for the "lastUpdated" timestamps of Content Invalidation Jobs in different Traffic Ops API versions. The format in API versions 4.0 and later. The format in API versions prior to 4.0. These special suffixes when found on a rule override the default type of a Content Invalidation Job. Deprecated: these are no longer necessary in Traffic Ops API versions 4.0 and later. These strings are used to parse legacy representations of Content Invalidation Jobs. Deprecated: When the Traffic Ops API version 4.0 representation of Content Invalidation Jobs becomes standard (i.e. when 3.x API version support is dropped) these will have no meaning or purpose. JobToInvalidationJob converts a tc.Job to an InvalidationJob. If the conversion fails, an error is returned. FilterServers returns the servers for which filter returns true. TODO add warning/error feature? BoolOnOff returns 'on' if b, else 'off'. This is a helper func for some ATS config files that use "on" and "off" for boolean values. GetDSParameters returns the parameters for the given Delivery Service. from v4-client.GetParameters -> /4.0/parameters GetServerParameters returns the parameters for the given Server, per the Layered Profiles feature. See LayerProfiles. LayerProfiles takes an ordered list of profile names (presumably from a Server or Delivery Service), and the Parameters from Traffic Ops (which includes Profile-Parameters data), and layers the parameters according to the ordered list of profiles. Returns the appropriate parameters for the Server, Delivery Service, or other object containing an ordered list of profiles. from a Server, Delivery Service, or other object with "layered profiles". layerProfilesFromWith is like LayerProfiles if you already have a []parameterWithProfiles. layerProfilesFromMap is like LayerProfiles if you already have a []parameterWithProfilesMap. ParamKey is the key for a Parameter, which if there's another Parameter with the same key in a subsequent profile in the ordered list, the last Parameter with this key will be used. profileNames is ordered, we need to iterate through this backwards because we need subsequent params on other profiles to override previous ones, this will provide the proper "layering" that we want. ServerProfilesMatch returns whether both servers have the same Profiles in the same order, and thus will have the same Parameters. ProfilesMatch takes two ordered lists of profile names (such as from Servers or Delivery Services) and returns whether they contain the same profiles in the same order, and thus whether they will contain the same Parameters. IsGoDirect checks if this ds type is edge only./Users/test/Desktop/trafficcontrol/lib/go-atscfg/atsdotrules.goramPostfixramPrefixdrivePostfixdrivePrefixDrive_Prefix"Drive_Prefix"`/dev/`Drive_Letters"Drive_Letters"KERNEL=="`KERNEL=="`", OWNER="ats"`", OWNER="ats"`RAM_Drive_Prefix"RAM_Drive_Prefix"RAM_Drive_Letters"RAM_Drive_Letters" ATSDotRulesFileName is the name of a "rules" configuration file. TODO: This isn't actually correct. This is just the ConfigFile value that a cache server's Profile's Drive_Prefix, Drive_Letters, RAM_Drive_Prefix, and RAM_Drive_Letters Parameters must have for generation to be successful (in fact it seems to panic if those aren't found), but the actual name of the file for which MakeATSDotRules outputs content is '50-ats.rules'. Is this misleading? Maybe it just doesn't even need to be exported? Or exist at all? ContentTypeATSDotRules is the MIME type of the contents of a 50-ats.rules LineCommentATSDotRules is the string used by parsers of 50-ats.rules to determine that the rest of the current line's content is a comment. ATSDotRulesOpts contains settings to configure generation options. MakeATSDotRules constructs a '50-ats.rules' file for the given server with the given parameters and header comment content./Users/test/Desktop/trafficcontrol/lib/go-atscfg/bgfetchdotconfig.goserver missing CDNName"server missing CDNName"include User-Agent *
"include User-Agent *\n" ContentTypeBGFetchDotConfig is the MIME type of the contents of a bg_fetch.config file. LineCommentBGFetchDotConfig is the string understood by parsers of bg_fetch.config files to be the beginning of a line comment. BGFetchDotConfigOpts contains settings to configure generation options. MakeBGFetchDotConfig constructs a 'bg_fetch.config' file for the given server with the given header comment content./Users/test/Desktop/trafficcontrol/lib/go-atscfg/cachedotconfig.godeliveryServiceServersoriginFQDNoriginPortdsWarningslinesArrprofileDSesprofileServerIDsMappdspdsesportPosportStruriStrCacheTypeFromStringCacheTypeMidMIDserver missing profiles"server missing profiles"profileCacheDotConfig ds %s has no origin fqdn, skipping!"profileCacheDotConfig ds %s has no origin fqdn, skipping!"dest_domain="dest_domain=" port=" port=" scheme=http action=never-cache
" scheme=http action=never-cache\n"servers had server with nil profile, skipping!"servers had server with nil profile, skipping!"servers had server with nil id, skipping!"servers had server with nil id, skipping!"deliveryservices had ds with nil id, skipping!"deliveryservices had ds with nil id, skipping!"deliveryservices had ds with nil type, skipping!"deliveryservices had ds with nil type, skipping!"got ds with missing XMLID, skipping!"got ds with missing XMLID, skipping!"DSTypeInvaliddeliveryservices had ds with invalid type, skipping!"deliveryservices had ds with invalid type, skipping!"deliveryservices had ds with empty origin, skipping!"deliveryservices had ds with empty origin, skipping!" ContentTypeCacheDotConfig is the MIME type of the contents of a cache.config LineCommentCacheDotConfig is the string that signifies the beginning of a line comment in the grammar of a cache.config file. CacheDotConfigOpts contains settings to configure generation options. MakeCacheDotConfig makes the ATS cache.config config file. use a "set" for lines, to avoid duplicates, since we're looking up by profile ProfileDS struct for filtered delivery services. GetProfileDSes filters delivery services and return delivery services with valid type and non-empty FQDN. this is normal for steering and anymap dses dsesToProfileDSes is a helper function to convert a []tc.DeliveryServiceNullable to []ProfileDS. Note this does not check for nil values. If any DeliveryService's Type or OrgServerFQDN may be nil, the returned ProfileDS should be checked for DSTypeInvalid and nil, respectively. GetHostPortFromURI strips HTTP(s) scheme and path and return host with port (if found)./Users/test/Desktop/trafficcontrol/lib/go-atscfg/chkconfig.gomarshalling chkconfig NameVals: "marshalling chkconfig NameVals: " ChkconfigFileName is the name of the ckconfig configuration file. ChkconfigParamConfigFile is the ConfigFile value of Parameters that affect the generation of the chkconfig configuration file. ContentTypeChkconfig is the MIME content type of the contents of the chkconfig configuration file. Note that the GoDoc for MakeChkconfig says "This is a JSON object, and should be served with an 'application/json' Content-Type." but actually the file contents on disk are not JSON-encoded. LineCommentChkconfig is the string that signifies the start of a line comment in the grammar of a chkconfig configuration file. ChkconfigOpts contains settings to configure generation options. MakeChkconfig returns the 'chkconfig' ATS config file endpoint. This is a JSON object, and should be served with an 'application/json' Content-Type. TODO: rename/rework? We systemd now, after all. Also, this may be unused as t3c now generates the contents of the file specially without calling into this function, possibly./Users/test/Desktop/trafficcontrol/lib/go-atscfg/doc.go Package atscfg contains logic for generating Apache Traffic Server configuration files from ATC objects and concepts./Users/test/Desktop/trafficcontrol/lib/go-atscfg/dropqstringdotconfig.godropQStringVal"content"this server missing Profile"this server missing Profile"/([^?]+) $s://$t/$1`/([^?]+) $s://$t/$1`/([^?]+) $s://$t/$1
 DropQStringDotConfigFileName is the name of the drop_qstring.config file - this is also the ConfigFile value of Parameters that are able to affect the contents of this file. DropQStringDotConfigParamName is the Name a Parameter must have to dictate the contents of drop_qstring.config - Parameters by other Names (even in the correct ConfigFile) are ignored. ContentTypeDropQStringDotConfig is the MIME type of the contents of a drop_qstring.config file. LineCommentDropQStringDotConfig is the string that signifies the start of a line comment in the grammar of a drop_qstring.config file. DropQStringDotConfigOpts contains settings to configure generation options. MakeDropQStringDotConfig constructs a drop_qstring.config file for the given server with the given Parameters and header comment content./Users/test/Desktop/trafficcontrol/lib/go-atscfg/facts.goprofiles:"profiles:"", " ContentType12MFacts is the MIME type of the contents of a 12M_facts file. LineComment12MFacts is the string that signifies the start of a line comment in the grammar of a 12M_facts file. Config12MFactsOpts contains settings to configure generation options. Make12MFacts constructs a 12M_facts file for the given server with the given header comment contents./Users/test/Desktop/trafficcontrol/lib/go-atscfg/headerrewritedotconfig.gohdrRwassignWarnsassignedTierPeersatsRqstMaxHdrSizecacheGroupsArrdsOnlinePeerCountheaderRewriteTxtnumLastTierServersrequiredCapabilitiesserverCapabilitiesserverIsLastTiertcServerParamstopologiesArrdsUsesMidsdssIsLastTiertierdsRequiredCapabilitiesassignedEdgesdsServerIDsassignedMidsassignedServersparentCGsserverCGscacheGroupsInSameTiertopoServerscacheGroupMapcacheGroupsInSameTopologyTiernodeIndexnodesWithSameOriginDistancesoriginCacheGroupsoriginNodesnodeDistanceoriginDistancessameDistancesoriginDistancemaxOriginConnectionsPerServermaybeMatchescapedServiceCategoryhdrTxtwarnTxt@CDN-SVC"@CDN-SVC"first_"first_"inner_"inner_"last_"last_"this server missing CDNName"this server missing CDNName"CacheTypeInvalidthis server missing Type"this server missing Type"server missing HostName"server missing HostName"making CacheGroup map: "making CacheGroup map: "deliveryServices had DS with nil xmlId (name)"deliveryServices had DS with nil xmlId (name)"ds '"ds '"' not found"' not found"' missing cdn"' missing cdn"header rewrite file '"header rewrite file '"' for non-topology, but delivery service has a Topology. Do you have a location Parameter that needs deleted? Writing blank file!"' for non-topology, but delivery service has a Topology. Do you have a location Parameter that needs deleted? Writing blank file!"DS "DS " topology '" topology '"' not found in Topologies!"' not found in Topologies!"got server with nil status! skipping!"got server with nil status! skipping!"CacheStatusCacheStatusReportedCacheStatusOnlinegetting header rewrite tier from delivery service: "getting header rewrite tier from delivery service: "getting header rewrite text from delivery service: "getting header rewrite text from delivery service: "`
`Topology Header Rewrite called for DS '"Topology Header Rewrite called for DS '"' on server '"' on server '"' file '"' file '"' had unknown topology cache tier '"' had unknown topology cache tier '"'!"'!"MidTypePrefixservers had server with missing cdnName, skipping!"servers had server with missing cdnName, skipping!"servers had server with missing id, skipping!"servers had server with missing id, skipping!"TO returned Servers sv with missing CDNName, skipping!"TO returned Servers sv with missing CDNName, skipping!"TO returned Servers sv with missing ID, skipping!"TO returned Servers sv with missing ID, skipping!"TO returned Servers sv with missing Status, skipping!"TO returned Servers sv with missing Status, skipping!"TO returned Servers sv with missing Cachegroup, skipping!"TO returned Servers sv with missing Cachegroup, skipping!"cachegroups had cachegroup with nil name, skipping!"cachegroups had cachegroup with nil name, skipping!"TO returned Servers server with missing CDNName, skipping!"TO returned Servers server with missing CDNName, skipping!"TO returned Servers server with missing Cachegroup, skipping!"TO returned Servers server with missing Cachegroup, skipping!"Servers had server with nil cachegroup, skipping!"Servers had server with nil cachegroup, skipping!"Servers had server with nil id, skipping!"Servers had server with nil id, skipping!"
cond %{REMAP_PSEUDO_HOOK}
set-config proxy.config.http.origin_max_connections `
cond %{REMAP_PSEUDO_HOOK}
set-config proxy.config.http.origin_max_connections `proxy.config.http.per_server.connection.match`proxy.config.http.per_server.connection.match`set-config proxy.config.http.per_server.connection.match host
`set-config proxy.config.http.per_server.connection.match host
`
cond %{REMAP_PSEUDO_HOOK}
`
cond %{REMAP_PSEUDO_HOOK}
`set-config proxy.config.http.per_server.connection.max `set-config proxy.config.http.per_server.connection.max `
cond %{REMAP_PSEUDO_HOOK}
set-header `
cond %{REMAP_PSEUDO_HOOK}
set-header ` "` "`
cond %{REMAP_PSEUDO_HOOK}
set-header @CDN-SVC "|`|`"
`"
`cond %{REMAP_PSEUDO_HOOK}
cond % cqhl > "cond %{REMAP_PSEUDO_HOOK}\ncond % cqhl > "
set-status 400"\nset-status 400"#TO Max Request Header Size: "#TO Max Request Header Size: ",is larger than or equal to the global setting of ",is larger than or equal to the global setting of ", header rw will be ignored.
", header rw will be ignored.\n" HeaderRewritePrefix is a prefix on filenames of configuration files for the Header Rewrite ATS plugin for edge-tier cache servers. The rest of the filename is dependent on the Delivery Service for which the file contains rewrite rules. HeaderRewriteMidPrefix is a prefix on filenames of configuration files for the Header Rewrite ATS plugin for mid-tier cache servers. The rest of the ContentTypeHeaderRewriteDotConfig is the MIME type of the contents of a configuration file for the Header Rewrite ATS plugin. LineCommentHeaderRewriteDotConfig is the string used to signify the beginning of a line comment in the grammar of configuration files for the Header Rewrite ATS plugin. ServiceCategoryHeader is the internal service category header for logging the service category. Note this is internal, and will never be set in an HTTP Request or Response by ATS. MaxOriginConnectionsNoMax is a value specially interpreted by ATS to mean "no maximum origin connections". TODO: Remove this? It's not used anywhere, not even internally in this package. 0 indicates no limit on origin connections HeaderRewriteFirstPrefix is a prefix on filenames of configuration files for the Header Rewrite ATS plugin for cache servers at the first (or "edge") tier of a Topology. The rest of the filename is dependent on the Delivery Service for which the file contains rewrite rules. HeaderRewriteInnerPrefix is a prefix on filenames of configuration files for the Header Rewrite ATS plugin for cache servers at any tier between the first and last tier of a Topology. The rest of the filename is dependent on the Delivery Service for which the file contains rewrite rules. HeaderRewriteLastPrefix is a prefix on filenames of configuration files for the Header Rewrite ATS plugin for cache servers at the last tier of a Topology. The rest of the filename is dependent on the Delivery Service for which the file contains rewrite rules. FirstHeaderRewriteConfigFileName returns the full name of a configuration file for the Header Rewrite ATS plugin for a cache server at the first tier of a Topology. The dsName passed in should NOT be the Delivery Service's Display Name, it should be its "XMLID". InnerHeaderRewriteConfigFileName returns the full name of a configuration LastHeaderRewriteConfigFileName returns the full name of a configuration HeaderRewriteDotConfigOpts contains settings to configure generation options. ATSMajorVersion is the integral major version of Apache Traffic server, used to generate the proper config for the proper version. If omitted or 0, the major version will be read from the Server's Profile Parameter config file 'package' name 'trafficserver'. If no such Parameter exists, the ATS version will default to 5. This was the old Traffic Control behavior, before the version was specifiable externally. MakeHeaderRewriteDotConfig makes the header rewrite file for an Edge hdr_rw_ or Mid hdr_rw_mid_ or Topology hdr_rw_{first,inner,last} file, as generated by MakeMetaConfigFilesList. TODO verify prefix and suffix? Perl doesn't write a blank file, rather than an error. Because this usually means a bad location parameter, we don't want to break all of config generation during the migration to Topologies Add the TC directives (which may be empty). NOTE!! Custom TC injections MUST NOT EVER have a `[L]`. Doing so will break custom header rewrites! NOTE!! The TC injections MUST be come before custom rewrites (EdgeHeaderRewrite, InnerHeaderRewrite, etc).        If they're placed after, custom rewrites with [L] directives will result in them being applied inconsistently and incorrectly. headerRewriteServerIsLastTier is whether the server is the last tier for the delivery service of this header rewrite. This should NOT be abstracted into a function that could be used by any other config. This is whether the server is the last tier for this header rewrite. Which may not be true for other rewrites or configs. serverPlacement, err := getTopologyPlacement(tc.CacheGroupName(*server.Cachegroup), topology, cacheGroups, ds) fmt.Printf("DEBUG ds '%v' topo placement %+v\n", *ds.XMLID, serverPlacement) if err != nil { 	return false, errors.New("getting topology placement: " + err.Error()) if !serverPlacement.InTopology { 	return false, errors.New("server not in topology") return serverPlacement.IsLastCacheTier, nil headerRewriteTopologyTier returns the topology tier of this header rewrite file, or TopologyCacheTierInvalid if the file is not for a topology header rewrite. getTierHeaderRewrite returns the ds MidHeaderRewrite if server is a MID, else the EdgeHeaderRewrite. Does not consider Topologies. May return nil, if the tier's HeaderRewrite (Edge or Mid) is nil. serverIsMid returns true if server's type is Mid. The server.Type MUST NOT be nil. Does not consider Topologies. getAssignedTierPeers returns all edges assigned to the DS if server is an edge, or all mids if server is a mid, or all the servers at the same tier, if the Delivery Service uses Topologies. Note this returns all servers of any status, not just ONLINE or REPORTED servers. Returns the list of assigned peers, and any warnings. getAssignedEdges returns all EDGE caches assigned to ds via DeliveryService-Service. Does not consider Topologies. Returns the list of assigned servers, and any warnings. getAssignedMids returns all MID caches with a child EDGE assigned to ds via DeliveryService-Service. Does not consider Topologies. names of cachegroups which are parent cachegroups of the cachegroup of any edge assigned to the given DS this is normal for top-level cachegroups getTopologyTierServers returns the servers in the same tier as cg which will be used to serve ds. This should only be used for DSes with Topologies. It returns all servers in with the Capabilities of ds in the same tier as cg. Returns the servers, and any warnings. makeATCHeaderRewriteDirectives returns the Header Rewrite text for all per-Delivery-Service Traffic Control directives, such as MaxOriginConnections and ServiceCategory. These should be prepended to any custom Header Rewrites, in order to prevent [L] directive errors. The returned text may be empty, if no directives are configured. NOTE!! Custom TC injections MUST NOT ever have a `[L]`. Doing so will break custom header rewrites!	If they're placed after, custom rewrites with [L] directives will result in them being applied inconsistently and incorrectly. The headerRewriteTxt is the custom header rewrite from the Delivery Service. This should be used for any logic that depends on it. The various header rewrite fields (EdgeHeaderRewrite, InnerHeaderRewrite, etc should never be used inside this function, since this function doesn't know what tier the server is at. This function should not insert the headerRewriteText, but may use it to make decisions about what to insert. makeATCHeaderRewriteDirectiveMaxOriginConns generates the Max Origin Connections header rewrite text, which may be empty. if the DS doesn't specify a match, use host. This will make ATS treat different hostnames (but not IPs) as different, for max origin connections. Which is what we want. It's common for different DSes to CNAME the same origin, such as a cloud provider. In that case, we want to give each hostname=remap=deliveryservice its own max if the custom header rewrite already contains the service category header, don't add another one Escape the ServiceCategory, which is user input, to prevent exploits. No Delivery Service should be able to break the CDN. This is more conservative than necessary, but Go doesn't have a HeaderEscape, and valid path characters are a subset of valid header values./Users/test/Desktop/trafficcontrol/lib/go-atscfg/hostingdotconfig.godiskVolumetopoHasServerhasTopologynextVolumeramVolumeseenOriginscdnServersdsServerMapfilteredDSesisMidnameTopologies`hosting.config``storage.config`this server missing CDNID"this server missing CDNID"server had no host name!"server had no host name!"this server missing ID"this server missing ID"TO Servers had server missing HostName, skipping!"TO Servers had server missing HostName, skipping!"TO Servers had server missing CDNID, skipping!"TO Servers had server missing CDNID, skipping!"DSTypeLiveNationalSuffix_LIVE_NATNLDSTypeLiveSuffix_LIVE# TRAFFIC OPS NOTE: volume `# TRAFFIC OPS NOTE: volume ` is the Disk volume` is the Disk volume` is the RAM volume` is the RAM volume`got DS with nil values, skipping!"got DS with nil values, skipping!"checking if topology has server, skipping! : "checking if topology has server, skipping! : "`http://``https://`hostname=`hostname=` volume=` volume=`hostname=*   volume=`hostname=*   volume=` HostingConfigFileName is the file name of a hosting.config file. TODO: Remove? This is unused, even internally in this package. HostingConfigParamConfigFile is the ConfigFile value of Parameters which can affect the contents of hosting.config files. ContentTypeHostingDotConfig is the MIME type of the contents of a hosting.config file. LineCommentHostingDotConfig is the string used to indicate the beginning of a line comment in the grammar of a hosting.config file. ParamDrivePrefix is the Name of the Parameter that determines the path prefix for disk storage caching block devices. ParamRAMDrivePrefix is the Name of the Parameter that determines the path prefix for RAM caching block devices. ServerHostingDotConfigMidIncludeInactive controls whether or not to include configurations for inactive Delivery Services in hosting.config for mid-tier cache servers. ServerHostingDotConfigEdgeIncludeInactive controls whether or not to include configurations for inactive Delivery Services in hosting.config for edge-tier HostingDotConfigOpts contains settings to configure generation options. MakeHostingDotConfig generates a hosting.config file for a server. set[dsID][serverID] some DSes have nil origins. I think MSO? TODO: verify mids: include all DSes with at least one server assigned edges: only include DSes assigned to this edge note this will actually be the RAM (RAM_Drive_Prefix) volume if there is no Drive_Prefix parameter./Users/test/Desktop/trafficcontrol/lib/go-atscfg/ipallowdotconfig.govisvAddrsvInterfaceisChildchildServerchildCGNameschildCGscidr6sip6salcoalesceMaskLenV4coalesceMaskLenV6coalesceNumberV4coalesceNumberV6ipAllowDatmethodPushPurgerangeStrmethodPushPurgeDelete`ip_allow.config`purge_allow_ip"purge_allow_ip"coalesce_masklen_v4"coalesce_masklen_v4"coalesce_number_v4"coalesce_number_v4"coalesce_masklen_v6"coalesce_masklen_v6"coalesce_number_v6"coalesce_number_v6"48this server missing Cachegroup"this server missing Cachegroup"this server missing HostName"this server missing HostName"got param '"got param '"' val '"' val '"' not a number, ignoring!"' not a number, ignoring!"got multiple param '"got multiple param '"' - ignoring  val '"' - ignoring  val '"`127.0.0.1``::1`0.0.0.0-255.255.255.255`0.0.0.0-255.255.255.255`::-ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff`::-ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff`got cachegroup with nil name!"got cachegroup with nil name!"server had nil Cachegroup!"server had nil Cachegroup!"server cachegroup not in cachegroups!"server cachegroup not in cachegroups!"Servers had server with nil Cachegroup, skipping!"Servers had server with nil Cachegroup, skipping!"Servers had server with nil HostName, skipping!"Servers had server with nil HostName, skipping!"IPToCIDR' IP '"' IP '" is not an IP address or CIDR - skipping!" is not an IP address or CIDR - skipping!" failed to parse as IP or CIDR - skipping!" failed to parse as IP or CIDR - skipping!"CoalesceCIDRsRangeStr10.0.0.0-10.255.255.255`10.0.0.0-10.255.255.255`172.16.0.0-172.31.255.255`172.16.0.0-172.31.255.255`192.168.0.0-192.168.255.255`192.168.0.0-192.168.255.255`src_ip=`src_ip=` action=` action=` method=` method=`ip_allow"ip_allow"ip_deny"ip_deny"ALL"ALL"PUSH"PUSH"DELETE"DELETE" IPAllowConfigFileName is both the file name of ip_allow.config files and the ConfigFile value of Parameters that can affect its contents. ContentTypeIPAllowDotConfig is the MIME type of the contents of an ip_allow.config file. LineCommentIPAllowDotConfig is the string that signifies the start of a line comment in the grammar of an ip_allow.config file. ParamPurgeAllowIP is the Name of Parameters which can specify an IP address to be allowed ALL methods on the cache server (not just PURGE). TODO: replace instances of "purge_allow_ip" with this currently-unused constant. TODO: unexport? This is only used in this package. ParamCoalesceMaskLenV4 is the Name of a Parameter which can be used to set the mask length for IPv4 network specifications used to coalesce groups of addresses in an ip_allow.config file. ParamCoalesceNumberV4 is the Name of a Parameter that can be used to set the minimum number of IPv4 addresses in an ip_allow.config file that must be covered by a mask in order to allow coalescing them. ParamCoalesceMaskLenV6 is the Name of a Parameter which can be used to set the mask length for IPv6 network specifications used to coalesce groups of ParamCoalesceNumberV6 is the Name of a Parameter that can be used to set the minimum number of IPv6 addresses in an ip_allow.config file that must be DefaultCoalesceMaskLenV4 is the value that will be used for the mask length for IPv4 network specifications used to coalesce groups of addresses in an ip_allow.config file, if a value is not given by a Parameter. DefaultCoalesceNumberV4 is the value that will be used for the minimum number of IPv4 addresses in an ip_allow.config file that must be covered by a mask in order to allow coalescing them, if a value is not given by a Parameter. DefaultCoalesceMaskLenV6 is the value that will be used for the mask length for IPv6 network specifications used to coalesce groups of addresses in an DefaultCoalesceNumberV6 is the value that will be used for the minimum number of IPv6 addresses in an ip_allow.config file that must be covered by a mask IPAllowDotConfigOpts contains settings to configure generation options. MakeIPAllowDotConfig creates the ip_allow.config ATS config file. The childServers is a list of servers which are children for this Mid-tier server. This should be empty for Edge servers. More specifically, it should be the list of edges whose cachegroup's parent_cachegroup or secondary_parent_cachegroup is the cachegroup of this Mid server. default for coalesce_ipv4 = 24, 5 and for ipv6 48, 5; override with the parameters in the server profile. for edges deny "PUSH|PURGE|DELETE", allow everything else to everyone. sort servers, to guarantee things like IP coalescing are deterministic We need to add IPs to the allow of - all children of this server - all monitors, if this server is a Mid got an IP - convert it to a CIDR and add it to the list not a CIDR or IP - error out got a valid CIDR - add it to the list allow RFC 1918 server space - TODO JvD: parameterize order matters, so sort before adding the denys start by allowing everything to localhost, including PURGE and PUSH end with a deny ActionAllow specifies that IPs matching the line's pattern should be allowed to use the explicitly listed HTTP request methods. ActionDeny specifies that IPs matching the line's pattern should NOT be allowed to use the explicitly listed HTTP request methods. These are the ATS HTTP request methods that may be granted using ipallow configuration file rules. "ALL" has the special meaning "all HTTP Methods". MethodPush is a non-standard HTTP request method understood by Apache Traffic Server used to directly insert content for the requested URI into the cache. MethodPurge is a non-standard HTTP request method understood by Apache Traffic Server used to directly remove the requested URI from the cache. MethodSeparator is the string used as an infix operator in ipallow.config ATS configuration files to express a union of allowed HTTP request methods. allowAllButPushPurge is a helper func to build a ipAllowData for the given range string immediately allowing all Methods except Push and Purge. Note denying methods implicitly and immediately allows all other methods! So Deny PUSH|PURGE will make all other methods immediately allowed, regardless of any later deny rules! allowAllButPushPurgeDelete is a helper func to build a ipAllowData for the given range string immediately allowing all Methods except PUSH, PURGE, and DELETE. allowAll is a helper func to build a ipAllowData for the given range string immediately allowing all Methods, including Push and Purge. denyAll is a helper func to build a ipAllowData for the given range string immediately denying all Methods./Users/test/Desktop/trafficcontrol/lib/go-atscfg/ipallowdotyaml.gowsmi`ip_allow.yaml`application/yaml; charset=us-ascii0.0.0.0/0`0.0.0.0/0`::/0`::/0`10.0.0.0/8`10.0.0.0/8`172.16.0.0/12`172.16.0.0/12`192.168.0.0/16`192.168.0.0/16`
ip_allow:`
ip_allow:`
  - apply: in
    ip_addrs: `
  - apply: in
    ip_addrs: `
    action: `
    action: `
    methods:`
    methods:`
      - `
      - `"allow""deny" IPAllowYamlFileName is the name of the configuration file that controls IP address-restricted access to various request methods. TODO: Replace instances of 'ip_allow.yaml' with this currently unused ContentTypeIPAllowDotYAML is the MIME type of the contents of an ip_allow.yaml file. Note YAML has no IANA standard mime type. This is one of several common usages, and is likely to be the standardized value. If you're reading this, please check IANA to see if YAML has been added, and change this to the IANA definition if so. Also note we include 'charset=us-ascii' because YAML is commonly UTF-8, but ATS is likely to be unable to handle UTF. LineCommentIPAllowDotYAML is the string used to signify the beginning of a line comment in the grammar of an ip_allow.yaml file. IPAllowDotYAMLOpts contains settings to configure generation options. MakeIPAllowDotYAML creates the ip_allow.yaml ATS 9+ config file. localhost is trusted. start with a deny for PUSH and PURGE - TODO CDL: parameterize but leave purge open through localhost Edges already deny PUSH and PURGE YAMLActionAllow specifies that the block to which it belongs specifies that matching IP addresses should be explicitly allowed to use the associated HTTP request methods. YAMLActionDeny specifies that the block to which it belongs specifies that matching IP addresses should be explicitly NOT allowed to use the associated HTTP request methods. YAMLMethodAll is a possible HTTP request method that may be given/denied to IP addresses in ipallow.yaml configuration files, which has the special meaning "all HTTP request methods". yamlAllowAllButPushPurge is a helper func to build a ipAllowYAMLData for the given range string immediately allowing all Methods except Push and Purge. yamlAllowAllButPushPurgeDelete is a helper func to build a ipAllowYAMLData for the given range string immediately allowing all Methods except PUSH, PURGE, and DELETE. yamlAllowAll is a helper func to build a ipAllowYAMLData for the given range string immediately allowing all Methods, including Push and Purge. yamlDenyAll is a helper func to build a ipAllowYAMLData for the given range string immediately denying all Methods. GetPurgeIPs returns IPs allowed for PURGE requests. GetCoalesceMaskAndNumber returns coalesce mask length and number for ipv4 and ipv6. GetAllowedCIDRsForMid returns CIDRs allowed for all methods other than Push and Purge to mid servers./Users/test/Desktop/trafficcontrol/lib/go-atscfg/loggingdotconfig.gologFormatNamelogFormatFieldlogFilterTypelogFilterNamelogFilterFieldlogObjectFilterslogObjectFormatlogObjectRollingEnabledlogObjectRollingIntervalSeclogObjectRollingOffsetHrlogObjectRollingSizeMblogObjectTypelogObjectFilenamelogObjectField`# `-- "-- " --
" --\n"LogFormat"LogFormat".Name".Name".Format".Format"server '%v' profile has logging.config format '%v' Name Parameter but no Format Parameter. Setting blank Format!
"server '%v' profile has logging.config format '%v' Name Parameter but no Format Parameter. Setting blank Format!\n"\"`\"` = format {
" = format {\n"	Format = '"	Format = '" '
" '\n"}
"}\n"LogFilter"LogFilter".Filter".Filter"server '%v' profile has logging.config format '%v' Name Parameter but no Filter Parameter. Setting blank Filter!
"server '%v' profile has logging.config format '%v' Name Parameter but no Filter Parameter. Setting blank Filter!\n"`\`\\`\\`\'`\'`.Type".Type"accept"accept" = filter." = filter."('"('"')
"')\n"LogObject"LogObject".Filename".Filename"ascii"ascii".RollingEnabled".RollingEnabled".RollingIntervalSec".RollingIntervalSec".RollingOffsetHr".RollingOffsetHr".RollingSizeMb".RollingSizeMb".Filters".Filters"
log."\nlog." {
" {\n"  Format = "  Format = ",
",\n"  Filename = '"  Filename = '"pipe"pipe"  RollingEnabled = "  RollingEnabled = "  RollingIntervalSec = "  RollingIntervalSec = "  RollingOffsetHr = "  RollingOffsetHr = "  RollingSizeMb = "  RollingSizeMb = ",
  Filters = { ",\n  Filters = { "" }"
}
"\n}\n" MaxLogObjects is the maximum number of "Log Objects" that can be defined in a logging configuration file for ATS (logging.config, logging.yaml, logs_xml.config). See the ATS documentatio for logging configuration for details: https://docs.trafficserver.apache.org/en/8.1.x/admin-guide/files/logging.yaml.en.html ... although documentation for unsupported ATS versions may be more helpful: https://docs.trafficserver.apache.org/en/6.1.x/admin-guide/files/logs_xml.config.en.html Note that it's not possible to select this version of the documentation from the version footer in the sidebar at https://docs.trafficserver.apache.org/ anymore at the time of this writing, and may be removed entirely by the time of reading. LoggingFileName is the name of the logging configuration file used by ATS 7.1.x. This is also the ConfigFile value of Parameters that can affect ATS logging configuration - regardless of the actual name of the configuration file used by the ATS version installed on the cache server. ContentTypeLoggingDotConfig is the MIME type of the contents of a logging configuration file used by ATS 7.1.x. LineCommentLoggingDotConfig is the string used to indicate the start of a line comment in the grammar of the logging configuration files used by ATS 7.1.x. TODO: Is this true? According to the ATS docs, the contents of logging.config are a Lua script, which uses "--" for comments, not "#". LoggingDotConfigOpts contains settings to configure generation options. MakeLoggingDotConfig creates a logging.config for a given ATS Profile. serverParams is expected to be the map of Parameter Names to Values of all Parameters assigned to the given Profile, that have the ConfigFile "logging.config". That is, they must already be filtered BEFORE being passed in here. This is an LUA file, so we need to massage the header a bit for LUA commenting. TODO determine if the line should be excluded. Perl includes it anyway, without checking./Users/test/Desktop/trafficcontrol/lib/go-atscfg/loggingdotyaml.gofirstObjectindentSpacesmaxLogObjectsrequiredIndent
logging:"\nlogging:"Repeatformats: 
"formats: \n"server '%v' profile has logging.yaml format '%v' Name Parameter but no Format Parameter. Setting blank Format!
"server '%v' profile has logging.yaml format '%v' Name Parameter but no Format Parameter. Setting blank Format!\n" - name: " - name: " 
" \n"   format: '"   format: '"filters:
"filters:\n"server '%v' profile has logging.yaml filter '%v' Name Parameter but no Filter Parameter. Setting blank Filter!
"server '%v' profile has logging.yaml filter '%v' Name Parameter but no Filter Parameter. Setting blank Filter!\n"   action: "   action: "   condition: "   condition: "logs:
"logs:\n" - mode: " - mode: "   filename: "   filename: "   format: "   format: "   rolling_enabled: "   rolling_enabled: "   rolling_interval_sec: "   rolling_interval_sec: "   rolling_offset_hr: "   rolling_offset_hr: "   rolling_size_mb: "   rolling_size_mb: ""\v"   filters: ["   filters: ["]
"]\n" LoggingYAMLFileName is the name of a logging configuration file used by ATS version 8 and later. ContentTypeLoggingDotYAML is the content type of the contents of a logging configuration file used by ATS version 8 and later. LineCommentLoggingDotYAML is the string used to indicate the beginning of a line comment in the grammar of a logging configuration file used by ATS LoggingDotYAMLOpts contains settings to configure generation options. MakeLoggingDotYAML creates a logging.yaml for a given ATS Profile. note we use the same const as logs.xml - this isn't necessarily a requirement, and we may want to make separate variables in the future./Users/test/Desktop/trafficcontrol/lib/go-atscfg/logsdotxml.goiStrlogObjectHeaderlogObjectFileNametext/xml`text/xml`<!--`<!--`<!-- "<!-- " -->
" -->\n"<LogFormat>
  <Name = "`<LogFormat>
  <Name = "`"/>
  <Format = "`"/>
  <Format = "`"/>
</LogFormat>
`"/>
</LogFormat>
`.Header".Header"<LogObject>
  <Format = "`<LogObject>
  <Format = "`"/>
  <Filename = "`"/>
  <Filename = "`"/>
`"/>
`  <RollingEnabled = `  <RollingEnabled = `/>
`/>
`  <RollingIntervalSec = `  <RollingIntervalSec = `/>
  <RollingOffsetHr = `/>
  <RollingOffsetHr = `/>
  <RollingSizeMb = `/>
  <RollingSizeMb = `  <Header = "`  <Header = "`</LogObject>
`</LogObject>
` LogsXMLFileName is the name of a logging configuration file used by ATS version 6 and earlier. Deprecated: The versions of ATS that use this file are not supported, either by ATC or the ATS project itself. ContentTypeLogsDotXML is the MIME content type of the logging configuration file used by ATS version 6 and earlier. LineCommentLogsDotXML is the string used in the grammar of a logging configuration file used by ATS version 6 and earlier to indicate the beginning of a comment node. Note that XML does not have "line" comments, only comment nodes - which MUST have the associated closing tag (-->). LogsXMLDotConfigOpts contains settings to configure generation options. MakeLogsXMLDotConfig constructs a logging configuration file used by ATS version 6 and earlier for the given server. Note LineCommentLogsDotXML must be a single-line comment! But this file doesn't have a single-line format, so we use <!-- for the header and promise it's on a single line Note! if this file is ever changed to have multi-line comments, LineCommentLogsDotXML will have to be changed to the empty string./Users/test/Desktop/trafficcontrol/lib/go-atscfg/meta.gocfgNameconfigLocationdsConfigFilePrefixesatsCfgcfgParamscacheGroupArrconfigDirconfigDirWarnslocationParamssignDSWarnsuriSignedDSesabsPathnewFisfisplacementconfigFilesMnewFilesdssMaptoReverseProxyURLthis server missing CachegroupID"this server missing CachegroupID"server missing TCPPort"server missing TCPPort"server missing CDNID"server missing CDNID"server missing ID"server missing ID"locationParamsForprefixForserver profile had 'location' Parameter '"server profile had 'location' Parameter '"', but delivery Service '"', but delivery Service '"' is not assigned to this Server! Not including in meta config!"' is not assigned to this Server! Not including in meta config!"making CG map: "making CG map: "required file '"required file '"' has no location Parameter, and ATS config directory not found."' has no location Parameter, and ATS config directory not found."' has location Parameter with relative path '"' has location Parameter with relative path '"', but ATS config directory was not found."', but ATS config directory was not found."got Delivery Service with nil XMLID - not considering!"got Delivery Service with nil XMLID - not considering!"getting topology placement: "getting topology placement: "ensuring config file '"ensuring config file '"EdgeTypePrefixEDGEgot delivery service with no id, skipping!"got delivery service with no id, skipping!"got delivery service with no xmlId (name), skipping!"got delivery service with no xmlId (name), skipping!"got delivery service with no ID, skipping!"got delivery service with no ID, skipping!"got deliveryservice with nil id, skipping!"got deliveryservice with nil id, skipping!"got deliveryservice with nil xmlId (name), skipping!"got deliveryservice with nil xmlId (name), skipping!""tm.rev_proxy.url" CfgMeta is a definition of the location of an arbitrary configuration file. Name is the basename of the file itself. Path is the absolute path to the directory containing the file. ConfigFilesListOpts contains settings to configure generation options. MakeConfigFilesList returns the list of configuration files that need to be generated for the given server, any warnings, and any error. If there's already a parameter for it, don't clobber it. The user may wish to override the location. must come before hdr_rw_, to avoid thinking we have a "hdr_rw_" with a ds of "mid_x" if it has a prefix, don't check the next prefix. This is important for hdr_rw_mid_, which will match hdr_rw_ and result in a "ds name" of "mid_x" if we don't continue here. addMetaObjConfigDir takes the Meta Object generated from TO data, and the ATS config directory and prepends the config directory to all relative paths, and creates MetaObj entries for all required config files which have no location parameter. If configDir is empty and any location Parameters have relative paths, returns an error. Returns the amended config files list, any warnings, and any error. map[configFile]params; 'location' and 'URL' Parameters on serverHostName's Profile Note there may be multiple files with the same name in different directories. map[fileShortName]CfgMeta add all strictly required files, all of which should be in the base config directory. If they don't exist, create them. If they exist with a relative path, prepend configDir. If any exist with a relative path, or don't exist, and configDir is empty, return an error. Note we log errors, but don't return them. If an individual DS has an error, we don't want to break the rest of the CDN. getURISignedDSes returns the URI-signed Delivery Services, and any warnings. skip: this ds isn't assigned to this server, this is normal not signed, so not in our list of signed dses to make config files for. filterConfigFileDSes returns the DSes that should have config files for the given server. Returns the delivery services and any warnings. TODO verify?		serverIDs := []int{server.ID} getTOURLAndReverseProxy returns the toURL and toReverseProxyURL if they exist, or empty strings if they don't. requiredFiles8 the list of config files required by ATS 8. Note these are not exhaustive. This is only used to error if these are missing. The presence of these is no guarantee the location Parameters are complete and correct. requiredFiles9 is the list of config files required by ATS 9. ensureConfigFile ensures files contains the given fileName. If so, returns files unmodified. If not, if configDir is empty, returns an error. If not, and configDir is nonempty, creates the given file, configDir location, and returns files./Users/test/Desktop/trafficcontrol/lib/go-atscfg/packages.goversions`package`marshalling chkconfig NameVersions: "marshalling chkconfig NameVersions: " PackagesFileName is an unused constant of unknown purpose. Deprecated: Since the 'package' ConfigFile value is a "dummy" value used to indicate packages that should be installed through yum, there isn't a need for any definition of a file name, and the Parameter ConfigFile value is already exported as PackagesParamConfigFile. PackagesParamConfigFile is the ConfigFile value of Parameters that define system packages to be installed on a cache server. ContentTypePackages is a MIME type of unknown meaning and purpose. for any definition of a content type for a file that doesn't exist, and this value is never used for anything anyway. The contents of the file as output by tc3-generate are actually encoded as JSON, so at best this is inaccurate. LineCommentPackages is used only to convey the idea that since "package Parameters" don't define file contents they don't have comments and therefore no string signifies the beginning of a comment for this non-existent grammar. Deprecated: This constant expresses a concept that by its own definition has no meaning. PackagesOpts contains settings to configure generation options. MakePackages returns the 'packages' ATS config file endpoint. This is a JSON object, and should be served with an 'application/json' Content-Type./Users/test/Desktop/trafficcontrol/lib/go-atscfg/parentabstraction.goalgparamValseensuniquescodeStrcodeStrsexistingDSsvcLinesvcWarnsprocessedOriginsToDSNamesdomainIsIPparentStrsexhaust"exhaust"alternate"alternate"peering"peering""2""1"round_robin_ip"round_robin_ip"round_robin_strict"round_robin_strict"latched"latched"consistent_hash"consistent_hash""strict"consider"consider"ignore"ignore"'"'malformed"malformed"503duplicate origin! DS '"duplicate origin! DS '"' and '"' and '"' share origin '"' share origin '"': skipping '"': skipping '"creating parent.config line from service: "creating parent.config line from service: "dest_ip=`dest_ip=``dest_domain=`` port=` parent="` parent="` secondary_parent="` secondary_parent="` secondary_mode=` secondary_mode=` round_robin=` round_robin=` go_direct=` go_direct=` qstring=` qstring=``consider``ignore` parent_is_proxy=` parent_is_proxy=` parent_retry=both` parent_retry=both` parent_retry=simple_retry` parent_retry=simple_retry` parent_retry=unavailable_server_retry` parent_retry=unavailable_server_retry` max_simple_retries=` max_simple_retries=` max_unavailable_server_retries=` max_unavailable_server_retries=` simple_server_retry_responses="` simple_server_retry_responses="`Service '"Service '"' had simple retry codes '"' had simple retry codes '"' but ATS version "' but ATS version " < 9 does not support custom simple retry codes, omitting!" < 9 does not support custom simple retry codes, omitting!" unavailable_server_retry_responses="` unavailable_server_retry_responses="`"|"FormatFloat ParentAbstraction contains all the data necessary to build either parent.config or strategies.yaml. Peers is the list of peer proxy caches to be used in a strategy peering group. a cache will only have one set of peers for potential use in all delivery services. ParentAbstractionService represents a single delivery service's parent data. For parent.config, this becomes a single dest_domain= line. For strategies, this becomes a strategy along with its corresponding groups and hosts. Name is a unique name for the service. It can be anything unique, but should probably be the Traffic ops Delivery Service name. Comment is a text comment about the service, not including the comment syntax (e.g. # or //). Should be empty if !opt.AddComments. DestDomain is the FQDN of the remap.config target. Becomes parent.config dest_domain directive Becomes strategies.yaml TODO Port is the port of the remap.config target, which MUST be valid, and is implicitly 80 for http targets and 443 for https targets. Becomes parent.config port directive Parents is the list of parents, either parent proxy caches or origins. This is a sorted array. Parents will be inserted into the config file in the order they appear. Becomes parent.config parent= directive members Parents is the list of secondary parents, either parent proxy caches or origins, to be used if the primary parents fail. See SecondaryMode. Becomes parent.config secondary_parent= directive members SecondaryMode is how to try SecondaryParents if primary Parents fail. Becomes parent.config secondary_mode directive CachePeerResult is used only when the RetryPolicy is set to 'consistent_hash' and the SecondaryMode is set to 'peering'. In the case that it's used and set to 'true', query results from peer caches will not be cached locally. GoDirect is whether to go direct to parents via normal HTTP requests. False means to make proxy requests to the parents. Becomes parent.config go_direct and parent_is_proxy directives ParentIsProxy A boolean value which indicates if the groups of hosts are proxy caches or origins. true (default) means all the hosts used are Traffic Server caches. false means the hosts are origins. Becomes parent_is_proxy directive. IgnoreQueryStringInParentSelection is whether to use the query string of the request when selecting a parent, e.g. via Consistent Hash. Becomes parent.config qstring directive MarkdownResponseCodes is the list of HTTP response codes from the parent to consider as errors and mark the parent as unhealthy. Typically 5xx codes. Becomes parent.config unavailable_server_retry_responses directive ErrorResponseCodes is the list of HTTP response codes from the parent to consider as errors, but NOT mark the parent unhealthy. Typically 4xx codes. MaxSimpleRetries is the maximum number of non-markdown errors to attempt before returning the error to the client. See ErrorResponseCodes Becomes parent.config max_simple_retries MaxMarkdownRetries is the maximum number of markdown errors to attempt before returning the error to the client. See MarkdownResponseCodes Becomes parent.config max_unavailable_server_retries RetryPolicy is how to retry primary versus secondary parents. Becomes parent.config round_robin directive Weight is the weight of this parent relative to other parents in consistent hash (and potentially other non-sequential) parent selection. The default is 0.999 Becomes parent.config weight directive DS is the delivery service associated with the service ParentAbstractionServices implements sort.Interface. Len implements part of sort.Interface. Swap implements part of sort.Interface. Less implements part of sort.Interface. ParentAbstractionServiceParentSecondaryMode is the "secondary parent mode" of a Delivery Service parenting abstraction. Only certain values are allowed. The allowable values of a ParentAbstractionServiceParentSecondaryMode (with the exception of ParentAbstractionServiceParentSecondaryModeInvalid, which does not represent a valid ParentAbstractionServiceParentSecondaryMode). ParentAbstractionServiceParentSecondaryModeDefault is the "secondary parent mode" that is used in parenting abstraction if one is not explicitly configured. ToParentDotConfigVal returns the ATS parent.config secondary_mode= value for the enum. If the mode is invalid, ParentAbstractionServiceParentSecondaryModeDefault is returned without error. A ParentAbstractionServiceRetryPolicy is a "retry policy" that will be used by Delivery Service parenting. These are the valid value of a ParentAbstractionServiceRetryPolicy - with the exception of ParentAbstractionServiceRetryPolicyInvalid, which does not represent a valid ParentAbstractionServiceRetryPolicy. DefaultParentAbstractionServiceRetryPolicy is the "retry policy" that will be used by Delivery Service parenting if one is not explicitly configured. ParentSelectAlgorithmToParentAbstractionServiceRetryPolicy converts a parent selection algorithm Parameter Value to a generic ParentAbstractionServiceRetryPolicy. ToParentDotConfigFormat returns the ATS parent.config round_robin= value for the policy. If the policy is invalid, the default is returned without error. ParentSelectParamQStringHandlingToBool returns whether the param is to use the query string in the parent select algorithm or not. If the parameter value is not valid, returns nil. ParentAbstractionServiceParent represents a single "parent" as an abstracted concept. FQDN is the parent FQDN that ATS will use. Note this may be an IP. Key returns a unique key that can be used to compare parents for equality. RemoveParentDuplicates returns all values in the input list that have unique outputs for their Key method. Earlier duplicates are used while later occurrences of degenerate "Key"s are discarded. ParseRetryResponses parses a raw Parameter Value containing HTTP response codes for scenarios when parents should be "retried" into a list of the actual numeric codes. DefaultSimpleRetryCodes is the set of HTTP response codes that are used to indicate a parent should be "retried" if none are explicitly configured. DefaultUnavailableServerRetryCodes is the set of HTTP response codes that are used to indicate a parent is "unavailable" and should be "retried" if none are explicitly configured. DefaultIgnoreQueryStringInParentSelection is used to decide whether a request's query string should be used or dropped during selecting a parent when that behavior is not explicitly configured. parent.config dest_domain directives must be unique. This is the "duplicate origin problem" TODO add DS name TODO don't error? No single delivery service should be able to break others. ToParentDotConfigLine constructs a line in the parent.config Apache Traffic Server configuration file for the abstraction with the given options and for the given major version of Apache Traffic Server. It returns the line, any warnings to be issued, and any error that occurred during generation. if the domain is an IP, we have to use dest_ip. Using an IP in dest_domain will be silently ignored by ATS, causing the remap/DS to use the fallthrough 'dest_domain=.' rule TODO add quotes 	txt += ` unavailable_server_retry_responses=` + unavailableServerRetryResponses ToParentDotConfigFormat converts the abstracted parent into a concrete piece of a configuration file line for the parent.config parent configuration implementation. ParentDotConfigParentSeparator is the string used to delimit multiple parents on a line in a parent.config Apache Traffic Server configuration file. ParentAbstractionServiceParentsToParentDotConfigLine creates a line in the parent.config implementation of a parenting configuration file given the set of parents it should configure./Users/test/Desktop/trafficcontrol/lib/go-atscfg/parentdotconfig.godataWarnspaWarnsparentAbstractiontcParentConfigParamsedgeNodehasprimsecpindcgprimsecocgmaporgFQDNStrorgURIorgWarnstopoNamewarnsparentWarnsserverParentParamspeerpasvctopoWarningsqStrinvalidDSsecondaryModesecondaryParentstryAllPrimariesBeforeSecondarycacheIsTopLevelcgDSServerscgPeerscgServerIDscgServersdefaultDestTextdsOriginWarnsdsOriginsorgProfWarnsoriginServersparentConfigParamsWithProfilesparentServerDSespiWarnsprofileParentConfigParamsserverCDNDomainserverParentCGDataserversWithParamsaddCommentspiprimseccgnamespisocgnamesopisprimSeciIPjIPpolicydsParamshasValuesserverPlacementhasValssecondaryModeStrsecondaryModeWarningsqsdswarnsgoDirectparentIsProxyparentWarningsprWarnstqWarnsuseQueryStringInParentSelectionretriesintsimpleResponseIntsunavailResponseIntsisLastCacheTierserverIsLastCacheTierparentSelectAlgalgorithmoverRideGoDirectcmdArgGoDirectgoDirectParamuseQStrqStringHandlingallParentConfigParamsserverParentConfigParamssvParamsorgPortnumNodesdsHasOriginparentStrdsMergeGroupsnumParentsprimaryCGssecondaryCGsecondaryParentStrssvNodepTxtsecondaryParentInfoseenmsoAlgorithmnullParentInfoparentInfoTxtrankedParentsparentInfserverDomainorgHostcgSvallDSMapdsIDMaporgURLsvIDsvMappsel.qstring_handling"psel.qstring_handling"mso.algorithm"mso.algorithm"mso.parent_retry"mso.parent_retry"mso.unavailable_server_retry_responses"mso.unavailable_server_retry_responses"mso.max_simple_retries"mso.max_simple_retries"mso.max_unavailable_server_retries"mso.max_unavailable_server_retries"merge_parent_groups"merge_parent_groups""algorithm"go_direct"go_direct".edge".edge"go_direct.edge.mid".mid"go_direct.mid.first".first"go_direct.first.inner".inner"go_direct.inner.last".last"go_direct.lastqstring"qstring"try_all_primaries_before_secondary"try_all_primaries_before_secondary"parent_retry"parent_retry"unavailable_server_retry_responses"unavailable_server_retry_responses"max_simple_retries"max_simple_retries"max_unavailable_server_retries"max_unavailable_server_retries"both"both"use_peering"use_peering"simple_server_retry_responses"simple_server_retry_responses"first."first."inner."inner."last."last."mso."mso.""weight"use_ip_address"use_ip_address"rank"rank"not_a_parent"not_a_parent"DS '"DS '"' has malformed origin URI: '"' has malformed origin URI: '"': skipping!"': skipping!"all_parents' has no parent cache groups! Skipping!"' has no parent cache groups! Skipping!"otf_"otf_"Found collision for topo name '"Found collision for topo name '"' for ds: '"' for ds: '""_"fake_edgecg"fake_edgecg"server HostName missing"server HostName missing"server CDNName missing"server CDNName missing"server Cachegroup missing"server Cachegroup missing"server Profile missing"server Profile missing"server TCPPort missing"server TCPPort missing"getting server parent cachegroup data: "getting server parent cachegroup data: "adding profiles to parent config params: "adding profiles to parent config params: "cachegroup type is nil!"cachegroup type is nil!"cachegroup name is nil!"cachegroup name is nil!"TO servers had server with missing ID, skipping!"TO servers had server with missing ID, skipping!"TO servers had server with missing CDNName, skipping!"TO servers had server with missing CDNName, skipping!"TO servers had server with missing Cachegroup, skipping!"TO servers had server with missing Cachegroup, skipping!"TO servers had server with missing Status, skipping!"TO servers had server with missing Status, skipping!"TO servers had server with missing Type, skipping!"TO servers had server with missing Type, skipping!"OriginTypeNameORG0.9990.998999999999999999118998192055486251/9007199254740992getting origin servers and profile caches: "getting origin servers and profile caches: "got ds with missing ID, skipping!"got ds with missing ID, skipping!"got ds with missing Type, skipping!"got ds with missing Type, skipping!"' has no origin server! Skipping!"' has no origin server! Skipping!"default-destination-c3854be4-a859-41d6-815d-7b36297e48c6`default-destination-c3854be4-a859-41d6-815d-7b36297e48c6`IntPtrAlgorithmConsistentHashServer parameter '"Server parameter '"' value '"' value '"Server parameter 'qstring' value '' malformed, not using!"' malformed, not using!"' topology '"' topology '"";"isPrimisSec999/1000"all_parents"' had malformed "' had malformed " parameter '" parameter '"', not using!"', not using!"' had Parameter "' had Parameter " which is used if it exists, the value is ignored (unless false) ! Non-empty value '" which is used if it exists, the value is ignored (unless false) ! Non-empty value '"' will be ignored!"' will be ignored!"parent %v port '%v' was not an integer"parent %v port '%v' was not an integer"getting topology parents for '"getting topology parents for '"': skipping! "': skipping! "': no parents found! using secondary parents"': no parents found! using secondary parents"': no parents found! skipping! (Does your Topology have a CacheGroup with no servers in it?)"': no parents found! skipping! (Does your Topology have a CacheGroup with no servers in it?)"' has malformed query string handling param '"' has malformed query string handling param '"', using default %v"', using default %v"malformed maxSimpleRetries '"malformed maxSimpleRetries '"', using default "', using default "malformed maxUnavailableServerRetries '"malformed maxUnavailableServerRetries '"malformed simpleServerRetryResponses '"malformed simpleServerRetryResponses '"', using default (parse err: "', using default (parse err: "malformed unavailableServerRetryResponses '"malformed unavailableServerRetryResponses '"simple_retry"simple_retry"unavailable_server_retry"unavailable_server_retry" but this cache is " but this cache is " and secondary_mode isn't supported in ATS until 8. Not using!" and secondary_mode isn't supported in ATS until 8. Not using!" parent_is_proxy=false` parent_is_proxy=false`error overriding go_direct param, could not convert string to bool, using command line arg default for delivery service: "error overriding go_direct param, could not convert string to bool, using command line arg default for delivery service: "QStringIgnoreUseInCacheKeyAndPassUpServer param '"Server param '"Server param 'psel.qstring_handling' value 'port param is not an integer, skipping! : "port param is not an integer, skipping! : "rank param is not an integer, skipping! : "rank param is not an integer, skipping! : "server params Use IP, but has no valid IPv4 Service Address"server params Use IP, but has no valid IPv4 Service Address" origin '" origin '"' failed to parse port, using 80!"' failed to parse port, using 80!"This server '"This server '"' not in DS "' not in DS " topology, skipping" topology, skipping"' is last tier, but NonLastTier called! Should never happen"' is last tier, but NonLastTier called! Should never happen"Server '"Server '"' DS "' DS "' topology node parent "' topology node parent " is not in the topology!" is not in the topology!"' has "' has " parent nodes, but Apache Traffic Server only supports Primary and Secondary (2) lists of parents. CacheGroup nodes after the first 2 will be ignored!" parent nodes, but Apache Traffic Server only supports Primary and Secondary (2) lists of parents. CacheGroup nodes after the first 2 will be ignored!"' node parent "' node parent " greater than number of topology nodes " greater than number of topology nodes ". Cannot create parents!". Cannot create parents!"' node secondary parent "' node secondary parent ". Secondary parent will be ignored!". Secondary parent will be ignored!"TO Servers server had nil ID, skipping"TO Servers server had nil ID, skipping"TO Servers server had nil Cachegroup, skipping"TO Servers server had nil Cachegroup, skipping"getting server parent string: "getting server parent string: "ContainsStrparsing: "parsing: ":80":80":443":443"non-top-level: origin '"non-top-level: origin '"' is unknown scheme '"' is unknown scheme '"', but has no port! Using as-is! "', but has no port! Using as-is! "server "server " profile had malformed weight, using default!" profile had malformed weight, using default!"making parent info: got server with no valid IP Address, skipping!"making parent info: got server with no valid IP Address, skipping!"delivery services got nil ID!"delivery services got nil ID!"getting DS origins: "getting DS origins: "getting origin servers: got server with nil ID, skipping!"getting origin servers: got server with nil ID, skipping!"getting origin servers: got server with nil HostName, skipping!"getting origin servers: got server with nil HostName, skipping!"getting origin servers: got server with nil TCPPort, skipping!"getting origin servers: got server with nil TCPPort, skipping!"getting origin servers: got server with nil CachegroupID, skipping!"getting origin servers: got server with nil CachegroupID, skipping!"getting origin servers: got server with nil StatusID, skipping!"getting origin servers: got server with nil StatusID, skipping!"getting origin servers: got server with nil TypeID, skipping!"getting origin servers: got server with nil TypeID, skipping!"getting origin servers: got server with no profile names, skipping!"getting origin servers: got server with no profile names, skipping!"getting origin servers: got server with nil CDNID, skipping!"getting origin servers: got server with nil CDNID, skipping!"getting origin servers: got server with nil DomainName, skipping!"getting origin servers: got server with nil DomainName, skipping!"getting origin servers: got server with no valid IP Address, skipping!"getting origin servers: got server with no valid IP Address, skipping!"ds has nil ID"ds has nil ID"ds has nil XMLID"ds has nil XMLID"GetDSOrigins ds %v got nil OrgServerFQDN, skipping!
"GetDSOrigins ds %v got nil OrgServerFQDN, skipping!\n"parsing ds '"parsing ds '"' OrgServerFQDN '"' OrgServerFQDN '"missing scheme"missing scheme""80""443"unknown scheme '"unknown scheme '"' and no port, leaving port empty!"' and no port, leaving port empty!"got server with missing ID, skipping!"got server with missing ID, skipping!"error getting profiles from Traffic Ops Parameters, Parameters will not be considered for generation! : "error getting profiles from Traffic Ops Parameters, Parameters will not be considered for generation! : " ContentTypeParentDotConfig is the MIME type of the contents of a parent.config file. LineCommentParentDotConfig is the string used to begin a line comment in the grammar of a parent.config file. ParentConfigFileName is the name of an ATS parent.config configuration file, as well as the ConfigFile value of Parameters that can affect its contents. TODO: Replace instances of "parent.config" in t3c with this constant. ParentConfigParamQStringHandling is the Name of a Parameter in the ConfigFile parent.config that will override the text of the argument 'qstring' in a line in parent.config for ALL Delivery Services if found in the Profile of the server for which parent.config is being generated, or ALL servers for the Delivery Service if found in the Profile of a Delivery Service. Server Profiles have priority when conflicts arise. ParentConfigParamMSOAlgorithm is the Name of a Parameter that can be used to set the parent selection algorithm for Delivery Services that use MSO, if found in their Profile. This has no known effect if found in a server Profile. ParentConfigParamMSOParentRetry is the Name of a Parameter that can be used to set the retry behavior of cache servers trying to reach a parent for an MSO Delivery Service, if found in the Profile of said Delivery Service. ParentConfigParamMSOUnavailableServerRetryResponses is the Name of a Parameter that can be used to set the HTTP response codes that a cache server will consider indicative of its parent being unavailable, if found in the Profile of an MSO Delivery Service. The format is defined by the grammar of the parent.config ATS configuration ParentConfigParamMSOMaxSimpleRetries is the Name of a Parameter that can be used to set the maximum number of "simple" retries a cache server will attempt when its parent is unavailable, if found in the Profile of an MSO Delivery Service. Refer to ATS Documentation for the difference between this and ParentConfigParamMSOMaxUnavailableServerRetries. ParentConfigParamMSOMaxUnavailableServerRetries is the Name of a Parameter that can be used to set the maximum number of retries a cache server will ParentConfigParamMSOMaxSimpleRetries. ParentConfigParamMergeGroups is the Name of a Parameter on Delivery Service Profiles that is used to specify a list of Cache Group names that should merge their secondary parents into their set of primary parents when servicing content for said Delivery Service. ParentConfigParamAlgorithm is the Name of a Parameter that can be used to set the parent selection algorithm for cache servers that use Origin Shields. ParentConfigParamQString is the Name of a Parameter that can be used to set the query string handling behavior for the default destination for non-top-level cache servers. ParentConfigParamSecondaryMode is the Name of a Parameter that, if it is found on a server's Profile, will cause the cache server to try all primary parents before resorting to a secondary parent (which presumably differs from the default behavior in some way). The Value of these Parameters have no meaning; the Parameter's existence is all of the information it conveys. ParentConfigParamParentRetry is the Name of a Parameter which can be used to directly set the argument to the parent_retry directive in a line in a parent.config ATS configuration file, if found in the Profile of the Delivery Service represented by that line. ParentConfigParamUnavailableServerRetryResponses is the Name of a Parameter that can be used to set the HTTP response codes that a cache server will consider indicative of its parent being unavailable, if found in the Profile of a non-MSO Delivery Service. ParentConfigParamMaxSimpleRetries is the Name of a Parameter that can be used to set the maximum number of "simple" retries a cache server will attempt when its parent is unavailable, if found in the Profile of a non-MSO Delivery Service. ParentConfigParamMaxUnavailableServerRetries. ParentConfigParamMaxUnavailableServerRetries is the Name of a Parameter that can be used to set the maximum number of retries a cache server will attempt ParentConfigParamMaxSimpleRetries. ParentConfigDSParamDefaultMSOAlgorithm is the parent selection algorithm used by cache servers when not overridden by any Parameters. ParentConfigDSParamDefaultMSOParentRetry is the argument to a parent_retry directive in a line in a parent.config ATS configuration file that is used by cache servers when not overridden by any Parameters. ParentConfigDSParamDefaultMSOUnavailableServerRetryResponses is the argument passed to a directive used to set the HTTP response codes that will trigger a cache server to retry its parent and mark it unavailable, in parent.config lines that are generated for MSO Delivery Services. ParentConfigDSParamDefaultMaxSimpleRetries is the maximum number of "simple" retries a cache server will attempt when its parent is unavailable, if not overridden by Parameters. ParentConfigDSParamDefaultMaxUnavailableServerRetries is the maximum number of retries a cache server will attempt when its parent is unavailable, if not StrategyConfigUsePeering is the Name of a Parameter which, if it exists on a Delivery Service's Profile and has the Value of exactly "true", causes cache servers assigned to service that Delivery Service's content to use "peering" mode for secondary parent selection. Note that this is not (yet?) implemented in strategies.yaml generation. ParentConfigRetryKeys is a collection of the directives on a `parent.config` line that can affect the behavior of retrying requests in the event of failures; both the conditions that result in a retry as well as the mechanism used for retrying. MakeParentConfigRetryKeysWithPrefix creates a new ParentConfigRetryKeys by prepending each default directive name with the given prefix. If a "." is desired as a part of the prefix (almost always), it **must** be included in the prefix, as this will not add it for you! These are the standard prefixes for different kinds of Delivery Service retry rules. These are the Names of Parameters that can affect cache server parentage in unknown ways. TODO: determine/describe how these work. OriginHost is the (short) hostname of an Origin server. It has no other attached semantics. OriginFQDN is an unused type alias of unknown purpose. TODO: remove this? ParentConfigOpts contains settings to configure parent.config generation options. AddComments is whether to add informative comments to the generated file, about what was generated and why. Note this does not include the header comment, which is configured separately with HdrComment. These comments are human-readable and not guaranteed to be consistent between versions. Automating anything based on them is strongly discouraged. GoDirect is set with a command line argument default is true. This value can be overridden by a delivery serivce parameter go_direct [true|false] MakeParentDotConfig constructs a parent.config file for a cache server. dses should be ALL of the Delivery Services in the same CDN as the cache server in question, NOT just those to which the server is itself assigned. tcServerParams shsould be ALL of the server's Profile's Parameters, and tcParentConfigParams must be pre-filtered as the Parameters in the server's Profile that have the ConfigFile value "parent.config". parentCacheGroups holds parent cache groups names for OTF topologies. Primaries and Secondaries are from origin parent cache groups with assigned primary and secondary cache groups. The Null parent cache groups aren't considered unless the current server cache group has no primary/secondary parents selected. createTopology creates an on the fly topology for this server and non topology delivery service. use the topology name for the fqdn Manufactured topology ensure name is unique If mid cache group, insert fake edge cache group. This is technically incorrect if there are multiple MID tiers. Only consider arbitrarily assigned parents if the current cache group does not have primary and secondary parents assigned. Adding a '-1' in the parent indices indicates that this has non topology MSO parents, all should just go into primary create the cache group this server belongs to parentConfigParams are the parent.config params for all profiles (needed for parents) serverParams are the parent.config params for this particular server map[serverID]server save cachegroup peer servers save the cache group peers map[serverID][dsID] Note map cache group lists are ordered, prim first, sec second skip DSes not assigned to this server. skip ANY_MAP, STEERING, etc this check needs to be after the HTTP|DNS check, because Steering DSes without origins are ok' manufacture a topology for this DS. only populate if there are non topology ds's check if topology already existsopt.ParentIsProxy = false we don't want to fail generation with an error if one ds is malformed getTopologyParentConfigLine includes error context will be nil with no error if this server isn't in the Topology, or if it doesn't have the Required Capabilities TODO determine if this is necessary. It's super-dangerous, and moreover ignores Server Capabilitites. magic uuid to prevent accidental DS name collision defaultDestText = `dest_domain=. ` + parents defaultDestText += secondaryParents defaultDestText += ` round_robin=consistent_hash go_direct=false` defaultDestText += ` qstring=` + qStr makeParentComment creates the parent line comment and returns it. If addComments is false, returns the empty string. This exists for composability. Either dsName or topology may be the empty string. The returned comment includes a trailing newline. Returns a map of parent cache groups names per origin host. DefaultParentWeight is the weight given to a parent if one isn't explicitly configured - *or* in the case that the parent has a Parameter set for the weight, but its Value cannot be parsed. TODO change, this is terrible practice, using a hard-coded key. What if there were a delivery service named "all_parents" (transliterated Perl). FillParentRetries populates the parentDSParams retries values from the ds parameters map for given ds parameter keys. Returns if any params found and any warnings. getDSParams returns the Delivery Service Profile Parameters used in parent.config, and any warnings. If Parameters don't exist, defaults are returned. Non-MSO Delivery Services default to no custom retry logic (we should reevaluate that). Note these Parameters are only used for MSO for legacy DeliveryServiceServers DeliveryServices.	Topology DSes use them for all DSes, MSO and non-MSO. Default values for origin facing MSO tier the following may be blank, no default progressively fill in the params mso. prefix lowest priority no prefix next priority last. prefix highest priority Normal inner behavior has no parent retry strings if serverPlacement.IsFirstCacheTier { Normal first behavior has no parent retry strings getTopologyParentConfigLine returns the topology parent.config line, any warnings, and any error. If the given DS is not used by the server, returns a nil ParentAbstractionService and nil error. all params with configFile parent.config server isn't in topology, no error if this cache isn't the last tier, i.e. we're not going to the origin, use http not https txt += "dest_domain=" + orgURI.Hostname() + " port=" + orgURI.Port() txt += ` parent="` + strings.Join(parents, `;`) + `"` txt += ` secondary_parent="` + strings.Join(secondaryParents, `;`) + `"` txt += secondaryModeStr TODO convert txt += ` round_robin=` + getTopologyRoundRobin(ds, serverParams, serverPlacement.IsLastCacheTier, dsParams.Algorithm) txt += ` go_direct=` + getTopologyGoDirect(ds, serverPlacement.IsLastTier) txt += ` qstring=` + getTopologyQueryString(ds, serverParams, serverPlacement.IsLastCacheTier, dsParams.Algorithm, dsParams.QueryStringHandling) TODO ensure value is always !goDirect, and determine what to do if not txt += getTopologyParentIsProxyStr(serverPlacement.IsLastCacheTier) txt += getParentRetryStr(serverPlacement.IsLastCacheTier, atsMajorVer, dsParams.ParentRetry, dsParams.UnavailableServerRetryResponses, dsParams.MaxSimpleRetries, dsParams.MaxUnavailableServerRetries) txt += "\n" getParentRetries builds the parent retry directive(s). Returns the MaxSimpleRetries, MaxMarkdownRetries, ErrorREsponseCodes, MarkdownResponseCodes. If atsMajorVersion < 6, "" is returned (ATS 5 and below don't support retry directives). If isLastCacheTier is false, "" is returned. This argument exists to simplify usage. If parentRetry is "", "" is returned (because the other directives are unused if parent_retry doesn't exist). This is allowed to simplify usage. If unavailableServerRetryResponses is not "", it must be valid. Use unavailableServerRetryResponsesValid to check. If maxSimpleRetries is "", ParentConfigDSParamDefaultMaxSimpleRetries will be used. If maxUnavailableServerRetries is "", ParentConfigDSParamDefaultMaxUnavailableServerRetries will be used. Does not return errors. If any input is malformed, warnings are returned and that value is set to -1. allow parentRetry to be empty, to simplify usage. ATS 5 and below don't support parent_retry directives warnings = append(warnings, "ATS 5 doesn't support parent retry, not using parent retry values") Set initial defaults simple retry responses only supported int ATS for 9.2.x and above TODO make consts txt := ` parent_retry=` + parentRetry if unavailableServerRetryResponses != "" { txt += ` max_simple_retries=` + maxSimpleRetries + ` max_unavailable_server_retries=` + maxUnavailableServerRetries getSecondaryModeStr returns the secondary_mode string, and any warnings. See https://docs.trafficserver.apache.org/en/8.0.x/admin-guide/files/parent.config.en.html no need to check the error on this because it will only be true or false. old should never call this routine if something happens converting override string to bool we don't want to fail, just print a warning and fall back to command line setting. TODO warn if parsing fails? serverParentageParams gets the Parameters used for parent= line, or defaults if they don't exist Returns the Parameters used for parent= lines for the given server, and any warnings. TODO deduplicate with atstccfg/parentdotconfig.go TODO get service interface here getTopologyParents returns the parents, secondary parents, any warnings, and any error. for Topology DSes, MSO still needs DeliveryServiceServer assignments. sorted parent merge groups for this ds If it's the last tier, then the parent is the origin. Note this doesn't include MSO, whose final tier cachegroup points to the origin cachegroup. TODO pass, instead of calling again No parents (or special case mso non topo) Check for special case of MSO non topology with no parent cache groups assigned to the server cache group. normal topology/mso configuration only consider edges, mids, and origins in the CacheGroup. will be nil if server is not_a_parent (possibly other reasons) getOriginURI returns the URL, any warnings, and any error. TODO verify origin is always a host:port getParentStrs returns the primary parents, secondary parents, the secondary mode, and any warnings. TODO fix magic key TODO remove duplicate code with top level if block TODO change to host+port? host isn't unique parents := "" secondaryParents := "" // "secparents" in Perl TODO the abstract->text needs to take this into account if atsMajorVersion >= 6 && len(secondaryParentInfo) > 0 { parents = `parent="` + strings.Join(parentInfo, "") + `"` secondaryParents = ` secondary_parent="` + strings.Join(secondaryParentInfo, "") + `"` 	secondaryParents += secondaryModeStr 	parents = `parent="` + strings.Join(parentInfo, "") + strings.Join(secondaryParentInfo, "") + `"` getMSOParentStrs returns the parents= and secondary_parents= strings for ATS parent.config lines for MSO, and any warnings. TODO determine why MSO is different, and if possible, combine with getParentAndSecondaryParentStrs. If no parents are found in the secondary parent either, then set the null parent list (parents in neither secondary or primary) as the secondary parent list and clear the null parent list. TODO should this be '= secondary'? Currently emulates Perl TODO benchmark, verify this isn't slow. if it is, it could easily be made faster secondaryParentStr := strings.Join(secondaryParentInfo, "") + strings.Join(nullParentInfo, "") If the ats version supports it and the algorithm is consistent hash, put secondary and non-primary parents into secondary parent group. This will ensure that secondary and tertiary parents will be unused unless all hosts in the primary group are unavailable. secondaryParents := "" TODO add this logic to the abstraction->text converter if atsMajorVersion >= 6 && msoAlgorithm == "consistent_hash" && len(secondaryParentStr) > 0 { parents = `parent="` + strings.Join(parentInfoTxt, "") + `"` secondaryParents = ` secondary_parent="` + secondaryParentStr + `"` 	parents = `parent="` + strings.Join(parentInfoTxt, "") + secondaryParentStr + `"` makeParentInfos returns the parent info and any warnings. getCDNDomainByProfileID(tx, server.ProfileID) note servers also contains an "all" key Perl has this check, but we only select servers ("deliveryServices" in Perl) with the right CDN in the first place if profile.Domain != serverDomain { 	continue unavailableServerRetryResponsesValid returns whether a unavailable_server_retry_responses parameter is valid for an ATS parent rule. getOriginServers returns the origin servers with parameters, any warnings, and any error. all DSes for this server, NOT all dses in TO this is normal if the TO was too old to understand our /deliveryserviceserver?servers= query param In which case, the DSS will include DSes from other CDNs, which aren't in the dsIDMap If the server was new enough to respect the params, this should never happen. warnings = append(warnings, ("getting delivery services: parent server DS %v not in dsIDMap\n", dsID) map[serverID][]dsID warnings = append(warnings, fmt.Sprintf(("ds %v has no origins! Skipping!\n", dsID) // TODO determine if this is normal getDSOrigins takes a map[deliveryServiceID]DeliveryService, and returns a map[DeliveryServiceID]OriginURI, any warnings, and any error. makeDSOrigins returns the DS Origins and any warnings. getProfileParentConfigParams returns a map[profileName][paramName]paramVal and any warnings. this is an optimization, to avoid looping over all params, for every DS. Instead, we loop over all params only once, and put them in a profile map. map[profileName][paramName]paramVal getServerParentConfigParams returns a map[name]value. Intended to be called with the result of getProfileParentConfigParams. We only need parent.config params, don't need all the params on the server/Users/test/Desktop/trafficcontrol/lib/go-atscfg/plugindotconfig.go PluginSeparator is the string used to separate Parameter Names from their Values for lines in plugin.config configuration files. PluginFileName is the name of the configuration file used by ATS to configure its plugins, as well as the ConfigFile value of Parameters that can affect the contents of this file. ContentTypePluginDotConfig is the MIME type of the contents of a plugin.config ATS configuration file. LineCommentPluginDotConfig is the string that denotes the start of a line comment in the grammar of a plugin.config ATS configuration file. PluginDotConfigOpts contains settings to configure generation options. MakePluginDotConfig constructs a plugin.config configuration file for the given server with the given Parameters and the given header comment content./Users/test/Desktop/trafficcontrol/lib/go-atscfg/recordsdotconfig.gooverrideWarnsipWarnsviaWarnsdnsWarnsoutgoingIPConfigreleaseVerreleaseVerSlicerequestViaStrresponseServerStrresponseViaStryumOutputdnsLocalV4dnsLocalV6newSuffixSTRING __HOSTNAME__"STRING __HOSTNAME__"STRING __FULL_HOSTNAME__"STRING __FULL_HOSTNAME__"proxy.local.outgoing_ip_to_bind`proxy.local.outgoing_ip_to_bind`records.config had a proxy.local.outgoing_ip_to_bind Parameter! Using Parameter, not setting Outgoing IP from Server"records.config had a proxy.local.outgoing_ip_to_bind Parameter! Using Parameter, not setting Outgoing IP from Server"server had no IPv4 service address, cannot set "server had no IPv4 service address, cannot set "!"!"LOCAL `LOCAL ` STRING ` STRING ` [` [``]`proxy.config.http.request_via_str`proxy.config.http.request_via_str`proxy.config.http.response_via_str`proxy.config.http.response_via_str`proxy.config.http.response_server_str`proxy.config.http.response_server_str`yum info installed trafficserver | grep Release"yum info installed trafficserver | grep Release""sh"could not read trafficserver release information from yum! Not setting via strings"could not read trafficserver release information from yum! Not setting via strings"records.config had a proxy.config.http.request_via_str Parameter! Using Parameter, not setting request via string"records.config had a proxy.config.http.request_via_str Parameter! Using Parameter, not setting request via string"CONFIG `CONFIG `records.config had a proxy.config.http.response_via_str Parameter! Using Parameter, not setting response via string"records.config had a proxy.config.http.response_via_str Parameter! Using Parameter, not setting response via string"records.config had a proxy.config.http.response_server_str Parameter! Using Parameter, not setting response server string"records.config had a proxy.config.http.response_server_str Parameter! Using Parameter, not setting response server string"proxy.config.dns.local_ipv4`proxy.config.dns.local_ipv4`proxy.config.dns.local_ipv6`proxy.config.dns.local_ipv6`server had no IPv4 Service Address, not setting records.config dns v4 local bind addr!"server had no IPv4 Service Address, not setting records.config dns v4 local bind addr!"dns local option was set, but proxy.config.dns.local_ipv4 was already in records.config, not overriding! Check the server's Parameters."dns local option was set, but proxy.config.dns.local_ipv4 was already in records.config, not overriding! Check the server's Parameters."CONFIG proxy.config.dns.local_ipv4 STRING server had no IPv6 Service Address, not setting records.config dns v6 local bind addr!"server had no IPv6 Service Address, not setting records.config dns v6 local bind addr!"dns local option was set, but proxy.config.dns.local_ipv6 was already in records.config, not overriding! Check the server's Parameters!"dns local option was set, but proxy.config.dns.local_ipv6 was already in records.config, not overriding! Check the server's Parameters!" STRING [` STRING [`CONFIG proxy.config.dns.local_ipv6 STRING [ RecordsSeparator is the string used to separate Parameter Names from their Values for lines in records.config configuration files. RecordsFileName is the name of the configuration file used by ATS to configure various miscellaneous options, as well as the ConfigFile value of Parameters that can affect the contents of this file. ContentTypeRecordsDotConfig is the MIME type of the contents of a records.config ATS configuration file. LineCommentRecordsDotConfig is the string that indicates the beginning of a line comment in the grammar of a records.config ATS configuration file. RecordsConfigOpts are options that may be passed to MakeRecordsDotConfig to affect generation of the records.config ATS configuration file. ReleaseViaStr is whether or not we replace the via and server strings in ATS responses to be the Release value from the rpm package. This can be a user defined build hash (or whatever the user wants) type value to give more specific info as well as obfuscating the real ATS version from prying eyes DNSLocalBindServiceAddr is whether to set the server's service addresses as the records.config proxy.config.dns.local_ipv* settings. NoOutgoingIP is whether to omit adding a records.config entry for proxy.local.outgoing_ip_to_bind set to the server's IP addresses (V4 and V6). By default, this entry is added, unless it already exists in records.config (probably from a Parameter). The default, setting the IP to bind, is usually the right solution, unless the server's addresses are unusual or not public, such as NAT. MakeRecordsDotConfig constructs a records.config ATS configuration file for the given server with the given Parameters and header comment content, as well as any customization options. addRecordsDotConfigOverrides modifies the records.config text and adds any overrides. Returns the modified text and any warnings. addRecordsDotConfigOutgoingIP returns the outgoing IP added to the config text, and any warnings. addRecordsDotConfigViaStr returns the request, response, and response server via strings with the current Release (a.k.a. build version and not ATS version), and any warnings./Users/test/Desktop/trafficcontrol/lib/go-atscfg/regexremapdotconfig.godsesDSconfigSuffixsdssDSes`.config`' not of the form 'regex_remap_*.config! Please file a bug with Traffic Control, this should never happen"' not of the form 'regex_remap_*.config! Please file a bug with Traffic Control, this should never happen"' has no delivery service name!"' has no delivery service name!"delivery service '"delivery service '"' not found! Do you have a regex_remap_*.config location Parameter for a delivery service that doesn't exist?"' not found! Do you have a regex_remap_*.config location Parameter for a delivery service that doesn't exist?"' not in dses, skipping!"' not in dses, skipping!"`__RETURN__`got unknown DS with nil values! Skipping!"got unknown DS with nil values! Skipping!"got DS '"got DS '"' with nil values! Skipping!"' with nil values! Skipping!" ContentTypeRegexRemapDotConfig is the MIME type of the contents of a regex_remap.config ATS configuration file. LineCommentRegexRemapDotConfig is the string used to indicate the start of a line comment in the grammar of a regex_remap.config ATS configuration file. RegexRemapDotConfigOpts contains settings to configure generation options. RegexRemapPrefix is a prefix applied to regex_remap.config ATS configuration files for a sepecific Delivery Service. The rest of the name is made up of the Delivery Service's XMLID, followed by '.config' as a suffix (or "file extension"). MakeRegexRemapDotConfig constructs a regex_remap.config file (specifically the name is given by 'fileName') for a cache server. only send the requested DS to atscfg. The atscfg.Make will work correctly even if we send it other DSes, but this will prevent deliveryServicesToCDNDSes from logging errors about AnyMap and Steering DSes without origins. deliveryServicesToCDNDSes returns the CDNDSes and any warnings./Users/test/Desktop/trafficcontrol/lib/go-atscfg/regexrevalidatedotconfig.gomaxDaysStrscfgJobsdsJobsdsNamesmaxDaysmaxRevalrjobassetURLjobTypepurgeEndtcJobjobMapminTTLnewJobstcJobsinvalidationTypecacheurl_"cacheurl_""##REFETCH##""##REFRESH##"3600000000000MISS"MISS"STALE"STALE"got Delivery Service from Traffic Ops with a nil xmlId! Skipping!"got Delivery Service from Traffic Ops with a nil xmlId! Skipping!"got job from Traffic Ops with an empty DeliveryService! Skipping!"got job from Traffic Ops with an empty DeliveryService! Skipping!"max days param '"max days param '"' is not an integer, using default value!"' is not an integer, using default value!" CacheUrlPrefix is an unused constant of unknown purpose. Deprecated: It's likely that this is related to the removed "Cache URL" property of Delivery Services and the old "cacheurl" plugin for ATS which is not supported by any supported version of ATS. RefetchSuffix is a special suffix which, if present at the end of an asset URL for a Content Invalidation Job, will cause ATS to treat matching URIs as cache "misses" - effectively this forces ATS to fetch the asset anew from an upstream cache server or origin. RefreshSuffix is a special suffix which, if present at the end of an asset "stale" - effectively this forces ATS to retrieve confirmation from an upstream cache server or origin that the cached content is still valid, and according to their response either fetch the content anew or update its age and caching validity markers (ETag, If-Unmodified-Since etc.). RemapFile is the name of a configuration file used by ATS to map client requests. TODO: replace instances of "remap.config" with this constant. RegexRevalidateFileName is the name of a configuration file used by ATS to revalidate or invalidate cached contents based on regular expression matches. This is also the ConfigFile value of GLOBAL Parameters that modify how content invalidation is handled. RegexRevalidateMaxRevalDurationDaysParamName is the Name of a GLOBAL Parameter that can be used to set the maximum duration (in days) of Content Invalidation Requests. DefaultMaxRevalDurationDays is the maximum duration (in days) of Content Invalidation Requests if not overridden by a Parameter. JobKeywordPurge is the "keyword" of "jobs" that determines if a "job" represents a Content Invalidation Job - "jobs" with other "keywords" are ignored. TODO: Figure out if this can be deprecated/removed, along with the check for it; all "jobs" created through the API have this "keyword", and the notion of generic-purpose "jobs" has been abandoned. RegexRevalidateMinTTL is a time.Duration that specifies the minimum duration for which Content Invalidation Jobs will remain active. Content Invalidation Jobs with TTLs less than this will use this duration instead. A RevalType describes the type of revalidation to be performed by a content invalidation job. RevalTypeMiss represents the caching condition where the asset requested could not be found in cache. RevalTypeStale represents the caching condition where the asset requested is in cache, but it has expired and must be revalidated upstream. RevalTypeDefault is the type of revalidation that will be performed by default, if not otherwise specified. ContentTypeRegexRevalidateDotConfig is the MIME content type of the contents of a regex_revalidate.config ATS configuration file. LineCommentRegexRevalidateDotConfig is the string that indicates the beginning of a line comment in the grammar of a regex_revalidate.config ATS configuration file. RegexRevalidateDotConfigOpts contains settings to configure generation options. MakeRegexRevalidateDotConfig constructs a regex_revalidate.config file for the given server, which is responsible for serving content for the given Delivery Services, with the given set of "global" Parameters (NOT server or Delivery Service Profile Parameters), and the given set of Content TODO: add cdn, startTime query params to /jobs endpoint just use the first, if there were multiple params RevalTypeMiss or RevalTypeStale (default) filterJobs returns only jobs which:   - have a non-empty deliveryservice   - have a start time later than (now + maxReval days). That is, we don't query jobs older than maxReval in the past.   - have a start_time+ttl > now. That is, jobs that haven't expired yet. Returns the filtered jobs. processRefetch determines the type of Invalidation, returns the corresponding jobtype and "cleans" the regex URL for the asset to be invalidated. REFETCH trumps REFRESH, whether in the AssetURL or as InvalidationType. Default value. Either the InvalidationType == REFRESH or the suffix is ##REFRESH## or neither/Users/test/Desktop/trafficcontrol/lib/go-atscfg/remapdotconfig.gotemplateStringanyCastPartnersdsProfilesConfigParamsdsRegexArrremapConfigParamsserverPackageParamDatatypeWarnsunfilteredDSesconfigParamMapconfigParamsselfHealparamsStringuniquemapparamKeyValsargsStringconfigParamsMaphasCachekeydsConfigParamsMappostRemapLinespreRemapLinestopoIncludesServertopoTxtcrrParamlinebuftemplatecachekeyArgsdefaultParamNamedsPostRemapsdsPreRemapsisLastCachemapToremapFromremapTagsstrategytmploktmplparamsmidRemapsprofilesConfigParamsremapLinesAlltextLinesdsLinesprofileremapConfigParamsremapWarnsremapLinesrequestFQDNremapTextrequestFQDNsprofilesRemapConfigParamshasDSCPRemapcrrcachekeyTxtlinebytesmapFrompDatarangeReqTxtrawRemapTextregexRemapTxtstrategyNamepluginTxthttpsPortStrmapFromHTTPmapFromHTTPSparamValueuseInactivedsProfileIDdsProfileNameconfigParamsWithProfilesMapdsConfigParamsWithProfilesdsProfileNamesToIDsdsRegexMapanyCastIPshnhostRegexfqdnsseenFQDNshNametopoPlacementmustache"github.com/cbroglie/mustache"`drop_qstring.config`__RANGE_DIRECTIVE__`__RANGE_DIRECTIVE__`__CACHEKEY_DIRECTIVE__`__CACHEKEY_DIRECTIVE__`__REGEX_REMAP_DIRECTIVE__`__REGEX_REMAP_DIRECTIVE__`template.first`template.first`template.inner`template.inner`template.last`template.last`map {{{Source}}} {{{Destination}}} {{{Strategy}}} {{{Dscp}}} {{{HeaderRewrite}}} {{{DropQstring}}} {{{Signing}}} {{{RegexRemap}}} {{{Cachekey}}} {{{RangeRequests}}} {{{Pacing}}} {{{RawText}}}`map {{{Source}}} {{{Destination}}} {{{Strategy}}} {{{Dscp}}} {{{HeaderRewrite}}} {{{DropQstring}}} {{{Signing}}} {{{RegexRemap}}} {{{Cachekey}}} {{{RangeRequests}}} {{{Pacing}}} {{{RawText}}}`map {{{Source}}} {{{Destination}}} {{{Strategy}}} {{{HeaderRewrite}}} {{{Cachekey}}} {{{RangeRequests}}} {{{RawText}}}`map {{{Source}}} {{{Destination}}} {{{Strategy}}} {{{HeaderRewrite}}} {{{Cachekey}}} {{{RangeRequests}}} {{{RawText}}}`no_self_healing`no_self_healing`ParseStringopt.UseStrategies was false, but opt.UseStrategiesCore was set, which has no effect! Not using strategies, per opt.UseStrategies."opt.UseStrategies was false, but opt.UseStrategiesCore was set, which has no effect! Not using strategies, per opt.UseStrategies."server ID missing"server ID missing"server DomainName missing"server DomainName missing"making Delivery Service Cache Key Params, cache key will be missing! : "making Delivery Service Cache Key Params, cache key will be missing! : "making remap.config, config will be malformed! : "making remap.config, config will be malformed! : " @pparam=" @pparam="IndexAny= "= "Multiple repeated arguments '"Multiple repeated arguments '" @pparam=--" @pparam=--"cachekey.pparam"cachekey.pparam"Both new cachekey.pparam and old cachekey.config parameters assigned"Both new cachekey.pparam and old cachekey.config parameters assigned"LastRawRemapPre"LastRawRemapPre" # Raw: " # Raw: "LastRawRemapPost"LastRawRemapPost"getting Topology Server inclusion: "getting Topology Server inclusion: "' has no origin fqdn, skipping!"' has no origin fqdn, skipping!"@plugin=header_rewrite.so @pparam=`@plugin=header_rewrite.so @pparam=`QueryStringIgnoreIgnoreInCacheKeyAndPassUp@plugin=cachekey.so`@plugin=cachekey.so`RangeRequestHandlingCacheRangeRequestRangeRequestHandlingSlicecache_range_requests.pparam"cache_range_requests.pparam"@plugin=cache_range_requests.so`@plugin=cache_range_requests.so`--consider-ims"--consider-ims" @pparam=--consider-ims` @pparam=--consider-ims`determining if cache is the last tier: "determining if cache is the last tier: "Error decoding override "Error decoding override " for DS " for DS ", falling back!", falling back!"unable to load default template string: "unable to load default template string: "Error filling mustache template: "Error filling mustache template: "getting topology server inclusion: "getting topology server inclusion: "DSTypeAnyMapANY_MAP' is ANY_MAP, but has no remap text - skipping"' is ANY_MAP, but has no remap text - skipping"error getting ds '"error getting ds '"' request fqdns, skipping! Error: "' request fqdns, skipping! Error: "' - skipping! : "' - skipping! : " # ds '` # ds '``' topology '`__http__`__http__`dscp_remap"dscp_remap"@plugin=dscp_remap.so @pparam=`@plugin=dscp_remap.so @pparam=`@plugin=header_rewrite.so @pparam=dscp/set_dscp_`@plugin=header_rewrite.so @pparam=dscp/set_dscp_`@plugin=url_sig.so @pparam=url_sig_`@plugin=url_sig.so @pparam=url_sig_`url_sig.pparam"url_sig.pparam"@plugin=uri_signing.so @pparam=uri_signing_`@plugin=uri_signing.so @pparam=uri_signing_`uri_signing.pparam"uri_signing.pparam"QueryStringIgnoreDropAtEdge@plugin=regex_remap.so @pparam=`@plugin=regex_remap.so @pparam=`@plugin=regex_remap.so @pparam=drop_qstring.config@plugin=regex_remap.so @pparam=regex_remap_`@plugin=regex_remap.so @pparam=regex_remap_`RangeRequestHandlingBackgroundFetch@plugin=background_fetch.so @pparam=--config=bg_fetch.config`@plugin=background_fetch.so @pparam=--config=bg_fetch.config`background_fetch.pparam"background_fetch.pparam"@plugin=slice.so @pparam=--blockbytes=`@plugin=slice.so @pparam=--blockbytes=`slice.pparam"slice.pparam"` `@plugin=cache_range_requests.so `@plugin=cache_range_requests.so `@plugin=fq_pacing.so @pparam=--rate=`@plugin=fq_pacing.so @pparam=--rate=`Error decoding override template.first unable to load default template string: map {{{Source}}} {{{Destination}}} {{{Strategy}}} {{{Dscp}}} {{{HeaderRewrite}}} {{{DropQstring}}} {{{Signing}}} {{{RegexRemap}}} {{{Cachekey}}} {{{RangeRequests}}} {{{Pacing}}} {{{RawText}}} Error filling edge remap template: "Error filling edge remap template: "@plugin=parent_select.so @pparam=`@plugin=parent_select.so @pparam=`` @pparam=`@strategy=`@strategy=`ds had nil protocol"ds had nil protocol"DSProtocolHTTPDSProtocolHTTPAndHTTPSDSProtocolHTTPSDSProtocolHTTPToHTTPSUnsupport version of ats found %v"Unsupport version of ats found %v" @pparam=--separator= @pparam=--remove-all-params=true @pparam=--remove-path=true @pparam=--capture-prefix-uri=/^([^?]*)/$1/` @pparam=--separator= @pparam=--remove-all-params=true @pparam=--remove-path=true @pparam=--capture-prefix-uri=/^([^?]*)/$1/`"__"got multiple parameters for server package name '"got multiple parameters for server package name '"got Delivery Service with nil XMLID, skipping!"got Delivery Service with nil XMLID, skipping!"got Delivery Service '"got Delivery Service '"'  with nil Type, skipping!"'  with nil Type, skipping!"'  with nil ID, skipping!"'  with nil ID, skipping!"'  with nil Active, skipping!"'  with nil Active, skipping!"DSActiveStateActiveACTIVEdecoding cache key parameter profiles: "decoding cache key parameter profiles: ""lo"DSMatchTypeHostRegexHOST_REGEXPds missing regex pattern"ds missing regex pattern"ds missing protocol"ds missing protocol"ds missing domain"ds missing domain"`.*`ds is dns, but missing routing name"ds is dns, but missing routing name"Server has no CacheGroup"Server has no CacheGroup"DS topology '"DS topology '"' not found in topologies"' not found in topologies"CacheGroupEdgeTypeNameEDGE_LOCCacheGroupMidTypeNameMID_LOC RemapConfigDropQstringConfigFile is the configuration file for the `drop_qstring` plugin used in remap.config files. ContentTypeRemapDotConfig is the MIME type of the contents of a remap.config ATS configuration file. LineCommentRemapDotConfig is the string used to signal the beginning of a line comment in the grammar of a remap.config ATS configuration file. RemapConfigRangeDirective is a special string which, if found in a Delivery Service's Raw Remap Text, will be replaced by t3c during configuration generation with the parts of a remap.config file line that are necessary to implement said Delivery Service's declared Range Request Handling. RemapConfigCachekeyDirective is a special string which, if found in a Delivery Service's Raw Remap Text, will be replaced by t3c during configuration generation with the parts of a remap.config file line that call the 'cachekey.so' ATS plugin. RemapConfigRegexRemapDirective is a special string which, if found in a the 'regex_remap.so' ATS plugin. This parses but also maintains a cache of parsed templates RemapTags contains the mustache template fillers. RemapDotConfigOpts contains settings to configure generation options. VerboseComments is whether to add informative comments to the generated file, about what was generated and why. UseStrategies is whether to use strategies.yaml rather than parent.config. UseCoreStrategies is whether to use the ATS core strategies, rather than the parent_select plugin. This has no effect if UseStrategies is false. MakeRemapDotConfig constructs a remap.config ATS configuration file. includes cachekey.config Returned DSes are guaranteed to have a non-nil XMLID, Type, DSCP, ID, and Active. the GetFor funcs include error context This sticks the DS parameters in a map. remap.config parameters use "<plugin>.pparam" key cachekey.config parameters retain the 'cachekey.config' key. For general <plugin>.pparam parameters. Try to extract argument Warn on detection, but don't correct for parameters that use 'cachekey.config' as their key. check for duplicate parameters Handles special case for cachekey. Add on the cachekey.config lastPrePostRemapLinesFor Returns any pre or post raw remap lines. Any raw pre pend Any raw post pend getServerConfigRemapDotConfigForMid returns the remap lines, any warnings, and any error. Live local delivery services skip mids (except Topologies ignore DS types) TODO confirm - Perl uses without checking! skip remap rules from extra HOST_REGEXP entriesremapTags := NewRemapTags() template fill for moustache Logic for handling cachekey params qstring ignore if this remap is going to a parent, use http not https. cache-to-cache communication inside the CDN is always http (though that's likely to change in the future) look for override template check for fallthrough condition or override template Check for ds parameter template override fall back to default remap config line template Expand the moustachemidRemaps[remapFrom] = removeDeleteMes(linebuf.String()) Any raw pre or post pend Add to pre/post remap lines if this is last tier Prepend any pre remap lines Append on any post raw remap lines getServerConfigRemapDotConfigForEdge returns the remap lines, any warnings, and any error. map[paramName]paramVal for this server, config file 'package' RemapLines represents the contents of a remap.config Apache Traffic Server configuration file for a given Delivery Service. Pre contains lines to appear before the "main" text of a Delivery Service's remap.config content. Text contains the "main" text of a Delivery Service's remap.config content. Post contains lines to appear after the "main" text of a Delivery buildEdgeRemapLine builds the remap line for the given server and delivery service. The cacheKeyConfigParams map may be nil, if this ds profile had no cache key config params. Returns the remap line, any warnings, and any error. ds = 'remap' in perl Raw remap text, this allows the directive hacks Form the cachekey args string, qstring ignore, then remap.config then cachekey.config Hack for moving the cachekey directive into the raw remap text Note: should use full path here? Hack for moving the regex_remap directive into the raw remap text Hack for moving the range directive into the raw remap textremapLines.Text = removeDeleteMes(linebytes.String()) Any raw pre or post pend lines? makeDSTopologyHeaderRewriteTxt returns the appropriate header rewrite remap line text for the given DS on the given server, and any error. May be empty, if the DS has no header rewrite for the server's position in the topology. makeEdgeDSDataRemapLines returns the remap lines for the given server and delivery service. Returns nil, if the given server and ds have no remap lines, i.e. the DS match is not a host regex, or has no origin FQDN.	dsRegex tc.DeliveryServiceRegex, getQStringIgnoreRemap returns the remap, whether cachekey was added. makeServerPackageParamData returns a map[paramName]paramVal for this server, config file 'package'. Returns the param data, and any warnings. TODO put in const some files have multiple lines with the same key... handle that with param id. TODO strings.Replace to replace all anywhere, instead of just an exact match? remapFilterDSes filters Delivery Services to be used to generate remap.config for the given server. Returned DSes are guaranteed to have a non-nil XMLID, Type, DSCP, ID, Active, and Topology. If a DS has a nil Topology, OrgServerFQDN, FirstHeaderRewrite, InnerHeaderRewrite, or LastHeaderRewrite, "" is assigned. Returns the filtered delivery services, and any warnings. mids use all servers, so pass empty=all. Edges only use this current server TODO log error? set of map[dsID][serverID] mids get inactive DSes, edges don't. This is how it's always behaved, not necessarily how it should. normal, not an error, this DS just isn't assigned to our Cache normal, not an error, DS just isn't active and we aren't including inactive DSes makeDSProfilesConfigParams returns a map[ProfileID][ParamName]ParamValue for the cache key params for each profile. Returns the params, any warnings, and any error. TODO log GetDSRequestFQDNs returns the FQDNs that clients will request from the edge. noTopologyServerIsLastCacheForDS returns whether the server is the last tier for the DS, if the DS has no Topology. This helper MUST NOT be called if the DS has a Topology. It does not check. if the type is "MID" it's always the last cache for non-topologies if this DS type never uses mids (for pre-topology type-parentage), it's the last cache pre-topology parentage is based on Cachegroups if the server has no CG (which TO shouldn't allow), it can't possibly have parents. if the server's CG doesn't exist (which TO shouldn't allow), it can't possibly have parents. if the server's CG has no parents, it's going direct to the origin if the server's parent CG doesn't exist (which TO shouldn't allow), it can't possibly have parents. if the server's parent CG has no type (which TO shouldn't allow), then it must not be a cache, so this server is the last cache tier if the server's parent CG isn't a cache, then this server is the last cache tier. at this point, this server's CG has a cache parent, so this server isn't the last cache tier/Users/test/Desktop/trafficcontrol/lib/go-atscfg/servercachedotconfig.gocolonIslashIserver cache.config generation called for non-Mid server, this is a code error and should never happen! Please file a bug."server cache.config generation called for non-Mid server, this is a code error and should never happen! Please file a bug." scheme=http action=never-cache` scheme=http action=never-cache` ServerCacheDotConfigIncludeInactiveDSes is the definition of whether or not inactive Delivery Services should be considered when generating the contents of a cache.config ATS configuration file. TODO orgserverfqdn is nil for some DSes - MSO? Verify.			return "", fmt.Errorf("getting delivery services: got DS with nil values! '%v' %v %+v\n", *ds.XMLID, *ds.ID, ds) TODO unit test. if the origin includes a path, strip it no :, the origin must not include a port either the port isn't an integer, or the : we found was something else. Return the origin, as if it didn't contain a port./Users/test/Desktop/trafficcontrol/lib/go-atscfg/serverunknown.gosortedParamsserver missing DomainName"server missing DomainName""header" ContentTypeServerUnknownConfig is the MIME content type of the contents of an arbitrary file not handled specially by t3c. Note that the actual grammar of such files is unknowable and may be more appropriately represented by some other MIME type, but treating it as this MIME type will never cause problems, since t3c is only capable of generating such files as regular text files. ServerUnknownOpts contains settings to configure generation options. MakeServerUnknown constructs an arbitrary file for a server that is not handled specially and has no known (or knowable) semantics. getServerUnknownConfigCommentType takes the same data as MakeUnknownConfig and returns the comment type for that config. In particular, it returns # unless there is a 'header' parameter, in which case it returns an empty string. Wwe don't actually know that the first characters of a custom header are a comment, or how many characters it might be./Users/test/Desktop/trafficcontrol/lib/go-atscfg/setdscpdotconfig.godscpNumStrserver missing CDN"server missing CDN"An error occurred generating the DSCP header rewrite file."An error occurred generating the DSCP header rewrite file."cond %{REMAP_PSEUDO_HOOK}`cond %{REMAP_PSEUDO_HOOK}`set-conn-dscp `set-conn-dscp `cond %{REMAP_PSEUDO_HOOK}
set-conn-dscp  [L]` [L]` ContentTypeSetDSCPDotConfig is the MIME type of the contents of an ATS configuration file used to set the DSCP of IP packets. LineCommentSetDSCPDotConfig is the string that, in the grammar of an ATS configuration file used to set the DSCP of IP packets, indicates that the rest of the line is a comment. SetDSCPDotConfigOpts contains settings to configure generation options. MakeSetDSCPDotConfig constructs a configuration file for setting the DSCP of IP packets with ATS. TODO verify prefix, suffix, and that it's a number? Perl doesn't. TODO warn? We don't generally warn for client errors, because it can be an attack vector. Provide a more informative error return? Return a 404? emulates Perl/Users/test/Desktop/trafficcontrol/lib/go-atscfg/snidotyaml.godsTxttlsVersionsATSsslDatasslDatasgetting ssl data: "getting ssl data: "sni:`sni:`sni:
' had the same FQDN '"' had the same FQDN '"' as some other delivery service, skipping!"' as some other delivery service, skipping!" ds '` ds '`# ds '- fqdn: '`- fqdn: '`  http2: `  http2: `
  http2:   valid_tls_versions_in: [`  valid_tls_versions_in: [`
  valid_tls_versions_in: [ SNIDotYAMLFileName is an unused constant that probably defines either the name on disk of an sni.yaml ATS configuration file, the ConfigFile value of Parameters that may influence the generation of such files, or both. TODO: replace instances of sni.yaml with this constant. ContentTypeSNIDotYAML is the MIME type of the contents of an sni.yaml ATS LineCommentSNIDotYAML is the string used by the grammar of an sni.yaml file to indicate the start of a line comment. SNIDotYAMLOpts contains settings to configure sni.yaml generation options. DefaultTLSVersions is the list of TLS versions to enable on delivery services with no Parameter. DefaultEnableH2 is whether to disable H2 on delivery services with no Parameter. MakeSNIDotYAML constructs an sni.yaml ATS configuration file. TODO let active DSes take precedence?/Users/test/Desktop/trafficcontrol/lib/go-atscfg/sslmulticertdotconfig.gocerNamenewHostusedDSes`ssl_multicert.config`ssl_cert_name=`ssl_cert_name=`	"\t" ssl_key_name=` ssl_key_name=`MakeSSLMultiCertDotConfig got ds '"MakeSSLMultiCertDotConfig got ds '"' example url '"' example url '"' with no scheme! ssl_multicert.config will likely be malformed!"' with no scheme! ssl_multicert.config will likely be malformed!"_cert.cer"_cert.cer" ContentTypeSSLMultiCertDotConfig is the MIME type of the contents of an ssl_multicert.config ATS configuration file. LineCommentSSLMultiCertDotConfig is the string used to indicate the start of a line comment in the grammar of an ssl_multicert.config ATS configuration SSLMultiCertConfigFileName is the name of an ATS configuration file which contains information on the locations of one or more SSL key and certificate pairs. SSLMultiCertDotConfigOpts contains settings to configure generation options. MakeSSLMultiCertDotConfig constructs an ssl_multicert.config ATS configuration file for the given server. DeliveryServicesToSSLMultiCertDSes returns the "SSLMultiCertDS" map, and any warnings. GetSSLMultiCertDotConfigCertAndKeyName returns the cert file name and key file name for the given delivery service. first one is the one we want GetSSLMultiCertDotConfigDeliveryServices takes a list of delivery services, and returns the delivery services which will be inserted into the config by MakeSSLMultiCertDotConfig. This is public, so users can see which Delivery Services are used, without parsing the config file. For example, this is useful to determine which certificates are needed. Steering delivery service SSLs should not be on the edges. TODO warn? error? Perl doesn't/Users/test/Desktop/trafficcontrol/lib/go-atscfg/sslservernamedotyaml.godelimtlsVersionsParamArrdsParentConfigParamsdsTLSVersionsenableH2hasDSparamTLSVersionsparamValEnableH2paramValTLSVersionstlsVersions"application/yaml; charset=us-ascii""1.1"1.2"1.2"1.3"1.3"TLSv1"TLSv1"TLSv1_1"TLSv1_1"TLSv1_2"TLSv1_2"TLSv1_3"TLSv1_3"enable_h2"enable_h2"tls_versions"tls_versions"  disable_h2: `  disable_h2: `
  disable_h2: this server missing Profiles"this server missing Profiles"making cachegroup map: "making cachegroup map: "error checking if ds uses this server, considering false! Error: "error checking if ds uses this server, considering false! Error: "' had unknown TLS Version '"' had unknown TLS Version '"' - ignoring!"' - ignoring!""t""y"' had unknown "' had unknown "ds missing xmlId"ds missing xmlId"ds missing id"ds missing id"server missing id"server missing id"ds missing type"ds missing type"ds topology '"ds topology '" ContentTypeYAML is the MIME type of YAML-format files and text. TODO: Move this into lib/go-rfc? LineCommentYAML is the string used to start a line comment in YAML syntax. SSLServerNameYAMLFileName is an unused constant that probably refers to the name of an ATS ssl_server_name.yaml file on disk, the ConfigFile value of Parameters that can affect the generation of such a file, or both. ContentTypeSSLServerNameYAML is the MIME type of the contents of an ssl_server_name.yaml ATS configuration file. LineCommentSSLServerNameYAML is the string used to indicate the start of a line comment in the grammar of an ssl_server_name.yaml ATS configuration DefaultDefaultEnableH2 is whether Delivery Services will have HTTP/2 enabled by default if they don't have an explicit Parameter, and no Opt is passed to the Make func. We disable by default, to prevent potentially enabling broken clients. A TLSVersion is a version of the TLS protocol. TODO: consolidate with the lib/go-tc TLS version constants. These are valid, recognized versions of TLS. TLSVersionInvalid is used to represent an unrecognized or unsupported TLS version. StringToTLSVersion returns the TLSVersion or TLSVersionInvalid if the string is not a TLS Version enum. tlsVersionsToATS maps TLS version strings to the string used by ATS in ssl_server_name.yaml. TODO: could this be a String method to make TLSVersion a fmt.Stringer and remove a package-scope mutable variable? SSLServerNameYAMLParamEnableH2 is the Name of a Parameter which, if found on the Profile of a Delivery Service and having the ConfigFile value "parent.config" - NOT ssl_server_name.yaml, which would cause it to be ignored - will enable the use of the HTTP/2 protocol for Delivery Services if its value begins with 'T', 't', 'Y', or 'y'. Examples of Values for these Parameters that would cause HTTP/2 to be enabled are:	true	TrUe	Yes	yno	yFalse	tFalse	talse	ts"<>an177otehucau$%*(@YDU) Examples of Values for these Parameters that would cause HTTP/2 to be disabled are:	false	No	off	on	use	enable	1	affirmative	I wish to use this feature	frue	nYes	s"<>an177otehucau$%*(@YDU) SSLServerNameYAMLParamTLSVersions is the Name of a Parameter which, if found on the Profile of a Delivery Service and having the ConfigFile value ignored - will set the explicitly allowed TLS versions for communication with edge-tier cache servers. The Value of such Parameters should be a list of TLS versions, which may be separated by spaces, new lines, semicolons, or commas (but only one thereof, and only consistently a single of those delimeters, not a mixture). Deprecated: Now that Delivery Services support setting TLS versions to be explicitly allowed directly on their configuration, that feature should be used rather than this Parameter. DefaultDefaultTLSVersions is the list of TLS versions to enable by default, if no Parameter exists and no Opt is passed to the Make func. By default, we enable all, even insecure versions. As a CDN, Traffic Control assumes it should not break clients, and it's the client's responsibility to use secure protocols. Note this enables certain downgrade attacks. Operators or tenants concerned about these attacks should disable older TLS versions. SSLServerNameYAMLOpts contains settings to configure ssl_server_name.yaml generation options. MakeSSLServerNameYAML constructs an ssl_server_name.yaml ATS configuration SSLData has the DS data needed for both sni.yaml (ATS 9+)  and ssl_server_name.yaml (ATS 8). GetServerSSLData gets the SSLData for all Delivery Services assigned to the given Server, any warnings, and any error. Allow delimiting with commas, semicolons, spaces, or newlines. let Parameters override the Delivery Service field, for backward-compatibility, and also because this lets tenants who own multiple DSes set them all in a single place, instead of duplicating for every DS (which will be even more de-duplicated when Layered Profiles are implemented) dsAssignedServer returns whether the Delivery Service Servers has an assignment between the server and the DS. Does not check Topologies, or parentage. Only useful for Edges and pre-topology DSS./Users/test/Desktop/trafficcontrol/lib/go-atscfg/storagedotconfig.godriveLettersramDriveLettersramDrivePrefixssdDriveLettersssdDrivePrefixletterlettersvolumeserver missing Profiles"server missing Profiles"server %+v profile has Drive_Prefix parameter, but no Drive_Letters; creating anyway"server %+v profile has Drive_Prefix parameter, but no Drive_Letters; creating anyway"server %+v profile has RAM_Drive_Prefix parameter, but no RAM_Drive_Letters; creating anyway"server %+v profile has RAM_Drive_Prefix parameter, but no RAM_Drive_Letters; creating anyway"SSD_Drive_Prefix"SSD_Drive_Prefix"SSD_Drive_Letters"SSD_Drive_Letters"server %+v profile has SSD_Drive_Prefix parameter, but no SSD_Drive_Letters; creating anyway"server %+v profile has SSD_Drive_Prefix parameter, but no SSD_Drive_Letters; creating anyway"" volume=" StorageFileName is the ConfigFile of Parameters which, if found on a server's Profile, will affect the generation of its storage.config ATS configuration ContentTypeStorageDotConfig is the MIME type of the contents of a storage.config ATS configuration file. LineCommentStorageDotConfig is the string used to indicate in the grammar of a storage.config ATS configuration file that the rest of the line is a comment. StorageDotConfigOpts contains settings to configure generation options. MakeStorageDotConfig creates storage.config for a given ATS Profile. The paramData is the map of parameter names to values, for all parameters assigned to the given profile, with the config_file "storage.config"./Users/test/Desktop/trafficcontrol/lib/go-atscfg/strategiesdotconfig.gojoinanchorSvcNameanchorFQDN---"---"..."..."`consistent_hash`rr_ip`rr_ip`rr_strict`rr_strict`first_live`first_live``latched`strategy-"strategy-"exhaust_ring`exhaust_ring`alternate_ring`alternate_ring`peering_ring`peering_ring`" [" ]" ]""peering_ring"      - *peers_group`      - *peers_group`
      - *peers_group      - *group_parents_`      - *group_parents_`
      - *group_parents_      - *group_secondary_parents_`      - *group_secondary_parents_`
      - *group_secondary_parents_strategies:`strategies:`
strategies:  - strategy: '`  - strategy: '`
  - strategy: '    policy: `    policy: `
    policy:     hash_key: path+query`    hash_key: path+query`
    hash_key: path+query    hash_key: path`    hash_key: path`
    hash_key: path    go_direct: `    go_direct: `
    go_direct:     cache_peer_result: `    cache_peer_result: `
    cache_peer_result:     groups:`    groups:`
    groups:    failover:`    failover:`
    failover:      ring_mode: `      ring_mode: `
      ring_mode:       max_simple_retries: `      max_simple_retries: `
      max_simple_retries:       response_codes:`      response_codes:`
      response_codes:      max_unavailable_retries: `      max_unavailable_retries: `
      max_unavailable_retries:       markdown_codes:`      markdown_codes:`
      markdown_codes:      health_check:`      health_check:`
      health_check:        - passive`        - passive`
        - passive-dot-`-dot-`group_parents_`group_parents_`group_secondary_parents_`group_secondary_parents_`groups:`groups:`
groups:  - &`  - &`
  - &    - <<: *`    - <<: *`
    - <<: *      weight: `      weight: `
      weight:   - &peers_group`  - &peers_group`
  - &peers_group    - <<: *peer`    - <<: *peer`
    - <<: *peerhost__`host__`__parent__`__parent__`hosts:`hosts:`
hosts:  - &peer`  - &peer`
  - &peer    host: `    host: `
    host:     protocol:`    protocol:`
    protocol:      - port: `      - port: `
      - port:  ContentTypeStrategiesDotYAML is the MIME type of the contents of a strategies.yaml ATS configuration file. LineCommentStrategiesDotYAML is the string used to signal the beginning of a line comment in the grammar of a strategies.yaml ATS configuration file. StrategiesYAMLOpts contains settings to configure strategies.config generation options. MakeStrategiesDotYAML constructs a strategies.yaml ATS configuration file. TODO change MakeParentDotConfigData to its own opt? YAMLDocumentStart is the symbol used in the YAML grammar to indicate the end of "directives", which simultaneously constitutes the beginning of the "document". YAMLDocumentEnd is the symbol used in the YAML grammar to indicate the end of the "document", which simultaneously constitutes the beginning of the zero or more "directives" (again). getStrategyPolicy returns the strategies.config text for the retry policy. Returns the default policy if policy is invalid, without error. TODO make strategies for both? add to parent?      Ask John why this exists. Since it's specified on the remap, shouldn't it use the      remap target's scheme? txt += "\n" + `    scheme: http` fqdn characters are valid yaml anchor characters except for '.' txt += "\n" + `      - scheme: http` // TODO fix?/Users/test/Desktop/trafficcontrol/lib/go-atscfg/sysctldotconf.go = " = " SysctlSeparator is the string used to separate Parameter Names from their Values on lines of a sysctl.conf ATS configuration file. SysctlFileName is the ConfigFile of Parameters which, if found on a server's Profile, specify lines in the sysctl.conf ATS configuration file. ContentTypeSysctlDotConf is the MIME type of the contents of a sysctl.conf LineCommentSysctlDotConf is the string understood by parses of sysctl.conf to be the beginning of a line comment. SysCtlDotConfOpts contains settings to configure generation options. MakeSysCtlDotConf generates a sysctl.conf ATS configuration file for the given server with the given Parameters./Users/test/Desktop/trafficcontrol/lib/go-atscfg/urisigningconfig.gouriSigningKeyBtsapplication/json; charset=us-ascii`application/json; charset=us-ascii`getting ds name: malformed config file '"getting ds name: malformed config file '"no keys fetched for ds '"no keys fetched for ds '" ContentTypeURISigningDotConfig is the MIME type of the contents of a uri_signing.config ATS configuration file. LineCommentURISigningDotConfig is the string used to indicate the start of a line comment in the grammar of a uri_signing.config ATS configuration file. Note that uri_signing.config is a JSON-encoded object, and as such comments are not allowed in that file, because the JSON lexicon has no comment token. URISigningConfigOpts contains settings to configure generation options. MakeURISigningConfig constructs a uri_signing.config ATS configuration file with the given mapping of Delivery Service XMLIDs to URI Signing keys. getDSFromURISigningConfigFileName returns the DS of a URI Signing config file name. For example, "uri_signing_foobar.config" returns "foobar". If the given string is shorter than len("uri_signing_a.config"), the empty string is returned./Users/test/Desktop/trafficcontrol/lib/go-atscfg/urlsigconfig.goallURLSigKeyskeyLinesparamLines ContentTypeURLSig is the MIME type of the contents of a url_sig.config ATS LineCommentURLSig is the string used to indicate the start of a line comment in the grammar of a url_sig.config ATS configuration file. URLSigConfigOpts contains settings to configure generation options. MakeURLSigConfig constructs a url_sig.config ATS configuration file for the given server that has the given Parameters. getDSFromURLSigConfigFileName returns the DS of a URLSig config file name. For example, "url_sig_foobar.config" returns "foobar". If the given string is shorter than len("url_sig_a.config"), the empty string is returned./Users/test/Desktop/trafficcontrol/lib/go-atscfg/volumedotconfig.gonumVolumesdrivePrefixesnum# TRAFFIC OPS NOTE: This is running with forced volumes - the size is irrelevant
"# TRAFFIC OPS NOTE: This is running with forced volumes - the size is irrelevant\n"volume="volume=" scheme=http size=" scheme=http size="%
"%\n" VolumeFileName is the ConfigFile of Parameters which can influence the generation of a volume.config ATS configuration file, if found on the Profile of the server for which generation is taking place. ContentTypeVolumeDotConfig is the MIME type of the contents of a volume.config ATS configuration file. LineCommentVolumeDotConfig is the string used to indicate the beginning of a line comment in the grammar of a volume.config ATS configuration file. VolumeDotConfigOpts contains settings to configure generation options. MakeVolumeDotConfig creates volume.config for a given ATS Profile./Users/test/Desktop/trafficcontrol/lib/go-llog/Users/test/Desktop/trafficcontrol/lib/go-llog/llog.goLibInitNopWriterFuncloggersloglnlgdebugwfdbglsllog Package llog provides logging utilities for library packages. This allows libraries to log if desired, while still allowing the library functions to have no side effects and not use global loggers, which may be different than the application's primary log library. This also allows users of the library to decide their logging level for this particular library. For example, an application may wish to generally log at the debug level, but not log debug messages for some particular library. Or, a user may wish to log warning messages from a library as errors. Setting two log levels to the same io.Writer is permissible. This is not itself a logging library. Rather, it allows applications using any log library to interface with libraries using llog, by constructing a Loggers object from their own logger. Log is an interface which library functions may accept in order to log without side effects, if the caller desires. Applications using a library which uses Log may use NewLog, or may themselves implement the interface. Library functions should immediately call DefaultIfNil to allow callers to pass a nil Log. Importantly, this allows applications using the library to avoid importing llog, if they don't want the library to log. LibInit initializes the Log for libraries. All public functions in Libraries using llog should immediately call LibInit. The return value should be assigned, like `log = llog.LibInit(log)` Applications creating a Log to pass to a library func should never call LibInit. This creates a Nop Log if the passed lg is nil, which allows applications to pass a nil Log. It may do other things in the future. Nop returns a Log that never logs. Applications which don't want a library to log can pass Nop to libraries that take a Log. New creates a new Log. Applications can use New to create a Log from their own internal log libraries and writers, to pass to libraries using liblog. Standard log example:	errLog := log.New(os.Stdout, "ERROR: ", log.Ldate|log.Ltime|log.Lshortfile)	mylib.MyFunc(liblog.New(errLog, nil, nil, nil), myArg) github.com/apache/trafficcontrol/v8/lib/go-log example:	import("github.com/apache/trafficcontrol/v8/lib/go-log")	log.Init(nil, os.Stderr, os.Stderr, nil, nil)	lLog := log.LLog() // lib/go-tc has a built-in llog helper	// alternatively, what the lib/go-log helper is doing internally:	ltow := func(lg *log.Logger) io.Writer {	  return llog.WriterFunc(func(p []byte) (n int, err error) {	  Logln(lg, string(p))	})	lLog = llog.New(ltow(Error), ltow(Warning), ltow(Info), ltow(Debug))	mylib.MyFunc(lLog, myArg) zap example:	import("go.uber.org/zap")	func main() {	  logger, _ := zap.NewProduction()	  sugar := logger.Sugar()	  zapErrLog := liblog.WriterFunc(func(p []byte) (n int, err error){	    logger.Sugar().Error(string(p))	  })	  mylib.MyFunc(liblog.New(zapErrLog, nil, nil, nil), myArg)	} WriterFunc is an adapter to allow the use of ordinary functions as io.Writers. This behaves similar to http.HandlerFunc for http.Handler. Write implements io.Writer./Users/test/Desktop/trafficcontrol/lib/go-log/Users/test/Desktop/trafficcontrol/lib/go-log/log.goAccessAccesslnClosefDebugFlagsDebugPrefixErrFlagsErrPrefixEventFlagsEventPrefixEventfEventfRawGetLogWriterInitAccessInitTestingLoggingLLogLogLocationFileNopCloserStandardLoggerStaticFileDirWarnFlagsWarnPrefixWritefaccessCloserdebugClosererrClosereventClosereventFormateventTimeinfoCloserinitLoggernopCloserstackFramestandardLoggerWritertestErrorLoggertestLoggertimeFormatwarnCloserlogFlagslogPrefixnewLogWriteroldLogCloseraccessWcontextFormatdebugLocerrLoceventLocinfoLocwarnLocltowgithub.com/apache/trafficcontrol/v8/lib/go-llog"github.com/apache/trafficcontrol/v8/lib/go-llog"DEBUG: "DEBUG: ""INFO: "WARNING: "WARNING: "ERROR: "ERROR: "Sprintln%.3f %s"%.3f %s"%v: %v"%v: %v": %v": %v""null"/var/log/trafficcontrol/tc-health-client.log"/var/log/trafficcontrol/tc-health-client.log"/opt/traffic_monitor/static/"/opt/traffic_monitor/static/"O_APPEND521getting log event writer %v: %v"getting log event writer %v: %v"getting log error writer %v: %v"getting log error writer %v: %v"getting log warning writer %v: %v"getting log warning writer %v: %v"getting log info writer %v: %v"getting log info writer %v: %v"getting log debug writer %v: %v"getting log debug writer %v: %v" Package log contains utilities for sensible logging. ATC components written in Go should use this package rather than a third-party library. This package also provides log *levels*, which are not really supported by the standard log package, so it's generally better to use this than even that standard library. Inspired by https://www.goinggo.net/2013/11/using-log-package-in-go.html # Usage Normally, one will have some command-line program that takes in some kind of configuration either via command-line arguments or a configuration file, and want that configuration to define how logging happens. The easiest way to logging up and running is to put that configuration into a type that implements this package's Config interface, like:	type Configuration struct {		ErrorLogs     string `json:"errorLogs"`		WarningLogs   string `json:"warningLogs"`		InfoLogs      string `json:"infoLogs"`		DebugLogs     string `json:"debugLogs"`		EventLogs     string `json:"eventLogs"`		EnableFeature bool   `json:"enableFeature"`	func (c Configuration) ErrorLog() string { return c.ErrorLogs}	func (c Configuration) WarningLog() string { return c.WarningLogs }	func (c Configuration) InfoLog() string { return c.InfoLogs }	func (c Configuration) DebugLog() string { return c.DebugLogs }	func (c Configuration) EventLog() string { return c.EventLogs } Then the configuration can be unmarshaled from JSON and the resulting Configuration can be passed directly to InitCfg, and then everything is set-up and ready to go. These are the loggers for the various log levels, which can be accessed directly, but in general the functions exported by this package should be used instead. Access is NOT initialized by Init nor InitCfg in any way. To initialize it, use InitAccess. These are prefixes prepended to messages for the various log levels. These constants are flags used to create the underlying "log.Logger", defining what's in the prefix for different types of log messages. Refer to the "log" package documentation for details. Init initializes the logs - except the Access log stream - with the given io.WriteClosers. If `Init` was previously called, existing loggers are Closed. If you have loggers which are not Closers or which must not be Closed, wrap them with `log.NopCloser`. InitAccess initializes the Access logging stream with the given io.WriteCloser. Logf should generally be avoided, use the Init or InitCfg and Errorf, Warnln, etc functions instead. It logs to the given logger, in the same format as the standard log functions. This should only be used in rare and unusual circumstances when the standard loggers and functions can't. Logln should generally be avoided, use the built-in Init or InitCfg and Errorf, Warnln, etc functions instead. It logs to the given logger, in the same format as the standard log functions. This should only be used in rare and unusual circumstances when the standard loggers and functions can't. Errorf prints a formatted message to the Error logging stream. Formatting is handled identically to the fmt package, but the final message actually printed to the stream will be prefixed with the log level and timestamp just like Errorln. Also, if the final formatted message does not end in a newline character, one will be appended, so it's not necessary to do things like e.g.	Errorf("%v\n", 5) Instead, just:	Errorf("%v", 5) will suffice, and will print exactly the same message. Errorln prints a line to the Error stream. This will use default formatting for all of its passed parameters, as defined by the fmt package. The resulting line is first prefixed with the log level - in this case "ERROR: " - and the current timestamp, as well as the context in which it was logged. For example, if line 36 of foo.go invokes this like so:	log.Errorln("something wicked happened") ... the resulting log line will look like:	ERROR: foo.go:36: 2006-01-02T15:04:05Z: something wicked happened (assuming the log call occurred at the time package's formatting reference date/time). This allows multiple log streams to be directed to the same file for output and still be distinguishable by their log-level prefix. Warnf prints a formatted message to the Warning logging stream. The message format is identical to Errorf, but using the log-level prefix "WARNING: ". Warnln prints a line to the Warning stream. The message format is identical to Errorln, but using the log-level prefix Infof prints a formatted message to the Info logging stream. "INFO: ". Infoln prints a line to the Info stream. Debugf prints a formatted message to the Debug logging stream. "DEBUG: ". Debugln prints a line to the Debug stream. Accessln prints an "access"-level log to the Access logging stream. This does NOT use the same message formatting as the other logging functions like Errorf. Instead, it prints only the information it's given, formatted according to the format string (if present) as defined by the fmt package. For example, if line 36 of foo.go invokes this like so:	log.Accessln("%s\n", "my message")	my message Eventf prints an "event"-level log to the Event logging stream. like Errorf. Instead, it prints the time at which the event occurred as the number of seconds since the Unix epoch to three decimal places of sub-second precision, followed by the trailing parameters formatted according to the format string as defined by the fmt package. For example, if line 36 of foo.go invokes this like so:	log.Eventf(time.Now(), "%s\n", "my message")	1136214245.000 my message Note that this WILL NOT add trailing newlines if the resulting formatted message string doesn't end with one. 1484001185.287 ... EventfRaw writes a formatted message to the Event log stream. The formatting is just like Eventf, but no timestamp prefix will be added. EventRaw writes the given string directly to the Event log stream with absolutely NO formatting - trailing newline, timestamp, log-level etc. Go's fmt.Printf/Sprintf etc. are very slow, so using this with string concatenation is by far the fastest way to log, and should be used for frequent logs. Close calls `Close()` on the given Closer, and logs any error that results from that call. On error, the context is logged, followed by a colon and the error message. Specifically, it calls Errorf with the context and error using the format '%v: %v'. This is primarily designed to be used in `defer`, for example:	defer log.Close(resp.Body, "readData fetching /foo/bar") Note that some Go linting tools may not properly detect this as both Closing the Closer and checking the error value that Close returns, but it does both of those things, we swear. Closef acts like Close, with a given format string and values, followed by a colon, the error message, and a newline. The given values are not coerced, concatenated, or printed unless an error occurs, so this is more efficient than Close in situations where the message passed to Close would have been generated with fmt.Sprintf. This actually results in two distinct lines being printed in the Error log stream. For example, if line 36 of foo.go invokes this like so:	log.Closef(resp.Body, "doing %s", "something") ... and resp.Body.Close() returns a non-nil error with the message "failed", the resulting log lines will look like:	ERROR: log.go:271: 2006-01-02T15:04:05Z: doing something	ERROR: log.go:272: 2006-01-02T15:04:05Z: : failed (please please please don't count on those line numbers). Write calls the Write method of the given Writer with the passed byte slice as an argument, and logs any error that arises from that call. On error, the context is logged, followed by a colon and the error message, and a trailing newline is guaranteed. For example, if line 36 of foo.go invokes this like so:	log.Write(someWriter, []byte("write me"), "trying to write") ... and someWriter.Write() returns a non-nil error with the message "failed", the resulting log line will look like:	ERROR: log.go:294: 2006-01-02T15:04:05Z: trying to write: failed (please please please don't count on that line number). Writef acts like Write, with a given format string and values, followed by a occurs, so this is more efficient than Write in situations where the message passed to Write would have been generated with fmt.Sprintf.	log.Writef(someWriter, "doing %s", "something") "failed", the resulting log lines will look like:	ERROR: log.go:320: 2006-01-02T15:04:05Z: doing something	ERROR: log.go:321: 2006-01-02T15:04:05Z: : failed Close implements the io.Closer interface. This does nothing. NopCloser returns an io.WriteCloser which wraps the passed io.Writer with a Close method that just does nothing but return a nil error. This allows non-closable streams to be used for logging. LogLocation is a location to log to. This may be stdout, stderr, null (/dev/null), or a valid file path. LogLocationStdout indicates the stdout IO stream. LogLocationStderr indicates the stderr IO stream. LogLocationNull indicates the null IO stream (/dev/null). LogLocationFile specify where health client logs should go. Deprecated: It is unclear why this constant is in this package at all, and it will almost certainly be removed in the future. StaticFileDir is the directory that contains static HTML and Javascript files for Traffic Monitor. GetLogWriter creates a writable stream from the given LogLocation. If the requested log location is a file, it will be opened with the write-only, create, and append flags in permissions mode 0644. If that open operation causes an error, it is returned. As a special case, if the location is an empty string, the returned stream will be nil - this is the same behavior as passing LogLocationNull. Config structures represent logging configurations, which can be accessed by this package for setting up the logging system via GetLogWriters. GetLogWriters uses the passed Config to set up and return log streams. This bails at the first encountered error creating a log stream, and returns the error without trying to create any further streams. The returned streams still need to be initialized, usually with Init. To create and initialize the logging streams at the same time, refer to InitCfg. InitCfg uses the passed configuration to both create and initialize all logging streams. LLog returns an llog.Log, for passing to libraries using llog. Note the returned Log will have writers tied to loggers at its time of creation. Thus, it's safe to reuse LLog if an application never re-initializes the loggers, such as when reloading config on a HUP signal. If the application re-initializes loggers, LLog should be called again to get a new llog.Log associated with the new log locations. ltow converts a log.Logger into an io.Writer This is relatively inefficient. If performance is necessary, this package could be made to keep track of the original io.Writer, to avoid an extra function call and string copy.TBtesting.privatetlrealLogger/Users/test/Desktop/trafficcontrol/lib/go-log/standardlogger.go StandardLogger returns a new Logger which will write the appropriate prefix for standard log Printf calls. This allows the given logger to prefix correctly when passed to third-party or standard library functions which only know about the standard Logger interface. It does this by wrapping logger's error print as a writer, and sets that as the new Logger's io.Writer. prefix is a prefix to add, which will be added immediately before messages, but after any existing prefix on logger and the timestamp. Write writes to writer's underlying log, in the standard log format (note this is not the Event log format). The writer.realLogger may be nil, in which case this does nothing. This always returns len(p) and nil, claiming it successfully wrote even if it didn't./Users/test/Desktop/trafficcontrol/lib/go-log/test.logger.goerrWritertbwarningsAreErrors
* Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 InitTestingLogging initializes all logging functions to write their outputs to the logging output of the given testing context. If warningsAreErrors is true, warnings are logged using t.Error - marking the test as failed. Otherwise, errors are logged using t.Log. In either case, any errors logged cause the test to be marked as failed and are logged using t.Error, and the Info, Event, and Debug streams are always logged using t.Log./Users/test/Desktop/trafficcontrol/lib/go-nagios/Users/test/Desktop/trafficcontrol/lib/go-nagios/nagios.gonagiosTrimRight Package nagios is used by Traffic Monitor for unknown reasons. This may be moved internal to Traffic Monitor at some point, so its use is discouraged. A Status is an exit code that can be passed to Exit. These are the different values allowed for a Status. Note that many things consider any non-zero exit code to be indicative of an error causing the program to quit, despite any names seen here. Exit causes the current running program to exit by calling os.Exit with the given Status as an exit code. If the passed msg is not an empty string, it will be logged to stdout (NOT stderr, and directly using 'fmt.Printf', which may bypass logging configurations). Trailing newlines are ensured and not duplicated./Users/test/Desktop/trafficcontrol/lib/go-rfc/Users/test/Desktop/trafficcontrol/lib/go-rfc/cachecontrol.goAcceptEncodingAcceptsGzipAccessTokenApplicationJSONApplicationOctetStreamCacheControlCacheableRequestMethodsCacheableResponseCodesContentDispositionContentEncodingContentTypeMultiPartMixedContentTypeTextPlainContentTypeURIListETagVersionGetHTTPDeltaSecondsGetUnmodifiedTimeGzipIDTokenIfMatchIfModifiedSinceIfUnmodifiedSinceLastModifiedFormatMIME_CSSMIME_HTMLMIME_JSMIME_JSONMIME_PLAINTEXTMimeTypeMimeTypesFromAcceptNewMimeTypeParseETagParseETagsPermissionsPolicySortMimeTypesVaryallowedStalecacheControlAllowscanStoreAuthenticatedcanStoreResponsegetCurrentAgegetFreshnessLifetimegetHTTPDeltaSecondsCacheControlgetQuotedValueEndPosgetValueEndPosheuristicFreshnessselectedHeadersMatchstripEscapesyearetimtmiuseTagslatestTime"ETag"If-Match"If-Match"If-Unmodified-Since"If-Unmodified-Since""v`"v``-`36unquoted string, value must be quoted"unquoted string, value must be quoted"`v`malformed, no version prefix"malformed, no version prefix"8640000000000036531536000000000000630720000000000000-20-630720000000000000malformed, out of range"malformed, out of range" These are the names of some HTTP headers commonly used within ATC, kept here for compile-time safety against spelling mistakes. RFC72323.3 RFC72322.2 ETagVersion is used to specify a "version" for the ETags generated by this package. That way, if the generation method were ever to change, old ETags could potentially still be compared to new ones. ETag takes the last time the object was modified, and returns an ETag string. Note the string is the complete header value, including quotes. ETags must be quoted strings. ParseETag takes a complete ETag header string, including the quotes (if the client correctly set them), and returns the last modified time encoded in the ETag. strip quotes sanity check - if the time isn't +/- 20 years, error. This catches overflows and near-zero errors GetUnmodifiedTime retrieves an object modification time from any Etags and/or If-Unmodified-Since headers present in h. The time it returns is the later of the two if both are found. The second return value tells whether or not a time could actually be found - if not, the returned time value should not be considered an actual representation of any modification time in h. ParseETags returns the latest time of any valid ETag, and whether a valid ETag was found. errors are recoverable, keep going through the list of etagsQualityCharsetSubTypeFacetSyntaxSatisfy/Users/test/Desktop/trafficcontrol/lib/go-rfc/caching.gocharBeforeQuotenextQuotePoscacheControlStrafterbeforenextSpaceOrEqualPosquotedvalueEndPosrespCacheControlrespHeadersreqCCrespCCreqMethoddayfreshnessmaybeSecsecondsexpiresgetExpiresageValueapparentAgecorrectedAgecorrectedInitialdateValuecurrentAgefreshnessLifetimerespReqHeadersvaryHeadervaryHeaderHeadersvaryHeadersmaxStalepragmasminFreshStatusNonAuthoritativeInfo203StatusMultipleChoicesStatusMovedPermanently301StatusMethodNotAllowed405StatusGone410StatusRequestURITooLong414StatusNotImplementedCache-Control:"Cache-Control:"'\\'92Cache-Control=,"=,"44"Expires"max-age"max-age"s-maxage"s-maxage"no-store"no-store""private"authorization"authorization"must-revalidate"must-revalidate"public"public"last-modified"last-modified""date"MinMax0.0"ReuseCan""ReuseCannot""ReuseMustRevalidate""ReuseMustRevalidateCanStale"INVALID"INVALID"vary"vary"*"*"proxy-revalidate"proxy-revalidate"max-stale"max-stale""Cache-Control"pragma"pragma"min-fresh"min-fresh" CacheableResponseCodes provides fast lookup of whether a HTTP response code is cache-able by default. CacheableRequestMethods is the list of all request methods which elicit cache-able responses. CacheControlMap is the parameters found in an HTTP Cache-Control header, each mapped to its specified value. String implements the Stringer interface by returning a textual representation of the CacheControlMap. Has returns whether or not the CacheControlMap contains the named parameter. Gets the position in the string at which a *quoted* Cache-Control parameter value ends - assuming it begins with the start of such a value. If the end can't be determined, returns -1. should never happen - log? -1 because we skip = nextQuotePos+1, to skip the actual quote +1 for the " we stripped at the beginning, +1 for quote itself +1 for the " we stripped at the beginning, +1 for the quote itself Gets the position in the string at which a Cache-Control parameter value ends - assuming it begins with the start of such a value. Strips escape characters from the string. For example, `\w` becomes just `w` and `\\w` becomes `\w`. ParseCacheControl parses the Cache-Control header from the headers object, and returns the parsed map of cache control directives. TODO verify Header/CacheControl are properly CanonicalCase/lowercase. Put cache-control text in constants? TODO trim Checks if the cache control allows responses to be cached. This used to be a stub function that just returns false, the original rationale for why it was always false is shown here in the comment from that original function: This MUST return false unless a specific Cache Control cache-extension token exists for an extension which allows. Which is to say, returning true here without a cache-extension token is in strict violation of RFC7234. In practice, all returning true does is override whether a response code is default-cacheable. If we wanted to do that, it would be better to make codeDefaultCacheable take a strictRFC parameter. if extensionAllows() { 	return true log.Debugf("CacheControlAllows false: no expires, no max-age, no s-max-age, no extension allows, code not default cacheable\n") canStoreResponse checks the constraints in RFC7234. log.Debugf("CanStoreResponse false: request has no-store\n") log.Debugf("CanStoreResponse false: response has no-store\n") // RFC72345.2.2.3 log.Debugf("CanStoreResponse false: response has no-cache\n") // RFC72345.2.2.2 log.Debugf("CanStoreResponse false: has private\n") log.Debugf("CanStoreResponse false: has authorization\n") canStoreAuthenticated checks the constraints in RFC72343.2. TODO: ensure RFC72343.2 requirements that max-age=0, must-revlaidate, s-maxage=0 are revalidated. log.Debugf("CanStoreAuthenticated false: has authorization, and no must-revalidate/public/s-maxage\n") CanCache returns whether an object can be cached per RFC 7234, based on the request headers, response headers, and response code. If strictRFC is false, this ignores request headers denying cacheability such as `no-cache`, in order to protect origins. TODO add options to ignore/violate request Cache-Control (to protect origins). log.Debugf("CanCache start\n") for now, we only support GET and HEAD as cacheable methods. log.Debugf("CanCache reqCacheControl %+v respCacheControl %+v\n", reqCacheControl, respCacheControl) heuristicFreshness follows the recommendation of RFC72344.2.2 and returns the min of 10% of the (Date - Last-Modified) headers and 24 hours, if they exist, and 24 hours if they don't. TODO: smarter and configurable heuristics. getHTTPDeltaSeconds is a helper function which gets an HTTP Delta Seconds from the given map (which is typically a `http.Header` or `CacheControl`. Returns false if the given key doesn't exist in the map, or if the value isn't a valid Delta Seconds per RFC26163.3.2. getFreshnessLifetime calculates the freshness_lifetime per RFC72344.2.1. FreshFor gives a duration for which an HTTP response may still be cached - from the time of the request. respHeaders is the collection of headers passed in the original response. respCC is the parsed Cache-Control header that was present in the original response. reqTime is the time at which the request was made. respTime is the time at which the original response was received. Reuse is an "enumerated" type describing the necessary behavior of a cache with regard to its cached objects. ReuseCan indicates that the cached response may be served. ReuseCannot indicates that the cached response must not be served. ReuseMustRevalidate indicates that the cached response must be revalidated, and cannot be served stale if revalidation fails for some reason. ReuseMustRevalidateCanStale indicates the response must be revalidated, but if the parent cannot be reached, may be served stale, per RFC72344.2.4. String implements the fmt.Stringer interface by returning the name of the Reuse constant the value indicates. selectedHeadersMatch checks the constraints in RFC72344.1. TODO: change caching to key on URL+headers, so multiple requests for the same URL with different vary headers can be cached? allowedStale checks the constraints in RFC72344 via RFC72344.2.4. TODO return ReuseMustRevalidate where permitted TODO verify RFC doesn't allow revalidate here TODO verify RFC allows CanReuseStored checks the constraints in RFC72344. TODO: remove allowed_stale, check in cache manager after revalidate fails? (since RFC72344.2.4 prohibits serving stale response unless disconnected)./Users/test/Desktop/trafficcontrol/lib/go-rfc/email.gomailnet/mail"net/mail"JSON %s not quoted: %v"JSON %s not quoted: %v"ParseAddressCouldn't parse '%s' as an email address: %v"Couldn't parse '%s' as an email address: %v"Type %T cannot represent an EmailAddress!"Type %T cannot represent an EmailAddress!" EmailAddress is an alias of net/mail.Address that implements JSON encoding and decoding, as well as scanning from database driver values. UnmarshalJSON implements the encoding/json.Unmarshaler interface. MarshalJSON implements the encoding/json.Marshaler interface. Scan implements the database/sql.Scanner interface./Users/test/Desktop/trafficcontrol/lib/go-rfc/http.goencodingencodingsencodingHeaderencodingHeadersmaybeDatemaybeSecondsAccept-Encoding"Accept-Encoding"Content-Disposition"Content-Disposition"Content-Encoding"Content-Encoding"Permissions-Policy"Permissions-Policy""Vary""Age""Location""Authorization"application/octet-stream"application/octet-stream"multipart/mixed"multipart/mixed"text/uri-list"text/uri-list""gzip""Mon, 02 Jan 2006 15:04:05 MST"StatusContinueStatusSwitchingProtocolsStatusProcessingStatusEarlyHintsStatusCreated201StatusAccepted202StatusResetContent205StatusMultiStatus207StatusAlreadyReported208StatusIMUsed226StatusSeeOther303StatusUseProxy305306StatusTemporaryRedirect307StatusPermanentRedirect308StatusPaymentRequired402StatusNotAcceptable406StatusProxyAuthRequired407StatusRequestTimeout408StatusConflict409StatusLengthRequired411StatusPreconditionFailed412StatusRequestEntityTooLarge413StatusUnsupportedMediaType415StatusRequestedRangeNotSatisfiable416StatusExpectationFailed417StatusTeapot418StatusMisdirectedRequest421StatusUnprocessableEntity422StatusLocked423StatusFailedDependency424StatusTooEarly425StatusUpgradeRequired426StatusPreconditionRequired428StatusTooManyRequests429StatusRequestHeaderFieldsTooLarge431StatusUnavailableForLegalReasons451StatusServiceUnavailableStatusGatewayTimeout504StatusHTTPVersionNotSupported505StatusVariantAlsoNegotiates506StatusInsufficientStorage507StatusLoopDetected508StatusNotExtended510StatusNetworkAuthenticationRequiredStripAllWhitespaceRFC850Monday, 02-Jan-06 15:04:05 MSTANSICMon Jan _2 15:04:05 2006 These are the names of HTTP Headers, for convenience and so that typos are caught at compile-time. RFC72315.3.4 RFC72345.2 RFC6266 RFC72313.1.2.2 RFC72313.1.1.5 W3C "Permissions Policy" RFC72317.4.2 RFC72315.5.3 RFC72317.1.4 RFC72345.1 RFC72317.1.2 RFC72354.2 RFC7873 These are (some) valid values for content encoding and MIME types, for convenience and so that typos are caught at compile-time. RFC46276 RFC20464.5.2 RFC13417.2 RFC20464.1 RFC24835 RFC72304.2.3 LastModifiedFormat is the format used by dates in the HTTP Last-Modified header. RFC1123 ValidHTTPCodes provides fast lookup of whether a HTTP response code is valid. RFC 7231, 6.2.1 RFC 7231, 6.2.2 RFC 2518, 10.1 RFC 8297 RFC 7231, 6.3.1 RFC 7231, 6.3.2 RFC 7231, 6.3.3 RFC 7231, 6.3.4 RFC 7231, 6.3.5 RFC 7231, 6.3.6 RFC 7233, 4.1 RFC 4918, 11.1 RFC 5842, 7.1 RFC 3229, 10.4.1 RFC 7231, 6.4.1 RFC 7231, 6.4.2 RFC 7231, 6.4.3 RFC 7231, 6.4.4 RFC 7232, 4.1 RFC 7231, 6.4.5 306 is reserved for future use - valid, but unused RFC 7231, 6.4.7 RFC 7538, 3 RFC 7231, 6.5.1 RFC 7235, 3.1 RFC 7231, 6.5.2 RFC 7231, 6.5.3 RFC 7231, 6.5.4 RFC 7231, 6.5.5 RFC 7231, 6.5.6 RFC 7235, 3.2 RFC 7231, 6.5.7 RFC 7231, 6.5.8 RFC 7231, 6.5.9 RFC 7231, 6.5.10 RFC 7232, 4.2 RFC 7231, 6.5.11 RFC 7231, 6.5.12 RFC 7231, 6.5.13 RFC 7233, 4.4 RFC 7231, 6.5.14 RFC 7168, 2.3.3 RFC 7540, 9.1.2 RFC 4918, 11.2 RFC 4918, 11.3 RFC 4918, 11.4 RFC 8470, 5.2. RFC 7231, 6.5.15 RFC 6585, 3 RFC 6585, 4 RFC 6585, 5 RFC 7725, 3 RFC 7231, 6.6.1 RFC 7231, 6.6.2 RFC 7231, 6.6.3 RFC 7231, 6.6.4 RFC 7231, 6.6.5 RFC 7231, 6.6.6 RFC 2295, 8.1 RFC 4918, 11.5 RFC 5842, 7.2 RFC 2774, 7 RFC 6585, 6 AcceptsGzip returns whether r accepts gzip encoding, per RFC72315.3.4. headers are case-insensitive, but Go promises to Canonical-Case requests encoding is case-insensitive, per the RFC72313.1.2.1. GetHTTPDate is a helper function which gets an HTTP date from the given map (which is typically a `http.Header` or `CacheControl`. Returns false if the given key doesn't exist in the map, or if the value isn't a valid HTTP Date per RFC26163.3. ParseHTTPDate parses the given RFC72317.1.1 HTTP-date. FormatHTTPDate formats t as an RFC72317.1.1 HTTP-date. GetHTTPDeltaSeconds is a helper function which gets an HTTP Delta Seconds from the given map (which is typically a `http.Header` or `CacheControl`)./Users/test/Desktop/trafficcontrol/lib/go-rfc/jwt.goid_token"id_token" AccessToken is the access_token parameter name described in RFC 6749 <https://datatracker.ietf.org/doc/html/rfc6749#section-1.4>. IDToken is the id_token parameter name described in OpenID Connect Core <https://openid.net/specs/openid-connect-core-1_0.html#IDToken>./Users/test/Desktop/trafficcontrol/lib/go-rfc/ldap/Users/test/Desktop/trafficcontrol/lib/go-rfc/ldap/ldap.goOIDTypeiTUTTpSSpilotpilotAttributeTypeuCLuIDldap OIDType is the Object Identifier value for UID used within LDAP 0.9.2342.19200300.100.1.1	uid	Attribute Type (see RFC 4519)/Users/test/Desktop/trafficcontrol/lib/go-rfc/mimetype.goretfxmvmSubmTypemqoSuboTypeoqmimesmime"mime""q""charset"SplitN+"+"FormatMediaTypeParseMediaTypeSliceStable"utf-8""text/css"text/javascript"text/javascript"
MimeType represents a "Media Type" as defined by RFC6838, along with some ease-of-use functionality.

Note that this structure is in no way guaranteed to represent a *real* MIME Type, only one that
is *syntactically valid*. The hope is that it will make content negotiation easier for developers,
and should not be considered a security measure by any standard.
 Name is the full name of the MIME Type, e.g. 'application/json'. Usually for printing, it's better to call MimeType.String Parameters contains a map of provided parameter names to corresponding values. Note that for MimeTypes constructed with NewMimeType, this will always be initialized, even when empty.
Quality retrieves and parses the "quality" parameter of a MimeType.

As specified in RFC7231, the quality parameter's name is "q", not actually "quality". To obtain
a literal "quality" parameter value, access MimeType.Parameters directly.
MimeTypes with no "q" parameter implicitly have a "quality" of 1.0.

Charset retrieves the "charset" parameter of a MimeType.

Returns an empty string if no charset exists in the parameters, or if the parameters themselves are
not initialized.
 Type returns only the "main" type of a MimeType. SubType returns only the "sub" type of a MimeType. Facet returns the MimeType's "facet" if one exists, otherwise an empty string. Syntax returns the MimeType's "syntax suffix" if one exists, otherwise an empty string. String implements the Stringer interface using mime.FormatMediaType. Satisfy checks whether or not the MimeType "satisfies" some other MimeType, o. Note that this does not check if the two are literally the *same*. Specifically, if the Type or SubType of the given MimeType o is the special '*' name, then this will instead check whether or not this MimeType can *satisfy* the other according to RFC7231. This means that this satisfaction check is NOT associative - that is a.Satisfy(b) does not imply b.Satisfy(a). See Also: The MDN documentation on the Accept Header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept literally anything will satisfy this it's not syntactically valid to have a "*" type and a non-"*" subtype, e.g. "*/foo", so we're done here
Less checks whether or not this MimeType is "less than" some other MimeType, o.

This is done using a comparison of "quality value" of the two MimeTypes, as specified in RFC7231.

See Also: The MDN documentation on "quality value" comparisons: https://developer.mozilla.org/en-US/docs/Glossary/Quality_values

NewMimeType creates a new MimeType, initializing its Parameters map.

If v cannot be parsed as a valid MIME (by mime.ParseMediaType), returns an error.

MimeTypesFromAccept constructs a *sorted* list of MimeTypes from the provided text, which is assumed
to be from an HTTP 'Accept' header. The list is sorted using to SortMimeTypes.

If a is an empty string, this will return an empty slice and no error.

SortMimeTypes sorts the passed MimeTypes according to their "quality value". See MimeType.Less for
more information on how MimeTypes are compared.
 using !Less because default sort order is ascending MIME_JSON is a pre-defined MimeType for JSON data. MIME_PLAINTEXT is a pre-defined MimeType for plain text data. MIME_HTML is a pre-defined MimeType for HTML data. MIME_CSS is a pre-defined MimeType for CSS data. MIME_JS is a pre-defined MimeType for JavaScript data./Users/test/Desktop/trafficcontrol/lib/go-rfc/rfc.go Package rfc provides symbols for specifications, primarily IETF RFCs. This includes strings, such as header names, as well as logic functions, such as cache control rules. All symbols in this package should document the precise RFC and ideally the exact section where they are defined, to allow readers to easily verify correctness. This is primarily intended for IETF HTTP RFCs, but may include other specifications as well (e.g. ANSI, W3C, WHATWG, etc). If a symbol documents simply "RFC" then it refers to an IETF RFC. If the symbol is an RFC from a different organization, it should document the organization or project, e.g. "Rust RFC 2436" or "ISO/IEC 23009."/Users/test/Desktop/trafficcontrol/lib/go-rfc/url.goCouldn't parse '%s' as a URL: %v"Couldn't parse '%s' as a URL: %v"Type %T cannot represent a URL!"Type %T cannot represent a URL!" URL is an alias of net/url.URL that implements JSON encoding and decoding, as well as scanning from database driver values./Users/test/Desktop/trafficcontrol/lib/go-tc/Users/test/Desktop/trafficcontrol/lib/go-tc/acme_account.goASNNullableASNResponseASNResponseV5ASNResponseV50ASNsResponseV5ASNsV11AcmeAccountAdminRoleNameAllCacheGroupParametersResponseAllFederationCDNAssignedAssignedDsResponseCDNConfigCDNExistsByNameCDNFederationDeliveryServiceCDNNullableCDNResponseCDNSSLKeyCDNSSLKeyCertCDNSSLKeysRespCRConfigConfigCRSStatsCRSStatsAppCRSStatsStatCRSStatsStatsCRStatesMarshallCRStatesUnMarshallCacheGroupDetailResponseV5CacheGroupParameterNullableCacheGroupParametersListCacheGroupParametersNullableCacheGroupParametersResponseCacheGroupV5CacheGroupV50CacheGroupsResponseCacheGroupsResponseV5CacheGroupsResponseV50CacheServerProfileTypeCacheStatusAdminDownCacheStatusFromStringCacheStatusInvalidCacheStatusOfflineCacheStatusPreProdCacheTypeEdgeCachegroupCoordinateNamePrefixCachegroupPostDSReqCachegroupQueueUpdatesRequestCachegroupQueueUpdatesRequestV5CachegroupQueueUpdatesRequestV50CachegroupTrimmedNameCachegroupTrimmedNameV5CachegroupTrimmedNameV50CapabilitiesResponseCertificateAuthorityCertAuthTypeCommonAPIDataConfigFileNameCoordinateNullableCoordinateResponseCoordinateV5CoverageZoneLocationCoverageZonePollingPrefixCoverageZonePollingURLCrConfigTTLNSCrConfigTTLSOACreateAlertsCreateErrorAlertsCurrentStatsResponseCurrentUserUpdateRequestCurrentUserUpdateRequestUserDNSSECKSKTypeDNSSECKeyDSRecordRiakDNSSECKeySetV11DNSSECKeyStatusExpiredDNSSECKeyStatusNewDNSSECKeysRiakDNSSECKeysTrafficVaultDNSSECKeysV11DNSSECStatusExistingDNSSECZSKTypeDSActiveStatePrimedDSMatchTypeFromStringDSMatchTypeHeaderRegexDSMatchTypeInvalidDSMatchTypePathRegexDSMatchTypeSteeringRegexDSRChangeTypeCreateDSRChangeTypeDeleteDSRChangeTypeFromStringDSRChangeTypeUpdateDSSMapResponseDSSReplaceResponseDSServerResponseV4DSServerResponseV5DSServerV11DSServerV5DSServersResponseDSTypeCategoryDSTypeCategoryDNSDSTypeCategoryFromStringDSTypeCategoryHTTPDSTypeCategoryInvalidDSTypeClientSteeringDSTypeDNSDSTypeDNSLiveNationalDSTypeFromStringDSTypeHTTPDSTypeHTTPLiveNationalDSTypeSteeringDeepCachingTypeAlwaysDeepCachingTypeFromStringDeepCachingTypeInvalidDeepCachingTypeNeverDefaultHealthThresholdComparatorDefaultMaxRequestHeaderBytesDefaultRoutingNameDeleteUserResponseDeliveryServiceAcmeSSLKeysReqDeliveryServiceGenSSLKeysReqDeliveryServiceProfileTypeDeliveryServiceRequestCommentNullableDeliveryServiceRequestCommentV50DeliveryServiceRequestCommentsResponseV50DeliveryServiceRequestDetailsDeliveryServiceRequestRequestDeliveryServiceRequestResponseV4DeliveryServiceRequestV4DeliveryServiceRequestV5DeliveryServiceRequestsResponseV4DeliveryServiceSSLKeysV15DeliveryServiceSSLKeysV4DeliveryServiceSSLKeysV40DeliveryServiceSafeUpdateResponseDeliveryServiceSafeUpdateResponseV30DeliveryServiceSafeUpdateResponseV4DeliveryServiceServerResponseV5DeliveryServiceV31DeliveryServicesNullableResponseDeliveryServicesResponseV30DeliveryServicesResponseV4DeliveryServicesResponseV40DivisionNullableDivisionResponseDivisionResponseV5DivisionResponseV50DivisionV50DivisionsResponseV50DomainNullableDurationLiteralToSecondsElasticSearchProfileTypeEligibleEmailTemplateEmptyAddressCannotBeAServiceAddressErrorErrorConstantExcludeFromStringExcludeInvalidExcludeSeriesExcludeSummaryFederationDSPostFederationMappingFederationNullableFederationResolverResponseV5FederationResolverTypeFromStringFederationResolverTypeInvalidFederationResolversResponseV5FederationUserPostFormatForResponseGetDSTypeCategoryGetRenewalKidGetTenantsResponseV5GetTypeDataGetVIPInterfaceGlobalConfigFileNameHWInfoHWInfoResponseHealthDataHealthDataCacheGroupIAllFederationInfluxdbProfileTypeInfoLevelInterfaceInfoToLegacyInterfacesInvalidationJobCreateV40InvalidationJobV40InvalidationJobsResponseIsReservedStatusIsValidCacheTypeJobRequestJobRequestAPIJobRequestTimeFormatJobTimeFormatKafkaProfileTypeLegacyDeliveryServiceFederationResolverMappingRequestLegacyMonitorConfigValidLegacyStatsLegacyTMConfigResponseLegacyTrafficDSStatsSummaryLegacyTrafficMonitorConfigMapLegacyTrafficMonitorTransformToMapLetsEncryptAuthTypeLocalizationMethodCZLocalizationMethodDeepCZLocalizationMethodFromStringLocalizationMethodGeoLocalizationMethodInvalidLogV5LogsResponseV5LogstashProfileTypeMaxRangeSliceBlockSizeMaxTTLMessagesToStringMinRangeSliceBlockSizeMonitorProfilePrefixNeedsAtLeastOneIPErrorNeedsAtLeastOneServiceAddressErrorNewCRStatesNewLogCountRespNewTimeNoModNilTenantErrorOSVersionsResponseOrderableFromStringOriginDetailResponseV5OriginHeadersOriginLocationTypeOriginProfileTypeOriginsResponseV5ParamExistsParameterNameParameterNullableV5ParameterNullableV50ParametersResponseV5ParamsExistPermCDNLocksDeleteOthersPermICDNUCDNOverridePermParameterSecureReadPermSecureServerReadPhysLocationNullablePhysLocationNullableV5PhysLocationNullableV50PhysLocationResponsePhysLocationResponseV5PhysLocationResponseV50PhysLocationTrimmedPhysLocationV50PhysLocationsResponseV50PluginPluginsResponsePostParamProfileProfileExistsByIDProfileExistsByNameProfileNullableProfileParamV50ProfileParameterByNameProfileParameterByNamePostProfileParameterByNameV5ProfileParameterByNameV50ProfileParameterNullableProfileParameterPostRespProfileParameterPostRespObjProfileParameterResponseProfileParameterResponseV5ProfileParameterV50ProfileParametersAPIResponseV50ProfileParametersByNamePostProfileParametersNullableProfileParametersNullableResponseProfileParametersNullableV5ProfileParametersNullableV50ProfileParametersResponseProfileParametersResponseV5ProfileResponseProfilesExistByIDsProtocolFromStringProtocolHTTPandHTTPSProtocolHTTPtoHTTPSProtocolInvalidQStringIgnoreDropQStringIgnoreIgnoreInCacheKeyAndPassUpQueryStringIgnoreUseInCacheKeyAndPassUpRangeRequestHandlingDontCacheRefetchEnabledRefreshDNSSECKeysResponseRegionNameDivisionRegionNameResponseRegionsResponseV5RequestStatusCompleteRequestStatusDraftRequestStatusFromStringRequestStatusInvalidRequestStatusPendingRequestStatusRejectedRequestStatusSubmittedRequestStatusesReservedConsistentHashingQueryParameterFakeClientIPAddressReservedConsistentHashingQueryParameterFormatReservedConsistentHashingQueryParameterTRREDResultStatValRiakProfileTypeRoleResponseRoleResponseV4RoleV40RolesResponseRouterTypeNameRoutingSelfSignedCertAuthTypeServerCapabilitiesResponseV50ServerCapabilityDetailResponseV50ServerCapabilityV4ServerCapabilityV50ServerCheckColumnsServerCheckExtensionIDServerCheckExtensionPostResponseServerDetailV11ServerDetailV40ServerInfoServerNullableServerQueueUpdateRequestServerServerCapabilitiesResponseV5ServerStatsServerUpdateStatusResponseV4ServerUpdateStatusResponseV5ServerV4ServerV5ResponseServercheckServercheckPostServerchecksResponseServersDetailResponseServersResponseServersV1DetailResponseServersV3DetailResponseServersV4DetailResponseServiceCategoriesResponseV5ServiceCategoryResponseServiceCategoryResponseV5ServiceCategoryResponseV50ServiceCategoryV5SplunkProfileTypeStatNameBandwidthStatNameKBPSStatNameMaxKBPSStaticDNSEntriesResponseV5StaticDNSEntryNullableStaticDNSEntryV5StatsSummaryLastUpdatedAPIResponseV50StatsSummaryLastUpdatedV50StatsSummaryResponseV50StatsSummaryV50StatusChangeRequestStatusKeyStatusResponseStatusResponseV5StatusesResponseV5StatusesResponseV50SteeringTargetSteeringTypeSteeringTypeFromStringSteeringTypeGeoOrderSteeringTypeGeoWeightSteeringTypeInvalidSteeringTypeOrderSteeringTypeWeightStrToThresholdSuccessLevelSystemInfoTLSVersion10TLSVersion11TLSVersion12TLSVersion13TOExtensionIDTOExtensionNullableTOExtensionPostResponseTOExtensionResponseTenantDSUserNotAuthErrorTenantNullableTenantResponseV5TenantUserNotAuthErrorThresholdPrefixTimeLayoutTimeNoModFromTimeTimeOrderTimeStampTopologiesResponseV50TopologyNodeV50TopologyResponseV50TopologyV50TrafficCacheStatsConfigTrafficDSStatsConfigTrafficDSStatsResponseTrafficDSStatsSummaryTrafficMonitorNameTrafficMonitorProfileTypeTrafficMonitorTransformToMapTrafficPortalProfileTypeTrafficRouterProfileTypeTrafficStatsConfigTrafficStatsDurationPatternTrafficStatsExcludeTrafficStatsOrderableTrafficStatsProfileTypeTrafficStatsResponseTrafficStatsSeriesTrafficStatsSummaryTrafficStatsTotalStatsTypeNullableTypesResponseV5UnassignedUnkownProfileTypeUpdateServerPropertiesV40UpgradeToFederationResolverV5UseRevalPendingParameterNameUserCredentialsUserCurrentResponseUserInvalidationJobUserInvalidationJobInputUserPasswordResetRequestUserRegistrationRequestUserRegistrationRequestV4UserRegistrationRequestV40UserResponseUserResponseV4UserTokenUserV40UsersResponseV4InterfaceInfoToLegacyInterfacesV4InterfaceInfoToV3InterfacesValidJobRegexPrefixValidateJobUniquenessValidateTypeIDWarnLevelX_MM_CLIENT_IPalertLevelscheckNilOrEmptycompareJobdateFormatdsrStringhealthThresholdAvailableBandwidthInKbpshealthThresholdLoadAveragehealthThresholdQueryTimejsonScanlegacyLayoutnewerTLSVersionsDisallowedMessageparseTimeparseTimeV5tlsVersionsAlertstwoDaysvalidateProfileParamPostFieldsjson:"privateKey" db:"private_key"Urijson:"uri" db:"uri"json:"provider" db:"provider"aatovalidatevalidationgithub.com/apache/trafficcontrol/v8/lib/go-tc/tovalidate"github.com/apache/trafficcontrol/v8/lib/go-tc/tovalidate""github.com/go-ozzo/ozzo-validation"github.com/go-ozzo/ozzo-validation/is"github.com/go-ozzo/ozzo-validation/is"`json:"email" db:"email"``json:"privateKey" db:"private_key"``json:"uri" db:"uri"``json:"provider" db:"provider"`email"email"requiredRulemessageskipNilRequiredStringRulestringValidator"privateKey""uri"provider"provider"ToErrors AcmeAccount is the information needed to access an account with an ACME provider. Validate validates the AcmeAccount request is valid for creation or update.BuildTimestampjson:"buildTimestamp"DeployDirjson:"deploy-dir"json:"git-revision"CZCountjson:"czCount"GeoCountjson:"geoCount"DeepCZCountjson:"deepCzCount"MissCountjson:"missCount"DSRCountjson:"dsrCount"ErrCountjson:"errCount"StaticRouteCountjson:"staticRouteCount"FedCountjson:"fedCount"RegionalDeniedCountjson:"regionalDeniedCount"RegionalAlternateCountjson:"regionalAlternateCount"DNSMapHTTPMapAppjson:"app"json:"supplemental"json:"parameter" db:"parameter"json:"serverHostName" db:"serverhostname"json:"serverId" db:"serverid"json:"val" db:"val"APICacheControlMaxAgejson:"api.cache-control.max-age,omitempty"ConsistentDNSRoutingjson:"consistent.dns.routing,omitempty"CoverageZonePollingIntervalSecondsjson:"coveragezone.polling.interval,omitempty"json:"coveragezone.polling.url,omitempty"DNSSecDynamicResponseExpirationjson:"dnssec.dynamic.response.expiration,omitempty"DNSSecEnabledjson:"dnssec.enabled,omitempty"json:"domain_name,omitempty"FederationMappingPollingIntervalSecondsjson:"federationmapping.polling.interval,omitempty"FederationMappingPollingURLjson:"federationmapping.polling.url"GeoLocationPollingIntervaljson:"geolocation.polling.interval,omitempty"GeoLocationPollingURLjson:"geolocation.polling.url,omitempty"KeyStoreMaintenanceIntervalSecondsjson:"keystore.maintenance.interval,omitempty"NeustarPollingIntervalSecondsjson:"neustar.polling.interval,omitempty"NeustarPollingURLjson:"neustar.polling.url,omitempty"DNSSecInceptionSecondsjson:"dnssec.inception,omitempty"Ttlsjson:"weight,omitempty"ZoneManagerCacheMaintenanceIntervalSecondsjson:"zonemanager.cache.maintenance.interval,omitempty"ZoneManagerThreadpoolScalejson:"zonemanager.threadpool.scale,omitempty"json:"network,omitempty"json:"network6,omitempty"GetFirstIPAddressOfTypejson:"parameter" db:"parameter_id"CacheGroupParametersjson:"cachegroupParameters"json:"name" db:"id"db:"server"AAdb:"aa"ABdb:"ab"ACdb:"ac"ADdb:"ad"AEdb:"ae"AFdb:"af"AGdb:"ag"AHdb:"ah"AIdb:"ai"AJdb:"aj"AKdb:"ak"ALdb:"al"AMdb:"am"ANdb:"an"AOdb:"ao"APdb:"ap"AQdb:"aq"ARdb:"ar"ATdb:"at"AUdb:"au"AVdb:"av"AWdb:"aw"AXdb:"ax"AYdb:"ay"AZdb:"az"BAdb:"ba"BBdb:"bb"BCdb:"bc"BDdb:"bd"BEdb:"be"BFdb:"bf"json:"columns"json:"tags"json:"values"FormatTimestampsAveragejson:"average"FifthPercentilejson:"fifthPercentile"json:"max"json:"min"NinetyEighthPercentilejson:"ninetyEighthPercentile"NinetyFifthPercentilejson:"ninetyFifthPercentile"TotalKiloBytesjson:"totalKiloBytes"TotalTransactionsjson:"totalTransactions"Seriesjson:"series,omitempty"json:"summary,omitempty"json:"division"json:"coverageZones,omitempty"Iface10Gjson:"10G"Iface10G6json:"10G6"CDUjson:"CDU"CHRjson:"CHR"json:"DSCP"json:"FQDN"json:"ILO"json:"IPv4"json:"IPv6"json:"MTU"ORTjson:"ORT"RTRjson:"RTR"json:"checks"QueryParamsjson:"pp"DateStrjson:"email"urrjson:"dsId"ParamIDjson:"paramId"ProfileIDsjson:"profileIds"MetricTypeOrderByOffsetStringjson:"addressLine1"json:"addressLine2"json:"city"json:"company"ConfirmLocalPasswdjson:"confirmLocalPasswd"json:"country"json:"fullName"LocalPasswdjson:"localPasswd"json:"phoneNumber"json:"postalCode"json:"publicSshKey"json:"stateOrProvince"UnmarshalAndValidatejson:"expiration,omitempty"Sansjson:"sans,omitempty"UrgentjrDSIDsjson:"dsIds"json:"useInTable" db:"use_in_table"json:"cacheGroupId"  db:"cachegroup"json:"cachegroup,omitempty"json:"parameterId"  db:"parameter"json:"lastUpdated,omitempty"  db:"last_updated"Spanjson:"span"json:"time"json:"t"TotalBytesjson:"totalBytes"DSIdsjson:"urgent"IDsjson:"userIds"ToLegacyAgentjson:"agent"AssetTypejson:"assetType"EnteredTimejson:"enteredTime"ObjectNamejson:"objectName"ObjectTypejson:"objectType"validateAcmeSpecificFieldsjson:"contentType"Customerjson:"customer"DeliveryProtocoljson:"deliveryProtocol"HasNegativeCachingCustomizationjson:"hasNegativeCachingCustomization"HasOriginACLWhitelistjson:"hasOriginACLWhitelist"HasOriginDynamicRemapjson:"hasOriginDynamicRemap"HasSignedURLsjson:"hasSignedURLs"HeaderRewriteEdgejson:"headerRewriteEdge"HeaderRewriteMidjson:"headerRewriteMid"HeaderRewriteRedirectRouterjson:"headerRewriteRedirectRouter"MaxLibrarySizeEstimatejson:"maxLibrarySizeEstimate"NegativeCachingCustomizationNotejson:"negativeCachingCustomizationNote"Notesjson:"notes"json:"originHeaders"OriginTestFilejson:"originTestFile"OriginURLjson:"originURL"OtherOriginSecurityjson:"otherOriginSecurity"OverflowServicejson:"overflowService"PeakBPSEstimatejson:"peakBPSEstimate"PeakTPSEstimatejson:"peakTPSEstimate"json:"queryStringHandling"RateLimitingGBPSjson:"rateLimitingGBPS"RateLimitingTPSjson:"rateLimitingTPS"RoutingTypejson:"routingType"ServiceAliasesjson:"serviceAliases"ServiceDescjson:"serviceDesc"EmailTojson:"emailTo"Detailsjson:"details"NewLogCountjson:"newLogcount"ParametersNullablejson:"u"json:"p"StaticRoutejson:"staticRoute"Geojson:"geo"json:"err"Fedjson:"fed"CZjson:"cz"DeepCZjson:"deepCz"RegionalAlternatejson:"regionalAlternate"DSRjson:"dsr"Missjson:"miss"RegionalDeniedjson:"regionalDenied"TreeListNodeNodeTypePosPositiontext/template/parse.treetext/template/parse.writeToCopyListlexeritemitemTypelexOptionsemitCommentbreakOKcontinueOKleftDelimrightDelimatEOFparenDepthinsideActionoptionsbackupthisItememitemitItemacceptRunerrorfnextItematRightDelimatTerminatorscanNumberParseNamelexpeekCountvarstreeSetactionLinerangeDepthnewListnewTextnewCommentnewPipelinenewActionnewCommandnewVariablenewDotnewNilnewFieldnewChainnewBoolnewNumbernewEndnewElsenewIfnewBreaknewContinuenewRangenewWithnewTemplatebackup2backup3nextNonSpacepeekNonSpaceErrorContextexpectexpectOneOfunexpectedstartParsestopParseparseDefinitionitemListtextOrActionclearActionLinebreakControlcontinueControlpipelinecheckPipelineparseControlifControlrangeControlwithControlendControlelseControlblockControltemplateControlparseTemplateNameoperandtermhasFunctionpopVarsuseVaroptionmissingKeyActionmissingKeyFuncMapmuTmplmuFuncsparseFuncsexecFuncsExecuteTemplateExecuteexecuteDefinedTemplatesParseFilesParseGlobParseFSsetOptionAddParseTreeTemplatesDelimsassociatenameSpaceescaperurlPartjsCtxattrelementErrorCodejsBraceDeptheqmangleActionNodePipeNodeVariableNodeCommandNodeIsAssignDeclCmdsCopyPipeTemplateNodeTextNoderangeContextouterbreakscontinuesnsderivedcalledactionNodeEditstemplateNodeEditstextNodeEditsescapeescapeActionescapeBranchescapeListescapeListConditionallyescapeTemplateescapeTreecomputeOutCtxescapeTemplateBodyescapeTexteditActionNodeeditTemplateNodeeditTextNodearbitraryTemplateescapedescescapeErrcheckCanParselookupAndEscapeTemplatestateFnNilNodeChainNodeRangeNodeBranchNodeElseListCommentNodeStringNodeelseNodeendNodeFSWithNodeContinueNodeBoolNodeFieldNodeDotNodeNumberNodeIsIntIsUintIsFloatIsComplexComplex128simplifyComplexIfNodeBreakNode/Users/test/Desktop/trafficcontrol/lib/go-tc/alerts.gomessagesatalrtalertStrs`json:"level"``json:"alerts"` Alert represents an informational message, typically returned through the Traffic Ops API. Text is the actual message being conveyed. Level describes what kind of message is being relayed. In practice, it should be the string representation of one of ErrorLevel, WarningLevel, InfoLevel or SuccessLevel. Alerts is merely a collection of arbitrary "Alert"s for ease of use in other structures, most notably those used in Traffic Ops API responses. CreateErrorAlerts creates and returns an Alerts structure filled with ErrorLevel-level "Alert"s using the errors to provide text. CreateAlerts creates and returns an Alerts structure filled with "Alert"s that are all of the provided level, each having one of messages as text in turn. ToStrings converts Alerts to a slice of strings that are their messages. Note that this return value doesn't contain their Levels anywhere. AddNewAlert constructs a new Alert with the given Level and Text and appends it to the Alerts structure. AddAlert appends an alert to the Alerts structure. AddAlerts appends all of the "Alert"s in the given Alerts structure to this Alerts structure. HasAlerts returns if the Alerts contains any "alert"s. ErrorString concatenates any and all Error-Level alerts in the Alerts to make one string representative of any reported errors. StatusKey holds the text of the status key of a Request Context./Users/test/Desktop/trafficcontrol/lib/go-tc/api_capabilities.go`json:"id" db:"id"``json:"httpMethod" db:"http_method"``json:"httpRoute" db:"route"``json:"capability" db:"capability"``json:"lastUpdated" db:"last_updated"` APICapability represents an association between a Traffic Ops API route and a required capability. APICapabilityResponse represents an HTTP response to an API Capability request./Users/test/Desktop/trafficcontrol/lib/go-tc/asns.go`json:"asn" db:"asn"``json:"cachegroup" db:"cachegroup"``json:"cachegroupId" db:"cachegroup_id"``json:"asns"` ASNsResponse is a list of ASNs (Autonomous System Numbers) as a response. swagger:response ASNsResponse in: body ASNResponse is a single ASN response for Update and Create to depict what changed. swagger:response ASNResponse ASNsResponseV5 is an alias for the list of ASN struct response used for the latest minor version associated with api major version 5. ASNsResponseV50 is a list of ASNs (Autonomous System Numbers) as a response. ASNResponseV5 is an alias for the ASN struct response used for the latest minor version associated with api major version 5. ASNResponseV50 is a single ASN response for Update and Create to depict what ASN contains info relating to a single Autonomous System Number (see RFC 1930). The ASN to retrieve Autonomous System Numbers per APNIC for identifying a service provider required: true Related cachegroup name Related cachegroup id ID of the ASN LastUpdated ASNNullable contains info related to a single Autonomous System Number (see RFC 1930). Unlike ASN, ASNNullable's fields are nullable. ASNsV11 is used for the Traffic OPS API version 1.1, which lists ASNs (Autonomous System Numbers) under its own key in the response and does not validate structure. The Traffic Ops API uses its own TOASNV11 instead. ASNV5 is an alias for the ASN struct response used for the latest minor version associated with api major version 5. ASNV50 is used for RFC3339 format timestamp/Users/test/Desktop/trafficcontrol/lib/go-tc/async_status.go`json:"id,omitempty" db:"id"``json:"status,omitempty" db:"status"``json:"start_time,omitempty" db:"start_time"``json:"end_time,omitempty" db:"end_time"``json:"message,omitempty" db:"message"` AsyncStatus represents an async job status. Id is the integral, unique identifier for the asynchronous job status. Status is the status of the asynchronous job. This will be PENDING, SUCCEEDED, or FAILED. StartTime is the time the asynchronous job was started. EndTime is the time the asynchronous job completed. This will be null if it has not completed yet. Message is the message about the job status. AsyncStatusResponse represents the response from the GET /async_status/{id} API./Users/test/Desktop/trafficcontrol/lib/go-tc/cachegroup_parameter_associations.gocgResp`json:"cachegroupParameters"``json:"cacheGroupId"  db:"cachegroup"``json:"cachegroup,omitempty"``json:"parameterId"  db:"parameter"``json:"lastUpdated,omitempty"  db:"last_updated"``json:"cachegroup"  db:"cachegroup"``json:"parameter"  db:"parameter"``json:"last_updated,omitempty"  db:"last_updated"` AllCacheGroupParametersResponse is a Cache Group Parameter response body. Deprecated: Cache Group Parameter associations have been removed in APIv4. CacheGroupParametersList is the type of the `response` property of Traffic Ops's responses to its /cachegroupparameters API endpoint. CacheGroupParametersNullable is the type of a response from Traffic Ops to a POST request made to its /cachegroupparameters API endpoint. CacheGroupParametersResponseNullable is the type of each entry in the `cachegroupParameters` property of the response from Traffic Ops to requests made to its /cachegroupparameters endpoint. FormatForResponse converts a CacheGroupParametersNullable to CacheGroupParametersResponseNullable in order to format the output the same as the Perl endpoint./Users/test/Desktop/trafficcontrol/lib/go-tc/cachegroup_parameters.go`json:"cacheGroupId"``json:"parameterId"``json:"configFile"``json:"id"``json:"lastUpdated"``json:"configFile" db:"config_file"``json:"name" db:"name"``json:"secure" db:"secure"``json:"value" db:"value"` CacheGroupParameterRequest is a Cache Group Parameter request body. CacheGroupParametersPostResponse Response body when Posting to associate a Parameter with a Cache Group. CacheGroupParametersResponse is a Cache Group Parameter response body. A CacheGroupParameter is an object that represents a Parameter, but also implies that it is associated with a Cache Group rather than (or in addition to) a Profile. A CacheGroupParameterNullable is an object that represents a Parameter, but also implies that it is associated with a Cache Group rather than (or in addition to) a Profile. The only substantial difference between this and a CacheGroupParameter is that Go client methods unmarshal Traffic Ops responses into a CacheGroupParameter, while those responses are generated by marshalling data stored in CacheGroupParameterNullables./Users/test/Desktop/trafficcontrol/lib/go-tc/cachegroups.go`json:"shortName" db:"short_name"``json:"latitude" db:"latitude"``json:"longitude" db:"longitude"``json:"parentCachegroupName" db:"parent_cachegroup_name"``json:"parentCachegroupId" db:"parent_cachegroup_id"``json:"secondaryParentCachegroupName" db:"secondary_parent_cachegroup_name"``json:"secondaryParentCachegroupId" db:"secondary_parent_cachegroup_id"``json:"fallbackToClosest" db:"fallback_to_closest"``json:"localizationMethods" db:"localization_methods"``json:"typeName" db:"type_name"``json:"typeId" db:"type_id"``json:"fallbacks" db:"fallbacks"``json:"cdnId"` CacheGroupsResponse is a list of CacheGroups as a response. CacheGroupsNullableResponse is a response with a list of CacheGroupNullables. Traffic Ops API responses instead uses an interface hold a list of TOCacheGroups. CacheGroupDetailResponse is the JSON object returned for a single Cache Group. CacheGroup contains information about a given cache group in Traffic Ops. aliased to type_name to disambiguate struct scans due to join on 'type' table aliased to type_id to disambiguate struct scans due join on 'type' table CacheGroupNullable contains information about a given cache group in Traffic Ops. Unlike CacheGroup, CacheGroupNullable's fields are nullable. CachegroupTrimmedName is useful when the only info about a cache group you want to return is its name. CachegroupQueueUpdatesRequest holds info relating to the cachegroups/{{ID}}/queue_update TO route. CacheGroupsResponseV50 is a list of CacheGroups as a response. CacheGroupsNullableResponseV50 is a response with a list of CacheGroupNullables. CacheGroupDetailResponseV50 is the JSON object returned for a single Cache Group. CacheGroupV50 contains information about a given cache group in Traffic Ops. CacheGroupNullableV50 contains information about a given cache group in Traffic Ops. CachegroupTrimmedNameV50 is useful when the only info about a cache group you CachegroupQueueUpdatesRequestV50 holds info relating to the CacheGroupsResponseV5 is the type of response from the cachegroups Traffic Ops endpoint. It always points to the type for the latest minor version of CacheGroupsResponseV5x APIv5. CacheGroupsNullableResponseV5 is the type of response from the cachegroups It always points to the type for the latest minor version of CacheGroupsNullableResponseV5x APIv5. CacheGroupDetailResponseV5 is the type of response from the cachegroups It always points to the type for the latest minor version of CacheGroupDetailResponseV5x APIv5. CacheGroupV5 always points to the type for the latest minor version of CacheGroupV5x APIv5. CacheGroupNullableV5 always points to the type for the latest minor version of CacheGroupNullableV5x APIv5. CachegroupTrimmedNameV5 always points to the type for the latest minor version of CachegroupTrimmedNameV5x APIv5. CachegroupQueueUpdatesRequestV5 is the type of request to the cachegroups It always points to the type for the latest minor version of CachegroupQueueUpdatesRequestV5x APIv5./Users/test/Desktop/trafficcontrol/lib/go-tc/capabilities.go`json:"description" db:"description"` Capability reflects the ability of a user in ATC to perform some operation. In practice, they are assigned to relevant Traffic Ops API endpoints - to describe the capabilities of said endpoint - and to user permission Roles - to describe the capabilities afforded by said Role. Note that enforcement of Capability-based permissions is not currently implemented. CapabilitiesResponse models the structure of a minimal response from the Capabilities API in Traffic Ops./Users/test/Desktop/trafficcontrol/lib/go-tc/cdn_lock.go`json:"userName" db:"username"``json:"cdn" db:"cdn"``json:"message" db:"message"``json:"soft" db:"soft"``json:"sharedUserNames" db:"shared_usernames"` CDNLock is a struct to store the details of a lock that a user wishes to acquire on a CDN. CDNLockCreateResponse is a struct to store the response of a CREATE operation on a lock. CDNLocksGetResponse is a struct to store the response of a GET operation on locks. CDNLockDeleteResponse is a struct to store the response of a DELETE operation on a lock./Users/test/Desktop/trafficcontrol/lib/go-tc/cdn_notification.go`json:"notification"``json:"notification" db:"notification"``json:"user" db:"user"`notification"notification" CDNNotificationsResponse is a list of CDN notifications as a response. CDNNotificationRequest encodes the request data for the POST cdn_notifications endpoint. CDNNotification is a notification created for a specific CDN. Validate validates the CDNNotificationRequest request is valid for creation./Users/test/Desktop/trafficcontrol/lib/go-tc/cdns.go`json:"dnssecEnabled" db:"dnssec_enabled"``json:"domainName" db:"domain_name"``json:"ttlOverride,omitempty" db:"ttl_override"``json:"deliveryservice"``json:"certificate"``json:"hostname"``json:"crt"``json:"key"`SELECT EXISTS(SELECT * FROM cdn WHERE name = $1)`SELECT EXISTS(SELECT * FROM cdn WHERE name = $1)` CDNsV5Response is a list of CDNs as a response. swagger:response CDNsResponse CDNsResponse is a list of CDNs as a response. CDNResponse is a single CDN response for Update and Create to depict what swagger:response CDNResponse A CDNV5 represents a set of configuration and hardware that can be used to serve content within a specific top-level domain. The CDN to retrieve enables Domain Name Security Extensions on the specified CDN DomainName of the CDN ID of the CDN Name of the CDN TTLOverride A CDN represents a set of configuration and hardware that can be used to CDNNullable is identical to CDN except that its fields are reference values, which allows them to be nil. CDNSSLKeysResponse is the structure of the Traffic Ops API's response to requests made to its /cdns/name/{{name}}/sslkeys endpoint. CDNSSLKeys is an SSL key/certificate pair for a certain Delivery Service. CDNSSLKeysCertificate is an SSL key/certificate pair. CDNConfig includes the name and ID of a single CDN configuration. CDNExistsByName returns whether a cdn with the given name exists, and any error. TODO move to helper package. CDNQueueUpdateRequest encodes the request data for the POST cdns/{{ID}}/queue_update endpoint. CDNQueueUpdateResponse encodes the response data for the POST/Users/test/Desktop/trafficcontrol/lib/go-tc/cdns_dnssec.godioldPerlUIDateFormatoldPortalDateFormatvalidateErrsksk"ksk"zsk"zsk""new""expired"existing"existing"`json:"zsk"``json:"ksk"``json:"dsRecord,omitempty"``json:"inceptionDate"``json:"expirationDate"``json:"ttl,string"``json:"effectiveDate"``json:"public"``json:"private"``json:"algorithm,string"``json:"digestType,string"``json:"digest"`2006-01-02 15:04:05`2006-01-02 15:04:05`2006-01-02+15:04:05`2006-01-02+15:04:05`empty object"empty object"invalid date"invalid date"`json:"ttl"``json:"kskExpirationDays"``json:"zskExpirationDays"`key (CDN name)"key (CDN name)"notNilRuleNotNil"ttl"kskExpirationDays"kskExpirationDays"zskExpirationDays"zskExpirationDays" Types of keys used in DNSSEC and stored in Traffic Vault. Key-signing key. Zone-signing key. The various allowable statuses for DNSSEC keys being inserted into or retrieved from Traffic Vault. CDNDNSSECKeysResponse is the type of a response from Traffic Ops to GET requests made to its /cdns/name/{{name}}/dnsseckeys API endpoint. GenerateCDNDNSSECKeysResponse is the type of a response from Traffic Ops to requests made to its /cdns/dnsseckeys/generate and /cdns/dnsseckeys/ksk/generate API endpoints. DeleteCDNDNSSECKeysResponse is the type of a response from Traffic Ops to DELETE requests made to its /cdns/name/{{name}}/dnsseckeys API endpoint. RefreshDNSSECKeysResponse is the type of a response from Traffic Ops to requests made to its /cdns/dnsseckeys/refresh API endpoint. DNSSECKeys is the DNSSEC keys as stored in Traffic Vault, plus the DS record text. DNSSECKeysRiak is the structure in which DNSSECKeys are stored in the Riak backend for Traffic Vault. Deprecated: use DNSSECKeysTrafficVault instead. A DNSSECKeysTrafficVault is a mapping of CDN Names and/or Delivery Service XMLIDs to sets of keys used for DNSSEC with that CDN or Delivery Service. DNSSECKeysV11 is the DNSSEC keys object stored in Traffic Vault. The map key strings are both DeliveryServiceNames and CDNNames. A DNSSECKeySet is a set of keys used for DNSSEC zone and key signing. DNSSECKeySetV11 is a DNSSEC key set (ZSK and KSK), as stored in Traffic Vault. This is specifically the key data, without the DS record text (which can be computed), and was also the format used in API 1.1 through 1.3. A DNSSECKey is a DNSSEC Key (Key-Signing or Zone-Signing) and all associated data - computed data as well as data that is actually stored by Traffic A DNSSECKeyV11 represents a DNSSEC Key (Key-Signing or Zone-Signing) as it appeared in Traffic Ops API version 1.1. This structure still exists because it is used by modern structures, but in general should not be used on its own, and github.com/apache/trafficcontrol/v8/lib/go-tc.DNSSECKey should usually DNSSECKeyDSRecordRiak is a DNSSEC key DS record, as stored in Riak. This is specifically the key data, without the DS record text (which can be computed), and is also the format used in API 1.1 through 1.3. DNSSECKeyDSRecord structures are used by the Traffic Ops API after version 1.1, and they contain all the same information as well as an additional "Text" property of unknown purpose. DNSSECKeyDSRecordV11 structures contain meta information for Key-Signing DNSSEC Keys (KSKs) used by Delivery Services. CDNDNSSECGenerateReqDate is the date accepted by CDNDNSSECGenerateReq. This will unmarshal a UNIX epoch integer, a RFC3339 string, the old format string used by Perl '2018-08-21+14:26:06', and the old format string sent by the Portal '2018-08-21 14:14:42'. This exists to fix a critical bug, see https://github.com/apache/trafficcontrol/issues/2723 - it SHOULD NOT be used by any other endpoint. strip JSON quotes, to accept the UNIX epoch as a string or number A CDNDNSSECGenerateReq is the structure used to request generation of CDN DNSSEC Keys through the Traffic Ops API's /cdns/dnsseckeys/generate endpoint. Key is the CDN name, as documented in the API documentation. Validate implements the github.com/apache/trafficcontrol/v8/traffic_ops/traffic_ops_golang/api.ParseValidator interface. effective date is optional/Users/test/Desktop/trafficcontrol/lib/go-tc/constants.gotenancy is enabled but request tenantID is nil"tenancy is enabled but request tenantID is nil"user not authorized for requested tenant"user not authorized for requested tenant"user not authorized for requested delivery service tenant"user not authorized for requested delivery service tenant"both IP and IP6 addresses are empty"both IP and IP6 addresses are empty"an empty IP or IPv6 address cannot be marked as a service address"an empty IP or IPv6 address cannot be marked as a service address"at least one address must be marked as a service address"at least one address must be marked as a service address""warning""error"from_cachegroup_"from_cachegroup_"PARAMETER:SECURE-READ"PARAMETER:SECURE-READ"SECURE-SERVER:READ"SECURE-SERVER:READ"CDN-LOCK:DELETE-OTHERS"CDN-LOCK:DELETE-OTHERS"ICDN:UCDN-OVERRIDE"ICDN:UCDN-OVERRIDE" ErrorConstant is used for error messages. Note that the ErrorConstant constants exported by this package most usually are values that have the same string value as an error-level Alert returned by the Traffic Ops API. Because those are arising from Alerts, one cannot actually use e.g. err == TenantUserNotAuthError or even errors.Is(err, TenantUserNotAuthError) to check for equivalence with these exported errors. Because of this, the use of these constants outside of Traffic Ops-internal code is discouraged, and these constants may be moved into that package (or a sub-package thereof) at some point in the future. Error converts ErrorConstants to a string. NilTenantError can used when a Tenantable object finds that TentantID in the request is nil. TenantUserNotAuthError is used when a user does not have access to a requested resource tenant. TenantDSUserNotAuthError is used when a user does not have access to a requested resource tenant for a delivery service. NeedsAtLeastOneIPError is the client-facing error returned from the Traffic Ops API's /servers endpoint when the client is attempting to update or create a server without an IPv4 or IPv6 address. Deprecated: This error's wording is only used in a deprecated version of the API. EmptyAddressCannotBeAServiceAddressError is the client-facing error returned from the Traffic Ops API's /servers endpoint when the client is attempting to update or create a server that has an IP address marked as the "service address" which was not provided in the request (although the other address family address may have been provided). NeedsAtLeastOneServiceAddressError is the client-facing error returned from the Traffic Ops API's /servers endpoint when the client is attempting to update or create a server without an IP address marked as its "service address". AlertLevel is used for specifying or comparing different levels of alerts. SuccessLevel indicates that an action is successful. InfoLevel indicates that the message is supplementary and is not directly the result of the user's request. WarnLevel indicates dangerous but non-failing conditions. ErrorLevel indicates that the request failed. String returns the string representation of an AlertLevel. CachegroupCoordinateNamePrefix is a string that all cache group coordinate names are prefixed with. PermParameterSecureRead is a string representing the permission to be able to read secure parameters. PermSecureServerRead is a string representing the permission to be able to read secure server properties. PermCDNLocksDeleteOthers is a string representing the permission to be able to delete other users' CDN locks. PermICDNUCDNOverride is a string representing the permission to be able to override the ucdn parameter./Users/test/Desktop/trafficcontrol/lib/go-tc/coordinates.go CoordinatesResponse is a list of Coordinates as a response. Deprecated: In newer API versions, coordinates are represented by the CoordinatesResponseV5 structures. swagger:response CoordinatesResponse CoordinateResponse is a single Coordinate response for Update and Create to depict what changed. CoordinateResponseV5 structures. swagger:response CoordinateResponse Coordinate is a representation of a Coordinate as it relates to the Traffic Ops data model. CoordinateV5 structures. The Coordinate to retrieve ID of the Coordinate Name of the Coordinate the latitude of the Coordinate CoordinateNullable is identical to Coordinate except that its fields are reference values, which allows them to be nil. CoordinateV5 is the representation of a Coordinate used in the latest minor version of APIv5. CoordinateV50 is the representation of a Coordinate used in API v5.0. The integral, unique identifier of a Coordinate. The Coordinate's name. The latitude of the Coordinate. The longitude of the Coordinate. The time and date at which the Coordinate was last modified. CoordinateResponseV5 is the type of a response from the /coordinates endpoint in the latest minor version of APIv5. CoordinatesResponseV5 is the type of a response from the /coordinates endpoint in the latest minor version of APIv5./Users/test/Desktop/trafficcontrol/lib/go-tc/crconfig.go`json:"config,omitempty"``json:"contentServers,omitempty"``json:"contentRouters,omitempty"``json:"deliveryServices,omitempty"``json:"edgeLocations,omitempty"``json:"trafficRouterLocations,omitempty"``json:"monitors,omitempty"``json:"stats,omitempty"``json:"api.cache-control.max-age,omitempty"``json:"consistent.dns.routing,omitempty"``json:"coveragezone.polling.interval,omitempty"``json:"coveragezone.polling.url,omitempty"``json:"dnssec.dynamic.response.expiration,omitempty"``json:"dnssec.enabled,omitempty"``json:"domain_name,omitempty"``json:"federationmapping.polling.interval,omitempty"``json:"federationmapping.polling.url"``json:"geolocation.polling.interval,omitempty"``json:"geolocation.polling.url,omitempty"``json:"keystore.maintenance.interval,omitempty"``json:"neustar.polling.interval,omitempty"``json:"neustar.polling.url,omitempty"``json:"soa,omitempty"``json:"dnssec.inception,omitempty"``json:"ttls,omitempty"``json:"weight,omitempty"``json:"zonemanager.cache.maintenance.interval,omitempty"``json:"zonemanager.threadpool.scale,omitempty"`tld.ttls.SOA"tld.ttls.SOA"tld.ttls.NS"tld.ttls.NS"`json:"A,omitempty"``json:"AAAA,omitempty"``json:"DNSKEY,omitempty"``json:"DS,omitempty"``json:"NS,omitempty"``json:"SOA,omitempty"``json:"api.port,omitempty"``json:"fqdn,omitempty"``json:"httpsPort"``json:"hashCount,omitempty"``json:"ip,omitempty"``json:"ip6,omitempty"``json:"location,omitempty"``json:"port,omitempty"``json:"profile,omitempty"``json:"secure.api.port,omitempty"``json:"status,omitempty"``json:"cacheGroup,omitempty"``json:"capabilities,omitempty"``json:"hashId,omitempty"``json:"httpsPort,omitempty"``json:"interfaceName"``json:"locationId,omitempty"``json:"type,omitempty"``json:"routingDisabled"``json:"anonymousBlockingEnabled,omitempty"``json:"bypassDestination,omitempty"``json:"consistentHashQueryParams,omitempty"``json:"consistentHashRegex,omitempty"``json:"coverageZoneOnly,string"``json:"deepCachingType"``json:"dispersion,omitempty"``json:"domains,omitempty"``json:"ecsEnabled,string,omitempty"``json:"geoEnabled,omitempty"``json:"geoLimitRedirectURL,omitempty"``json:"geolocationProvider,omitempty"``json:"ip6RoutingEnabled,string,omitempty"``json:"matchsets,omitempty"``json:"maxDnsIpsForLocation,omitempty"``json:"missLocation,omitempty"``json:"protocol,omitempty"``json:"regionalGeoBlocking,omitempty"``json:"requestHeaders,omitempty"``json:"requiredCapabilities,omitempty"``json:"responseHeaders,omitempty"``json:"routingName,omitempty"``json:"sslEnabled,string"``json:"staticDnsEntries,omitempty"``json:"topology,omitempty"``json:"ttl,omitempty"``json:"nodes"``json:"countryCode"``json:"type"``json:"cname,omitempty"``json:"limit"``json:"shuffled,string"``json:"fallbackToClosest,string"``json:"list,omitempty"``json:"latitude"``json:"longitude"``json:"backupLocations,omitempty"``json:"localizationMethods,omitempty"``json:"lat"``json:"long"``json:"acceptHttp,string,omitempty"``json:"acceptHttps,string"``json:"redirectToHttps,string"``json:"CDN_name,omitempty"``json:"date,omitempty"``json:"tm_host,omitempty"``json:"tm_path,omitempty"``json:"tm_user,omitempty"``json:"tm_version,omitempty"``json:"response,omitempty"` CRConfig is JSON-serializable as the CRConfig used by Traffic Control. Config is mostly a map of string values, but may contain an 'soa' key which is a map[string]string, and may contain a 'ttls' key with a value map[string]string. It might not contain these values, so they must be checked for, and all values must be checked by the user and an error returned if the type is unexpected. Be aware, neither the language nor the API provides any guarantees about the type! CRConfigConfig used to be the type of CRConfig's Config field, though CRConfigConfig is no longer used. CRConfigTTL defines the Time-To-Live (TTL) of various record types served by Traffic Router. Each TTL given is an optional field containing a number of seconds encoded as a string. If a field is nil, the CRConfigTTL is instructing Traffic Router to use its configured default for records of that type. A records AAAA records DNSKEY records DS records NS records SOA records CRConfigRouterStatus is the name of the Status of a Traffic Router server object. This is only used in the context of CDN Snapshots, and has no special nuance or behavior not afforded to a regular string - so in general it is suggested that a string be used instead where possible, to keep compatibility with Server/ServerV4/ServerNullable etc. structures. CRConfigRouter represents a Traffic Router as defined within a CDN Snapshot, named with "CRConfig" for legacy reasons. CRConfigServerStatus is the name of the Status of a server object. This is only used in the context of CDN Snapshots, and has no special nuance or behavior not afforded to a regular string - so in general it is suggested that a string be used instead where possible, to keep compatibility with Server/ServerV4/ServerNullable etc. structures. CRConfigTrafficOpsServer represents a Traffic Ops instance as defined within a CDN Snapshot, named with "CRConfig" for legacy reasons. CRConfigDeliveryService represents a Delivery Service as they appear in CDN Snapshots, named with "CRConfig" for legacy reasons. CRConfigTopology is the format in which Topologies are represented in a CDN Snapshot, named with "CRConfig" for legacy reasons. CRConfigTopology structures do not include the Topologies' Names, because in a CDN Snapshot they are stored in a mapping of their Names to this CRConfigGeoEnabled is a structure that contains information describing a geographical location allowed to access a Delivery Service's content, named with "CRConfig" for legacy reasons. Presently, each CRConfigGeoEnabled in a CDN Snapshot's Delivery Service's GeoEnabled property is a single entry in the underlying, actual Delivery Service's Geo Limit Countries array. CRConfigStaticDNSEntry structures encode a Static DNS Entry for a Delivery Service in a CDN Snapshot, named with "CRConfig" for legacy reasons. CRConfigBypassDestination is a network location to which excess traffic requesting a Delivery Service's content will be directed when the Service's ability to deliver content is deemed to be saturated, named with "CRConfig" for legacy reasons. This is generated based on the Delivery Service's Type (specifically whether it is DNS-routed or HTTP-routed) and its HTTP Bypass FQDN, DNS Bypass CNAME, DNS Bypass IP, DNS Bypass IPv6, and DNS Bypass TTL properties. only used by DNS DSes only used by HTTP DSes CRConfigDispersion defines for a Delivery Service appearing in a CDN Snapshot the number of cache servers to which its content is initially distributed, named with "CRConfig" for legacy reasons. This is generated from a Delivery Service's Initial Dispersion property. CRConfigBackupLocations defines how a Traffic Router should handle traffic normally bound for a given CRConfigLatitudeLongitude in the event that said CRConfigLatitudeLongitude becomes unavailable, named with "CRConfig" for legacy reasons. CRConfigLatitudeLongitude structures are geographical locations for routing purpose that can contain either edge-tier cache servers or Traffic Routers (but not a mixture of both), named with "CRConfig" for legacy reasons. In general, any given CRConfigLatitudeLongitude represents a Cache Group object. CRConfigLatitudeLongitudeShort is a geographical location where clients will be assumed to be located if determining their location fails (a "Geo Miss"), These are generated for Delivery Services in CDN Snapshots from their Geo Miss Default Latitude and Geo Miss Default Longitude properties. CRConfigDeliveryServiceProtocol is used in CDN Snapshots to define the protocols used to access Delivery Service content, named with "CRConfig" for This is generated for Delivery Services based on their Protocol property. CRConfigMonitor structures are used in CDN Snapshots to represent Traffic Monitors, named with "CRConfig" for legacy reasons. CRConfigStats is the type of the 'stats' property of a CDN Snapshot. Deprecated: Don't ever use this for anything. It's been removed from APIv4 responses. SnapshotResponse is the type of the response of Traffic Ops to requests for CDN Snapshots. PutSnapshotResponse is the type of the response of Traffic Ops to requests for *making* CDN Snapshots./Users/test/Desktop/trafficcontrol/lib/go-tc/crsstats.go`json:"app"``json:"buildTimestamp"``json:"deploy-dir"``json:"git-revision"``json:"czCount"``json:"geoCount"``json:"deepCzCount"``json:"missCount"``json:"dsrCount"``json:"errCount"``json:"staticRouteCount"``json:"fedCount"``json:"regionalDeniedCount"``json:"regionalAlternateCount"``json:"staticRoute"``json:"geo"``json:"err"``json:"fed"``json:"cz"``json:"deepCz"``json:"regionalAlternate"``json:"dsr"``json:"miss"``json:"regionalDenied"` CRSStats is the returned data from TRs stats endpoint. CRSStatsApp represents metadata about a given TR. CRSStatsStats represents stats about a given TR. CRSStatsStat represents an individual stat. Routing represents the aggregated routing percentages across CDNs or for a DS./Users/test/Desktop/trafficcontrol/lib/go-tc/crstates.gocacheCapstatescrStates`json:"caches"``json:"deliveryServices"``json:"disabledLocations"``json:"isAvailable"``json:"ipv4Available"``json:"ipv6Available"``json:"-"``json:"lastPoll"` CRStates includes availability data for caches and delivery services, as gathered and aggregated by this Traffic Monitor. It is designed to be served at an API endpoint primarily for Traffic Routers (Content Router) to consume. CRStatesDeliveryService contains data about the availability of a particular delivery service, and which caches in that delivery service have been marked as unavailable. IsAvailable contains whether the given cache or delivery service is available. It is designed for JSON serialization, namely in the Traffic Monitor 1.0 API. NewCRStates creates a new CR states object, initializing pointer members. Copy creates a deep copy of this object. It does not mutate, and is thus safe for multiple goroutines. CopyDeliveryServices creates a deep copy of the delivery service availability data. It does not mutate, and is thus safe for multiple goroutines. CopyCaches creates a deep copy of the cache availability data. It does not mutate, and is thus safe for multiple goroutines. CRStatesMarshall serializes the given CRStates into bytes. CRStatesUnMarshall takes bytes of a JSON string, and unmarshals them into a CRStates object./Users/test/Desktop/trafficcontrol/lib/go-tc/deliveryservice_regexes.go`json:"regexes"``json:"dsName"``json:"setNumber"``json:"pattern"``json:"typeName"` DeliveryServiceRegexResponse is the type of a Traffic Ops API response to the /deliveryservices_regexes endpoint - in all API verions (at the time of this writing). DeliveryServiceRegexes structures associate a set of Delivery Service Regular Expressions (Delivery Service "Regexes") with a particular Delivery The XMLID of the Delivery Service to which the Regexes belong - NOT its Display Name. DeliveryServiceRegex is a regular expression used for routing to a Delivery DeliveryServiceIDRegexResponse is a list of DeliveryServiceIDRegexes. DeliveryServiceIDRegex holds information relating to a single routing regular expression of a delivery service, e.g., one of those listed at the deliveryservices/{{ID}}/regexes TO API route. DeliveryServiceRegexesTest is used to represent the entire deliveryservice_regex for testing. This is ONLY meant to be used by testing code internal to ATC, do NOT use this to represent real CDN objects of any kind. DeliveryServiceRegexPost holds all of the information necessary to create a new routing regular expression for a delivery service./Users/test/Desktop/trafficcontrol/lib/go-tc/deliveryservice_request_comments.go`json:"authorId" db:"author_id"``json:"author"``json:"deliveryServiceRequestId" db:"deliveryservice_request_id"``json:"xmlId" db:"xml_id"` DeliveryServiceRequestCommentV5 is a Delivery Service Request Comment as it appears in version 5 of the Traffic Ops API - it always points to the highest minor version in APIv5. DeliveryServiceRequestCommentV50 is a struct containing the fields for a delivery service request comment, for API version 5.0. DeliveryServiceRequestCommentsResponseV5 is a Delivery Service Request Comment Response as it appears in version 5 of the Traffic Ops API - it always points to the highest minor version in APIv5. DeliveryServiceRequestCommentsResponseV50 is a list of DeliveryServiceRequestCommentsV5 as a response, for API version 5.0. DeliveryServiceRequestCommentsResponse is a list of DeliveryServiceRequestComments as a response. DeliveryServiceRequestComment is a struct containing the fields for a delivery service request comment. DeliveryServiceRequestCommentNullable is a nullable struct containing the fields for a delivery service request comment./Users/test/Desktop/trafficcontrol/lib/go-tc/deliveryservice_requests.godetailsdsrV4origrequestedupgradedctctStrdsV4downgradedassigneeassigneeIDauthorIDbuilderchangeTypelastEditedBylastEditedByIDstructNamedriverdatabase/sql/driver"database/sql/driver"html/template"html/template"MustEmail Template"Email Template"<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8"/>
<title>Delivery Service Request for {{.Customer}}</title>
<style>
aside {
	padding: 0 1em;
	color: #6A737D;
	border-left: .25em solid #DFE2E5;
}
body {
	font-family: sans;
	background-color: white;
}
pre {
	padding: 5px;
	background-color: lightgray;
}
</style>
</head>
<body>
<h1>Delivery Service Request for {{.Customer}}</h1>
<p>{{.ServiceDesc}}</p>
<section>
	<details>
		<summary><h2>Service Description</h2></summary>
		<h3>Content Type</h3>
		<p>{{.ContentType}}</p>
		<h3>Delivery Protocol</h3>
		<p>{{.DeliveryProtocol.String}}</p>
		<h3>Routing Type</h3>
		<p>{{.RoutingType.String}}</p>
	</details>
</section>
<section>
	<details>
		<summary><h2>Traffic &amp; Library Estimates</h2></summary>
		<h3>Peak Bandwidth Estimate</h3>
		<p>{{.PeakBPSEstimate}}Bps</p>
		<h3>Peak Transactions per Second Estimate</h3>
		<p>{{.PeakTPSEstimate}}Tps</p>
		<h3>Max Library Size Estimate</h3>
		<p>{{.MaxLibrarySizeEstimate}}GB</p>
	</details>
</section>
<section>
	<details>
		<summary><h2>Origin Security</h2></summary>
		<h3>Origin Server URL</h3>
		<p><a href="{{.OriginURL}}">{{.OriginURL}}</a></p>
		<h3>Origin Dynamic Remap</h3>
		<p>{{.HasOriginDynamicRemap}}</p>
		<h3>Origin Test File</h3>
		<p>{{.OriginTestFile}}</p>
		<h3>ACL/Whitelist to Access Origin</h3>
		<p>{{.HasOriginACLWhitelist}}</p>
		{{if .OriginHeaders}}<h3>Header(s) to Access Origin</h3>
		<ul>{{range .OriginHeaders}}
			<li>{{.}}</li>{{end}}
		</ul>{{end}}
		<h3>Other Origin Security</h3>
		<p>{{if .OtherOriginSecurity}}{{.OtherOriginSecurity}}{{else}}None{{end}}</p>
	</details>
</section>
<section>
	<details>
		<summary><h2>Core Features</h2></summary>
		<h3>Query String Handling</h3>
		<p>{{.QueryStringHandling}}</p>
		<h3>Range Request Handling</h3>
		<p>{{.RangeRequestHandling}}</p>
		<h3>Signed URLs / URL Tokenization</h3>
		<p>{{.HasSignedURLs}}</p>
		<h3>Negative Caching Customization</h3>
		<p>{{.HasNegativeCachingCustomization}}</p>
		{{if or .HasNegativeCachingCustomization .NegativeCachingCustomizationNote }}<aside>
			<p>{{.NegativeCachingCustomizationNote}}</p>
		</aside>{{else if .HasNegativeCachingCustomization}}<aside>
			<p><b>No instructions given!</b></p>
		</aside>{{end}}
		{{if .ServiceAliases}}<h3>Service Aliases</h3>
		<ul>{{range .ServiceAliases}}
			<li>{{.}}</li>{{end}}
		</ul>{{end}}
	</details>
</section>
{{if or .RateLimitingGBPS .RateLimitingTPS .OverflowService}}<section>
	<details>
		<summary><h2>Service Limits</h2></summary>
		{{if .RateLimitingGBPS}}<h3>Bandwidth Limit</h3>
		<p>{{.RateLimitingGBPS}}GBps</p>{{end}}
		{{if .RateLimitingTPS}}<h3>Transactions per Second Limit</h3>
		<p>{{.RateLimitingTPS}}Tps</p>{{end}}
		{{if .OverflowService}}<h3>Overflow Service</h3>
		<p>{{.OverflowService}}</p>{{end}}
	</details>
</section>{{end}}
{{if or .HeaderRewriteEdge .HeaderRewriteMid .HeaderRewriteRedirectRouter}}<section>
	<details>
		<summary><h2>Header Customization</h2></summary>
		{{if .HeaderRewriteEdge}}<h3>Header Rewrite - Edge Tier</h3>
		<pre>{{.HeaderRewriteEdge}}</pre>{{end}}
		{{if .HeaderRewriteMid}}<h3>Header Rewrite - Mid Tier</h3>
		<pre>{{.HeaderRewriteMid}}</pre>{{end}}
		{{if .HeaderRewriteRedirectRouter}}<h3>Header Rewrite - Router</h3>
		<pre>{{.HeaderRewriteRedirectRouter}}</pre>{{end}}
	</details>
</section>{{end}}
{{if .Notes}}<section>
	<details>
		<summary><h2>Additional Notes</h2></summary>
		<p>{{.Notes}}</p>
	</details>
</section>{{end}}
</body>
</html>
`<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8"/>
<title>Delivery Service Request for {{.Customer}}</title>
<style>
aside {
	padding: 0 1em;
	color: #6A737D;
	border-left: .25em solid #DFE2E5;
}
body {
	font-family: sans;
	background-color: white;
}
pre {
	padding: 5px;
	background-color: lightgray;
}
</style>
</head>
<body>
<h1>Delivery Service Request for {{.Customer}}</h1>
<p>{{.ServiceDesc}}</p>
<section>
	<details>
		<summary><h2>Service Description</h2></summary>
		<h3>Content Type</h3>
		<p>{{.ContentType}}</p>
		<h3>Delivery Protocol</h3>
		<p>{{.DeliveryProtocol.String}}</p>
		<h3>Routing Type</h3>
		<p>{{.RoutingType.String}}</p>
	</details>
</section>
<section>
	<details>
		<summary><h2>Traffic &amp; Library Estimates</h2></summary>
		<h3>Peak Bandwidth Estimate</h3>
		<p>{{.PeakBPSEstimate}}Bps</p>
		<h3>Peak Transactions per Second Estimate</h3>
		<p>{{.PeakTPSEstimate}}Tps</p>
		<h3>Max Library Size Estimate</h3>
		<p>{{.MaxLibrarySizeEstimate}}GB</p>
	</details>
</section>
<section>
	<details>
		<summary><h2>Origin Security</h2></summary>
		<h3>Origin Server URL</h3>
		<p><a href="{{.OriginURL}}">{{.OriginURL}}</a></p>
		<h3>Origin Dynamic Remap</h3>
		<p>{{.HasOriginDynamicRemap}}</p>
		<h3>Origin Test File</h3>
		<p>{{.OriginTestFile}}</p>
		<h3>ACL/Whitelist to Access Origin</h3>
		<p>{{.HasOriginACLWhitelist}}</p>
		{{if .OriginHeaders}}<h3>Header(s) to Access Origin</h3>
		<ul>{{range .OriginHeaders}}
			<li>{{.}}</li>{{end}}
		</ul>{{end}}
		<h3>Other Origin Security</h3>
		<p>{{if .OtherOriginSecurity}}{{.OtherOriginSecurity}}{{else}}None{{end}}</p>
	</details>
</section>
<section>
	<details>
		<summary><h2>Core Features</h2></summary>
		<h3>Query String Handling</h3>
		<p>{{.QueryStringHandling}}</p>
		<h3>Range Request Handling</h3>
		<p>{{.RangeRequestHandling}}</p>
		<h3>Signed URLs / URL Tokenization</h3>
		<p>{{.HasSignedURLs}}</p>
		<h3>Negative Caching Customization</h3>
		<p>{{.HasNegativeCachingCustomization}}</p>
		{{if or .HasNegativeCachingCustomization .NegativeCachingCustomizationNote }}<aside>
			<p>{{.NegativeCachingCustomizationNote}}</p>
		</aside>{{else if .HasNegativeCachingCustomization}}<aside>
			<p><b>No instructions given!</b></p>
		</aside>{{end}}
		{{if .ServiceAliases}}<h3>Service Aliases</h3>
		<ul>{{range .ServiceAliases}}
			<li>{{.}}</li>{{end}}
		</ul>{{end}}
	</details>
</section>
{{if or .RateLimitingGBPS .RateLimitingTPS .OverflowService}}<section>
	<details>
		<summary><h2>Service Limits</h2></summary>
		{{if .RateLimitingGBPS}}<h3>Bandwidth Limit</h3>
		<p>{{.RateLimitingGBPS}}GBps</p>{{end}}
		{{if .RateLimitingTPS}}<h3>Transactions per Second Limit</h3>
		<p>{{.RateLimitingTPS}}Tps</p>{{end}}
		{{if .OverflowService}}<h3>Overflow Service</h3>
		<p>{{.OverflowService}}</p>{{end}}
	</details>
</section>{{end}}
{{if or .HeaderRewriteEdge .HeaderRewriteMid .HeaderRewriteRedirectRouter}}<section>
	<details>
		<summary><h2>Header Customization</h2></summary>
		{{if .HeaderRewriteEdge}}<h3>Header Rewrite - Edge Tier</h3>
		<pre>{{.HeaderRewriteEdge}}</pre>{{end}}
		{{if .HeaderRewriteMid}}<h3>Header Rewrite - Mid Tier</h3>
		<pre>{{.HeaderRewriteMid}}</pre>{{end}}
		{{if .HeaderRewriteRedirectRouter}}<h3>Header Rewrite - Router</h3>
		<pre>{{.HeaderRewriteRedirectRouter}}</pre>{{end}}
	</details>
</section>{{end}}
{{if .Notes}}<section>
	<details>
		<summary><h2>Additional Notes</h2></summary>
		<p>{{.Notes}}</p>
	</details>
</section>{{end}}
</body>
</html>
``json:"emailTo"``json:"details"``json:"contentType"``json:"customer"``json:"deliveryProtocol"``json:"hasNegativeCachingCustomization"``json:"hasOriginACLWhitelist"``json:"hasOriginDynamicRemap"``json:"hasSignedURLs"``json:"headerRewriteEdge"``json:"headerRewriteMid"``json:"headerRewriteRedirectRouter"``json:"maxLibrarySizeEstimate"``json:"negativeCachingCustomizationNote"``json:"notes"``json:"originHeaders"``json:"originTestFile"``json:"originURL"``json:"otherOriginSecurity"``json:"overflowService"``json:"peakBPSEstimate"``json:"peakTPSEstimate"``json:"queryStringHandling"``json:"rangeRequestHandling"``json:"rateLimitingGBPS"``json:"rateLimitingTPS"``json:"routingName"``json:"routingType"``json:"serviceAliases"``json:"serviceDesc"`failed to apply template: %w"failed to apply template: %w"FieldRulesfieldPtrValidateStructMatchRule^[\w@!#$%^&\*\(\)\[\]\. -]+$`^[\w@!#$%^&\*\(\)\[\]\. -]+$`RuleFuncBydeepCachingType: invalid Deep Caching Type"deepCachingType: invalid Deep Caching Type"deliveryProtocol: required"deliveryProtocol: required"deliveryProtocol: invalid Protocol"deliveryProtocol: invalid Protocol"hasNegativeCachingCustomization: required"hasNegativeCachingCustomization: required"originHeaders: cannot be an empty list (use 'null' if none)"originHeaders: cannot be an empty list (use 'null' if none)"routingType: required"routingType: required"routingType: invalid Routing Type"routingType: invalid Routing Type"%s does not represent Origin Headers: %v"%s does not represent Origin Headers: %v"`json:"assigneeId,omitempty"``json:"assignee,omitempty"``json:"authorId"``json:"changeType"``json:"createdAt"``json:"lastEditedBy,omitempty"``json:"lastEditedById,omitempty"``json:"deliveryService"``json:"-" db:"xml_id"``json:"assigneeId,omitempty" db:"assignee_id"``json:"changeType" db:"change_type"``json:"createdAt" db:"created_at"``json:"lastEditedBy"``json:"lastEditedById" db:"last_edited_by_id"``json:"deliveryService" db:"deliveryservice"``json:"status" db:"status"`CopyIfNotNildraft"draft"submitted"submitted""rejected""pending"complete"complete"expected requeststatus in byte array form; got %T"expected requeststatus in byte array form; got %T" is not a valid RequestStatus name" is not a valid RequestStatus name" request cannot be changed" request cannot be changed"invalid transition from "invalid transition from "" to "create"create""delete"invalid Delivery Service Request changeType: '%s'"invalid Delivery Service Request changeType: '%s'"UnmarshalJSON(nil *tc.DSRChangeType)"UnmarshalJSON(nil *tc.DSRChangeType)"`json:"assignee"``json:"-" db:"assignee_id"``json:"-" db:"author_id"``json:"-" db:"last_edited_by_id"``json:"original,omitempty" db:"original"``json:"requested,omitempty" db:"deliveryservice"`(Assignee="(Assignee="<nil>"<nil>", AssigneeID=", AssigneeID=", Author="`, Author="`", AuthorID=`", AuthorID=`, ChangeType="`, ChangeType="`", CreatedAt=`", CreatedAt=`, ID=", ID=", LastEditedBy="`, LastEditedBy="`", LastEditedByID=`", LastEditedByID=`, LastUpdated=`, LastUpdated=`, Status="`, Status="`")`")`"DeliveryServiceRequestV40""DeliveryServiceRequestV5" EmailTemplate is an html/template.Template for formatting DeliveryServiceRequestRequests into text/html email bodies. Its direct use is discouraged, instead use DeliveryServiceRequestRequest.Format. Deprecated: Delivery Services Requests have been deprecated in favor of Delivery Service Requests, and will be removed from the Traffic Ops API at some point in the future. IDNoMod type is used to suppress JSON unmarshalling. DeliveryServiceRequestRequest is a literal request to make a Delivery Service. EmailTo is the email address that is ultimately the destination of a formatted DeliveryServiceRequestRequest. Details holds the actual request in a data structure. DeliveryServiceRequestDetails holds information about what a user is trying to change, with respect to a delivery service. ContentType is the type of content to be delivered, e.g. "static", "VOD" etc. Customer is the requesting customer - typically this is a Tenant. DeepCachingType represents whether or not the Delivery Service should use Deep Caching. Delivery Protocol is the protocol clients should use to connect to the Delivery Service. HasNegativeCachingCustomization indicates whether or not the resulting Delivery Service should customize the use of negative caching. When this is `true`, NegativeCachingCustomizationNote should be consulted for instructions on the customization. HasOriginACLWhitelist indicates whether or not the Origin has an ACL whitelist. When this is `true`, Notes should ideally contain the actual whitelist (or viewing instructions). Has OriginDynamicRemap indicates whether or not the OriginURL can dynamically map to multiple different actual origin servers. HasSignedURLs indicates whether or not the resulting Delivery Service should sign its URLs. HeaderRewriteEdge is an optional HeaderRewrite rule to apply at the Edge tier. HeaderRewriteMid is an optional HeaderRewrite rule to apply at the Mid tier. HeaderRewriteRedirectRouter is an optional HeaderRewrite rule to apply at routing time by the Traffic Router. MaxLibrarySizeEstimate is an estimation of the total size of content that will be delivered through the resulting Delivery Service. NegativeCachingCustomizationNote is an optional note describing the customization to be applied to Negative Caching. This should never be `nil` (or empty) if HasNegativeCachingCustomization is `true`, but in that case the recipient ought to contact Customer for instructions. Notes is an optional set of extra information supplied to describe the requested Delivery OriginHeaders is an optional list of HTTP headers that must be sent in requests to the Origin. When parsing from JSON, this field can be either an actual array of headers, or a string containing a comma-delimited list of said headers. OriginTestFile is the path to a file on the origin that can be requested to test the server's operational readiness, e.g. '/test.xml'. OriginURL is the URL of the origin server that has the content to be served by the requested OtherOriginSecurity is an optional note about any and all other Security employed by the origin server (beyond an ACL whitelist, which has its own field: HasOriginACLWhitelist). OverflowService is an optional IP Address or URL to which clients should be redirected when the requested Delivery Service exceeds its operational capacity. PeakBPSEstimate is an estimate of the bytes per second expected at peak operation. PeakTPSEstimate is an estimate of the transactions per second expected at peak operation. QueryStringHandling describes the manner in which the CDN should handle query strings in client requests. Generally one of "use", "drop", or "ignore-in-cache-key-and-pass-up". RangeRequestHandling describes the manner in which HTTP requests are handled. RateLimitingGBPS is an optional rate limit for the requested Delivery Service in gigabytes per second. RateLimitingTPS is an optional rate limit for the requested Delivery Service in transactions per second. RoutingName is the top-level DNS label under which the Delivery Service should be requested. RoutingType is the type of routing Traffic Router should perform for the requested Delivery ServiceAliases is an optional list of alternative names for the requested Delivery Service. ServiceDesc is a basic description of the requested Delivery Service. Format formats the DeliveryServiceRequestDetails into the text/html body of an email. The template used is EmailTemplate. Validate validates that the delivery service request has all of the required fields. In some cases, e.g. the top-level EmailTo field, the format is also checked for correctness. OriginHeaders represents a list of the headers that must be sent to the Origin. UnmarshalJSON implements the json.Unmarshaler interface. DeliveryServiceRequest is used as part of the workflow to create, modify, or delete a delivery service. Deprecated: Don't ever use this, even in legacy code if you can help it. It shouldn't still exist already, but will nevertheless be removed soon. TODO version DeliveryServiceRequest DeliveryServiceRequestNullable is used as part of the workflow to create, Deprecated: This structure is only used in legacy API versions. Downgrade will convert an instance of DeliveryServiceRequestV41 to DeliveryServiceRequestV40. Note that this function does a shallow copy of the requested and original Delivery Service structures. Upgrade will convert an instance of DeliveryServiceRequestV40 to DeliveryServiceRequestV41. Upgrade coerces the DeliveryServiceRequestNullable to the newer DeliveryServiceRequestV40 structure. All reference properties are "deep"-copied so they may be modified without affecting the original. However, DeliveryService is constructed as a "deep" copy, but the properties of the underlying DeliveryServiceNullableV30 are "shallow" copied, and so modifying them *can* affect the original and vice-versa. UnmarshalJSON implements the json.Unmarshaller interface to suppress unmarshalling for IDNoMod. RequestStatus captures where in the workflow this request is. The various Statuses a Delivery Service Request (DSR) may have. The state as parsed from a raw string did not represent a valid RequestStatus. The DSR is a draft that is not ready for review. The DSR has been submitted for review. The DSR was rejected by a reviewer. The DSR has been approved by a reviewer and is pending fullfillment. The DSR has been approved and fully implemented. String returns the string value of the Request Status. RequestStatuses -- user-visible string associated with each of the above. "invalid" -- don't list here.. UnmarshalJSON implements json.Unmarshaller. just check to see if the string represents a valid requeststatus MarshalJSON implements json.Marshaller. Value implements driver.Valuer. Scan implements sql.Scanner. RequestStatusFromString gets the status enumeration from a string. ValidTransition returns nil if the transition is allowed for the workflow, an error if not. once rejected or completed,  no changes allowed no change -- always allowed indicate if valid transitioning to this RequestStatus can go back to draft if submitted or rejected can go be submitted if draft or rejected only submitted can be rejected only submitted can move to pending only submitted or pending requests can be completed DSRChangeType is an "enumerated" string type that encodes the legal values of a Delivery Service Request's Change Type. These are the valid values for Delivery Service Request Change Types. The original Delivery Service is being modified to match the requested one. The requested Delivery Service is being created. The requested Delivery Service is being deleted. DSRChangeTypeFromString converts the passed string to a DSRChangeType (case-insensitive), returning an error if the string is not a valid Delivery Service Request Change Type. String implements the fmt.Stringer interface, returning a textual representation of the DSRChangeType. MarshalJSON implements the encoding/json.Marshaller interface. UnmarshalJSON implements the encoding/json.Unmarshaller interface. This should only happen if this method is called directly; encoding/json itself guards against this. DeliveryServiceRequestV41 is the type of a Delivery Service Request in Traffic Ops API version 4.1. Assignee is the username of the user assigned to the Delivery Service Request, if any. AssigneeID is the integral, unique identifier of the user assigned to the Delivery Service Request, if any. Author is the username of the user who created the Delivery Service Request. AuthorID is the integral, unique identifier of the user who created the Delivery Service Request, if/when it is known. ChangeType represents the type of change being made, must be one of "create", "change" or "delete". CreatedAt is the date/time at which the Delivery Service Request was created. ID is the integral, unique identifier for the Delivery Service Request if/when it is known. LastEditedBy is the username of the user by whom the Delivery Service Request was last edited. LastEditedByID is the integral, unique identifier of the user by whom the Delivery Service Request was last edited, if/when it is known. LastUpdated is the date/time at which the Delivery Service was last modified. Original is the original Delivery Service for which changes are requested. This is present in responses only for ChangeTypes 'change' and 'delete', and is only required in requests where ChangeType is 'delete'. Requested is the set of requested changes. This is present in responses only for ChangeTypes 'change' and 'create', and is only required in requests in those cases. Status is the status of the Delivery Service Request. Used internally to define the affected Delivery Service. DeliveryServiceRequestV40 is the type of a Delivery Service Request in Traffic Ops API version 4.0. DeliveryServiceRequestV4 is the type of a Delivery Service Request as it appears in API version 4. IsOpen returns whether or not the Delivery Service Request is still "open" - i.e. has not been rejected or completed. IsClosed returns whether or not the Delivery Service Request has been "closed", by being either rejected or completed. Downgrade coerces the DeliveryServiceRequestV40 to the older DeliveryServiceRequestNullable structure. "XMLID" will be copied directly if it is non-empty, otherwise determined from the DeliveryService (if it's not 'nil'). copy of "Requested", but the properties of the underlying DeliveryServiceNullableV30 are "shallow" copied, and so modifying them *can* affect the original and vice-versa. dsrString renders a string for a DSR at either v4 or v5. The first argument should be the name of the struct being rendered, the remainder are all properties of DSRs. String encodes the DeliveryServiceRequestV40 as a string, in the format "DeliveryServiceRequestV40({{Property}}={{Value}}[, {{Property}}={{Value}}]+)". If a property is a pointer value, then its dereferenced value is used - unless it's nil, in which case "<nil>" is used as the value. DeliveryService is omitted, because of how large it is. Times are formatted in RFC3339 format. SetXMLID sets the DeliveryServiceRequestV40's XMLID based on its DeliveryService. DeliveryServiceRequestV50 is the type of a Delivery Service Request in Traffic Ops API version 5.0. DeliveryServiceRequestV5 is the type of a Delivery Service Request as it appears in API version 5. Downgrade coerces the DeliveryServiceRequestV50 to the older "XMLID" will be copied directly, not determined from Requested or Original. affecting the original. Delivery Service properties (i.e. Requested and Original) are copied using the DeliveryServiceV5.Downgrade method (which is also deep). Upgrade coerces the DeliveryServiceRequestV4 to the newer DeliveryServiceRequestV5 structure. Original) are copied using the DeliveryServiceV4.Upgrade method (which is String encodes the DeliveryServiceRequestV5 as a string, in the format "DeliveryServiceRequestV5({{Property}}={{Value}}[, {{Property}}={{Value}}]+)". SetXMLID sets the DeliveryServiceRequestV5's XMLID based on its DeliveryService. StatusChangeRequest is the form of a PUT request body to /deliveryservice_requests/{{ID}}/status. Status is the desired new status of the DSR. Validate satisfies the DeliveryServiceRequestResponseV40 is the type of a response from Traffic Ops when creating, updating, or deleting a Delivery Service Request using API version 4.0. DeliveryServiceRequestResponseV4 is the type of a response from using the latest minor version of API version 4. DeliveryServiceRequestsResponseV40 is the type of a response from Traffic Ops for Delivery Service Requests using API version 4.0. DeliveryServiceRequestsResponseV4 is the type of a response from Traffic Ops for Delivery Service Requests using the latest minor version of API version 4. DeliveryServiceRequestResponseV50 is the type of a response from using the latest minor version of API version 5. DeliveryServiceRequestsResponseV5 is the type of a response from Traffic Ops 5./Users/test/Desktop/trafficcontrol/lib/go-tc/deliveryservice_servers.godsServerBaseV4dsServerBasepDescpIDrouterHostNamerouterPort`json:"server" db:"server"``json:"orderby"``json:"size"``json:"dsId"``json:"replace"``json:"serverNames"``json:"xmlId"``json:"cdnId" db:"cdn_id"``json:"cdnName" db:"cdn_name"``json:"guid" db:"guid"``json:"hostName" db:"host_name"``json:"httpsPort" db:"https_port"``json:"iloIpAddress" db:"ilo_ip_address"``json:"iloIpGateway" db:"ilo_ip_gateway"``json:"iloIpNetmask" db:"ilo_ip_netmask"``json:"iloPassword" db:"ilo_password"``json:"iloUsername" db:"ilo_username"``json:"mgmtIpAddress" db:"mgmt_ip_address"``json:"mgmtIpGateway" db:"mgmt_ip_gateway"``json:"mgmtIpNetmask" db:"mgmt_ip_netmask"``json:"offlineReason" db:"offline_reason"``json:"physLocation" db:"phys_location"``json:"physLocationId" db:"phys_location_id"``json:"rack" db:"rack"``json:"routerHostName" db:"router_host_name"``json:"routerPortName" db:"router_port_name"``json:"statusId" db:"status_id"``json:"tcpPort" db:"tcp_port"``json:"type" db:"server_type"``json:"typeId" db:"server_type_id"``json:"updPending" db:"upd_pending"``json:"-" db:"server_capabilities"``json:"-" db:"deliveryservice_capabilities"``json:"profileNames" db:"profile_name"``json:"interfaces" db:"interfaces"`CoalesceToDefault DeliveryServiceServerV5 is the struct used to represent a delivery service server, in the latest minor version for API 5.x. DeliveryServiceServerV50 is the type of each entry in the `response` array property of responses from Traffic Ops to GET requests made to the /deliveryserviceservers endpoint of its API, for api version 5.0. DeliveryServiceServerResponseV5 is the type of a response from Traffic Ops to a GET request to the /deliveryserviceserver endpoint, for the latest minor version of api v5.x. DeliveryServiceServerResponseV50 is the type of a response from Traffic Ops to a GET request to the /deliveryserviceserver endpoint for API v5.0. DeliveryServiceServerResponse is the type of a response from Traffic Ops to a GET request to the /deliveryserviceserver endpoint. Deprecated: Direct server-to-DS assignments are deprecated in favor of Topology usage. DSSMapResponse is the type of the `response` property of a response from Traffic Ops to a PUT request made to the /deliveryserviceserver endpoint of its API. DSSReplaceResponse is the type of a response from Traffic Ops to a PUT request made to the /deliveryserviceserver endpoint of its API. DSServersResponse is the type of a response from Traffic Ops to a POST request made to the /deliveryservices/{{XML ID}}/servers endpoint of its API. DeliveryServiceServers structures represent the servers assigned to a DeliveryServiceServer is the type of each entry in the `response` array /deliveryserviceservers endpoint of its API. Filter is a type of unknown purpose - though it appears related to the removed APIv1 endpoints regarding the servers which are assigned to a Delivery Service, not assigned to a Delivery Service, and eligible for assignment to a Delivery Service. Deprecated: This is not used by any known ATC code, and is likely a remnant of legacy behavior that will be removed in the future. Enumerated values of the Filter type. Deprecated: These are not used by any known ATC code, and are likely remnants of legacy behavior that will be removed in the future. DSServerBase contains the base information for a Delivery Service Server. DSServerBaseV4 contains the base information for a Delivery Service Server. DSServerV11 contains the legacy format for a Delivery Service Server. DSServer contains information for a Delivery Service Server. DSServerResponseV30 is the type of a response from Traffic Ops to a request for servers assigned to a Delivery Service - in API version 3.0. DSServerV4 contains information for a V4.x Delivery Service Server. DSServerResponseV40 is the type of a response from Traffic Ops to a request for servers assigned to a Delivery Service - in API version 4.0. DSServerResponseV4 is the type of a response from Traffic Ops to a request for servers assigned to a Delivery Service - in the latest minor version of API version 4. DSServerV5 is an alias for the latest minor version of the major version 5. DSServerV50 contains information about a server associated with some Delivery Service Server. DSServerResponseV5 is an alias for the latest minor version of the major version 5. DSServerResponseV50 is response from Traffic Ops to a request for servers assigned to a Delivery Service - in  the latest minor version APIv50. ToDSServerBaseV4 upgrades the DSServerBase to the structure used by the latest minor version of version 4 of Traffic Ops's API. ToDSServerBase downgrades the DSServerBaseV4 to the structure used by the Traffic Ops API in versions earlier than 4.0. ToDSServerV5 convert DSServerV4 lastUpdated time format to RFC3339 for DSServerV5 and also assign V4 values to V5/Users/test/Desktop/trafficcontrol/lib/go-tc/deliveryservice_ssl_keys.gojwkgithub.com/lestrrat-go/jwx/jwk"github.com/lestrrat-go/jwx/jwk"Self Signed"Self Signed"Certificate Authority"Certificate Authority"Lets Encrypt"Lets Encrypt"`json:"authType,omitempty"``json:"deliveryservice,omitempty"``json:"businessUnit,omitempty"``json:"city,omitempty"``json:"organization,omitempty"``json:"hostname,omitempty"``json:"country,omitempty"``json:"state,omitempty"``json:"certificate,omitempty"``json:"sans,omitempty"``json:"expiration,omitempty"``json:"provider"``json:"expiration"``json:"federated"``json:"version,omitempty"``json:"csr"`cdn required"cdn required"version required"version required"key required"key required"deliveryservice required"deliveryservice required"deliveryservice and key must match"deliveryservice and key must match"hostname required"hostname required"certificate required"certificate required"certificate.key required"certificate.key required"certificate.crt required"certificate.crt required"certificate.csr required"certificate.csr required"missing fields: "missing fields: "businessUnit required"businessUnit required"city required"city required"organization required"organization required"country required"country required"state required"state required"authType required"authType required"`json:"server"``json:"expirationDays"`expiration missing"expiration missing"renewal_kid`renewal_kid`github.com/lestrrat-go/jwx/jwk.readFileOptionAutoRefreshOptionautoRefreshOptiongithub.com/lestrrat-go/jwx/jwk.autoRefreshOptiongithub.com/lestrrat-go/jwx/jwk.parseOption Authentication methods used for signing Delivery Service SSL certificates. SSLKeysAddResponse is a struct to store the response of addition of ssl keys for a DS, along with any alert messages. DeliveryServiceSSLKeysResponse is the type of a response from Traffic Ops to GET requests made to its /deliveryservices/xmlId/{{XML ID}}/sslkeys API DeliveryServiceSSLKeys contains information about an SSL key and certificate used by a Delivery Service to secure its HTTP-delivered content. DeliveryServiceSSLKeysV4 is the representation of a DeliveryServiceSSLKeys in the latest minor version of version 4 of the Traffic Ops API. DeliveryServiceSSLKeysV40 structures contain information about an SSL key certificate pair used by a Delivery Service. "V40" is used because this structure was first introduced in version 4.0 of the Traffic Ops API. DeliveryServiceSSLKeysV15 structures contain information about an SSL key "V15" is used because this structure was first introduced in version 1.5 of This is, ostensibly, an updated version of DeliveryServiceSSLKeys, but beware that this may not be completely accurate as the predecessor structure appears to be used in many more contexts than this structure. SSLKeyExpirationInformation contains information about an SSL key's expiration. SSLKeyRequestFields contain metadata information for generating SSL keys for Delivery Services through the Traffic Ops API. Specifically, they contain everything except the manner in which the generated certificates should be signed, information that can be extracted from the Delivery Service for which the request is being made, and any key/certificate pair being added rather than generated from this information. DeliveryServiceSSLKeysReq structures are requests for the generation of SSL key certificate pairs for a Delivery Service, and this is, in fact, the structure required for POST request bodies to the /deliveryservices/sslkeys/generate Traffic Ops API endpoint. Key is the XMLID of the delivery service DeliveryServiceSSLKeysGenerationResponse is the type of a response from Traffic Ops to a request for generation of SSL Keys for a Delivery Service. DeliveryServiceSSLKeysCertificate contains an SSL key/certificate pair for a Delivery Service, as well as the Certificate Signing Request associated with them. Sanitize ensures that if either the DeliveryService or Key property of a DeliveryServiceSSLKeysReq is nil, it will be set to a reference to a copy of the value of the other property (if that is not nil). This does NOT ensure that both fields are not nil, nor does it ensure that they match. DeliveryService and Key are the same value, so if the user sent one but not the other, set the missing one, in the principle of "be liberal in what you accept." sqlx fails with aliased pointers, so make a new one validateSharedRequiredRequestFields validates the request fields that are shared and required by both 'add' and 'generate' requests. DeliveryServiceAddSSLKeysReq structures are requests to import key/certificate pairs for a Delivery Service directly, and are the type of structures required for POST request bodies to the /deliveryservices/sslkeys/add endpoint of the Traffic Ops API. DeliveryServiceGenSSLKeysReq structures are requests to generate new key/certificate pairs for a Delivery Service, and are the type of structures required for POST request bodies to the /deliveryservices/sslkeys/generate endpoint of the Traffic Ops API. DeliveryServiceAcmeSSLKeysReq structures are requests to generate new key/certificate pairs for a Delivery Service using an ACME provider, and are the type of structures required for POST request bodies to the /deliveryservices/sslkeys/generate/letsencrypt endpoint of the Traffic Ops TrafficVaultPing represents the status of a given Traffic Vault server. TrafficVaultPingResponse represents the JSON HTTP response returned by the /vault/ping route. URLSigKeys is the type of the `response` property of responses from Traffic Ops to GET requests made to the /deliverservices/xmlId/{{XML ID}}/urlkeys endpoint of its API. URLSignatureKeysResponse is the type of a response from Traffic Ops to a request for the URL Signing keys of a Delivery Service - in API version 4.0. CDNSSLKeysResp is a slice of CDNSSLKeys. Deprecated: This is not used by any known ATC code and has no known purpose. Therefore, it's probably just technical debt subject to removal in the near CDNSSLKey structures represent an SSL key/certificate pair used by a CDN. This is the structure used by each entry of the `response` array property of responses from Traffic Ops to GET requests made to its /cdns/name/{{Name}}/sslkeys API endpoint. A CDNSSLKeyCert represents an SSL key/certificate pair used by a CDN, without any other associated data. A CDNGenerateKSKReq is a request to generate Key-Signing Keys for CDNs for use in DNSSEC operations, and is the structure required for the bodies of POST requests made to the /cdns/{{Name}}/dnsseckeys/ksk/generate endpoint of Sanitize ensures that the CDNGenerateKSKReq's EffectiveDate is not nil. If it was nil, this will set it to the current time. GetRenewalKid extracts the value of the private "renewal_kid" field from the key set. If the set does not contain that private field, or if it does but the value is not a string, this returns nil, otherwise it will return a pointer to the value of that field. JWKSMap is a mapping of names of JSON Web Token Set to those sets./Users/test/Desktop/trafficcontrol/lib/go-tc/deliveryservices.gonewernewerDisallowedinitialinitialStrgeogeoLimitCountriesnullableFieldscountries26214433554432"format"trred"trred"fakeClientIpAddress"fakeClientIpAddress""ACTIVE""INACTIVE"PRIMED"PRIMED"`json:"maxOriginConnections" db:"max_origin_connections"``json:"consistentHashRegex"``json:"consistentHashQueryParams"``json:"fqPacingRate,omitempty"``json:"signingAlgorithm" db:"signing_algorithm"``json:"tenant"``json:"trRequestHeaders,omitempty"``json:"trResponseHeaders,omitempty"``json:"active"``json:"anonymousBlockingEnabled"``json:"cacheurl"``json:"ccrDnsTtl"``json:"cdnName"``json:"checkPath"``json:"displayName"``json:"dnsBypassCname"``json:"dnsBypassIp"``json:"dnsBypassIp6"``json:"dnsBypassTtl"``json:"edgeHeaderRewrite"``json:"exampleURLs"``json:"geoLimit"``json:"geoProvider"``json:"globalMaxMbps"``json:"globalMaxTps"``json:"httpBypassFqdn"``json:"infoUrl"`float32`json:"initialDispersion"``json:"ipv6RoutingEnabled"``json:"logsEnabled"``json:"longDesc"``json:"longDesc1"``json:"longDesc2"``json:"matchList,omitempty"``json:"maxDnsAnswers"``json:"midHeaderRewrite"``json:"missLat"``json:"missLong"``json:"multiSiteOrigin"``json:"orgServerFqdn"``json:"profileDescription"``json:"profileId,omitempty"``json:"profileName"``json:"protocol"``json:"qstringIgnore"``json:"regexRemap"``json:"regionalGeoBlocking"``json:"remapText"``json:"signed"``json:"typeId"``json:"trResponseHeaders"``json:"tenantId"``json:"maxRequestHeaderBytes" db:"max_request_header_bytes"``json:"tlsVersions" db:"tls_versions"``json:"geoLimitCountries"``json:"regional" db:"regional"``json:"requiredCapabilities" db:"required_capabilities"`old TLS version "old TLS version " is allowed, but newer version" is allowed, but newer version"' ', and ", and "and "and " are " are " is " is "disallowed; this configuration may be insecure"disallowed; this configuration may be insecure"setting TLS Versions that are explicitly supported may break older clients that can't use the specified versions"setting TLS Versions that are explicitly supported may break older clients that can't use the specified versions"unknown TLS version '"unknown TLS version '"' - possible typo"' - possible typo"tlsVersions has no effect on Delivery Services with Protocol '0' (HTTP_ONLY)"tlsVersions has no effect on Delivery Services with Protocol '0' (HTTP_ONLY)"Coalesce`json:"firstHeaderRewrite" db:"first_header_rewrite"``json:"innerHeaderRewrite" db:"inner_header_rewrite"``json:"lastHeaderRewrite" db:"last_header_rewrite"``json:"serviceCategory" db:"service_category"``json:"topology" db:"topology"``json:"ecsEnabled" db:"ecs_enabled"``json:"rangeSliceBlockSize" db:"range_slice_block_size"``json:"deepCachingType" db:"deep_caching_type"``json:"fqPacingRate" db:"fq_pacing_rate"``json:"trRequestHeaders"``json:"active" db:"active"``json:"anonymousBlockingEnabled" db:"anonymous_blocking_enabled"``json:"ccrDnsTtl" db:"ccr_dns_ttl"``json:"checkPath" db:"check_path"``json:"displayName" db:"display_name"``json:"dnsBypassCname" db:"dns_bypass_cname"``json:"dnsBypassIp" db:"dns_bypass_ip"``json:"dnsBypassIp6" db:"dns_bypass_ip6"``json:"dnsBypassTtl" db:"dns_bypass_ttl"``json:"dscp" db:"dscp"``json:"edgeHeaderRewrite" db:"edge_header_rewrite"``json:"geoLimit" db:"geo_limit"``json:"geoLimitCountries" db:"geo_limit_countries"``json:"geoLimitRedirectURL" db:"geolimit_redirect_url"``json:"geoProvider" db:"geo_provider"``json:"globalMaxMbps" db:"global_max_mbps"``json:"globalMaxTps" db:"global_max_tps"``json:"httpBypassFqdn" db:"http_bypass_fqdn"``json:"infoUrl" db:"info_url"``json:"initialDispersion" db:"initial_dispersion"``json:"ipv6RoutingEnabled" db:"ipv6_routing_enabled"``json:"logsEnabled" db:"logs_enabled"``json:"longDesc" db:"long_desc"``json:"longDesc1,omitempty" db:"long_desc_1"``json:"longDesc2,omitempty" db:"long_desc_2"``json:"matchList"``json:"maxDnsAnswers" db:"max_dns_answers"``json:"midHeaderRewrite" db:"mid_header_rewrite"``json:"missLat" db:"miss_lat"``json:"missLong" db:"miss_long"``json:"multiSiteOrigin" db:"multi_site_origin"``json:"originShield" db:"origin_shield"``json:"orgServerFqdn" db:"org_server_fqdn"``json:"profileId" db:"profile"``json:"protocol" db:"protocol"``json:"qstringIgnore" db:"qstring_ignore"``json:"rangeRequestHandling" db:"range_request_handling"``json:"regexRemap" db:"regex_remap"``json:"regionalGeoBlocking" db:"regional_geo_blocking"``json:"remapText" db:"remap_text"``json:"routingName" db:"routing_name"``json:"sslKeyVersion" db:"ssl_key_version"``json:"tenantId" db:"tenant_id"``json:"typeId" db:"type"``json:"cacheurl" db:"cacheurl"`expected deliveryservice in byte array form; got %T"expected deliveryservice in byte array form; got %T"`json:"totalOnline"``json:"totalOffline"``json:"cacheGroups"``json:"online"``json:"offline"``json:"availablePercent"``json:"unavailablePercent"``json:"utilizedPercent"``json:"maintenancePercent"``json:"type" db:"type"``json:"userId"``json:"dsId" db:"deliveryservice"``json:"serverId"``json:"dsIds"``json:"longDesc1,omitempty"`displayName: cannot be null/missing"displayName: cannot be null/missing"BoolPtr DefaultRoutingName is the Routing Name given to Delivery Services upon creation through the Traffic Ops API if a Routing Name is not specified in the request body. DefaultMaxRequestHeaderBytes is the Max Header Bytes given to Delivery Services upon creation through the Traffic Ops API if Max Request Header Bytes is not specified in the request body. MinRangeSliceBlockSize is the minimum allowed value for a Delivery Service's Range Slice Block Size, in bytes. This is 256KiB. MaxRangeSliceBlockSize is the maximum allowed value for a Delivery Service's Range Slice Block Size, in bytes. This is 32MiB. DeliveryServiceActiveState is an "enumerated" type which encodes the valid values of a Delivery Service's 'Active' property (v3.0+). These names of URL query string parameters are not allowed to be in a Delivery Service's "ConsistentHashQueryParams" set, because they collide with query string parameters reserved for use by Traffic Router. A DeliveryServiceActiveState describes the availability of Delivery Service content from the perspective of caching servers and Traffic Routers. Traffic Router routes clients for this Delivery Service and cache servers are configured to serve its content. Traffic Router does not route for this Delivery Service and cache servers cannot serve its content. Traffic Router does not route for this Delivery Service, but cache DeliveryServicesResponseV30 is the type of a response from the /api/3.0/deliveryservices Traffic Ops endpoint. TODO: Move these into the respective clients? DeliveryServicesResponseV40 is the type of a response from the /api/4.0/deliveryservices Traffic Ops endpoint. DeliveryServicesResponseV41 is the type of a response from the /api/4.1/deliveryservices Traffic Ops endpoint. DeliveryServicesResponseV4 is the type of a response from the /api/4.x/deliveryservices Traffic Ops endpoint. It always points to the type for the latest minor version of APIv4. DeliveryServicesNullableResponse roughly models the structure of responses from Traffic Ops to GET requests made to its /servers/{{ID}}/deliveryservices and /deliveryservices API endpoints. "Roughly" because although that's what it's used for, this type cannot actually represent those accurately, because its representation is tied to a version of the API that no longer exists - DO NOT USE THIS, it WILL drop data that the API returns. Deprecated: Please only use the versioned structures. CreateDeliveryServiceNullableResponse roughly models the structure of responses from Traffic Ops to POST requests made to its /deliveryservices API endpoint. UpdateDeliveryServiceNullableResponse roughly models the structure of responses from Traffic Ops to PUT requests made to its /deliveryservices/{{ID}} API endpoint. DeleteDeliveryServiceResponse is the type of a response from Traffic Ops to DELETE requests made to its /deliveryservices/{{ID}} API endpoint. DeliveryService structures represent a Delivery Service as it is exposed through the Traffic Ops API at version 1.4 - which no longer exists. DO NOT USE THIS - it ONLY still exists because it is used in the DeliveryServiceRequest type that is still in use by Traffic Ops's Go client for API versions 2 and 3 - and even that is incorrect and DOES DROP DATA. Deprecated: Instead use the appropriate structure for the version of the Traffic Ops API being worked with, e.g. DeliveryServiceV4. DeliveryServiceV13 structures represent a Delivery Service as it is exposed through the Traffic Ops API at version 1.3 - which no longer exists. DO NOT USE THIS - it ONLY still exists because it is nested within the structure of the DeliveryService type. Deprecated: Instead, use the appropriate structure for the version of the DeliveryServiceV11 contains the information relating to a Delivery Service that was around in version 1.1 of the Traffic Ops API. structure of the DeliveryServiceV13 type. DeliveryServiceV31 represents a Delivery Service as they appear in version 3.1 of the Traffic Ops API. Deprecated: API version 3.1 is deprecated - upgrade to DeliveryServiceV4. DeliveryServiceFieldsV31 contains additions to DeliverySservices introduced in API v3.1. Deprecated: API version 3.1 is deprecated. MaxRequestHeaderBytes is the maximum size (in bytes) of the request header that is allowed for this Delivery Service. DeliveryServiceV40 is a Delivery Service as it appears in version 4.0 of the Traffic Ops API. TLSVersions is the list of explicitly supported TLS versions for cache servers serving the Delivery Service's content. DeliveryServiceV41 is a Delivery Service as it appears in version 4.1 of the Regional indicates whether the Delivery Service's MaxOriginConnections is only per Cache Group, rather than divided over all Cache Servers in child Cache Groups of the Origin. DeliveryServiceV4 is a Delivery Service as it appears in version 4 of the Traffic Ops API - it always points to the highest minor version in APIv4. These are the TLS Versions known by Apache Traffic Control to exist. Deprecated: TLS version 1.0 is known to be insecure. Deprecated: TLS version 1.1 is known to be insecure. TLSVersionsAlerts generates warning-level alerts for the Delivery Service's TLS versions array. It will warn if newer versions are disallowed while older, less secure versions are allowed, if there are unrecognized versions present, if the Delivery Service's Protocol does not make use of TLS Versions, and whenever TLSVersions are explicitly set at all. This does NOT verify that the Delivery Service's TLS versions are _valid_, it ONLY creates warnings based on conditions that are possibly detrimental to CDN operation, but can, in fact, work. DeliveryServiceV30 represents a Delivery Service as they appear in version 3.0 of the Traffic Ops API. Deprecated: API version 3.0 is deprecated - upgrade to DeliveryServiceV4. DeliveryServiceFieldsV30 contains additions to Delivery Services introduced in API v3.0. FirstHeaderRewrite is a "header rewrite rule" used by ATS at the first caching layer encountered in the Delivery Service's Topology, or nil if there is no such rule. This has no effect on Delivery Services that don't employ Topologies. InnerHeaderRewrite is a "header rewrite rule" used by ATS at all caching layers encountered in the Delivery Service's Topology except the first and last, or nil if there is no such rule. This has no effect on Delivery Services that don't employ Topologies. LastHeaderRewrite is a "header rewrite rule" used by ATS at the first ServiceCategory defines a category to which a Delivery Service may belong, which will cause HTTP Responses containing content for the Delivery Service to have the "X-CDN-SVC" header with a value that is the XMLID of the Delivery Service. Topology is the name of the Topology used by the Delivery Service, or nil if no Topology is used. DeliveryServiceNullableV30 is the aliased structure that we should be using for all API 3.x Delivery Service operations. Again, this type is an alias that refers to the LATEST MINOR VERSION of API version 3 - NOT API version 3.0 as the name might imply. This type should always alias the latest 3.x minor version struct. For example, if you wanted to create a DeliveryServiceV32 struct, you would do the following:	type DeliveryServiceNullableV30 DeliveryServiceV32	DeliveryServiceV32 = DeliveryServiceV31 + the new fields. Deprecated: API version 3 is deprecated - upgrade to DeliveryServiceV4. DeliveryServiceNullable  represents a Delivery Service as they appeared in version 1.5 - and coincidentally also version 2.0 - of the Traffic Ops API. Deprecated: All API versions for which this could be used to represent structures are deprecated - upgrade to DeliveryServiceV4. DeliveryServiceNullableV15 represents a Delivery Service as they appeared in version 1.5 of the Traffic Ops API - which no longer exists. Because the structure of Delivery Services did not change between Traffic Ops API versions 1.5 and 2.0, this is also used in many places to represent an APIv2 Delivery Service. DeliveryServiceFieldsV15 contains additions to Delivery Services introduced in Traffic Ops API v1.5. Deprecated: API version 1.5 no longer exists, this type ONLY still exists because newer structures nest it, so removing it would be a breaking change - please upgrade to DeliveryServiceV4. EcsEnabled describes whether or not the Traffic Router's EDNS0 Client Subnet extensions should be enabled when serving DNS responses for this Delivery Service. Even if this is true, the Traffic Router may still have the extensions unilaterally disabled in its own configuration. RangeSliceBlockSize defines the size of range request blocks - or "slices" - used by the "slice" plugin. This has no effect if RangeRequestHandling does not point to exactly 3. This may never legally point to a value less than zero. DeliveryServiceNullableV14 represents a Delivery Service as they appeared in version 1.4 of the Traffic Ops API - which no longer exists. Deprecated: API version 1.4 no longer exists, this type ONLY still exists DeliveryServiceFieldsV14 contains additions to Delivery Services introduced in Traffic Ops API v1.4. ConsistentHashRegex is used by Traffic Router to extract meaningful parts of a client's request URI for HTTP-routed Delivery Services before hashing the request to find a cache server to which to direct the client. ConsistentHashQueryParams is a list of al of the query string parameters which ought to be considered by Traffic Router in client request URIs for HTTP-routed Delivery Services in the hashing process. MaxOriginConnections defines the total maximum  number of connections that the highest caching layer ("Mid-tier" in a non-Topology context) is allowed to have concurrently open to the Delivery Service's Origin. This may never legally point to a value less than 0. DeliveryServiceNullableV13 represents a Delivery Service as they appeared in version 1.3 of the Traffic Ops API - which no longer exists. Deprecated: API version 1.3 no longer exists, this type ONLY still exists DeliveryServiceFieldsV13 contains additions to Delivery Services introduced in Traffic Ops API v1.3. DeepCachingType may only legally point to 'ALWAYS' or 'NEVER', which define whether "deep caching" may or may not be used for this Delivery Service, respectively. FQPacingRate sets the maximum bytes per second a cache server will deliver on any single TCP connection for this Delivery Service. This may never legally point to a value less than zero. SigningAlgorithm is the name of the algorithm used to sign CDN URIs for this Delivery Service's content, or nil if no URI signing is done for the Delivery Service. This may only point to the values "url_sig" or "uri_signing". Tenant is the Tenant to which the Delivery Service belongs. TRResponseHeaders is a set of headers (separated by CRLF pairs as per the HTTP spec) and their values (separated by a colon as per the HTTP spec) which will be sent by Traffic Router in HTTP responses to client requests for this Delivery Service's content. This has no effect on DNS-routed or un-routed Delivery Service Types. TRRequestHeaders is an "array" of HTTP headers which should be logged from client HTTP requests for this Delivery Service's content by Traffic Router, separated by newlines. This has no effect on DNS-routed or DeliveryServiceNullableV12 represents a Delivery Service as they appeared in version 1.2 of the Traffic Ops API - which no longer exists. Deprecated: API version 1.2 no longer exists, this type ONLY still exists DeliveryServiceNullableV11 represents a Delivery Service as they appeared in version 1.1 of the Traffic Ops API - which no longer exists. Deprecated: API version 1.1 no longer exists, this type ONLY still exists GeoLimitCountriesType is the type alias that is used to represent the GeoLimitCountries attribute of the DeliveryService struct. UnmarshalJSON will unmarshal a byte slice into type GeoLimitCountriesType. MarshalJSON will marshal a GeoLimitCountriesType into a byte slice. DeliveryServiceNullableFieldsV11 contains properties that Delivery Services as they appeared in Traffic Ops API v1.1 had, AND were not removed by ANY later API version. Active dictates whether the Delivery Service is routed by Traffic Router. AnonymousBlockingEnabled sets whether or not anonymized IP addresses (e.g. Tor exit nodes) should be restricted from accessing the Delivery Service's content. CCRDNSTTL sets the Time-to-Live - in seconds - for DNS responses for this Delivery Service from Traffic Router. CDNID is the integral, unique identifier for the CDN to which the Delivery Service belongs. CDNName is the name of the CDN to which the Delivery Service belongs. CheckPath is a path which may be requested of the Delivery Service's origin to ensure it's working properly. DisplayName is a human-friendly name that might be used in some UIs somewhere. DNSBypassCNAME is a fully qualified domain name to be used in a CNAME record presented to clients in bypass scenarios. DNSBypassIP is an IPv4 address to be used in an A record presented to clients in bypass scenarios. DNSBypassIP6 is an IPv6 address to be used in an AAAA record presented to DNSBypassTTL sets the Time-to-Live - in seconds - of DNS responses from the Traffic Router that contain records for bypass destinations. DSCP sets the Differentiated Services Code Point for IP packets transferred between clients, origins, and cache servers when obtaining and serving content for this Delivery Service. See Also: https://en.wikipedia.org/wiki/Differentiated_services EdgeHeaderRewrite is a "header rewrite rule" used by ATS at the Edge-tier of caching. This has no effect on Delivery Services that don't use a Topology. ExampleURLs is a list of all of the URLs from which content may be requested from the Delivery Service. GeoLimit defines whether or not access to a Delivery Service's content should be limited based on the requesting client's geographic location. Despite that this is a pointer to an arbitrary integer, the only valid values are 0 (which indicates that content should not be limited geographically), 1 (which indicates that content should only be served to clients whose IP addresses can be found within a Coverage Zone File), and 2 (which indicates that content should be served to clients whose IP addresses can be found within a Coverage Zone File OR are allowed access according to the "array" in GeoLimitCountries). GeoLimitCountries is an "array" of "country codes" that itemizes the countries within which the Delivery Service's content ought to be made available. This has no effect if GeoLimit is not a pointer to exactly the value 2. GeoLimitRedirectURL is a URL to which clients will be redirected if their access to the Delivery Service's content is blocked by GeoLimit rules. GeoProvider names the type of database to be used for providing IP address-to-geographic-location mapping for this Delivery Service. The only valid values to which it may point are 0 (which indicates the use of a MaxMind GeoIP2 database) and 1 (which indicates the use of a Neustar GeoPoint IP address database). GlobalMaxMBPS defines a maximum number of MegaBytes Per Second which may be served for the Delivery Service before redirecting clients to bypass locations. GlobalMaxTPS defines a maximum number of Transactions Per Second which may be served for the Delivery Service before redirecting clients to bypass locations. HTTPBypassFQDN is a network location to which clients will be redirected in bypass scenarios using HTTP "Location" headers and appropriate redirection response codes. ID is an integral, unique identifier for the Delivery Service. InfoURL is a URL to which operators or clients may be directed to obtain further information about a Delivery Service. InitialDispersion sets the number of cache servers within the first caching layer ("Edge-tier" in a non-Topology context) across which content will be dispersed per Cache Group. IPV6RoutingEnabled controls whether or not routing over IPv6 should be done for this Delivery Service. LastUpdated is the time and date at which the Delivery Service was last updated. LogsEnabled controls nothing. It is kept only for legacy compatibility. LongDesc is a description of the Delivery Service, having arbitrary length. LongDesc1 is a description of the Delivery Service, having arbitrary LongDesc2 is a description of the Delivery Service, having arbitrary MatchList is a list of Regular Expressions used for routing the Delivery Service. Order matters, and the array is not allowed to be sparse. MaxDNSAnswers sets the maximum number of records which should be returned by Traffic Router in DNS responses to requests for resolving names for this Delivery Service. MidHeaderRewrite is a "header rewrite rule" used by ATS at the Mid-tier MissLat is a latitude to default to for clients of this Delivery Service when geolocation attempts fail. MissLong is a longitude to default to for clients of this Delivery Service when geolocation attempts fail. MultiSiteOrigin determines whether or not the Delivery Service makes use of "Multi-Site Origin". OriginShield is a field that does nothing. It is kept only for legacy compatibility reasons. OrgServerFQDN is the URL - NOT Fully Qualified Domain Name - of the origin of the Delivery Service's content. ProfileDesc is the Description of the Profile used by the Delivery Service, if any. ProfileID is the integral, unique identifier of the Profile used by the Delivery Service, if any. ProfileName is the Name of the Profile used by the Delivery Service, if any. Protocol defines the protocols by which caching servers may communicate with clients. The valid values to which it may point are 0 (which implies that only HTTP may be used), 1 (which implies that only HTTPS may be used), 2 (which implies that either HTTP or HTTPS may be used), and 3 (which implies that clients using HTTP must be redirected to use HTTPS, while communications over HTTPS may proceed as normal). QStringIgnore sets how query strings in HTTP requests to cache servers from clients are treated. The only valid values to which it may point are 0 (which implies that all caching layers will pass query strings in upstream requests and use them in the cache key), 1 (which implies that all caching layers will pass query strings in upstream requests, but not use them in cache keys), and 2 (which implies that the first encountered caching layer - "Edge-tier" in a non-Topology context - will strip query strings, effectively preventing them from being passed in upstream requests, and not use them in the cache key). RangeRequestHandling defines how HTTP GET requests with a Range header will be handled by cache servers serving the Delivery Service's content. The only valid values to which it may point are 0 (which implies that Range requests will not be cached at all), 1 (which implies that the background_fetch plugin will be used to service the range request while caching the whole object), 2 (which implies that the cache_range_requests plugin will be used to cache ranges as unique objects), and 3 (which implies that the slice plugin will be used to slice range based requests into deterministic chunks.) Regex Remap is a raw line to be inserted into "regex_remap.config" on the cache server. Care is necessitated in its use, because the input is in no way restricted, validated, or limited in scope to the Delivery Service. RegionalGeoBlocking defines whether or not whatever Regional Geo Blocking rules are configured on the Traffic Router serving content for this Delivery Service will have an effect on the traffic of this Delivery RemapText is raw text to insert in "remap.config" on the cache servers serving content for this Delivery Service. Care is necessitated in its use, because the input is in no way restricted, validated, or limited in scope to the Delivery Service. RoutingName defines the lowest-level DNS label used by the Delivery Service, e.g. if trafficcontrol.apache.org were a Delivery Service, it would have a RoutingName of "trafficcontrol". Signed is a legacy field. It is allowed to be `true` if and only if SigningAlgorithm is not nil. SSLKeyVersion incremented whenever Traffic Portal generates new SSL keys for the Delivery Service, effectively making it a "generational" marker. TenantID is the integral, unique identifier for the Tenant to which the Type describes how content is routed and cached for this Delivery Service as well as what other properties have any meaning. TypeID is an integral, unique identifier for the Tenant to which the XMLID is a unique identifier that is also the second lowest-level DNS label used by the Delivery Service. For example, if a Delivery Service's content may be requested from video.demo1.mycdn.ciab.test, it may be inferred that the Delivery Service's XMLID is demo1. DeliveryServiceRemovedFieldsV11 contains properties of Delivery Services as they appeared in version 1.1 of the Traffic Ops API that were later removed in some other API version. RemoveLD1AndLD2 removes the Long Description 1 and Long Description 2 fields from a V4.0 Delivery Service, and returns the resulting struct. from a V 4.x DS, and returns the resulting struct. DowngradeToV31 converts a 4.x DS to a 3.1 DS. UpgradeToV4 converts the 3.x DS to a 4.x DS. NOTE: the driver.Valuer and sql.Scanner interface implementations are necessary for Delivery Service Requests which store and read raw JSON from the database. Value implements the database/sql/driver.Valuer interface by marshaling the struct to JSON to pass back as an encoding/json.RawMessage. This expects src to be an encoding/json.RawMessage and unmarshals that into the DeliveryServiceNullable. the DeliveryServiceV4. DeliveryServiceMatch structures are the type of each entry in a Delivery Service's Match List. DeliveryServiceHealthResponse is the type of a response from Traffic Ops to a request for a Delivery Service's "health". DeliveryServiceHealth represents the "health" of a Delivery Service by the number of cache servers responsible for serving its content that are determined to be "online"/"healthy" and "offline"/"unhealthy". DeliveryServiceCacheGroup breaks down the "health" of a Delivery Service by the number of cache servers responsible for serving its content within a specific Cache Group that are determined to be "online"/"healthy" and "offline"/"unhealthy". The name of the Cache Group represented by this data. DeliveryServiceCapacityResponse is the type of a response from Traffic Ops to a request for a Delivery Service's "capacity". DeliveryServiceCapacity represents the "capacity" of a Delivery Service as the portions of the pool of cache servers responsible for serving its content that are available for servicing client requests. The portion of cache servers that are ready, willing, and able to service client requests. The portion of cache servers that are read and willing, but not able to service client requests, generally because Traffic Monitor deems them "unhealthy". The portion of cache servers that are actively involved in the flow of Delivery Service content. The portion of cache servers that are not yet ready to service client requests because they are undergoing maintenance. A FederationDeliveryServiceNullable is an association between a Federation and a Delivery Service. FederationDeliveryServicesResponse is the type of a response from Traffic Ops to a request made to its /federations/{{ID}}/deliveryservices endpoint. DeliveryServiceUserPost represents a legacy concept that no longer exists in Apache Traffic Control. DO NOT USE THIS - it ONLY still exists because it is still in use by Traffic Ops's Go client for API versions 2 and 3, despite that those API versions do not include the concepts and functionality for which this structure was Deprecated: All Go clients for API versions that still erroneously link to this symbol are deprecated, and this structure serves no known purpose. UserDeliveryServicePostResponse represents a legacy concept that no longer exists in Apache Traffic Control. A DSServerIDs is a description of relationships between a Delivery Service and zero or more servers, as well as how that relationship may have been recently modified. DeliveryserviceserverResponse - not to be confused with DSServerResponseV40 or DSServerResponse- is the type of a response from Traffic Ops to a request to the /deliveryserviceserver endpoint to associate servers with a Delivery A CachegroupPostDSReq is a request to associate some Cache Group with a set of zero or more Delivery Services. CacheGroupPostDSResp is the type of the `response` property of a response from Traffic Ops to a POST request made to its /cachegroups/{{ID}}/deliveryservices API endpoint. CacheGroupPostDSRespResponse is the type of a response from Traffic Ops to a POST request made to its /cachegroups/{{ID}}/deliveryservices API endpoint. AssignedDsResponse is the type of the `response` property of a response from Traffic Ops to a POST request made to its /servers/{{ID}}/deliveryservices DeliveryServiceSafeUpdateRequest represents a request to update the "safe" fields of a Validate implements the github.com/apache/trafficcontrol/v8/traffic_ops/traffic_ops_golang/api.ParseValidator DeliveryServiceSafeUpdateResponse represents Traffic Ops's response to a PUT request to its /deliveryservices/{{ID}}/safe endpoint. Deprecated: Please only use versioned structures. Response contains the representation of the Delivery Service after it has been updated. DeliveryServiceSafeUpdateResponseV30 represents Traffic Ops's response to a PUT request to its /api/3.0/deliveryservices/{{ID}}/safe endpoint. Response contains the representation of the Delivery Service after it has been updated. DeliveryServiceSafeUpdateResponseV40 represents Traffic Ops's response to a PUT request to its /api/4.0/deliveryservices/{{ID}}/safe endpoint. DeliveryServiceSafeUpdateResponseV4 represents TrafficOps's response to a PUT request to its /api/4.x/deliveryservices/{{ID}}/safe endpoint. This is always a type alias for the structure of a response in the latest minor APIv4 version. DeliveryServiceV50 is a Delivery Service as it appears in version 5.0 of the Active dictates whether the Delivery Service is routed by Traffic Router, and whether cache servers have its configuration downloaded. DeepCachingType may only be 'ALWAYS' or 'NEVER', which The only valid values are 0 (which indicates that content should not be limited geographically), 1 (which indicates that content should only be served to clients whose IP addresses can be found within a Coverage Zone File), and 2 (which indicates that content should be served to clients whose IP addresses can be found within a Coverage Zone File OR are allowed access according to the array in GeoLimitCountries). only valid values are 0 (which indicates the use of a MaxMind GeoIP2 database) and 1 (which indicates the use of a Neustar GeoPoint IP address database). with clients. The valid values are 0 (which implies that only HTTP may be used), 1 (which implies that only HTTPS may be used), 2 (which implies that either HTTP or HTTPS may be used), and 3 (which implies that clients using HTTP must be redirected to use HTTPS, while communications over HTTPS may proceed as normal). from clients are treated. The only valid values are 0 (which implies that all caching layers will pass query strings in upstream requests and use them in the cache key), 1 (which implies that all caching layers will pass query strings in upstream requests, but not use them in cache keys), and 2 (which implies that the first encountered caching layer - "Edge-tier" in a non-Topology context - will strip query strings, effectively preventing them from being passed in upstream requests, and not use them in the cache key). The only valid values are 0 (which implies that Range requests will not be cached at all), 1 (which implies that the background_fetch plugin will be used to service the range request while caching the whole object), 2 (which implies that the cache_range_requests plugin will be used to cache ranges as unique objects), and 3 (which implies that the slice plugin will be used to slice range based requests into deterministic chunks.) RequiredCapabilities is an array of capabilities required for this delivery service. "uri_signing" when it is not `nil`. DeliveryServiceV5 is the type of a Delivery Service as it appears in the latest minor version of Traffic Ops API version 5. the DeliveryServiceV5. Downgrade downgrades an APIv5 Delivery Service into an APIv4 Delivery Service of the latest minor version. Upgrade upgrades an APIv4 Delivery Service into an APIv5 Delivery Service of the latest minor version. DeliveryServicesResponseV5 is the type of a response from the /deliveryservices Traffic Ops endpoint in version 5 of its API. DeliveryServiceResponseV5 is the type of a response for API endponts returning a single Delivery Service in Traffic Ops API version 5./Users/test/Desktop/trafficcontrol/lib/go-tc/deliveryservices_required_capabilities.go`json:"deliveryServiceID" db:"deliveryservice_id"``json:"requiredCapability" db:"required_capability"``json:"xmlID,omitempty" db:"xml_id"` DeliveryServicesRequiredCapability represents an association between a required capability and a delivery service. DeliveryServicesRequiredCapabilitiesResponse is the type of a response from Traffic Ops to a request for relationships between Delivery Services and Capabilities which they require./Users/test/Desktop/trafficcontrol/lib/go-tc/divisions.go DivisionsResponse is a list of Divisions as a response. swagger:response DivisionsResponse DivisionResponse is a single Division response for Update and Create to swagger:response DivisionResponse A Division is a named collection of Regions. Division ID Division Name DivisionNullable is a nullable struct that holds info about a division, which is a group of regions. DivisionsResponseV5 is an alias for the latest minor version for the major version 5. DivisionResponseV5 is an alias for the latest minor version for the major version 5. DivisionV5 is an alias for the latest minor version for the major version 5. DivisionsResponseV50 is a list of Divisions as a response. DivisionResponseV50 is a single Division response for Update and Create to A DivisionV50 is a named collection of Regions./Users/test/Desktop/trafficcontrol/lib/go-tc/doc.go Package tc provides structures, constants, and functions that are used throughout the components of Apache Traffic Control. In general, the symbols defined here should be used by more than one component of Traffic Control - otherwise it can just appear in the only component that needs it. Most often this means that the symbols herein defined are referring to objects and/or concepts exposed through the Traffic Ops API, and usually serve to define payloads of HTTP requests and responses. # Enumerated Types Enumerated types - which should typically go in enum.go - should be treated as enumerables, and MUST NOT be cast as anything else (integer, strings, etc.). Enums MUST NOT be compared to strings or integers via casting. Enumerable data SHOULD be stored as the enumeration, not as a string or number. The *only* reason they are internally represented as strings, is to make them implicitly serialize to human-readable JSON. They should not be treated as strings. Casting or storing strings or numbers defeats the purpose of enum safety and conveniences. An example of an enumerated string type 'Foo' and an enumerated integral (or arbitrary) type 'Bar' are shown below:	type Foo string	const (	    FooA Foo = "A"	    FooB Foo = "B"	)	type Bar int	    BarTest Bar = iota	    BarQuest Note the way each member of the "enum" is prefixed with the type name, to help avoid collisions. Also note how, for string enumerations, the type must be repeated with each assignment, whereas for an arbitrary enumeration, you can make use of the special 'iota' language constant to start with some arbitrary value and then just make names on subsequent lines to implicitly increment from there, while maintaining proper type. Enumerables that need to be serialized and deserialized in JSON should use strings to make them easiest to understand and work with (serialization will work out-of-the-box that way). One way to implement type safety for enumerated types that require serialization support is to implement the encoding/json.Unmarshaler interface and return an error for unsupported values. However, note that this causes the unmarshaling to halt immediately, which is fast but if there are other errors in the JSON document that would be encountered later, they will not be reported. Therefore, types used in structures that the Traffic Ops API unmarshals should generally instead use an "invalid" value that indicates the problem but allows parsing to continue. The way this is normally done is with a 'FromString' method like so:	    FooInvalid = ""	func FooFromString(foo string) Foo {	    switch foo {	    case FooA:	        fallthrough	    case FooB:	        return Foo(foo)	    }	    return FooInvalid However, this requires postprocessing after deserialization, so one might instead implement encoding/json.Unmarshaler:	import "errors"	func (f *Foo) UnmarshalJSON(data []byte) error {	    if string(data) == "null" {	        return errors.New("'null' is not a valid 'Foo'")	    s := strings.Trim(string(data), "\"")	    switch s {	        *f = Foo(s)	        return	    // This is an invalid *value* not a parse error, so we don't return	    // an error and instead just make it clear that the value was	    // invalid.	    *f = FooInvalid	    return nil Though in this case the original, raw, string value of the 'Foo' is lost. Be aware of the limitations of these two designs during implementation. When storing enumumerable data in memory, it SHOULD be converted to and stored as an enum via the corresponding `FromString` function, checked whether the conversion failed and Invalid values handled, and valid data stored as the enum. This guarantees stored data is valid, and catches invalid input as soon as possible. Conversion functions, whether they be a 'FromString' function or an UnmarshalJSON method, should not be case-insensitive. When adding new enum types, enums should be internally stored as strings, so they implicitly serialize as human-readable JSON, unless the performance or memory of integers is necessary (it almost certainly isn't). Enums should always have the "invalid" value as the empty string (or 0), so default-initialized enums are invalid. Enums should always have a String() method, that way they implement fmt.Stringer and can be easily represented in a human-readable way. # When to Use Custom Types A type should be defined whenever there is a need to represent a data *structure* (in a 'struct'), or whenever the type has some enforced semantics. For example, enumerated types have the attached semantic that there is a list of valid values, and generally there are methods and/or functions associated with those types that act on that limitation. On the otherhand, if there is a type 'Foo' that has some property 'Bar' that contains arbitrary textual data with no other semantics or limitations, then 'string' is the appropriate type; there is no need to make a type 'FooBar' to express the relationship between a Foo and its Bar - that's the job of the Go language itself. Similarly, try to avoid duplication. For example, Parameters can be assigned to Profiles or (in legacy code that may have been removed by the time this is being read) Cache Groups. It was not necessary to create a type CacheGroupParameter that contains all of the same data as a regular Parameter simply because of this relationship. # Versioning Structures Structures used by the Traffic Ops API may change over time as the API itself changes. Typically, each new major API version will cause some breaking change to some structure in this package. This means that a new structure will need to be created to avoid breaking old clients that are deprecated but still supported. The naming convention for a new version of a structure that represents a Foo object in the new version - say, 2.0 - is to call it FooV20. Then, a more general type alias should be made for the API major version for use in client methods (so that they can be silently upgraded for non-breaking changes) - in this case: FooV2. A deprecation notice should then be added to the legacy type (which is hopefully but not necessarily named FooV1/FooV11 etc.) indicating the new structure. For example:	// FooV11 represents a Foo in TO APIv1.1.	//	// Deprecated: TO APIv1.1 is deprecated; upgrade to FooV2.	type FooV11 struct {	    Bar string `json:"bar"`	// FooV1 represents a Foo in the latest minor version of TO APIv1.	// Deprecated: TO APIv1 is deprecated; upgrade to FooV2.	type FooV1 = FooV11	// FooV20 represents a Foo in TO APIv2.0.	type FooV20 struct {	// FooV2 represents a Foo in the latest minor version of TO APIv2.	type FooV2 = FooV20 Note that there is no type alias simply named "Foo" - that is exactly how it should be. Legacy types may not include version information - newer versions should add it as described above. Legacy types may also include the word "Nullable" somewhere - strip this out! That word included in a type name is only to differentiate between older structures that were not "nullable" and the newer ones. Newly added types should only have one structure that is as "nullable" or "non-nullable" as it needs to be, so there is no need to specify./Users/test/Desktop/trafficcontrol/lib/go-tc/domains.go`json:"parameterId" db:"parameter_id"``json:"profileName" db:"profile_name"``json:"profileDescription" db:"profile_description"` DomainsResponse is a list of Domains as a response. Domain contains information about a single Profile within a Domain. This property serves no known purpose; it is always -1. DomainNullable is identical to a Domain but with reference properties that can have nil values, mostly used by the Traffic Ops API./Users/test/Desktop/trafficcontrol/lib/go-tc/enum.go"EDGE""MID"INVALIDCACHETYPE"INVALIDCACHETYPE"edge"edge"mid"mid""ORG_LOC""RASCAL"CCR"CCR""ORG"_LOC"_LOC""GLOBAL"use_reval_pending"use_reval_pending"refetch_enabled"refetch_enabled""global"HTTP"HTTP"DNS"DNS"INVALIDDSTYPE"INVALIDDSTYPE""url_sig"ADMIN_DOWN"ADMIN_DOWN"OFFLINE"OFFLINE"PRE_PROD"PRE_PROD"INVALIDCACHESTATUS"INVALIDCACHESTATUS"admin_down"admin_down"admindown"admindown"offline"offline"http to https"http to https"http and https"http and https"INVALIDPROTOCOL"INVALIDPROTOCOL"Protocol cannot be null"Protocol cannot be null"%s is not a (supported) Protocol"%s is not a (supported) Protocol""CZ"DEEP_CZ"DEEP_CZ"GEO"GEO""cz"deep_cz"deep_cz""geo"LocalizationMethod cannot be null"LocalizationMethod cannot be null" JSON not quoted" JSON not quoted" is not a LocalizationMethod" is not a LocalizationMethod"stringTypeConvertValuefailed to scan LocalizationMethod: "failed to scan LocalizationMethod: " is not a valid LocalizationMethod" is not a valid LocalizationMethod"failed to scan LocalizationMethod, unsupported input type: %T"failed to scan LocalizationMethod, unsupported input type: %T"ALWAYS"ALWAYS"NEVER"NEVER"always"always"never"never" is not a DeepCachingType" is not a DeepCachingType"STEERING_ORDER"STEERING_ORDER"STEERING_WEIGHT"STEERING_WEIGHT"STEERING_GEO_ORDER"STEERING_GEO_ORDER"STEERING_GEO_WEIGHT"STEERING_GEO_WEIGHT"steeringorder"steeringorder"steeringweight"steeringweight"steeringgeoorder"steeringgeoorder"steeringgeoweight"steeringgeoweight""RESOLVE4""RESOLVE6"resolve4"resolve4"resolve6"resolve6"CLIENT_STEERING"CLIENT_STEERING""DNS_LIVE"DNS_LIVE_NATNL"DNS_LIVE_NATNL""HTTP_LIVE"HTTP_LIVE_NATNL"HTTP_LIVE_NATNL""HTTP_NO_CACHE"STEERING"STEERING""ANY_MAP"httpnocache"httpnocache"dnslive"dnslive"dnslivenatnl"dnslivenatnl"anymap"anymap"httplive"httplive"httplivenatnl"httplivenatnl"clientsteering"clientsteering""_LIVE_NATNL""_LIVE""HOST_REGEXP"PATH_REGEXP"PATH_REGEXP"STEERING_REGEXP"STEERING_REGEXP"HEADER_REGEXP"HEADER_REGEXP"INVALID_MATCH_TYPE"INVALID_MATCH_TYPE"hostregexp"hostregexp"pathregexp"pathregexp"steeringregexp"steeringregexp"headerregexp"headerregexp" enum.go contains enumerations and strongly typed names. CDNName is the name of a CDN in Traffic Control. TrafficMonitorName is the (short) hostname of a Traffic Monitor peer. String implements the fmt.Stringer interface. CacheName is the (short) hostname of a cache server. CacheGroupName is the name of a Cache Group. DeliveryServiceName is the name of a Delivery Service. This has no attached semantics, and so it may be encountered in situations where it is the actual Display Name, but most often (as far as this author knows), it actually refers to a Delivery Service's XMLID. TopologyName is the name of a Topology. CacheType is the type (or tier) of a cache server. The allowable values for a CacheType. CacheTypeEdge represents an edge-tier cache server. CacheTypeMid represents a mid-tier cache server. CacheTypeInvalid represents an CacheType. Note this is the default construction for a CacheType. String returns a string representation of this CacheType, implementing the fmt.Stringer interface. CacheTypeFromString returns a CacheType structure from its string representation, or CacheTypeInvalid if the string is not a valid CacheType. IsValidCacheType returns true if the given string represents a valid cache type. InterfaceName is the name of a server interface. OriginLocationType is the Name of a Cache Group which represents an "Origin Location". There is no enforcement in Traffic Control anywhere that ensures than an ORG_LOC-Type Cache Group will only actually contain Origin servers. Deprecated: Prefer CacheGroupOriginTypeName for consistency. AlgorithmConsistentHash is the name of the Multi-Site Origin hashing algorithm that performs consistent hashing on a set of parents. MonitorTypeName is the Name of the Type which must be assigned to a server for it to be treated as a Traffic Monitor instance by ATC. "Rascal" is a legacy name for Traffic Monitor. Note that there is, in general, no guarantee that a Type with this name exists in Traffic Ops at any given time. MonitorProfilePrefix is a prefix which MUST appear on the Names of Profiles used by Traffic Monitor instances as servers in Traffic Ops, or they may not be treated properly. Deprecated: This should not be a requirement for TM instances to be treated properly, and new code should not check this. RouterTypeName is the Name of the Type which must be assigned to a server for it to be treated as a Traffic Router instance by ATC. "CCR" is an acronym for a legacy name for Traffic Router. EdgeTypePrefix is a prefix which MUST appear on the Names of Types used by edge-tier cache servers in order for them to be recognized as edge-tier cache servers by ATC. MidTypePrefix is a prefix which MUST appear on the Names of Types used by mid-tier cache servers in order for them to be recognized as mid-tier cache servers by ATC. OriginTypeName is the Name of the Type which must be assigned to a server for it to be treated as an Origin server by ATC. These are the Names of the Types that must be used by various kinds of Cache Groups to ensure proper behavior. Note that there is, in general, no guarantee that a Type with any of these names exist in Traffic Ops at any given time. Note also that there is no enforcement in Traffic Control that a particular Type of Cache Group contains only or any of a particular Type or Types of server(s). GlobalProfileName is the Name of a Profile that is treated specially in some respects by some components of ATC. Note that there is, in general, no guarantee that a Profile with this Name exists in Traffic Ops at any given time, nor that it will have or not have any particular set of assigned Parameters, nor that any set of Parameters that do happen to be assigned to it should it exist will have or not have particular ConfigFile or Secure or Value values, nor that any such Parameters should they exist would have Values that match any given pattern, nor that it has any particular Profile Type, nor that it is or is not assigned to any Delivery Service or server or server(s), nor that those servers be or not be of any particular Type should they exist. Traffic Ops promises much, but guarantees little. ParameterName represents the name of a Traffic Ops Parameter. This has no additional attached semantics. UseRevalPendingParameterName is the name of a Parameter which tells whether or not Traffic Ops should use pending content invalidation jobs separately from traditionally "queued updates". Note that there is no guarantee that a Parameter with this name exists in Traffic Ops at any given time, nor that it will have or not have any particular ConfigFile or Secure or Value value, nor that should such a Parameter exist that its value will match or not match any given pattern, nor that it will or will not be assigned to any particular Profile or Profiles or Cache Groups. Deprecated: UseRevalPending was a feature flag introduced for ATC version 2, and newer code should just assume that pending revalidations are going to be fetched by t3c. RefetchEnabled is the name of a Parameter used to determine if the Refetch feature is enabled. If enabled, this allows a consumer of the TO API to submit Refetch InvalidationJob types. These will subsequently be treated as a MISS by cache servers. Previously, the only capability was Refresh which was, in turn, treated as a STALE by cache servers. This value should be used with caution, since coupled with regex, could cause significant performance impacts by implementing cache servers if used incorrectly. Traffic Ops at any given time, and while it's implementation relies on a boolean Value, this it not guaranteed either. ConfigFileName is a Parameter ConfigFile value. This has no additional attached semantics, and so while it is known to most frequently refer to a Parameter's ConfigFile, it may also be used to refer to the name of a literal configuration file within or without the context of Traffic Control, with unknown specificity (relative or absolute path? file:// URL?) and/or restrictions. GlobalConfigFileName is ConfigFile value which can cause a Parameter to be handled specially by Traffic Control components under certain circumstances. Note that there is no guarantee that a Parameter with this ConfigFile value exists in Traffic Ops at any given time, nor that any particular number of such Parameters is allowed or forbidden, nor that any such existing Parameters will have or not have any particular Name or Secure or Value value, nor that should such a Parameter exist that its value will match or not match any given pattern, nor that it will or will not be assigned to any particular Profile or Profiles or Cache Groups. The allowed values for a Delivery Service's Query String Handling. These are prefixed "QueryStringIgnore" even though the values don't always indicate ignoring, because the database column is named "qstring_ignore". The allowed values for a Delivery Service's Range Request Handling. A DSTypeCategory defines the routing method for a Delivery Service, i.e. HTTP or DNS. DSTypeCategoryHTTP represents an HTTP-routed Delivery Service. DSTypeCategoryDNS represents a DNS-routed Delivery Service. DSTypeCategoryInvalid represents an invalid Delivery Service routing type. Note this is the default construction for a DSTypeCategory. String returns a string representation of this DSTypeCategory, implementing the fmt.Stringer interface. DSTypeCategoryFromString returns a DSTypeCategory from its string representation, or DSTypeCategoryInvalid if the string is not a valid DSTypeCategory. This is cAsE-iNsEnSiTiVe. GetDSTypeCategory returns the delivery service type category (either HTTP or DNS) of the given delivery service type. These are the allowable values for the Signing Algorithm property of a These are the allowable values for the Protocol property of a Delivery Indicates content will only be served using the unsecured HTTP Protocol. Indicates content will only be served using the secured HTTPS Protocol. Indicates content will only be served over both HTTP and HTTPS. Indicates content will only be served using the secured HTTPS Protocol, and that unsecured HTTP requests will be directed to use HTTPS instead. CacheStatus is a Name of some Status. More specifically, it is used here to enumerate the Statuses that are understood and acted upon in specific ways by Traffic Monitor. Note that the Statuses captured in this package as CacheStatus values are in no way restricted to use by cache servers, despite the name. These are the allowable values of a CacheStatus. Note that there is no guarantee that a Status by any of these Names exists in Traffic Ops at any given time, nor that such a Status - should it exist - have any given Description or ID. CacheStatusAdminDown represents a cache server which has been administratively marked as "down", but which should still appear in the CDN. CacheStatusOnline represents a cache server which should always be considered online/available/healthy, irrespective of monitoring. Non-cache servers also typically use this Status instead of REPORTED. CacheStatusOffline represents a cache server which should always be considered offline/unavailable/unhealthy, irrespective of monitoring. CacheStatusReported represents a cache server which is polled for health by Traffic Monitor. The vast majority of cache servers should have this Status. CacheStatusPreProd represents a cache server that is not deployed to "production", but is ready for it. CacheStatusInvalid represents an unrecognized Status value. Note that this is not actually "invalid", because Statuses may have any unique name, not just those captured as CacheStatus values in this package. String returns a string representation of this CacheStatus, implementing the CacheStatusFromString returns a CacheStatus from its string representation, or CacheStatusInvalid if the string is not a valid CacheStatus. Protocol represents an ATC-supported content delivery protocol. Deprecated: This does not accurately model the Protocol of a Delivery Service, use DSProtocolHTTP, DSProtocolHTTPS, DSProtocolHTTPToHTTPS, and DSProtocolHTTPAndHTTPS instead. The allowable values of a Protocol. Deprecated: These do not accurately model the Protocol of a Delivery ProtocolHTTP represents the HTTP/1.1 protocol as specified in RFC2616. ProtocolHTTPS represents the HTTP/1.1 protocol over a TCP connection secured by TLS. ProtocolHTTPtoHTTPS represents a redirection of unsecured HTTP requests to HTTPS. ProtocolHTTPandHTTPS represents the use of both HTTP and HTTPS. ProtocolInvalid represents an invalid Protocol. ProtocolFromString parses a string and returns the corresponding Protocol. LocalizationMethod represents an enabled localization method for a Cache Group. The string values of this type should match the Traffic Ops values. These are the allowable values of a LocalizationMethod. String returns a string representation of this LocalizationMethod, implementing the fmt.Stringer interface. LocalizationMethodFromString parses and returns a LocalizationMethod from its string representation. DeepCachingType represents a Delivery Service's Deep Caching Type. The string values of this type should match the Traffic Ops values. These are the allowable values of a DeepCachingType. Note that unlike most "enumerated" constants exported by this package, the default construction yields a valid value. default value String returns a string representation of this DeepCachingType, implementing DeepCachingTypeFromString returns a DeepCachingType from its string representation, or DeepCachingTypeInvalid if the string is not a valid DeepCachingTypeFromString. default when omitted UnmarshalJSON unmarshals a JSON representation of a DeepCachingType (i.e. a string) or returns an error if the DeepCachingType is invalid. This implements the encoding/json.Unmarshaler interface. MarshalJSON marshals into a JSON representation, implementing the encoding/json.Marshaler interface. A SteeringType is the Name of the Type of a Steering Target. These are the allowable values of a SteeringType. Note that, in general, there is no guarantee that a Type by any of these Names exists in Traffic Ops at any given time, nor that any such Types - should they exist - will have any particular UseInTable value, nor that the Types assigned to Steering Target relationships will be representable by these values. SteeringTypeFromString parses a string to return the corresponding SteeringType. Warning: This is cAsE-iNsEnSiTiVe, but some components of Traffic Ops may compare the Names of Steering Target Types in case-sensitive ways, so this may obscure values that will be later detected as invalid, depending on how it's used. String returns a string representation of this SteeringType, implementing A FederationResolverType is the Name of a Type of a Federation Resolver Mapping. These are the allowable values of a FederationResolverType. the Types assigned to Federation Resolver Mappings will be representable String imlpements the fmt.Stringer interface. FederationResolverTypeFromString parses a string and returns the corresponding FederationResolverType. DSType is the Name of a Type used by a Delivery Service. These are the allowable values for a DSType. the Types assigned to Delivery Services will be representable by these values. String returns a string representation of this DSType, implementing the DSTypeFromString returns a DSType from its string representation, or DSTypeInvalid if the string is not a valid DSType. UsesDNSSECKeys returns whether a Delivery Service of a Type that has a Name that is this DSType uses or needs DNSSEC keys. IsHTTP returns whether a Delivery Service of a Type that has a Name that is this DSType is HTTP-routed. IsDNS returns whether a Delivery Service of a Type that has a Name that is this DSType is DNS-routed. IsSteering returns whether a Delivery Service of a Type that has a Name that is this DSType is Steering-routed. HasSSLKeys returns whether Dlivery Services of this Type can have SSL keys. IsLive returns whether Delivery Services of this Type are "live". IsNational returns whether Delivery Services of this Type are "national". UsesMidCache returns whether Delivery Services of this Type use mid-tier DSTypeLiveNationalSuffix is the suffix that Delivery Services which are both "live" and "national" MUST have at the end of the Name(s) of the Type(s) they use in order to be treated properly by ATC. Deprecated: Use DSType.IsLive and DSType.IsNational instead. DSTypeLiveSuffix is the suffix that Delivery Services which are "live" - but not "national" (maybe?) - MUST have at the end of the Name(s) of the Type(s) A QStringIgnore defines how to treat the URL query string for requests for a given Delivery Service's content. This enum's String function returns the numeric representation, because it is a legacy database value, and the number should be kept for both database and API JSON uses. For the same reason, this enum has no FromString function. One should normally use the QueryStringIgnoreUseInCacheKeyAndPassUp, QueryStringIgnoreIgnoreInCacheKeyAndPassUp, and QueryStringIgnoreDropAtEdge constants instead, as they have the same type as the Delivery Service field they represent. These are the allowable values for a QStringIgnore. String returns the string number of the QStringIgnore value, implementing Note this returns the number, not a human-readable value, because QStringIgnore is a legacy database sigil, and both database and API JSON uses should use the number. This also returns 'INVALID' for unknown values, to fail fast in the event of bad data. A DSMatchType is the Name of a Type of a Regular Expression ("Regex") used by a Delivery Service. These are the allowed values for a DSMatchType. the Types assigned to Delivery Service Regexes will be representable String returns a string representation of this DSMatchType, implementing the DSMatchTypeFromString returns a DSMatchType from its string representation, or DSMatchTypeInvalid if the string is not a valid type./Users/test/Desktop/trafficcontrol/lib/go-tc/federation.go`json:"cname" db:"cname"``json:"ttl" db:"ttl"``json:"deliveryService,omitempty"``json:"id" db:"ds_id"``json:"xmlID" db:"xml_id"``json:"id,omitempty" db:"ds_id"``json:"xmlId,omitempty" db:"xml_id"``json:"mappings"``json:"cname"``json:"resolve4,omitempty"``json:"resolve6,omitempty"`[ %s ] is not a valid ip address."[ %s ] is not a valid ip address."`json:"company" db:"company"``json:"fullName" db:"full_name"``json:"role" db:"role_name"``json:"username" db:"username"``json:"userIds"``json:"federations"`federations: required"federations: required"must specify at least one Delivery Service/Federation Resolver(s) mapping"must specify at least one Delivery Service/Federation Resolver(s) mapping" CDNFederationResponse represents a Traffic Ops API response to a request for one or more of a CDN's Federations. CreateCDNFederationResponse represents a Traffic Ops API response to a request to create a new Federation for a CDN. UpdateCDNFederationResponse represents a Traffic Ops API response to a request to replace a Federation of a CDN with the one provided in the request body. DeleteCDNFederationResponse represents a Traffic Ops API response to a request to remove a Federation from a CDN. CDNFederation represents a Federation. omitempty only works with primitive types and pointers CDNFederationDeliveryService holds information about an assigned Delivery Service within a CDNFederationV5 structure. CDNFederationV5 represents a Federation of some CDN as it appears in version 5 of the Traffic Ops API. CDNFederationsV5Response represents a Traffic Ops APIv5 response to a request for one or more of a CDN's Federations. CDNFederationV5Response represents a Traffic Ops APIv5 response to a request for a single CDN's Federations. DeliveryServiceIDs are pairs of identifiers for Delivery Services. FederationNullable represents a relationship between some Federation Mappings and a Delivery Service. This is not known to be used anywhere. A FederationMapping is a Federation, without any information about its resolver mappings or any relation to Delivery Services. AllDeliveryServiceFederationsMapping is a structure that contains identifying information for a Delivery Service as well as any and all Federation Resolver mapping assigned to it (or all those getting assigned to it). IsAllFederations implements the IAllFederation interface. Always returns true. FederationsResponse is the type of a response from Traffic Ops to requests to its /federations/all and /federations endpoints. AllFederationCDN is the structure of a response from Traffic Ops to a GET request made to its /federations/all endpoint. A ResolverMapping is a set of Resolvers, ostensibly for a Federation. FederationResolverMapping is the set of all resolvers - both IPv4 and IPv6 - for a specific Federation. TTL is the Time-to-Live of a DNS response to a request to resolve this Federation's CNAME IAllFederation is an interface for the disparate objects returned by Federations-related Traffic Ops API endpoints. Adds additional safety, allowing functions to only return one of the valid object types for the endpoint. FederationDSPost is the format of a request to associate a Federation with any number of Delivery Services. Replace indicates whether existing Federation-to-Delivery Service associations should be replaced by the ones defined by this request, or otherwise merely augmented with them. FederationUser represents Federation Users. FederationUsersResponse is the type of a response from Traffic Ops to a request made to its /federations/{{ID}}/users endpoint. FederationUserPost represents POST body for assigning Users to Federations. DeliveryServiceFederationResolverMapping structures represent resolvers to which a Delivery Service maps "federated" CDN traffic. LegacyDeliveryServiceFederationResolverMappingRequest is the legacy format for a request to create (or modify) the Federation Resolver mappings of one or more Delivery Services. Use this for compatibility with API versions 1.3 and older. DeliveryServiceFederationResolverMappingRequest is the format of a request to create (or modify) the Federation Resolver mappings of one or more Delivery Services. Use this when working only with API versions 1.4 and newer./Users/test/Desktop/trafficcontrol/lib/go-tc/federation_federation_resolvers.go`json:"fedResolverIds"` FederationFederationResolversResponse represents an API response containing Federation Resolvers for a given Federation. AssignFederationFederationResolversResponse represents an API response for assigning a Federation Resolver to a Federation. AssignFederationResolversRequest represents an API request/response for assigning Federation Resolvers to a Federation./Users/test/Desktop/trafficcontrol/lib/go-tc/federation_resolver.go`json:"ipAddress" db:"ip_address"``json:"lastUpdated,omitempty" db:"last_updated"``json:"typeId,omitempty" db:"type"`invalid network IP or CIDR-notation subnet"invalid network IP or CIDR-notation subnet" FederationResolversResponse represents a Traffic Ops API response to a GET request to its /federation_resolvers endpoint. FederationResolverResponse represents a Traffic Ops API response to a POST or DELETE request to its /federation_resolvers endpoint. FederationResolver represents a resolver record for a CDN Federation. FederationResolverV5 - is an alias for the Federal Resolver struct response used for the latest minor version associated with APIv5. FederationResolverV50 - is used for RFC3339 format timestamp in FederationResolver which represents a resolver record for a CDN Federation for APIv50. FederationResolversResponseV5 - an alias for the Federation Resolver's struct response used for the latest minor version associated with APIv5. FederationResolversResponseV50 - GET request to its /federation_resolvers endpoint for APIv50. FederationResolverResponseV5 - represents struct response used for the latest minor version associated with APIv5. FederationResolverResponseV50 - POST request to its /federation_resolvers endpoint APIv50. this is handled by 'required' UpgradeToFederationResolverV5 upgrades an APIv4 Federal Resolver into an APIv5 Federal Resolver of/Users/test/Desktop/trafficcontrol/lib/go-tc/hwinfos.go`json:"-" db:"id"``json:"serverHostName" db:"serverhostname"``json:"serverId" db:"serverid"``json:"val" db:"val"` HWInfoResponse is a list of HWInfos as a response. HWInfo can be used to return information about a server's hardware, but the corresponding Traffic Ops API route is deprecated and unusable without alteration./Users/test/Desktop/trafficcontrol/lib/go-tc/invalidationjobs.gorowmaxHoursjobEndtestJobtestJobEndtestJobStartjobStartreadQueryttlHours2562047172800000000000^\?/.*$`^\?/.*$``json:"assetUrl"``json:"createdBy"``json:"regex"``json:"urgent"``json:"agent"``json:"assetType"``json:"enteredTime"``json:"objectName"``json:"objectType"``json:"username"`Attempted to turn a nil DeliveryService into a DSID"Attempted to turn a nil DeliveryService into a DSID"Attempted to turn a DeliveryService into a DSID with no DB connection"Attempted to turn a DeliveryService into a DSID with no DB connection"Delivery Service ID cannot be negative"Delivery Service ID cannot be negative"SELECT EXISTS(SELECT * FROM deliveryservice WHERE id=$1)`SELECT EXISTS(SELECT * FROM deliveryservice WHERE id=$1)`Error checking for deliveryservice existence in DSID: %v
"Error checking for deliveryservice existence in DSID: %v\n"Unknown error occurred"Unknown error occurred"No Delivery Service exists matching identifier: %v"No Delivery Service exists matching identifier: %v"SELECT id FROM deliveryservice WHERE xml_id=$1`SELECT id FROM deliveryservice WHERE xml_id=$1`ErrNoRowsNo DeliveryService exists matching identifier: %v"No DeliveryService exists matching identifier: %v"unsupported DS key type: %T
"unsupported DS key type: %T\n"NewStringRule\/`\/`must start with '/' (or '\/')`must start with '/' (or '\/')`regex: is not a valid Regular Expression: "regex: is not a valid Regular Expression: "startTime: cannot be blank"startTime: cannot be blank"startTime: must be in the future"startTime: must be in the future"ttl: must be a number of hours, or a duration string e.g. '48h'"ttl: must be a number of hours, or a duration string e.g. '48h'"SELECT value FROM parameter WHERE name='maxRevalDurationDays' AND config_file='regex_revalidate.config'`SELECT value FROM parameter WHERE name='maxRevalDurationDays' AND config_file='regex_revalidate.config'`ttl: cannot exceed "ttl: cannot exceed "
SELECT asset_url,
	   ttl_hr,
       start_time
FROM job
WHERE job.job_deliveryservice = $1
`
SELECT asset_url,
	   ttl_hr,
       start_time
FROM job
WHERE job.job_deliveryservice = $1
`unable to query for invalidation jobs while validating job uniqueness"unable to query for invalidation jobs while validating job uniqueness"Invalidation request duplicate found for %v, start:%v end:%v"Invalidation request duplicate found for %v, start:%v end:%v"Attempted to convert a nil TTL into hours"Attempted to convert a nil TTL into hours"TTL cannot be negative!"TTL cannot be negative!"TTL cannot exceed %d hours!"TTL cannot exceed %d hours!"ParseDurationInvalid duration entered for TTL! Must be at least one hour, but no more than %d hours!"Invalid duration entered for TTL! Must be at least one hour, but no more than %d hours!"unsupported TTL key type: %T
"unsupported TTL key type: %T\n"startTime: must be within two days from now"startTime: must be within two days from now"startTime: cannot be in the past"startTime: cannot be in the past"startTime: must be within two days"startTime: must be within two days"regex: is not a valid regular expression: "regex: is not a valid regular expression: "SELECT id FROM deliveryservice WHERE id = $1::bigint`SELECT id FROM deliveryservice WHERE id = $1::bigint`no Delivery Service corresponding to 'dsId'"no Delivery Service corresponding to 'dsId'"ttl: must be at least 1"ttl: must be at least 1""REFRESH""REFETCH"uint32`json:"ttlHours"``json:"invalidationType"`InvalidationJobV4{ID: %d, AssetURL: "%s", CreatedBy: "%s", DeliveryService: "%s", TTLHours: %d, InvalidationType: "%s", StartTime: "%s"}`InvalidationJobV4{ID: %d, AssetURL: "%s", CreatedBy: "%s", DeliveryService: "%s", TTLHours: %d, InvalidationType: "%s", StartTime: "%s"}` MaxTTL is the maximum value of TTL representable as a time.Duration object, which is used internally by InvalidationJobInput objects to store the TTL. ValidJobRegexPrefix matches the only valid prefixes for a relative-path Content Invalidation Job regular expression. InvalidationJob represents a content invalidation job as returned by the API. StartTime is the time at which the job will come into effect. Must be in the future, but will fail to Validate if it is further in the future than two days. InvalidationJobsResponse is the type of a response from Traffic Ops to a request made to its /jobs API endpoint. InvalidationJobInput represents user input intending to create or modify a content invalidation job. DeliveryService needs to be an identifier for a Delivery Service. It can be either a string - in which case it is treated as an XML_ID - or a float64 (because that's the type used by encoding/json to represent all JSON numbers) - in which case it's treated as an integral, unique identifier (and any fractional part is discarded, i.e. 2.34 -> 2) Regex is a regular expression which not only must be valid, but should also start with '/' (or escaped: '\/') StartTime is the time at which the job will come into effect. Must be in the future. TTL indicates the Time-to-Live of the job. This can be either a valid string for time.ParseDuration, or a float64 indicating the number of hours. Note that regardless of the actual value here, Traffic Ops will only consider it rounded down to the nearest natural number UserInvalidationJobInput Represents legacy-style user input to the /user/current/jobs API endpoint. This is much less flexible than InvalidationJobInput, which should be used instead when possible. UserInvalidationJob is a full representation of content invalidation jobs as stored in the database, including several unused fields. Agent is unused, and developers should never count on it containing or meaning anything. AssetType is unused, and developers should never count on it containing or meaning anything. ObjectName is unused, and developers should never count on it containing or meaning anything. ObjectType is unused, and developers should never count on it containing or meaning anything. DSID gets the integral, unique identifier of the Delivery Service identified by InvalidationJobInput.DeliveryService This requires a transaction connected to a Traffic Ops database, because if DeliveryService is an xml_id, a database lookup will be necessary to get the unique, integral identifier. Thus, this method also checks for the existence of the identified Delivery Service, and will return an error if it does not exist. Validate validates that the user input is correct, given a transaction connected to the Traffic Ops database. In particular, it enforces the constraints described on each field, as well as ensuring they actually exist. This method calls InvalidationJobInput.DSID to validate the DeliveryService field. This returns an error describing any and all problematic fields encountered during validation. silently ignore other errors too ValidateJobUniqueness returns a message describing each overlap between existing content invalidation jobs for the same assetURL as the one passed. TODO: This doesn't belong in the lib, and it swallows errors because it can't log them. jobStart in testJob range jobEnd in testJob range job range encaspulates testJob range TTLHours gets the number of hours of the job's TTL - rounded down to the nearest natural number, or an error if it is an invalid value. TTLHours will parse job.Parameters to find TTL, returns an int representing number of hours. Returns 0 in case of issue (0 is an invalid TTL). Validate checks that the InvalidationJob is valid, by ensuring all of its fields are well-defined. connected to the Traffic Ops database. This requires a database transaction to check that the DSID is a valid identifier for an existing Delivery Service. Returns an error describing any and all problematic fields encountered during validation. silently ignore other errors These are the allowed values for the InvalidationType of an InvalidationJobCreateV4/InvalidationJobV4. InvalidationJobsResponseV4 is the type of a response from Traffic Ops to a request made to its /jobs API endpoint for API major version 4. InvalidationJobCreateV4 is an alias for the InvalidationJobCreateV40 struct used for the latest minor version associated with api major version 4. InvalidationJobCreateV40 represents user input intending to create a content invalidation job. The Delivery Service XML-ID for which the Invalidation Job is to be applied. TTLHours indicates the Time-to-Live of the job in hours. Must be a positive integer value. InvalidationType must be either REFRESH (default behavior) or REFETCH. If REFETCH, must also comply with global parameter setting InvalidationJobV4 is an alias for the InvalidationJobV4 struct used for the latest minor version associated with api major version 4. InvalidationJobV40 represents a content invalidation job as returned by the API. Also used for Update calls. String implements the fmt.Stringer interface by providing a textual representation of the InvalidationJobV4./Users/test/Desktop/trafficcontrol/lib/go-tc/iso.go OSVersionsResponse is the JSON representation of the OS versions data for ISO generation. OSVersionsAPIResponse is the type of a response from Traffic Ops to a request to its /osversions endpoint. Structure of this map:  key:   Name of OS  value: Directory where the ISO source can be found/Users/test/Desktop/trafficcontrol/lib/go-tc/jobs.gojri`2006-01-02 15:04:05-07`startTime '"startTime '"' is not of the required format '"' is not of the required format '" Job represents a content invalidation job as stored in the database. Deprecated: Use InvalidationJob instead, as it's more flexible. JobRequest contains the data to create a job. Note this is a convenience struct for posting users; the actual JSON object is a JobRequestAPI Deprecated: Use InvalidationJobInput instead, as it's more flexible. JobRequestTimeFormat is a Go reference time format, for use with time.Format, of the format used by the Perl version of the /jobs and /user/current/jobs endpoints. Deprecated: Since job inputs no longer strictly require this format, an RFC 3339 format or a timestamp in milliseconds should be used instead. JobTimeFormat is a Go reference time format, for use with time.Format. Deprecated: this format is the same as TimeLayout - which should be used instead. UnmarshalJSON implements the encoding/json Unmarshaler interface. JobRequestAPI represents the JSON input accepted by the API for creating new content invalidation jobs. Deprecated: This structure is technically incorrect, and has been superseded by the InvalidationJobInput structure./Users/test/Desktop/trafficcontrol/lib/go-tc/log.gologV5`json:"message"``json:"ticketNum"`ConvertTimeFormat`json:"newLogcount"` LogsResponse is a list of Logs as a response. LogsResponseV5 is a list of Logs as a response, for the latest minor version of api 5.x. LogsResponseV50 is a list of Logs as a response, for api version 5.0. Log contains a change that has been made to the Traffic Control system. Upgrade changes a Log structure into a LogV5 structure LogV50 contains a change that has been made to the Traffic Control system, for api version 5.0. LogV5 is the Log structure used by the latest 5.x API version NewLogCountResp is the response returned when the total number of new changes made to the Traffic Control system is requested. "New" means since the last time this information was requested./Users/test/Desktop/trafficcontrol/lib/go-tc/origins.gooriginV5`json:"coordinate" db:"coordinate"``json:"coordinateId" db:"coordinate_id"``json:"deliveryServiceId" db:"deliveryservice_id"``json:"fqdn" db:"fqdn"``json:"ip6Address" db:"ip6_address"``json:"isPrimary" db:"is_primary"``json:"port" db:"port"``json:"tenant" db:"tenant"` OriginsResponse is a list of Origins as a response. OriginDetailResponse is the JSON object returned for a single origin. Origin contains information relating to an Origin, which is NOT, in general, the same as an origin *server*. OriginsResponseV5 is an alias for the latest minor version of the major version 5. OriginsResponseV50 is a list of Origins as a response for APIv5. OriginDetailResponseV5 is an alias for the latest minor version of the major version 5. OriginDetailResponseV50 is the JSON object returned for a single origin in APIv5. OriginV5 is an alias for the latest minor version of the major version 5. OriginV50 contains information relating to an Origin, in the latest minor version APIv50. ToOriginV5 upgrades from Origin to APIv5./Users/test/Desktop/trafficcontrol/lib/go-tc/parameters.goppArrppErrsprofileParamnonExistingIDspq`json:"profiles" db:"profiles"`"secure"required fields missing: "required fields missing: "TrimLeft 
	" \n\t\r"no body"no body"['['91object "object "`json:"profileId"``json:"paramIds"`profileId missing"profileId missing"checking profile ID "checking profile ID " existence: " existence: "no profile with ID "no profile with ID " exists" exists"paramIds missing"paramIds missing"checking parameter IDs %v existence: %w"checking parameter IDs %v existence: %w"parameters with IDs %v don't exist"parameters with IDs %v don't exist"`json:"paramId"``json:"profileIds"`paramId missing"paramId missing"checking param ID "checking param ID "no parameter with ID "no parameter with ID "profileIds missing"profileIds missing"checking profiles IDs %v existence: "checking profiles IDs %v existence: "profiles with IDs %v don't all exist"profiles with IDs %v don't all exist"SELECT count(*) from parameter where id = $1`SELECT count(*) from parameter where id = $1`querying param existence from id: "querying param existence from id: "SELECT ARRAY_AGG(id) FROM UNNEST($1::INT[]) AS id WHERE id NOT IN (SELECT id FROM parameter)`SELECT ARRAY_AGG(id) FROM UNNEST($1::INT[]) AS id WHERE id NOT IN (SELECT id FROM parameter)`ValuerArrayquerying parameters existence from id: %w"querying parameters existence from id: %w"`json:"parameter" db:"parameter_id"``json:"parameter"``json:"profile"``json:"config_file"` ParametersResponse is the type of the response from Traffic Ops to GET requests made to the /parameters and /profiles/name/{{Name}}/parameters endpoints of its API. A Parameter defines some configuration setting (which is usually but definitely not always a line in a configuration file) used by some Profile or Cache Group. ParameterNullable is exactly like Parameter except that its properties are reference values, so they can be nil. NOTE: the db: struct tags are used for testing to map to their equivalent database column (if there is one) ParametersResponseV5 is an alias for the latest minor version for the major version 5. ParametersResponseV50 is the type of the response from Traffic Ops to GET ParameterV5 is an alias for the latest minor version for the major version 5. A ParameterV50 defines some configuration setting (which is usually but ParameterNullableV5 is an alias for the latest minor version for the major version 5. ParameterNullableV50 is exactly like Parameter except that its properties are ProfileParameterByName is a structure that's used to represent a Parameter in a context where they are associated with some Profile specified by a client of the Traffic Ops API by its Name. ProfileParameterByNameV5 is the alias to the latest minor version of major version 5 ProfileParameterByNameV50 is a structure that's used to represent a Parameter ProfileParameterByNamePost is a structure that's only used internally to represent a Parameter that has been requested by a client of the Traffic Ops API to be associated with some Profile which was specified by Name. TODO: This probably shouldn't exist, or at least not be in the lib. ProfileParametersByNamePost is the object posted to profile/name/parameter endpoints. This object may be posted as either a single JSON object, or an array of objects. Either will unmarshal into this object; a single object will unmarshal into an array of 1 element. ProfileParameterPostRespObj is a single Parameter in the Parameters slice of a ProfileParameterPostResp. ProfileParameterPostResp is the type of the `response` property of responses from Traffic Ops to POST requests made to its /profiles/name/{{Name}}/parameters API endpoint. A PostProfileParam is a request to associate zero or more Parameters with a particular Profile. Sanitize ensures that Replace is not nil, setting it to false if it is. TODO: Figure out why this is taking a db transaction - should this be moved? A PostParamProfile is a request to associate a particular Parameter with zero or more Profiles. ParamExists returns whether a parameter with the given id exists, and any error. ParamsExist returns whether parameters exist for all the given ids, and any error. ProfileParametersNullable is an object of the form returned by the Traffic Ops /profileparameters endpoint. ProfileParametersNullableV5 is the latest minor version of the major version 5 ProfileParametersNullableV50 is an object of the form returned by the Traffic Ops /profileparameters endpoint. ProfileParametersNullableResponse is the structure of a response from Traffic Ops to GET requests made to its /profileparameters API endpoint. TODO: This is only used internally in a v3 client method (not its call signature) - deprecate? Remove? ProfileParam is a relationship between a Profile and some Parameter assigned to it as it appears in the Traffic Ops API's responses to the /profileparameters endpoint. Parameter is the ID of the Parameter. Profile is the name of the Profile to which the Parameter is assigned. ProfileParamV5 is the latest minor version of the major version 5 ProfileParamV50 is a relationship between a Profile and some Parameter ProfileParameterCreationRequest is the type of data accepted by Traffic Ops as payloads in POST requests to its /profileparameters endpoint. ProfileParametersAPIResponse is the type of a response from Traffic Ops to requests made to its /profileparameters endpoint. ProfileParametersAPIResponseV5 is the latest minor version of the major version 5 ProfileParametersAPIResponseV50 is the type of a response from Traffic Ops to ProfileExportImportParameterNullable is an object of the form used by Traffic Ops to represent parameters for exported and imported profiles./Users/test/Desktop/trafficcontrol/lib/go-tc/physlocations.go`json:"address" db:"address"``json:"city" db:"city"``json:"comments" db:"comments"``json:"phone" db:"phone"``json:"poc" db:"poc"``json:"regionId" db:"region"``json:"region" db:"region_name"``json:"state" db:"state"``json:"zip" db:"zip"` PhysLocationsResponse is a list of PhysLocations as a response. PhysLocationResponse is a single PhysLocationNullable as a response. PhysLocation contains the physical location of a cache group. The Street Address of the physical location The Address of the physical location comments are additional details about the physical location The email address for the Point of Contact at the physical location The name of the physical location Timestamp of the last time this row was updated The phone number of the physical location The Point Of Contact at the physical location The RegionID associated to this physical location The Region Name for the region associated to this physical location The shortName for the physical location (like an alias) The State for the physical location The Zipcode for the physical location PhysLocationNullable contains the physical location of a cache group. It allows for all fields to be null. PhysLocationTrimmed contains only the name of a physical location. PhysLocationV5 is an alias for the latest minor version for the major version 5. PhysLocationV50 contains the physical location of a cache group. PhysLocationsResponseV5 is an alias for the latest minor version for the major version 5. PhysLocationsResponseV50 is a list of PhysLocations as a response. PhysLocationNullableV5 is an alias for the latest minor version for the major version 5. PhysLocationNullableV50 contains the physical location of a cache group. It PhysLocationResponseV5 is an alias for the latest minor version for the major version 5. PhysLocationResponseV50 is a single PhysLocationNullable as a response./Users/test/Desktop/trafficcontrol/lib/go-tc/plugins.go`json:"description"` Plugin represents a TO enabled plugin used by Traffic Ops. PluginsResponse represents the response from Traffic Ops when getting enabled plugins./Users/test/Desktop/trafficcontrol/lib/go-tc/profile_parameters.go`json:"parameter" db:"parameter"` ProfileParametersResponse is the type of the response from Traffic Ops to GET requests made to its /profileparameters API endpoint. ProfileParameterResponse is a single ProfileParameter response for Create to swagger:response ProfileParameterResponse ProfileParameter is a representation of a relationship between a Parameter and a Profile to which it is assigned. Note that not all unique identifiers for each represented object in this relationship structure are guaranteed to be populated by the Traffic Ops ProfileParameterNullable is identical to ProfileParameter, except that its fields are reference values, which allows them to be nil. ProfileParametersResponseV5 is the type of the response from Traffic Ops to ProfileParameterResponseV5 is a single ProfileParameter response for Create to ProfileParameterV5 is the latest minor version of the major version 5 ProfileParameterV50 is a representation of a relationship between a Parameter/Users/test/Desktop/trafficcontrol/lib/go-tc/profiles.goerrStringATS_PROFILE"ATS_PROFILE"DS_PROFILE"DS_PROFILE"ES_PROFILE"ES_PROFILE""GROVE_PROFILE"INFLUXDB_PROFILE"INFLUXDB_PROFILE"KAFKA_PROFILE"KAFKA_PROFILE"LOGSTASH_PROFILE"LOGSTASH_PROFILE"ORG_PROFILE"ORG_PROFILE"RIAK_PROFILE"RIAK_PROFILE"SPLUNK_PROFILE"SPLUNK_PROFILE"TM_PROFILE"TM_PROFILE"TP_PROFILE"TP_PROFILE"TR_PROFILE"TR_PROFILE"TS_PROFILE"TS_PROFILE"UNK_PROFILE"UNK_PROFILE"`json:"param"``json:"params,omitempty"``json:"routingDisabled" db:"routing_disabled"``json:"idCopyFrom"``json:"profileCopyFrom"`wrong type, need: string, got: %T"wrong type, need: string, got: %T"required and cannot be blank"required and cannot be blank"cannot contain spaces"cannot contain spaces""cdnName"checking cdn name %v existence"checking cdn name %v existence"%v CDN does not exist"%v CDN does not exist"checking profile name %v existence"checking profile name %v existence"a profile with the name "%s" already exists"a profile with the name \"%s\" already exists"parameter "parameter "SELECT count(*) from profile where id = ANY($1)`SELECT count(*) from profile where id = ANY($1)`querying profiles existence from id: "querying profiles existence from id: "SELECT count(*) from profile where id = $1`SELECT count(*) from profile where id = $1`querying profile existence from id: "querying profile existence from id: "SELECT count(*) from profile where name = $1`SELECT count(*) from profile where name = $1`querying profile existence from name: "querying profile existence from name: " These are the valid values for the Type property of a Profile. No other values will be accepted, and these are not configurable. RiakProfileType is the type of a Profile used on the legacy RiakKV system which used to be used as a back-end for Traffic Vault. Deprecated: Support for Riak as a Traffic Vault back-end is being dropped in the near future. Profiles of type UnknownProfileType should be used on PostgreSQL database servers instead. ProfilesResponse is a list of profiles returned by GET requests. ProfileResponse is a single Profile Response for Update and Create to depict what changed swagger:response ProfileResponse A Profile represents a set of configuration for a server or Delivery Service which may be reused to allow sharing configuration across the objects to which it is assigned. ProfilesResponseV5 is a list of profiles returned by GET requests. A ProfileV5 represents a set of configuration for a server or Delivery Service which it is assigned. Note: Field LastUpdated represents RFC3339 ProfileNullable is exactly the same as Profile except that its fields are reference values, so they may be nil. ProfileCopy contains details about the profile created from an existing profile. ProfileCopyResponse represents the Traffic Ops API's response when a Profile is copied. ProfileExportImportNullable is an object of the form used by Traffic Ops to represent exported and imported profiles. ProfileExportResponse is an object of the form used by Traffic Ops to represent exported profile response. Parameters associated to the profile ProfileImportRequest is an object of the form used by Traffic Ops to represent a request to import a profile. ProfileImportResponse is an object of the form used by Traffic Ops to represent a response from importing a profile. ProfileImportResponseObj contains data about the profile being imported. Validate validates an profile import request, implementing the Profile fields are valid Validate CDN exist Validate profile does not already exist Validate all parameters export/import does not include secure flag default value to not flag on validation ProfilesExistByIDs returns whether profiles exist for all the given ids, and any error. ProfileExistsByID returns whether a profile with the given id exists, and any error. ProfileExistsByName returns whether a profile with the given name exists, and any error./Users/test/Desktop/trafficcontrol/lib/go-tc/regions.go`json:"divisionName"``json:"division" db:"division"``json:"division"` RegionsResponse is the type of responses from Traffic Ops to GET requests made to its /regions API endpoint. A Region is a named collection of Physical Locations within a Division. RegionsResponseV5 is an alias for the latest minor version of the major version 5. RegionsResponseV50 is response made from /regions API endpoint - in the latest minor version APIv50. RegionV5 is an alias for the latest minor version of the major version 5. RegionV50 is a named collection of Physical Locations within a Division in the latest minor version APIv50. RegionName is a response to a request to get a region by its name. It includes the division that the region is in. RegionNameDivision is the division that contains the region that a request is trying to query by name. RegionNameResponse models the structure of a response to a request to get a region by its name./Users/test/Desktop/trafficcontrol/lib/go-tc/roles.goroleV4`json:"permissions" db:"permissions"``json:"capabilities" db:"-"``json:"privLevel" db:"priv_level"` AdminRoleName is the Name of the special "admin" Role. This Role must always exist; it cannot be modified or deleted, and is guaranteed to exist in all valid ATC environments. RoleV4 is an alias for the latest minor version for the major version 4. RolesResponseV4 is a list of RoleV4 as a response. RoleResponseV4 is a RoleV4 as a response. RoleV40 is the structure used to depict roles in API v4.0. Validate will validate and make sure all that the fields in the supplied RoleV4 struct are semantically correct. Upgrade will convert the passed in instance of Role struct into an instance of RoleV4 struct. Downgrade will convert the passed in instance of RoleV4 struct into an instance of Role struct. RolesResponse is a list of Roles as a response. swagger:response RolesResponse RoleResponse is a single Role response for Update and Create to depict what swagger:response RoleResponse A Role is a definition of the permissions afforded to a user with that Role. Capabilities associated with the Role RoleV11 is a representation of a Role as it appeared in version 1.1 of the Deprecated: Traffic Ops API version 1.1 no longer exists - the ONLY reason this structure still exists is because it is nested in newer structures - DO NOT USE THIS! ID of the Role Name of the Role Description of the Role Priv Level of the Role/Users/test/Desktop/trafficcontrol/lib/go-tc/server_capabilities.go ServerCapabilitiesResponse contains the result data from a GET /server_capabilities request. ServerCapabilitiesResponseV41 contains the result data from a GET(v4.1 and above) /server_capabilities request. ServerCapability contains information about a given ServerCapability in Traffic Ops. ServerCapabilityV4 is an alias for the latest minor version for the major version 4. ServerCapabilityV41 contains information (in-addition to description) about a given ServerCapability  in Traffic Ops. ServerCapabilityDetailResponse contains the result data from a POST /server_capabilities request. ServerCapabilityDetailResponseV41 contains the result data from a POST(v4.1 and above) /server_capabilities request. ServerCapabilityV5 is an alias for the latest minor version for the major version 5. ServerCapabilityV50 contains information about a given serverCapability in Traffic Ops V5. ServerCapabilitiesResponseV5 is an alias for the latest minor version for the major version 5. ServerCapabilitiesResponseV50 contains the result data from a GET(v5.1 and above) /server_capabilities request. ServerCapabilityDetailResponseV5 is an alias for the latest minor version for the major version 5. ServerCapabilityDetailResponseV50 contains the result data from a POST(v5.1 and above) /server_capabilities request./Users/test/Desktop/trafficcontrol/lib/go-tc/server_server_capability.go`json:"serverHostName,omitempty" db:"host_name"``json:"serverId" db:"server"``json:"serverCapability" db:"server_capability"``json:"serverCapabilities" db:"server_capability"``json:"serverIds" db:"server"``json:"pageType"` ServerServerCapabilityV5 is a ServerServerCapability as it appears in version 5 of the ServerServerCapabilityV50 represents an association between a server capability and a server. ServerServerCapability represents an association between a server capability and a server. MultipleServersCapabilities represents an association between a server capability and list of servers and an association between a server and list of server capabilities. ServerServerCapabilitiesResponseV5 is the type of a response from the /api/5.x/server_server_capabilities Traffic Ops endpoint. It always points to the type for the latest minor version of APIv5. ServerServerCapabilitiesResponseV50 is the type of a response from Traffic Ops to a request made to its /api/5.0/server_server_capabilities. ServerServerCapabilitiesResponse is the type of a response from Traffic Ops to a request made to its /server_server_capabilities./Users/test/Desktop/trafficcontrol/lib/go-tc/servercheckextensions.gocheckRegexType`json:"version" db:"version"``json:"info_url" db:"info_url"``json:"script_file" db:"script_file"``json:"isactive" db:"isactive"``json:"additional_config_json" db:"additional_config_json"``json:"servercheck_short_name" db:"servercheck_short_name"``json:"-" db:"servercheck_column_name"``json:"type" db:"type_name"``json:"-" db:"type"``json:"-" db:"last_updated"``json:"supplemental"`^CHECK_EXTENSION_`^CHECK_EXTENSION_`info_url"info_url"script_file"script_file"isactive"isactive"ServerCheckExtension update not supported; delete and re-add."ServerCheckExtension update not supported; delete and re-add."isactive can only be 0 or 1."isactive can only be 0 or 1." ServerCheckExtensionNullable represents a server check extension used by Traffic Ops. ServerCheckExtensionResponse represents the response from Traffic Ops when getting ServerCheckExtension. ServerCheckExtensionPostResponse represents the response from Traffic Ops when creating ServerCheckExtension. A ServerCheckExtensionID contains an identified for a Servercheck Extension. Validate ensures that the ServerCheckExtensionNullable request body is valid for creation./Users/test/Desktop/trafficcontrol/lib/go-tc/serverchecks.go`json:"adminState"``json:"cacheGroup"``json:"hostName"``json:"revalPending"``json:"updPending"``json:"10G"``json:"10G6"``json:"CDU"``json:"CHR"``json:"DSCP"``json:"FQDN"``json:"ILO"``json:"IPv4"``json:"IPv6"``json:"MTU"``json:"ORT"``json:"RTR"``json:"checks"``json:"servercheck_short_name"``json:"name" ``json:"host_name"`id or host_name"id or host_name"servercheck_short_name"servercheck_short_name"`json:"checks,omitempty"``db:"id"``db:"server"``db:"aa"``db:"ab"``db:"ac"``db:"ad"``db:"ae"``db:"af"``db:"ag"``db:"ah"``db:"ai"``db:"aj"``db:"ak"``db:"al"``db:"am"``db:"an"``db:"ao"``db:"ap"``db:"aq"``db:"ar"``db:"at"``db:"au"``db:"av"``db:"aw"``db:"ax"``db:"ay"``db:"az"``db:"ba"``db:"bb"``db:"bc"``db:"bd"``db:"be"``db:"bf"` ServerchecksResponse is a list of Serverchecks as a response. swagger:response ServerchecksResponse CommonCheckFields is a structure containing all of the fields common to both Serverchecks and GenericServerChecks. AdminState is the server's status - called "AdminState" for legacy reasons. CacheGroup is the name of the Cache Group to which the server belongs. ID is the integral, unique identifier of the server. HostName of the checked server. RevalPending is a flag that indicates if revalidations are pending for the checked server. Profile is the name of the Profile used by the checked server. Type is the name of the server's Type. UpdPending is a flag that indicates if updates are pending for the checked server. Servercheck is a single Servercheck struct for GET response. swagger:model Servercheck Various check types IPv4 production interface (legacy name) IPv6 production interface (legacy name) Cache Disk Usage Cache Hit Ratio DSCP check DNS check Out-of-band (BMC) interface check IPv4 production interface (new name) IPv6 production interface (new name) MTU check ORT check Traffic Router status for checked server ServercheckPost is a single Servercheck struct for Update and Create to The Servercheck data to submit Name of the server check type ID of the server Name of the server Value of the check result ServercheckRequestNullable is a single nullable Servercheck struct for Update and Create to depict what changed. github.com/apache/trafficcontrol/v8/traffic_ops/traffic_ops_golang/api.ParseValidate ServercheckPostResponse is the response to a Servercheck POST request. GenericServerCheck represents a server with some associated meta data presented along with its arbitrary "checks". This is unlike a Servercheck in that the represented checks are not known before the time a request is made, and checks with no value are not presented. Checks maps arbitrary checks - up to one per "column" (whatever those mean) done on the server to their values. ServercheckAPIResponse (not to be confused with ServerchecksResponse) is the type of a response from Traffic Ops to a request to its /servercheck endpoint (not to be confused with its /servers/checks endpoint). ServerCheckColumns is a collection of columns associated with a particular server's "checks". The meaning of the column names is unknown. ID uniquely identifies a servercheck columns row. Server is the ID of the server which is associated with these checks./Users/test/Desktop/trafficcontrol/lib/go-tc/servers.gonewInfifaceipv4IsServiceipv6IsServiceoldInterfacesrouterNamev4Intv4InterfacesinterfaceV3intFaceinterfacesserverInterfacesgatewayparsedIpfoundServiceInterfacelegacyDetailsinfspropertieslegacyServercsprouterPortNameserverV30`json:"count"``json:"summary"``json:"interfaces"``json:"deliveryservices,omitempty"``json:"hardwareInfo"``json:"xmppId" db:"xmpp_id"``json:"xmppPasswd" db:"xmpp_passwd"``json:"gateway" db:"gateway"``json:"serviceAddress" db:"service_address"``json:"ipAddresses" db:"ip_addresses"``json:"maxBandwidth" db:"max_bandwidth"``json:"monitor" db:"monitor"``json:"mtu" db:"mtu"``json:"interfaceMtu" db:"interface_mtu"``json:"interfaceName" db:"interface_name"``json:"ip6Gateway" db:"ip6_gateway"``json:"ipGateway" db:"ip_gateway"``json:"ipNetmask" db:"ip_netmask"`interfaceMtu is null"interfaceMtu is null"interfaceName is null"interfaceName is null"Failed to parse netmask '%s'"Failed to parse netmask '%s'"IPv4Mask%s/%d"%s/%d"LegacyInterfaceDetails(InterfaceMtu="LegacyInterfaceDetails(InterfaceMtu=""nil", InterfaceName=", InterfaceName="'\''39, IP6Address=", IP6Address=", IP6Gateway=", IP6Gateway=", IPAddress=", IPAddress=", IPGateway=", IPGateway=", IPNetmask=", IPNetmask="')'41Failed to parse '%s' as network or CIDR string: %v"Failed to parse '%s' as network or CIDR string: %v"%d.%d.%d.%d"%d.%d.%d.%d"no service addresses found"no service addresses found"`json:"ip6IsService" db:"ip6_address_is_service"``json:"ipIsService" db:"ip_address_is_service"``json:"revalPending" db:"reval_pending"``json:"statusLastUpdated" db:"status_last_updated"``json:"configUpdateTime" db:"config_update_time"``json:"configApplyTime" db:"config_apply_time"``json:"revalUpdateTime" db:"revalidate_update_time"``json:"revalApplyTime" db:"revalidate_apply_time"``json:"cacheGroup" db:"cachegroup"``json:"cacheGroupID" db:"cachegroup_id"``json:"cdnID" db:"cdn_id"``json:"cdn" db:"cdn_name"``json:"configApplyTime,omitempty" db:"config_apply_time"``json:"configUpdateTime,omitempty" db:"config_update_time"``json:"configUpdateFailed" db:"config_update_failed"``json:"httpsPort,omitempty" db:"https_port"``json:"iloIpAddress,omitempty" db:"ilo_ip_address"``json:"iloIpGateway,omitempty" db:"ilo_ip_gateway"``json:"iloIpNetmask,omitempty" db:"ilo_ip_netmask"``json:"iloPassword,omitempty" db:"ilo_password"``json:"iloUsername,omitempty" db:"ilo_username"``json:"mgmtIpAddress,omitempty" db:"mgmt_ip_address"``json:"mgmtIpGateway,omitempty" db:"mgmt_ip_gateway"``json:"mgmtIpNetmask,omitempty" db:"mgmt_ip_netmask"``json:"physicalLocation" db:"phys_location"``json:"physicalLocationID" db:"phys_location_id"``json:"profiles,omitempty" db:"profile_name"``json:"revalApplyTime,omitempty" db:"revalidate_apply_time"``json:"revalUpdateTime,omitempty" db:"revalidate_update_time"``json:"revalUpdateFailed" db:"revalidate_update_failed"``json:"statusID" db:"status_id"``json:"statusLastUpdated,omitempty" db:"status_last_updated"``json:"typeID" db:"server_type_id"`Ptr`json:"upd_pending"``json:"reval_pending"``json:"use_reval_pending"``json:"host_id"``json:"parent_pending"``json:"parent_reval_pending"``json:"config_update_time"``json:"config_apply_time"``json:"config_update_failed"``json:"revalidate_update_time"``json:"revalidate_apply_time"``json:"revalidate_update_failed"``json:"offlineReason"` ServersV4Response is the format of a response to a GET request for API v4.x /servers. ServersV3Response is the format of a response to a GET request for /servers. ServersResponse is a list of Servers as a response to an API v2 request. This can't change because it will break ORT. Unfortunately. ServersDetailResponse is the JSON object returned for a single server. ServerDetailV11 is the type of each entry in the `response` array property of responses from Traffic Ops to GET requests made to its /servers/details API endpoint in API version 2.0. The reason it's named with "V11" is because it was originally used to model the response in API version 1.1, and the structure simply hasn't changed between then and 2.0. ServerDetailV30 is the details for a server for API v3. ServerDetailV40 is the details for a server for API v4. ServersV1DetailResponse is the JSON object returned for a single server for v1. ServersV3DetailResponse is the JSON object returned for a single server for v3. ServersV4DetailResponse is the JSON object returned for a single server for v4. ServerIPAddress is the data associated with a server's interface's IP address. Copy creates a deep copy of the IP address. ServerInterfaceInfo is the data associated with a server's interface. Copy creates a deep copy of the Server Interface. ServerInterfaceInfoV40 is the data associated with a V40 server's interface. GetDefaultAddress returns the IPv4 and IPv6 service addresses of the interface - without any subnet/masking that may or may not be present on said address(es). GetDefaultAddressOrCIDR returns the IPv4 and IPv6 service addresses of the interface, including a subnet, if one exists. Value implements the driver.Valuer interface marshals struct to json to pass back as a json.RawMessage. Scan implements the sql.Scanner interface. This expects src to be a json.RawMessage and unmarshals it into the ServerInterfaceInfo. LegacyInterfaceDetails is the details for interfaces on servers for API v2. Deprecated: Traffic Ops API version 2 is deprecated, upgrade to Server representations that support interfaces (i.e. ServerInterfaceInfoV40 slices). ToInterfaces converts a LegacyInterfaceDetails to a slice of ServerInterfaceInfo structures. Only one interface is expected and will be marked for monitoring. It will generate service addresses according to the passed indicators for each address family. Deprecated: LegacyInterfaceDetails is deprecated, and this will be removed with it. default to true since there should only be one interface from legacy API versions if Monitor is false on all interfaces, then TM will see the server as unhealthy ToInterfacesV4 upgrades server interfaces from their APIv3 representation to an APIv4 representation. The passed routerName and routerPort can be nil, which will leave the upgradeded interfaces' RouterHostName and RouterPortName unset, or they can be pointers to string values to which ALL of the interfaces will have their RouterHostName and RouterPortName set. ToInterfacesV4 converts a LegacyInterfaceDetails to a slice of ServerInterfaceInfoV40 structures. Only one interface is expected and will be marked for monitoring. This will generate service addresses according to the passed indicators for each address family. V4InterfaceInfoToV3Interfaces downgrades a set of ServerInterfaceInfoV40s to ServerInterfaceInfos. V4InterfaceInfoToLegacyInterfaces downgrades a set of ServerInterfaceInfoV40s to a LegacyInterfaceDetails. This should no longer matter now that short-circuiting is better, but this temporary variable is necessary because the 'intFace' variable is referential, so taking '&intFace.Name' would cause problems when intFace is reassigned. we can jump out here since servers can only legally have one IPv4 and one IPv6 service address InterfaceInfoToLegacyInterfaces converts a ServerInterfaceInfo to an equivalent LegacyInterfaceDetails structure. It does this by creating the IP address fields using the "service" interface's IP addresses. All others are discarded, as the legacy format is incapable of representing them. Server is a non-"nullable" representation of a Server as it appeared in API version 2.0 Deprecated: Please use versioned and nullable structures from now on. CommonServerProperties is just the collection of properties which are shared by all servers across API versions. Deprecated: In the future, management interfaces must be configured as interfaces within the Interfaces of the server, not separately on these properties. Deprecated: In API versions 4 and later, Profile descriptions must be taken from the Profiles themselves, and Servers only contain identifying information for their Profiles. Deprecated: In API versions 4 and later, Servers identify their Profiles by Name, not ID. Deprecated: In APIv5 and later, this extraneous field is not calculated by Traffic Ops; the information is available by comparing RevalUpdateTime to RevalApplyTime. by Traffic Ops; the information is available by comparing ConfigUpdateTime to ConfigApplyTime. ServerNullableV11 is a server as it appeared in API version 1.1. ServerNullableV2 is a server as it appeared in API v2. Deprecated: Traffic Ops API version 2 is deprecated, new code should use ServerV40 or newer structures. ToNullable converts the Server to an equivalent, "nullable" structure. Note that "zero" values (e.g. the empty string "") are NOT coerced to actual null values. In particular, the only fields that will possibly be nil are FQDN - if the original server had a nil FQDN - and DeliveryServices - which will actually be a pointer to a nil map if the original server had a nil DeliveryServices map. Further note that this makes "shallow" copies of member properties; if reference types (map, slice, pointer etc.) are altered on the original after conversion, the changes WILL affect the nullable copy. ToNonNullable converts the ServerNullableV2 safely to a Server structure. Upgrade upgrades the ServerNullableV2 to the new ServerNullable structure. Note that this makes "shallow" copies of all underlying data, so changes to the original will affect the upgraded copy. Deprecated: Traffic Ops API versions 2 and 3 are both deprecated, new code should use ServerV40 or newer structures. UpgradeToV40 upgrades the ServerV30 to a ServerV40. This makes a "shallow" copy of the structure's properties. Deprecated: Traffic Ops API version 3 is deprecated, new code should use UpgradeToV40 upgrades the ServerNullableV2 to a ServerV40. Deprecated: Traffic Ops API version 2 is gone, new code should use UpdateServerPropertiesV40 updates CommonServerProperties of V2 and V3 to ServerV40. ServerV40 is the representation of a Server in version 4.0 of the Traffic Ops API. Deprecated: this has no known purpose, doesn't appear in any known API responses, and it doesn't exist in the V5 version of this structure. ServerV4 is the representation of a Server in the latest minor version of Upgrade upgrades to an APIv5 representation of a Server. ServerV30 is the representation of a Server in version 3 of the Traffic Ops API. ServerNullable represents an ATC server, as returned by the TO API. ToServerV2 converts the server to an equivalent ServerNullableV2 structure, if possible. If the conversion could not be performed, an error is returned. ToServerV3FromV4 downgrades the ServerV40 to a ServerV30. This makes a "shallow" copy of most of the structure's properties. ToServerV2FromV4 downgrades the ServerV40 to a ServerNullableV2. ServerV50 is the representation of a Server in version 5.0 of the Traffic Ops The time at which configuration updates were last applied for this server by t3c. The time at which configuration updates were last queued for this server. If the last config apply failed for this server Deprecated: This property has unknown purpose and should not be used so that we can get rid of it. The time at which revalidations for this server were last updated by t3c. The time at which revalidations were last queued for this server. If the last reval apply failed for this server Downgrade downgrades to a V4 representation of a Server. UpdatePending tells whether the Server has pending updates. RevalidationPending tells whether the Server has pending revalidations. ServerV5 is the representation of a Server in the latest minor version of version 5 of the Traffic Ops API. ServerUpdateStatusV5 is the type of each entry in the `response` property of the response from Traffic Ops to GET requests made to its /servers/{{host name}}/update_status in the latest minor API v5.0 endpoint. ServerUpdateStatusV50 is the type of each entry in the `response` property of /servers/{{host name}}/update_status in API v5.0 endpoint. by Traffic Ops; the information is available by comparing ConfigUpdateTime to ConfigApplyTime. ServerUpdateStatusV4 is the type of each entry in the `response` property of v4.0 endpoint. ServerUpdateStatusV40 is the type of each entry in the `response` property of /servers/{{host name}}/update_status in API v4.0 endpoint. Downgrade strips the Config and Revalidate timestamps from ServerUpdateStatusV40 to return previous versions of the struct to ensure previous compatibility. ServerUpdateStatus is the type of each entry in the `response` property of /servers/{{host name}}/update_status API endpoint. This is a subset of Server structure information mainly relating to what operations t3c has done/needs to do. For most purposes, using Server structures will be better - especially since the basic principle of this type is predicated on a lie: that server host names are unique. Deprecated: ServerUpdateStatus is for use only in APIs below V4. New code should use ServerUpdateStatusV40 or newer. Upgrade converts the deprecated ServerUpdateStatus to a ServerUpdateStatusV4 struct. ServerUpdateStatusResponseV50 is the type of a response from the Traffic Ops API to a request to its /servers/{{host name}}/update_status endpoint in API version 5.0. ServerUpdateStatusResponseV5 is the type of a response from the Traffic in the latest minor version of API version 5. ServerUpdateStatusResponseV40 is the type of a response from the Traffic in API version 4.0. ServerUpdateStatusResponseV4 is the type of a response from the Traffic in the latest minor version of API version 4. ServerPutStatus is a request to change the Status of a server, optionally with an explanation. ServerInfo is a stripped-down type containing a subset of information for a server. This is primarily only useful internally in Traffic Ops for constructing/examining the relationships between servers and other ATC objects. That is to say, for most other purposes a ServerV4 would be better suited. ServerDetail is a type that contains a superset of the information available in a ServerNullable. This should NOT be used in general, it's almost always better to use a proper server representation. However, this structure is not deprecated because it is embedded in structures still in use, and its future is unclear and undecided. Deprecated: The API versions that use this representation have been deprecated, newer structures like ServerV4 should be used instead. ServerQueueUpdateRequest encodes the request data for the POST servers/{{ID}}/queue_update endpoint. ServerQueueUpdateResponse decodes the full response with alerts from the POST ServerQueueUpdate decodes the update data from the POST ServersV5Response is the format of a response to a GET request to /servers in APIv5. ServerV5Response is the format of a response to single-server operations using /servers in APIv5./Users/test/Desktop/trafficcontrol/lib/go-tc/service_category.go ServiceCategoriesResponse is a list of Service Categories as a response. ServiceCategoryResponse is a single Service Category response for Update and Create to ServiceCategory holds the name, id and associated tenant that comprise a service category. ServiceCategoriesResponseV50 is a list of Service Categories as a response. ServiceCategoryResponseV50 is a single Service Category response for Update and Create to ServiceCategoryV50 holds the name and last updated time stamp. ServiceCategoriesResponseV5 is the type of a response from the service_categories It always points to the type for the latest minor version of ServiceCategoriesResponseV5x APIv5. ServiceCategoryResponseV5 is the type of a response from the service_categories It always points to the type for the latest minor version of ServiceCategoryResponseV5x APIv5. ServiceCategoryV5 always points to the type for the latest minor version of serviceCategoryV5x APIv5./Users/test/Desktop/trafficcontrol/lib/go-tc/sslkey_expirations.go SSLKeyExpirationGetResponse is the format of a response to a GET request for API /sslkey_expirations endpoint./Users/test/Desktop/trafficcontrol/lib/go-tc/staticdnsentry.go`json:"deliveryservice" db:"dsname"``json:"deliveryserviceId" db:"deliveryservice_id"``json:"host" db:"host"` StaticDNSEntriesResponse is a list of StaticDNSEntry as a response. StaticDNSEntriesResponseV5 is a list of StaticDNSEntry as a response, for api version 5.0., for the latest minor version of 5.x. StaticDNSEntriesResponseV50 is a list of StaticDNSEntry as a response, for api version 5.0. StaticDNSEntryV5 holds information about a static DNS entry, for the latest minor version of 5.x. StaticDNSEntryV50 holds information about a static DNS entry, for api version 5.0. The static IP Address or fqdn of the static dns entry The Cachegroup Name associated The Cachegroup ID associated The DeliveryService associated The host of the static dns entry ID of the StaticDNSEntry The Time To Live for the static dns entry The type of the static DNS entry enum: ["A_RECORD", "AAAA_RECORD", "CNAME_RECORD"] The type id of the static DNS entry StaticDNSEntry holds information about a static DNS entry. StaticDNSEntryNullable holds information about a static DNS entry. Its fields are nullable. The DeliveryService Name associated DeliveryService ID of the StaticDNSEntry/Users/test/Desktop/trafficcontrol/lib/go-tc/stats_summary.gostatDateAliasrtsummaryTime2006-01-02"2006-01-02"`json:"cdnName"  db:"cdn_name"``json:"deliveryServiceName"  db:"deliveryservice_name"``json:"statName"  db:"stat_name"``json:"statValue"  db:"stat_value"``json:"summaryTime"  db:"summary_time"``json:"statDate"  db:"stat_date"`statName"statName"statValue"statValue"json:"summaryTime"json:"statDate"`json:"summaryTime"``json:"statDate"`invalid timestamp given for statDate"invalid timestamp given for statDate"invalid timestamp given for summaryTime"invalid timestamp given for summaryTime"invalid timestamp given for statDate: %v"invalid timestamp given for statDate: %v"invalid timestamp given for summaryTime: %v"invalid timestamp given for summaryTime: %v" StatsSummaryResponse is the structure of a response from Traffic Ops to GET requests made to its /stats_summary API endpoint. StatsSummary is a summary of some kind of statistic for a CDN and/or The name of the stat, which can be whatever the TO API client wants. The value of the stat - this cannot actually be nil in a valid StatsSummary. UnmarshalJSON implements the encoding/json.Unmarshaler interface with a customized decoding to force the date format on StatDate. MarshalJSON implements the encoding/json.Marshaler interface with a customized encoding to force the date format on StatDate. StatsSummaryLastUpdated is the type of the `response` property of a response from Traffic Ops to a GET request made to its /stats_summary endpoint when the 'lastSummaryDate' query string parameter is passed as 'true'. customized encoding to force the date format on SummaryTime. customized decoding to force the SummaryTime format. StatsSummaryLastUpdatedResponse is the type of a response from Traffic Ops to a GET request made to its /stats_summary endpoint when the 'lastSummaryDate' query string parameter is passed as 'true'. Deprecated: This structure includes an unknown field and drops Alerts returned by the API - use StatsSummaryLastUpdatedAPIResponse instead. This field has unknown purpose and meaning - do not depend on its value for anything. StatsSummaryLastUpdatedAPIResponse is the type of a response from Traffic Ops to a request to its /stats_summary endpoint with the 'lastSummaryDate' query string parameter set to 'true'. StatsSummaryV5 is an alias for the latest minor version for the major version 5. StatsSummaryV50 is a summary of some kind of statistic for a CDN and/or StatsSummaryResponseV5 is an alias for the latest minor version for the major version 5. StatsSummaryResponseV50 is the structure of a response from Traffic Ops to GET requests made to its /stats_summary V5 API endpoint. StatsSummaryLastUpdatedV5 is an alias for the latest minor version for the major version 5. StatsSummaryLastUpdatedV50 is the type of the `response` property of a response StatsSummaryLastUpdatedAPIResponseV5 is an alias for the latest minor version for the major version 5. StatsSummaryLastUpdatedAPIResponseV50 is the type of a response from Traffic/Users/test/Desktop/trafficcontrol/lib/go-tc/statuses.go StatusResponseV5 is the type of a response from the /api/5.x/statuses Traffic Ops endpoint. StatusesResponseV50 is a list of Statuses as a response that depicts the state of a server. StatusesResponse is a list of Statuses as a response that depicts the state swagger:response StatusesResponse StatusResponseV5 is the type of a response for API endponts returning a single Status in Traffic Ops API version 5. StatusResponse is a single Status response for Update and Create to depict what changed. swagger:response StatusResponse Status is a single Status response for Update and Create to depict what swagger:model Statuses The Statuses to retrieve description of the status type ID of the Status The Time / Date this server entry was last updated enum: ["OFFLINE", "ONLINE", "ADMIN_DOWN", "REPORTED", "CCR_IGNORE", "PRE_PROD"] StatusV5 is a Status as it appears in version 5 of the StatusNullableV5 is a nullable single Status response for Update and Create to StatusNullable is a nullable single Status response for Update and Create to IsReservedStatus returns true if the passed in status name is reserved, and false if it isn't. Currently, the reserved statuses are OFFLINE, ONLINE, REPORTED, PRE_PROD and ADMIN_DOWN./Users/test/Desktop/trafficcontrol/lib/go-tc/steering.go`json:"clientSteering"``json:"targets"``json:"filters"`int32`json:"order"``json:"geoOrder,omitempty"``json:"longitude,omitempty"``json:"latitude,omitempty"` Steering holds information about a steering delivery service. SteeringResponse is the type of a response from Traffic Ops to a request to its /steering endpoint. SteeringFilter is a filter for a target delivery service. SteeringSteeringTarget is a target delivery service of a steering delivery service./Users/test/Desktop/trafficcontrol/lib/go-tc/steeringtarget.go`json:"deliveryService" db:"deliveryservice_name"``json:"deliveryServiceId" db:"deliveryservice"``json:"target" db:"target_name"``json:"targetId" db:"target"`missing typeId"missing typeId"steering_target"steering_target"missing value"missing value" A SteeringTarget is a relationship between a Steering Delivery Service and another Delivery Service which is one of its Targets. Deprecated: As far as this author is aware, this structure has never served any purpose. Modelling the Steering Target/Delivery Service relationship is better accomplished by the SteeringTargetNullable type. TODO enum? A SteeringTargetNullable is a relationship between a Steering Delivery Service and another Delivery Service which is one of its Targets. SteeringTargetsResponse is the type of a response from Traffic Ops to its /steering/{{ID}}/targets endpoint./Users/test/Desktop/trafficcontrol/lib/go-tc/system_info.go SystemInfo can hold arbitrary system information (e.g., as a Traffic Ops API response)./Users/test/Desktop/trafficcontrol/lib/go-tc/tenants.go`json:"parentId"``json:"parentName,omitempty" db:"parent_name"``json:"parentId" db:"parent_id"` GetTenantsResponse is the response for a request for a group of tenants. TenantResponse is the type of a response from Traffic Ops to a PUT, POST, or DELETE request made to its /tenants. A Tenant is a scope that can be applied to groups of users to limit their Delivery Service-related actions to specific sets of similarly "Tenanted" Delivery Services. TenantNullable is identical to Tenant, but its fields are reference values, DeleteTenantResponse is a legacy structure used to represent responses to DELETE requests made to Traffic Ops's /tenants API endpoint. Deprecated: This uses a deprecated type for its Alerts property and drops information returned by the TO API - new code should use TenantResponse instead. TenantAlert is an unnecessary and less type-safe duplicate of Alert. Deprecated: Use Alert instead. GetTenantsResponseV50 is the response for a request for a group of tenants. TenantResponseV50 is the type of response from Traffic Ops to a PUT, POST, A TenantV50 is a scope that can be applied to groups of users to limit their GetTenantsResponseV5 is the type of response from the tenants It always points to the type for the latest minor version of GetTenantsResponseV5x APIv5. TenantResponseV5 is the type of response from Traffic Ops to a PUT, POST, // or DELETE request made to its /tenants. It always points to the type for the latest minor version of TenantResponseV5x APIv5. TenantV5 always points to the type for the latest minor version of TenantV5x APIv5./Users/test/Desktop/trafficcontrol/lib/go-tc/time.go"2006-01-02 15:04:05"1000.0 Time wraps standard time.Time to allow indication of invalid times. TimeLayout is the format used in lastUpdated fields in Traffic Ops. Deprecated: New code should use RFC3339 (with optional nanosecond precision). Do not ever use this. It only exists for compatibility with Perl. Scan implements the database/sql Scanner interface. Value implements the database/sql/driver Valuer interface. MarshalJSON implements the json.Marshaller interface. Time structures marshal in the format defined by TimeLayout. UnmarshalJSON implements the json.Unmarshaller interface Time structures accept both RFC3339-compliant date/time strings as well as the format defined by TimeLayout and Unix(-ish) timestamps. Timestamps are expected to be integer numbers that represent milliseconds since Jan 1, 1970 00:00:00.000 UTC. timestamp support legacy TimeNoMod supports JSON marshalling, but suppresses JSON unmarshalling. Deprecated: As TimeNoMod only supports the deprecated TimeLayout format for date/times, new code should just use time.Time instead (which defaults to the appropriate RFC3339), or Time to support Unix timestamps and backwards compatibility with this format. NewTimeNoMod returns the address of a TimeNoMod with a Time value of the current time. Deprecated: TimeNoMod is deprecated. TimeNoModFromTime returns a reference to a TimeNoMod with the given Time value. UnmarshalJSON for TimeNoMod suppresses unmarshalling. TimeStamp holds the current time with nanosecond precision. It is unused. Deprecated: This is unused, so it will be removed in the future./Users/test/Desktop/trafficcontrol/lib/go-tc/toextension.goToExtension update not supported; delete and re-add."ToExtension update not supported; delete and re-add." TOExtensionNullable represents a TO extension used by Traffic Ops. TOExtensionResponse represents the response from Traffic Ops when getting TOExtension. TOExtensionPostResponse represents the response from Traffic Ops when creating TOExtension. A TOExtensionID contains an identifier for a particular Traffic Ops extension. Validate ensures that the TOExtensionNullable request body is valid for creation./Users/test/Desktop/trafficcontrol/lib/go-tc/topologies.go`json:"parents"``json:"topology"` TopologyV5 is the struct used to represent topologies, for the latest minor version of api 5.x. TopologyV50 holds the name and set of TopologyNodes that comprise a flexible topology, as represented in api version 5.0. Topology holds the name and set of TopologyNodes that comprise a flexible topology. TopologyNode holds a reference to a cachegroup and the indices of up to 2 parent nodes in the same topology's array of nodes. TopologyNodeV5 is the struct used to represent topology nodes, for the latest minor version of api 5.x. TopologyNodeV50 holds a reference to a cachegroup and the indices of up to 2 parent nodes in the same topology's array of nodes, as represented in api version 5.0. TopologyResponseV5 is the struct used to represent a topology response, for the latest minor version of api 5.x. TopologyResponseV50 models the JSON object returned for a single Topology in a response from the Traffic Ops API, as represented in api version 5.0. TopologyResponse models the JSON object returned for a single Topology in a response from the Traffic Ops API. TopologiesResponseV5 is the struct used to represent a response consisting of multiple topologies, for the latest minor version of api 5.x. TopologiesResponseV50 models the JSON object returned for a list of topologies in a response, as represented in api version 5.0. TopologiesResponse models the JSON object returned for a list of topologies in a response. TopologiesQueueUpdateRequest encodes the request data for the POST topologies/{{name}}/queue_update endpoint. TopologiesQueueUpdateResponse encodes the response data for the POST TopologiesQueueUpdate decodes the update data from the POST/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/asns.goFederationCDNNameGetCDNIDGetCacheGroupIdGetDeliveryServiceIdGetFederationIDGetFederationResolverIDGetProfileIDGetServerIDGetTypeIdGetUserIDfedIDsfedXmlIdresetDSsetFederationIDsetInactiveasnCould not create ASN: %v - alerts: %+v"Could not create ASN: %v - alerts: %+v"Error trying to fetch ASNs for deletion: %v - alerts: %+v"Error trying to fetch ASNs for deletion: %v - alerts: %+v"Cannot delete ASN %d: %v - alerts: %+v"Cannot delete ASN %d: %v - alerts: %+v""asn"Error trying to fetch ASN after deletion: %v - alerts: %+v"Error trying to fetch ASN after deletion: %v - alerts: %+v"Expected ASN %d to be deleted, but it was found in Traffic Ops"Expected ASN %d to be deleted, but it was found in Traffic Ops" Retrieve the ASN to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/cachegroup_deliveryservices.goclientCGsCannot GET DeliveryServices: %v - %v"Cannot GET DeliveryServices: %v - %v"cachegroup3"cachegroup3"Cannot GET cachegroup: %v"Cannot GET cachegroup: %v"RequireEqualGetting cachegroup expected 1, got %v"Getting cachegroup expected 1, got %v"RequireNotNilCachegroup has a nil ID"Cachegroup has a nil ID"cdn1"cdn1"RequireGreaterOrEqualNo Delivery Services found in CDN 'cdn1', cannot continue."No Delivery Services found in CDN 'cdn1', cannot continue."Setting cachegroup delivery services returned error: %v"Setting cachegroup delivery services returned error: %v"Setting cachegroup delivery services returned success, but no servers set"Setting cachegroup delivery services returned success, but no servers set""1000000"Unexpected error retrieving server-to-Delivery-Service assignments: %v - alerts: %+v"Unexpected error retrieving server-to-Delivery-Service assignments: %v - alerts: %+v"Error deleting delivery service servers: %v - alerts: %+v"Error deleting delivery service servers: %v - alerts: %+v"Deleting delivery service servers: Expected empty subsequent get, actual %v"Deleting delivery service servers: Expected empty subsequent get, actual %v"/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/cachegroups.godelResprespCGparentlessCacheGroupscacheGroupNamecould not create Cache Group: %v - alerts: %+v"could not create Cache Group: %v - alerts: %+v"Parent cachegroup is null in response when it should have a value"Parent cachegroup is null in response when it should have a value"Secondary parent cachegroup is null in response when it should have a value"Secondary parent cachegroup is null in response when it should have a value"Type is null in response when it should have a value"Type is null in response when it should have a value"Localization methods are null"Localization methods are null"Fallbacks are null"Fallbacks are null"Found a Cache Group with null or undefined name"Found a Cache Group with null or undefined name"Cannot GET CacheGroup by name '%s': %v - alerts: %+v"Cannot GET CacheGroup by name '%s': %v - alerts: %+v"Could not find test data Cache Group '%s' in Traffic Ops"Could not find test data Cache Group '%s' in Traffic Ops"Traffic Ops returned a Cache Group with null or undefined ID"Traffic Ops returned a Cache Group with null or undefined ID"Cannot delete Cache Group: %v - alerts: %+v"Cannot delete Cache Group: %v - alerts: %+v"Error deleting Cache Group by name: %v - alerts: %+v"Error deleting Cache Group by name: %v - alerts: %+v"Expected CacheGroup name: %s to be deleted"Expected CacheGroup name: %s to be deleted"Cannot get Cache Group by name '%s': %v - alerts: %+v"Cannot get Cache Group by name '%s': %v - alerts: %+v"Cache Group '%s' somehow stopped existing since the last time we ask Traffic Ops about it"Cache Group '%s' somehow stopped existing since the last time we ask Traffic Ops about it"Traffic Ops returned Cache Group '%s' with null or undefined ID"Traffic Ops returned Cache Group '%s' with null or undefined ID"Cannot delete Cache Group '%s': %v - alerts: %+v"Cannot delete Cache Group '%s': %v - alerts: %+v"Error attempting to fetch Cache Group '%s' after deletion: %v - alerts: %+v"Error attempting to fetch Cache Group '%s' after deletion: %v - alerts: %+v"Expected Cache Group '%s' to be deleted"Expected Cache Group '%s' to be deleted"Get Cache Groups Request failed with error: %v"Get Cache Groups Request failed with error: %v"Expected response object length 1, but got %d"Expected response object length 1, but got %d"Expected id to not be nil"Expected id to not be nil" Testing 'join' fields during create delete the edge caches. Retrieve the CacheGroup by name so we can get the id for Deletion Cachegroups that are parents (usually mids but sometimes edges) need to be deleted only after the children cachegroups are deleted. Retrieve the CacheGroup to see if it got deleted now delete the parentless cachegroups nil check for cg.Name occurs prior to insertion into parentlessCacheGroups/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/cdns.gocdnsRespGet CDNs Request failed with error:"Get CDNs Request failed with error:"Could not create CDN: %v - alerts: %+v"Could not create CDN: %v - alerts: %+v"Cannot get CDNs: %v - alerts: %+v"Cannot get CDNs: %v - alerts: %+v"Cannot delete CDN '%s' (#%d): %v - alerts: %+v"Cannot delete CDN '%s' (#%d): %v - alerts: %+v"Error deleting CDN '%s': %v - alerts: %+v"Error deleting CDN '%s': %v - alerts: %+v"Expected CDN '%s' to be deleted"Expected CDN '%s' to be deleted" Retrieve the CDN to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/coordinates.gocoordinatetdgetCoordinatecoordinatesCould not create coordinate: %v - alerts: %+v"Could not create coordinate: %v - alerts: %+v"Cannot get Coordinates: %v - alerts: %+v"Cannot get Coordinates: %v - alerts: %+v"Unexpected error deleting Coordinate '%s' (#%d): %v - alerts: %+v"Unexpected error deleting Coordinate '%s' (#%d): %v - alerts: %+v"Error getting Coordinate '%s' after deletion: %v - alerts: %+v"Error getting Coordinate '%s' after deletion: %v - alerts: %+v"Expected Coordinate '%s' to be deleted, but it was found in Traffic Ops"Expected Coordinate '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Coordinate to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/deliveryservice_regexes.godsRegexPostCould not create Delivery Service Regex: %v - alerts: %+v"Could not create Delivery Service Regex: %v - alerts: %+v"DELETE FROM deliveryservice_regex WHERE deliveryservice = '%v' and regex ='%v';"DELETE FROM deliveryservice_regex WHERE deliveryservice = '%v' and regex ='%v';"Unable to delete deliveryservice_regex by regex %v and ds %v: %v"Unable to delete deliveryservice_regex by regex %v and ds %v: %v"DELETE FROM regex WHERE Id = '%v';"DELETE FROM regex WHERE Id = '%v';"Unable to delete regex %v: %v"Unable to delete regex %v: %v"/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/deliveryservice_request_comments.gocommentcommentsCannot get Delivery Service Request by XMLID '%s': %v - alerts: %+v"Cannot get Delivery Service Request by XMLID '%s': %v - alerts: %+v"Found %d Delivery Service request by XMLID '%s, expected exactly one"Found %d Delivery Service request by XMLID '%s, expected exactly one"Got Delivery Service Request with xml_id '%s' that had a null ID"Got Delivery Service Request with xml_id '%s' that had a null ID"Could not create Delivery Service Request Comment: %v - alerts: %+v"Could not create Delivery Service Request Comment: %v - alerts: %+v"Unexpected error getting Delivery Service Request Comments: %v - alerts: %+v"Unexpected error getting Delivery Service Request Comments: %v - alerts: %+v"Cannot delete Delivery Service Request Comment #%d: %v - alerts: %+v"Cannot delete Delivery Service Request Comment #%d: %v - alerts: %+v"Unexpected error fetching Delivery Service Request Comment %d after deletion: %v - alerts: %+v"Unexpected error fetching Delivery Service Request Comment %d after deletion: %v - alerts: %+v"Expected Delivery Service Request Comment #%d to be deleted, but it was found in Traffic Ops"Expected Delivery Service Request Comment #%d to be deleted, but it was found in Traffic Ops" Retrieve the delivery service request comment to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/deliveryservice_requests.gorespDSRCould not create Delivery Service Requests: %v - alerts: %+v"Could not create Delivery Service Requests: %v - alerts: %+v"Cannot get Delivery Service Requests: %v - alerts: %+v"Cannot get Delivery Service Requests: %v - alerts: %+v"Cannot delete Delivery Service Request #%d: %v - alerts: %+v"Cannot delete Delivery Service Request #%d: %v - alerts: %+v"Unexpected error fetching Delivery Service Request #%d after deletion: %v - alerts: %+v"Unexpected error fetching Delivery Service Request #%d after deletion: %v - alerts: %+v"Expected Delivery Service Request #%d to be deleted, but it was found in Traffic Ops"Expected Delivery Service Request #%d to be deleted, but it was found in Traffic Ops" this resets the IDs of things attached to a DS, which needs to be done because the WithObjs flow destroys and recreates those object IDs non-deterministically with each test - BUT, the client method permanently alters the DSR structures by adding these referential IDs. Older clients got away with it by not making 'DeliveryService' a pointer, but to add original/requested fields you need to sometimes allow each to be nil, so this is a problem that needs to be solved at some point. A better solution _might_ be to reload all the test fixtures every time to wipe any and all referential modifications made to any test data, but for now that's overkill. Retrieve the DeliveryServiceRequest to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/deliveryservices.gogetDSFound a Delivery Service in testing data with null or undefined XMLID"Found a Delivery Service in testing data with null or undefined XMLID"Could not create Delivery Service '%s': %v - alerts: %+v"Could not create Delivery Service '%s': %v - alerts: %+v"Cannot get Delivery Services: %v - alerts: %+v"Cannot get Delivery Services: %v - alerts: %+v"Could not delete Delivery Service: %v - alerts: %+v"Could not delete Delivery Service: %v - alerts: %+v"Error deleting Delivery Service for '%s' : %v - alerts: %+v"Error deleting Delivery Service for '%s' : %v - alerts: %+v"Expected Delivery Service '%s' to be deleted"Expected Delivery Service '%s' to be deleted"Get Delivery Service Request failed with error: %v"Get Delivery Service Request failed with error: %v"Expected delivery service response object length 1, but got %d"Expected delivery service response object length 1, but got %d"Failed to fetch details for Delivery Service #%d: %v - alerts: %+v"Failed to fetch details for Delivery Service #%d: %v - alerts: %+v"Expected exactly one Delivery Service to exist with ID %d, found: %d"Expected exactly one Delivery Service to exist with ID %d, found: %d"Deliver Service #%d had null or undefined 'active'"Deliver Service #%d had null or undefined 'active'"Failed to set Delivery Service #%d to inactive: %v"Failed to set Delivery Service #%d to inactive: %v" Retrieve Delivery Service to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/deliveryservices_required_capabilities.godsIddsrcsUnexpected error creating a Delivery Service/Required Capability relationship: %v - alerts: %+v"Unexpected error creating a Delivery Service/Required Capability relationship: %v - alerts: %+v"Error getting Delivery Service/Required Capability relationships: %v - alerts: %+v"Error getting Delivery Service/Required Capability relationships: %v - alerts: %+v"Error deleting a relationship between a Delivery Service and a Capability: %v - alerts: %+v"Error deleting a relationship between a Delivery Service and a Capability: %v - alerts: %+v" Assign all required capability to delivery services listed in `tc-fixtures.json`. Get Required Capabilities to delete them/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/divisions.godivisiongetDivisionCould not create Division '%s': %v - alerts: %+v"Could not create Division '%s': %v - alerts: %+v"Cannot get Divisions: %v - alerts: %+v"Cannot get Divisions: %v - alerts: %+v"Unexpected error deleting Division '%s' (#%d): %v - alerts: %+v"Unexpected error deleting Division '%s' (#%d): %v - alerts: %+v"Error getting Division '%s' after deletion: %v - alerts: %+v"Error getting Division '%s' after deletion: %v - alerts: %+v"Expected Division '%s' to be deleted, but it was found in Traffic Ops"Expected Division '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Division to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/federation_resolvers.gogetFRfrsfederationResolversFailed to create Federation Resolver %+v: %v - alerts: %+v"Failed to create Federation Resolver %+v: %v - alerts: %+v"Unexpected error getting Federation Resolvers: %v - alerts: %+v"Unexpected error getting Federation Resolvers: %v - alerts: %+v"Failed to delete Federation Resolver %+v: %v - alerts: %+v"Failed to delete Federation Resolver %+v: %v - alerts: %+v"Error getting Federation Resolver '%d' after deletion: %v - alerts: %+v"Error getting Federation Resolver '%d' after deletion: %v - alerts: %+v"Expected Federation Resolver '%d' to be deleted, but it was found in Traffic Ops"Expected Federation Resolver '%d' to be deleted, but it was found in Traffic Ops""ipAddress"Get FederationResolvers Request failed with error:"Get FederationResolvers Request failed with error:"Expected Federation Resolver ID to not be nil"Expected Federation Resolver ID to not be nil" Retrieve the Federation Resolver to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/federation_users.gofedIDcnamefederationUserfederationUsersfedUserfedUsersthe.cname.com."the.cname.com."adminuser"adminuser"disalloweduser"disalloweduser"readonlyuser"readonlyuser"booya.com."booya.com."Assigning users %v to federation %d: %v - alerts: %+v"Assigning users %v to federation %d: %v - alerts: %+v"Error getting users for federation %d: %v - alerts: %+v"Error getting users for federation %d: %v - alerts: %+v"Traffic Ops returned a representation of a relationship between a user and a Federation that had null or undefined ID"Traffic Ops returned a representation of a relationship between a user and a Federation that had null or undefined ID"Error deleting user #%d from federation #%d: %v - alerts: %+v"Error deleting user #%d from federation #%d: %v - alerts: %+v"Federation users expected 0, actual: %+v"Federation users expected 0, actual: %+v" Prerequisite Federation Users/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/federations.godsRespds1"ds1"Expected to find Federation CName: %s to have associated ID"Expected to find Federation CName: %s to have associated ID"Could not get Delivery Service by XML ID: %v"Could not get Delivery Service by XML ID: %v"Expected one Delivery Service, but got %d"Expected one Delivery Service, but got %d"Expected Delivery Service CDN Name to not be nil."Expected Delivery Service CDN Name to not be nil."Could not create CDN Federations: %v - alerts: %+v"Could not create CDN Federations: %v - alerts: %+v"Federation ID was nil after posting."Federation ID was nil after posting."Delivery Service ID was nil."Delivery Service ID was nil."Could not create Federation Delivery Service: %v"Could not create Federation Delivery Service: %v"Cannot delete federation #%d: %v - alerts: %+v"Cannot delete federation #%d: %v - alerts: %+v"expected federation to be deleted"expected federation to be deleted" TODO fix/remove globals All prerequisite Federations are associated to this cdn and this xmlID Need to save the ids, otherwise the other tests won't be able to reference the federations reset the global variable for the next test/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/jobs.gogetJobsCould not create job: %v - alerts: %+v"Could not create job: %v - alerts: %+v"Cannot get Jobs: %v - alerts: %+v"Cannot get Jobs: %v - alerts: %+v"Unexpected error deleting Job with ID: (#%d): %v - alerts: %+v"Unexpected error deleting Job with ID: (#%d): %v - alerts: %+v"Error getting Job with ID: '%d' after deletion: %v - alerts: %+v"Error getting Job with ID: '%d' after deletion: %v - alerts: %+v"Expected Job to be deleted, but it was found in Traffic Ops"Expected Job to be deleted, but it was found in Traffic Ops" Retrieve the Job to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/origins.gogetOriginCould not create Origins: %v - alerts: %+v"Could not create Origins: %v - alerts: %+v"Cannot get Origins : %v - alerts: %+v"Cannot get Origins : %v - alerts: %+v"Expected origin ID to not be nil."Expected origin ID to not be nil."Unexpected error deleting Origin '%s' (#%d): %v - alerts: %+v"Unexpected error deleting Origin '%s' (#%d): %v - alerts: %+v"Error getting Origin '%s' after deletion: %v - alerts: %+v"Error getting Origin '%s' after deletion: %v - alerts: %+v"Expected Origin '%s' to be deleted, but it was found in Traffic Ops"Expected Origin '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Origin to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/parameters.gogetParametersparameterCould not create Parameters: %v - alerts: %+v"Could not create Parameters: %v - alerts: %+v"Cannot get Parameters: %v - alerts: %+v"Cannot get Parameters: %v - alerts: %+v"Cannot delete Parameter #%d: %v - alerts: %+v"Cannot delete Parameter #%d: %v - alerts: %+v"Unexpected error fetching Parameter #%d after deletion: %v - alerts: %+v"Unexpected error fetching Parameter #%d after deletion: %v - alerts: %+v"Expected Parameter '%s' to be deleted, but it was found in Traffic Ops"Expected Parameter '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Parameter to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/physlocations.goplgetPLphysicalLocationsCould not create Physical Location '%s': %v - alerts: %+v"Could not create Physical Location '%s': %v - alerts: %+v"Cannot get Physical Locations: %v - alerts: %+v"Cannot get Physical Locations: %v - alerts: %+v"Unexpected error deleting Physical Location '%s' (#%d): %v - alerts: %+v"Unexpected error deleting Physical Location '%s' (#%d): %v - alerts: %+v"Error getting Physical Location '%s' after deletion: %v - alerts: %+v"Error getting Physical Location '%s' after deletion: %v - alerts: %+v"Expected Physical Location '%s' to be deleted, but it was found in Traffic Ops"Expected Physical Location '%s' to be deleted, but it was found in Traffic Ops" Retrieve the PhysLocation to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/profile_parameters.goparameterOptsprofileParameterprofileIDgetProfileParameterprofileParametersExpected parameter name to not be nil."Expected parameter name to not be nil."Expected parameter value to not be nil."Expected parameter value to not be nil."Expected parameter configFile to not be nil."Expected parameter configFile to not be nil."Could not get Parameter %s: %v - alerts: %+v"Could not get Parameter %s: %v - alerts: %+v"Could not create Parameter %s: %v - alerts: %+v"Could not create Parameter %s: %v - alerts: %+v"RequireNotEqualCould not get parameter %s: not found"Could not get parameter %s: not found"Could not associate Parameter %s with Profile %s: %v - alerts: %+v"Could not associate Parameter %s with Profile %s: %v - alerts: %+v"Cannot get Profile Parameters: %v - alerts: %+v"Cannot get Profile Parameters: %v - alerts: %+v"Unexpected error deleting Profile Parameter: Profile: '%s' Parameter ID: (#%d): %v - alerts: %+v"Unexpected error deleting Profile Parameter: Profile: '%s' Parameter ID: (#%d): %v - alerts: %+v"Error getting Profile Parameters after deletion: %v - alerts: %+v"Error getting Profile Parameters after deletion: %v - alerts: %+v"Expected Profile Parameters to be deleted, but %d were found in Traffic Ops"Expected Profile Parameters to be deleted, but %d were found in Traffic Ops" Retrieve the Profile Parameters to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/profiles.gogetProfilesCould not create Profile '%s': %v - alerts: %+v"Could not create Profile '%s': %v - alerts: %+v"Cannot get Profiles: %v - alerts: %+v"Cannot get Profiles: %v - alerts: %+v"Cannot delete Profile: %v - alerts: %+v"Cannot delete Profile: %v - alerts: %+v"Error getting Profile '%s' after deletion: %v - alerts: %+v"Error getting Profile '%s' after deletion: %v - alerts: %+v"Expected Profile '%s' to be deleted, but it was found in Traffic Ops"Expected Profile '%s' to be deleted, but it was found in Traffic Ops"Get Profiles Request failed with error: %v"Get Profiles Request failed with error: %v" Retrieve the Profile to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/regions.goregiongetRegionCould not create Region '%s': %v - alerts: %+v"Could not create Region '%s': %v - alerts: %+v"Cannot get Regions: %v - alerts: %+v"Cannot get Regions: %v - alerts: %+v"Unexpected error deleting Region '%s' (#%d): %v - alerts: %+v"Unexpected error deleting Region '%s' (#%d): %v - alerts: %+v"Error getting Region '%s' after deletion: %v - alerts: %+v"Error getting Region '%s' after deletion: %v - alerts: %+v"Expected Region '%s' to be deleted, but it was found in Traffic Ops"Expected Region '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Region to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/roles.gogetRoleNo error expected, but got %v"No error expected, but got %v"Cannot get Roles: %v - alerts: %+v"Cannot get Roles: %v - alerts: %+v"disallowed"disallowed"operations"operations"portal"portal"read-only"read-only""federation"Expected no error while deleting role %s, but got %v"Expected no error while deleting role %s, but got %v"Error getting Role '%s' after deletion: %v - alerts: %+v"Error getting Role '%s' after deletion: %v - alerts: %+v"Expected Role '%s' to be deleted, but it was found in Traffic Ops"Expected Role '%s' to be deleted, but it was found in Traffic Ops" Don't delete active roles created by test setup Retrieve the Role to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/server_capabilities.gogetServerCapabilityserverCapabilityUnexpected error creating Server Capability '%s': %v - alerts: %+v"Unexpected error creating Server Capability '%s': %v - alerts: %+v"Cannot get Server Capabilities: %v - alerts: %+v"Cannot get Server Capabilities: %v - alerts: %+v"Unexpected error deleting Server Capability '%s': %v - alerts: %+v"Unexpected error deleting Server Capability '%s': %v - alerts: %+v"Error getting Server Capability '%s' after deletion: %v - alerts: %+v"Error getting Server Capability '%s' after deletion: %v - alerts: %+v"Expected Server Capability '%s' to be deleted, but it was found in Traffic Ops"Expected Server Capability '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Server Capability to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/server_check_extensions.gogetExtensionextensionextensionsCould not create Servercheck Extension: %v - alerts: %+v"Could not create Servercheck Extension: %v - alerts: %+v"Could not get Servercheck Extensions: %v - alerts: %+v"Could not get Servercheck Extensions: %v - alerts: %+v"Unexpected error deleting Servercheck Extension '%s' (#%d): %v - alerts: %+v"Unexpected error deleting Servercheck Extension '%s' (#%d): %v - alerts: %+v"Error getting Servercheck Extension '%s' after deletion: %v - alerts: %+v"Error getting Servercheck Extension '%s' after deletion: %v - alerts: %+v"Expected Servercheck Extension '%s' to be deleted, but it was found in Traffic Ops"Expected Servercheck Extension '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Server Extension to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/server_checks.goservercheckCould not insert Servercheck: %v - alerts: %+v"Could not insert Servercheck: %v - alerts: %+v" Need to define no-op function as TCObj interface expects a delete function There is no delete path for serverchecks/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/server_server_capabilities.gosscsscsExpected Server to not be nil."Expected Server to not be nil."Expected Server Capability to not be nil."Expected Server Capability to not be nil."Could not associate Capability '%s' with server '%s': %v - alerts: %+v"Could not associate Capability '%s' with server '%s': %v - alerts: %+v"Cannot get server server capabilities: %v - alerts: %+v"Cannot get server server capabilities: %v - alerts: %+v"Could not remove Capability '%s' from server '%s' (#%d): %v - alerts: %+v"Could not remove Capability '%s' from server '%s' (#%d): %v - alerts: %+v"/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/servers.gogetServerserversRespCould not create server '%s': %v - alerts: %+v"Could not create server '%s': %v - alerts: %+v"Cannot get Servers: %v - alerts: %+v"Cannot get Servers: %v - alerts: %+v"Could not delete Server: %v - alerts: %+v"Could not delete Server: %v - alerts: %+v"Expected server host name to not be nil."Expected server host name to not be nil."Error deleting Server for '%s' : %v - alerts: %+v"Error deleting Server for '%s' : %v - alerts: %+v"Expected Server '%s' to be deleted"Expected Server '%s' to be deleted"Get Servers Request failed with error:"Get Servers Request failed with error:" Retrieve Server to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/service_categories.goserviceCategorygetServiceCategoryserviceCategoriesCould not create Service Category: %v - alerts: %+v"Could not create Service Category: %v - alerts: %+v"Cannot get Service Categories: %v - alerts: %+v"Cannot get Service Categories: %v - alerts: %+v"Unexpected error deleting Service Category '%s': %v - alerts: %+v"Unexpected error deleting Service Category '%s': %v - alerts: %+v"Error getting Service Category '%s' after deletion: %v - alerts: %+v"Error getting Service Category '%s' after deletion: %v - alerts: %+v"Expected Service Category '%s' to be deleted, but it was found in Traffic Ops"Expected Service Category '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Service Category to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/static_dns_entries.gostaticDNSEntrygetStaticDNSEntrystaticDNSEntriesCould not create Static DNS Entry: %v - alerts: %+v"Could not create Static DNS Entry: %v - alerts: %+v"Cannot get Static DNS Entries: %v - alerts: %+v"Cannot get Static DNS Entries: %v - alerts: %+v"Unexpected error deleting Static DNS Entry '%s' (#%d): %v - alerts: %+v"Unexpected error deleting Static DNS Entry '%s' (#%d): %v - alerts: %+v"Error getting Static DNS Entry '%s' after deletion: %v - alerts: %+v"Error getting Static DNS Entry '%s' after deletion: %v - alerts: %+v"Expected Static DNS Entry '%s' to be deleted, but it was found in Traffic Ops"Expected Static DNS Entry '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Static DNS Entry to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/statuses.gorespStatusCould not create Status: %v - alerts: %+v"Could not create Status: %v - alerts: %+v"Cannot get test statuses: test data statuses must have names"Cannot get test statuses: test data statuses must have names"Cannot get Statuses filtered by name '%s': %v - alerts: %+v"Cannot get Statuses filtered by name '%s': %v - alerts: %+v"Expected 1 status returned. Got: %d"Expected 1 status returned. Got: %d"Cannot delete Status: %v - alerts: %+v"Cannot delete Status: %v - alerts: %+v"Unexpected error getting Statuses filtered by name after deletion: %v - alerts: %+v"Unexpected error getting Statuses filtered by name after deletion: %v - alerts: %+v"Expected Status '%s' to be deleted, but it was found in Traffic Ops"Expected Status '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Status by name, so we can get the id for the Update Retrieve the Status to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/steering_targets.gorespDSrespTargettargetIDstsCreating steering target: %v - alerts: %+v"Creating steering target: %v - alerts: %+v"Deleting steering target: getting ds: %v - alerts: %+v"Deleting steering target: getting ds: %v - alerts: %+v"Deleting steering target: getting ds: expected 1 delivery service"Deleting steering target: getting ds: expected 1 delivery service"Deleting steering target: getting ds: nil ID returned"Deleting steering target: getting ds: nil ID returned"Deleting steering target: getting target ds: %v - alerts: %+v"Deleting steering target: getting target ds: %v - alerts: %+v"Deleting steering target: getting target ds: expected 1 delivery service"Deleting steering target: getting target ds: expected 1 delivery service"Deleting steering target: getting target ds: not found"Deleting steering target: getting target ds: not found"Deleting steering target: deleting: %v - alerts: %+v"Deleting steering target: deleting: %v - alerts: %+v"deleting steering targets: getting steering target: %v - alerts: %+v"deleting steering targets: getting steering target: %v - alerts: %+v"Deleting steering targets: after delete, getting steering target: expected 0 actual %d"Deleting steering targets: after delete, getting steering target: expected 0 actual %d"/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/tenants.gotenantgetTenantsCould not create Tenant '%s': %v - alerts: %+v"Could not create Tenant '%s': %v - alerts: %+v"sortOrder"sortOrder""desc"Cannot get Tenants: %v - alerts: %+v"Cannot get Tenants: %v - alerts: %+v"Unexpected error deleting Tenant '%s' (#%d): %v - alerts: %+v"Unexpected error deleting Tenant '%s' (#%d): %v - alerts: %+v"Error getting Tenant '%s' after deletion: %v - alerts: %+v"Error getting Tenant '%s' after deletion: %v - alerts: %+v"Expected Tenant '%s' to be deleted, but it was found in Traffic Ops"Expected Tenant '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Tenant to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/topologies.goCould not create Topology: %v - alerts: %+v"Could not create Topology: %v - alerts: %+v"Cannot get Topologies: %v - alerts: %+v"Cannot get Topologies: %v - alerts: %+v"Cannot delete Topology: %v - alerts: %+v"Cannot delete Topology: %v - alerts: %+v"Unexpected error trying to fetch Topologies after deletion: %v - alerts: %+v"Unexpected error trying to fetch Topologies after deletion: %v - alerts: %+v"Expected Topology '%s' to be deleted, but it was found in Traffic Ops"Expected Topology '%s' to be deleted, but it was found in Traffic Ops" Retrieve the Topology to see if it got deleted/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/traffic_control.go`json:"cdns"``json:"cdnlocks"``json:"cachegroups"``json:"capability"``json:"coordinates"``json:"deliveryServicesRegexes"``json:"deliveryServiceRequests"``json:"deliveryServiceRequestComments"``json:"deliveryservices"``json:"deliveryservicesRequiredCapabilities"``json:"deliveryServiceServerAssignments"``json:"topologyBasedDeliveryServicesRequiredCapabilities"``json:"divisions"``json:"federation_resolvers"``json:"origins"``json:"profiles"``json:"profileParameters"``json:"physLocations"``json:"regions"``json:"roles"``json:"serverServerCapabilities"``json:"serverCapabilities"``json:"serviceCategories"``json:"statuses"``json:"staticdnsentries"``json:"statsSummaries"``json:"tenants"``json:"servercheck_extensions"``json:"types"``json:"steeringTargets"``json:"serverchecks"``json:"invalidationJobs"``json:"invalidationJobsRefetch"` TrafficControl - maps to the tc-fixtures.json file/Users/test/Desktop/trafficcontrol/lib/go-tc/totest/types.godbQueryTemplatedbDeleteTemplatetypeNameunable to close connection to db, error: %v"unable to close connection to db, error: %v"INSERT INTO type (name, description, use_in_table) VALUES ('%s', '%s', '%s');"INSERT INTO type (name, description, use_in_table) VALUES ('%s', '%s', '%s');"could not create Type using database operations: %v"could not create Type using database operations: %v"could not create Type: %v - alerts: %+v"could not create Type: %v - alerts: %+v"DELETE FROM type WHERE name='%s';"DELETE FROM type WHERE name='%s';"Cannot get Types: %v - alerts: %+v"Cannot get Types: %v - alerts: %+v"CHECK_EXTENSION_BOOL"CHECK_EXTENSION_BOOL"CHECK_EXTENSION_NUM"CHECK_EXTENSION_NUM"CHECK_EXTENSION_OPEN_SLOT"CHECK_EXTENSION_OPEN_SLOT"cannot delete Type using database operations: %v"cannot delete Type using database operations: %v"cannot delete Type using the API: %v - alerts: %+v"cannot delete Type using the API: %v - alerts: %+v"error fetching Types filtered by presumably deleted name: %v - alerts: %+v"error fetching Types filtered by presumably deleted name: %v - alerts: %+v"expected Type '%s' to be deleted"expected Type '%s' to be deleted"Get Types Request failed with error: %v"Get Types Request failed with error: %v" Retrieve the Type by name to see if it was deleted./Users/test/Desktop/trafficcontrol/lib/go-tc/totest/users.gousernamesCould not create user: %v - alerts: %+v"Could not create user: %v - alerts: %+v"DELETE FROM log WHERE NOT tm_user = (SELECT id FROM tm_user WHERE username = 'admin')`DELETE FROM log WHERE NOT tm_user = (SELECT id FROM tm_user WHERE username = 'admin')`Cannot execute SQL: %v; SQL is %s"Cannot execute SQL: %v; SQL is %s"DELETE FROM tm_user WHERE username IN (`DELETE FROM tm_user WHERE username IN (`"username"Get Users Request failed with error:"Get Users Request failed with error:"Expected ID to not be nil."Expected ID to not be nil."transaction begin failed %v %v "transaction begin failed %v %v "exec failed %v %v"exec failed %v %v"commit failed %v %v"commit failed %v %v" ForceDeleteTestUsers forcibly deletes the users from the db. NOTE: Special circumstances!  This should *NOT* be done without a really good reason! Connects directly to the DB to remove users rather than going through the client. This is required here because the DeleteUser action does not really delete users,  but disables them. there is a constraint that prevents users from being deleted when they have a log/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/asns.gototestv4/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/cachegroup_deliveryservices.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/cachegroups.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/cdns.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/coordinates.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/deliveryservice_regexes.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/deliveryservice_request_comments.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/deliveryservice_requests.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/deliveryservices.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/deliveryservices_required_capabilities.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/divisions.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/federation_resolvers.goUIntPtr/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/federation_users.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/federations.goFederation CName was nil after posting."Federation CName was nil after posting."/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/jobs.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/origins.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/parameters.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/physlocations.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/profile_parameters.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/profiles.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/regions.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/roles.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/server_capabilities.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/server_check_extensions.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/server_checks.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/server_server_capabilities.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/servers.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/service_categories.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/static_dns_entries.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/statuses.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/steering_targets.goUInt64Ptr/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/tenants.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/topologies.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/traffic_control.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/types.go/Users/test/Desktop/trafficcontrol/lib/go-tc/totestv4/users.go/Users/test/Desktop/trafficcontrol/lib/go-tc/tovalidate/Users/test/Desktop/trafficcontrol/lib/go-tc/tovalidate/db.goDBExistsRuleDBUniqueRuleIsAlphanumericDashIsAlphanumericUnderscoreDashIsGreaterThanZeroIsOneOfStringIsOneOfStringICaseIsPtrToSliceOfUniqueStringersICaseIsValidIPv6CIDROrAddressIsValidPortNumberNewDBExistsRuleNewDBUniqueRuleNoLineBreaksNoPeriodsNoSpacesStringIsValidFloatToErrorrxAlphanumericDashrxAlphanumericUnderscoreDashcolumnisNilMapperStructMapFieldInfoChildrenPathsGetByPathGetByTraversaltagNametagMapFuncmapFuncTypeMapFieldMapFieldsByNameTraversalsByNameTraversalsByNameFuncdriverNameDriverNameMapperFuncRebindUnsafeBindNamedNamedQueryNamedExecSelectMustBeginBeginxQueryxQueryRowxMustExecPreparexPrepareNamedPrepareNamedContextNamedQueryContextNamedExecContextSelectContextGetContextPreparexContextQueryxContextQueryRowxContextMustBeginTxMustExecContextBeginTxxConnxidChecksqlx"github.com/jmoiron/sqlx"No rows with value in %s.%s"No rows with value in %s.%s"IndirectIsEmptySELECT COUNT(*) FROM `SELECT COUNT(*) FROM ` WHERE ` WHERE `= $1`= $1`**** QUERY **** "**** QUERY **** " value %d err %++v" value %d err %++v" must be unique in ` must be unique in `SELECT id FROM `SELECT id FROM `SliceScanMapScanscanAnyStructScan DBExistsRule is a rule used to check if a given value is in a certain column of a specific table. DBExistsRule is not known to be used anywhere, and likely only has meaning for Traffic Ops internals even if it was. Therefore, its use is discouraged as it may be removed/relocated in the future. NewDBExistsRule creates a new validation rule that checks if a value is in the given column of the given table. Validate checks if the given value is valid or not according to this rule. Error sets the error message for the rule. DBUniqueRule is a rule used to check if a given value is in a certain column of a specific table, and that there is exactly one row containing that value in said table. DBUniqueRule is not known to be used anywhere, and likely only has meaning NewDBUniqueRule creates a validation rule that checks if a value is in the given column of the given table, and that there is exactly one row containing that value in said table. The idCheck function must be given and must be capable of determining uniqueness of the single numeric ID parameter given to it. Note that the DBUniqueRule is, therefore, incapable of verifying the uniqueness of a value in a table that uses non-numeric and/or compound keys. Validate returns an error if the value already exists in the table in this column. ok if no rows found or only one belongs to row being updatedStmtxNamedStmtStmtxContextNamedStmtContext/Users/test/Desktop/trafficcontrol/lib/go-tc/tovalidate/doc.go Package tovalidate contains helpful utility functions and ozzo-validator-compatible rules and rule generators for validating data in Actually, the functionality shouldn't be specific to Traffic Ops (usually), but that is the only place that uses it at the time of this writing. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License./Users/test/Desktop/trafficcontrol/lib/go-tc/tovalidate/rules.golowcasedlcrvslicePtrvalidated^[a-zA-Z0-9\-_]+$`^[a-zA-Z0-9\-_]+$`^[a-zA-Z0-9\-]+$`^[a-zA-Z0-9\-]+$`
"\n\r"ValueOf%T is not a pointer"%T is not a pointer"%T is not a slice"%T is not a slice"Stringer%T is not a pointer to a slice of Stringers"%T is not a pointer to a slice of Stringers"'%s' is not one of %v"'%s' is not one of %v"duplicate value found: '%s'"duplicate value found: '%s'"IsGreaterThanZero validation failure: unknown type %T"IsGreaterThanZero validation failure: unknown type %T"must be greater than zero"must be greater than zero"65535IsValidPortNumber validation failure: unknown type %T"IsValidPortNumber validation failure: unknown type %T"must be a valid port number"must be a valid port number"got IPv4 CIDR, IPv6 expected"got IPv4 CIDR, IPv6 expected"got IPv4 address, IPv6 expected"got IPv4 address, IPv6 expected"unable to parse an IPv6 address or CIDR from: %s"unable to parse an IPv6 address or CIDR from: %s"IsValidIPv6CIDROrAddress validation failure: unknown type %T"IsValidIPv6CIDROrAddress validation failure: unknown type %T"IsNaNmust be a valid float"must be a valid float" NoSpaces returns true if the string has no spaces. NoLineBreaks returns true if the string has no line breaks. IsAlphanumericUnderscoreDash returns true if the string consists of only alphanumeric, underscore, or dash characters. IsAlphanumericDash returns true if the string consists of only alphanumeric or dash characters. NoPeriods returns true if the string has no periods. IsOneOfString generates a validator function returning whether a passed string is in the given set of strings. IsOneOfStringICase is a case-insensitive version of IsOneOfString. IsPtrToSliceOfUniqueStringersICase returns a validator function which returns an error if the argument is a non-nil pointer to a slice of fmt.Stringers whose String() values are not in the set of strings or if the argument contains more than one entry that produce the same value from their String() method. IsGreaterThanZero returns an error if the given value is not nil and is not a pointer to a value that is strictly greater than zero. The argument to this function must be a pointer to an int or a float64 - other types will cause it to return an error (not panic). IsValidPortNumber returns an error if the given value is not nil and is not a valid network port number or a pointer to a valid network port number. The argument to this function must be either an int or a pointer to an int float64 - other types will cause it to return an error (not panic). IsValidIPv6CIDROrAddress returns an error if the given value is not a pointer to a string that is a valid IPv6 address with optional CIDR-notation network prefix. The argument to this function must be a pointer to a string - other types will cause it to return an error (not panic). StringIsValidFloat returns a reference to a validation.StringRule function that only returns true if the string value given string argument can be parsed to a 64-bit float that is not NaN./Users/test/Desktop/trafficcontrol/lib/go-tc/tovalidate/validate.goerrMsgvErrors'%v' %w"'%v' %w" ToErrors converts a map of strings to errors into an array of errors. This is accomplished using `fmt.Errorf("'%v' %v", key, value)` where 'key' is the map key and 'value' is the error value to which it points - this means that error identity is NOT preserved. For example:	errMap := map[string]error{	    "sql.ErrNoRows": sql.ErrNoRows,	errs := ToErrors(errMap)	if errors.Is(errs[0], sql.ErrNoRows) {	    fmt.Println("true")	} else {	    fmt.Println("false") ... will output 'false'. ToError converts a map of strings to errors into a single error. Because multiple errors are collapsed, errors cannot be wrapped and therefore error identity cannot be preserved./Users/test/Desktop/trafficcontrol/lib/go-tc/traffic_monitor.gothresholdsprofileIndexlegacylegacyInterfacemonitorInterfaceStatslegacyStatsmonitorConfigskippedCachesintervalIvalStrcomparatorcomparatorsvStrtrafficServerparameterKeyparameterValtrafficMonitorbwThresholdtmConfigjsoniter"github.com/json-iterator/go"health.threshold."health.threshold."kbps"kbps"maxKbps"maxKbps"bandwidth"bandwidth"`json:"trafficServers,omitempty"``json:"cacheGroups,omitempty"``json:"trafficMonitors,omitempty"``json:"profiles,omitempty"`availableBandwidthInKbps"availableBandwidthInKbps""loadavg"queryTime"queryTime"Cache "Cache " does not exist in the " does not exist in the ""TrafficMonitorConfigMap": unable to convert to legacy ": unable to convert to legacy "interfaces: "interfaces: ": computed legacy interface ": computed legacy interface "does not have a name"does not have a name" does not contain interface " does not contain interface "`json:"pp"``json:"span"``json:"time"`APIfrozenConfigIndentionStepMarshalFloatWith6DigitsEscapeHTMLSortMapKeysTagKeyOnlyTaggedFieldValidateJsonRawMessageObjectFieldMustBeSimpleStringCaseSensitiveFrozefrozeWithCacheReuseIsNullableLikePtrPackEFaceRTypeType1UnsafeIndirectUnsafeIsNilUnsafeNewUnsafeSetValDecoderValEncoderStreamindentionAttachmentWriteValstreamSetBufferwriteTwoByteswriteThreeByteswriteFourByteswriteFiveBytesWriteRawWriteNilWriteTrueWriteFalseWriteBoolWriteObjectStartWriteObjectFieldWriteObjectEndWriteEmptyObjectWriteMoreWriteArrayStartWriteEmptyArrayWriteArrayEndwriteIndentionWriteFloat32WriteFloat32LossyWriteFloat64WriteFloat64LossyWriteUint8WriteInt8WriteUint16WriteInt16WriteUint32WriteInt32WriteUint64WriteInt64WriteIntWriteUintWriteStringWithHTMLEscapedStructDescriptorBindingUnsafeGetlevelsFromNamesToNamesGetFieldstructDescriptorCreateDecoderCreateEncoderCreateMapKeyDecoderCreateMapKeyEncoderDecorateDecoderDecorateEncoderUpdateStructDescriptorconfigBeforeFrozensortMapKeysindentionStepobjectFieldMustBeSimpleStringonlyTaggedFieldencoderCacheencoderExtensiondecoderExtensionextraExtensionsstreamPooliteratorPoolcaseSensitiveinitCacheaddDecoderToCacheaddEncoderToCachegetDecoderFromCachegetEncoderFromCachevalidateJsonRawMessagegetTagKeyRegisterExtensionmarshalFloatWith6DigitscleanDecoderscleanEncodersMarshalToStringUnmarshalFromStringBorrowStreamReturnStreamBorrowIteratorReturnIteratorDecoderOfEncoderOfdepthcaptureStartedAtcapturedReadAnyreadAnyreadNumberAnyreadObjectAnyreadArrayAnyResetBytesWhatIsNextskipWhitespacesWithoutLoadMoreisObjectEndnextTokenReportErrorCurrentBufferreadByteloadMoreunreadByteincrementDepthdecrementDepthReadArrayReadArrayCBReadBigFloatReadBigIntReadFloat32readPositiveFloat32readNumberAsStringreadFloat32SlowPathReadFloat64readPositiveFloat64readFloat64SlowPathReadNumberReadUintReadIntReadInt8ReadUint8ReadInt16ReadUint16ReadInt32ReadUint32readUint32ReadInt64ReadUint64readUint64assertIntegerReadObjectreadFieldHashReadObjectCBReadMapCBreadObjectStartreadObjectFieldAsBytesReadNilReadBoolSkipAndReturnBytesSkipAndAppendBytesstartCaptureTostartCapturestopCaptureskipFourBytesskipThreeBytesskipNumbertrySkipNumberskipStringtrySkipStringskipObjectskipArrayreadStringSlowPathreadEscapedCharReadStringAsSlicereadU4ReadValValueTypeGetInterfaceLastErrorMustBeValidToBoolToFloat32ToFloat64ToIntToInt32ToStringToUintToUint32ToUint64ToValadapterIteratorPoolStreamPoolConfigFastestMonitorConfig is nil"MonitorConfig is nil"MonitorConfig.TrafficServer empty (is the monitoring.json an empty object?)"MonitorConfig.TrafficServer empty (is the monitoring.json an empty object?)"MonitorConfig.CacheGroup empty"MonitorConfig.CacheGroup empty"MonitorConfig.TrafficMonitor empty"MonitorConfig.TrafficMonitor empty"MonitorConfig.DeliveryService empty"MonitorConfig.DeliveryService empty"MonitorConfig.Profile empty"MonitorConfig.Profile empty"peers.polling.interval"peers.polling.interval"MonitorConfig.Config["peers.polling.interval"] missing, peers.polling.interval parameter required`MonitorConfig.Config["peers.polling.interval"] missing, peers.polling.interval parameter required`MonitorConfig.Config["peers.polling.interval"] '%v' not a number, parameter peers.polling.interval must be a number`MonitorConfig.Config["peers.polling.interval"] '%v' not a number, parameter peers.polling.interval must be a number`health.polling.interval"health.polling.interval"MonitorConfig.Config["health.polling.interval"] missing, health.polling.interval parameter required`MonitorConfig.Config["health.polling.interval"] missing, health.polling.interval parameter required`MonitorConfig.Config["health.polling.interval"] '%v' not a number, parameter health.polling.interval must be a number`MonitorConfig.Config["health.polling.interval"] '%v' not a number, parameter health.polling.interval must be a number``json:"ip6"``json:"ip"``json:"fqdn"``json:"cachegroup"``json:"TotalTpsThreshold"``json:"TotalKbpsThreshold"``json:"hostRegexes,omitempty"``json:"health.connection.timeout"``json:"health.polling.url"``json:"health.polling.format"``json:"health.polling.type"``json:"history.count"``json:"health_threshold,omitempty"``json:"health.threshold.availableBandwidthInKbps,omitempty"``json:"health.threshold.loadavg,omitempty"``json:"health.threshold.queryTime,omitempty"`%s%f"%s%f">=">="<="<="invalid threshold: NaN (%v)"invalid threshold: NaN (%v)"health.connection.timeout"health.connection.timeout"Unmarshalling TMParameters health.connection.timeout expected integer, got %v"Unmarshalling TMParameters health.connection.timeout expected integer, got %v"health.polling.url"health.polling.url"Unmarshalling TMParameters health.polling.url expected string, got %v"Unmarshalling TMParameters health.polling.url expected string, got %v"health.polling.format"health.polling.format"Unmarshalling TMParameters health.polling.format expected string, got %v"Unmarshalling TMParameters health.polling.format expected string, got %v"health.polling.type"health.polling.type"Unmarshalling TMParameters health.polling.type expected string, got %v"Unmarshalling TMParameters health.polling.type expected string, got %v"history.count"history.count"Unmarshalling TMParameters history.count expected integer, got %v"Unmarshalling TMParameters history.count expected integer, got %v"Unmarshalling TMParameters `%s` parameter value not of the form `(>|)(=|)\d+`: stat '%s' value '%v': %v"Unmarshalling TMParameters `%s` parameter value not of the form `(>|)(=|)\\d+`: stat '%s' value '%v': %v" ThresholdPrefix is the prefix of all Names of Parameters used to define monitoring thresholds. These are the names of statistics that can be used in thresholds for server health. TMConfigResponse is the response to requests made to the cdns/{{Name}}/configs/monitoring endpoint of the Traffic Ops API. LegacyTMConfigResponse was the response to requests made to the cdns/{{Name}}/configs/monitoring endpoint of the Traffic Ops API in older API versions. Deprecated: New code should use TMConfigResponse instead. TrafficMonitorConfig is the full set of information needed by Traffic Monitor to do its job of monitoring health and statistics of cache servers. TrafficServers is the set of all Cache Servers which should be monitored by the Traffic Monitor. CacheGroups is a collection of Cache Group Names associated with their geographic coordinates, for use in determining Cache Group availability. Config is a mapping of arbitrary configuration parameters to their respective values. While there is no defined structure to this map, certain configuration parameters have specifically defined semantics which may be found in the Traffic Monitor documentation. TrafficMonitors is the set of ALL Traffic Monitors (including whatever Traffic Monitor requested the endpoint (if indeed one did)) which is used to determine quorum and peer polling behavior. DeliveryServices is the set of all Delivery Services within the monitored CDN, which are used to determine Delivery Service-level statistics. Profiles is the set of Profiles in use by any and all monitored cache servers (those given in TrafficServers), which are stored here to avoid potentially lengthy reiteration. Topologies is the set of topologies defined in Traffic Ops, consisting of just the EDGE_LOC-type cachegroup nodes. ToLegacyConfig converts TrafficMonitorConfig to LegacyTrafficMonitorConfig. Deprecated: LegacyTrafficMonitoryConfig is deprecated. New code should just use TrafficMonitorConfig instead. LegacyTrafficMonitorConfig represents TrafficMonitorConfig for ATC versions before 5.0. Upgrade converts a legacy TM Config to the newer structure. TrafficMonitorConfigMap is a representation of a TrafficMonitorConfig using unique values as map keys. TrafficServer is a map of cache server hostnames to TrafficServer objects. WARNING: Cache server hostnames are NOT guaranteed to be unique, so when more than one cache server with the same hostname exists, the two CANNOT coexist within this structure; only one will appear and, when constructed using TrafficMonitorTransformToMap, which cache server does exist in the generated map is undefined. CacheGroup is a map of Cache Group Names to TMCacheGroup objects. TrafficMonitor is a map of Traffic Monitor hostnames to TrafficMonitor WARNING: Traffic Monitor hostnames are NOT guaranteed to be unique, so when more than one cache server with the same hostname exists, the two CANNOT coexist within this structure; only one will appear and, when constructed using TrafficMonitorTransformToMap, which Traffic Monitor does exist in the generated map is undefined. DeliveryService is a map of Delivery Service XMLIDs to TMDeliveryService Profile is a map of Profile Names to TMProfile objects. Topology is a map of Topology names to CRConfigTopology structs. ToLegacy converts a Stats to a LegacyStats. This returns a list of descriptions of which - if any - cache servers were skipped in the conversion and why, as well as the converted LegacyStats. This creates a "shallow" copy of most properties of the Stats. Deprecated: LegacyStats is deprecated. New code should just use Stats ServerStats is a representation of cache server statistics as present in the TM API. Interfaces contains statistics specific to each monitored interface of the cache server. Stats contains statistics regarding the cache server in general. Stats is designed for returning via the API. It contains result history for each cache, as well as common API data. Caches is a map of cache server hostnames to groupings of statistics regarding each cache server and all of its separate network interfaces. LegacyStats is designed for returning via the API. It contains result history for each cache server, as well as common API data. Deprecated: This structure is incapable of representing interface-level stats, so new code should use Stats instead. CommonAPIData contains generic data common to most Traffic Monitor API endpoints. ResultStatVal is the value of an individual stat returned from a poll. JSON values are all strings, for the TM1.0 /publish/CacheStats API. Span is the number of polls this stat has been the same. For example, if History is set to 100, and the last 50 polls had the same value for this stat (but none of the previous 50 were the same), this stat's map value slice will actually contain 51 entries, and the first entry will have the value, the time of the last poll, and a Span of 50. Assuming the poll time is every 8 seconds, users will then know, looking at the Span, that the value was unchanged for the last 50*8=400 seconds. Time is the time this stat was returned. ms since the epoch TODO make configurable Valid returns a non-nil error if the configuration map is invalid. A configuration map is considered invalid if: - it is nil, - it has no CacheGroups, - it has no Profiles, - it has no Traffic Monitors, - it has no Traffic Servers, - the Config mapping has no 'peers.polling.interval' key, - or the Config mapping has no 'health.polling.interval' key. LegacyTrafficMonitorConfigMap is a representation of a LegacyTrafficMonitorConfig using unique values as map keys. Deprecated: This structure is incapable of representing per-interface configuration information for servers, so new code should use TrafficMonitorConfigMap instead. Upgrade returns a TrafficMonitorConfigMap that is equivalent to this legacy configuration map. Note that all fields except TrafficServer are "shallow" copies, so modifying the original will impact the upgraded copy. Deprecated: LegacyTrafficMonitorConfigMap is deprecated. TrafficMonitor is a structure containing enough information about a Traffic Monitor instance for another Traffic Monitor to use it for quorums and peer polling. Port is the port on which the Traffic Monitor listens for HTTP requests. IP6 is the Traffic Monitor's IPv6 address. IP is the Traffic Monitor's IPv4 address. HostName is the Traffic Monitor's hostname. FQDN is the Fully Qualified Domain Name of the Traffic Monitor server. Profile is the Name of the Profile used by the Traffic Monitor. Location is the Name of the Cache Group to which the Traffic Monitor belongs - called "Location" for legacy reasons. ServerStatus is the Name of the Status of the Traffic Monitor. TMCacheGroup contains all of the information about a Cache Group necessary for Traffic Monitor to do its job of monitoring health and statistics. MonitoringCoordinates holds a coordinate pair for inclusion as a field in TMCacheGroup. TMDeliveryService is all of the information about a Delivery Service necessary for Traffic Monitor to do its job of monitoring health and TMProfile is primarily a collection of the Parameters with special meaning to Traffic Monitor for a Profile of one of the monitored cache servers and/or other Traffic Monitors, along with some identifying information for the Profile. TMParameters is a structure containing all of the Parameters with special meaning to Traffic Monitor. For specifics regarding each Parameter, refer to the official documentation. TODO change TO to return this struct, so a custom UnmarshalJSON isn't necessary. HealthThresholdJSONParameters contains the Parameters contained in the Thresholds field, formatted as individual string Parameters, rather than as a JSON object. HealthThresholdJSONParameters contains Parameters whose Thresholds must be met in order for Caches using the Profile containing these Parameters to be marked as Healthy. AvailableBandwidthInKbps is The total amount of bandwidth that servers using this profile are allowed, in Kilobits per second. This is a string and using comparison operators to specify ranges, e.g. ">10" means "more than 10 kbps". LoadAverage is the UNIX loadavg at which the server should be marked "unhealthy". QueryTime is the highest allowed length of time for completing health queries (after connection has been established) in milliseconds. DefaultHealthThresholdComparator is the comparator used for health thresholds when one is not explicitly provided in the Value of a Parameter used to define a Threshold. HealthThreshold describes some value against which to compare health measurements to determine if a cache server is healthy. Val is the actual, numeric, threshold value. Comparator is the comparator used to compare the Val to the monitored value. One of '=', '>', '<', '>=', or '<=' - other values are invalid. TODO change to enum? StrToThreshold takes a string like ">=42" and returns a HealthThreshold with a Val of `42` and a Comparator of `">="`. If no comparator exists, `DefaultHealthThresholdComparator` is used. If the string does not match "(>|<|)(=|)\d+" an error is returned. The order of these is important - don't re-order without considering the consequences. allows string or numeric JSON types. TODO check if a type switch is faster. TrafficMonitorTransformToMap converts the given TrafficMonitorConfig to a TrafficMonitorConfigMap. This also implicitly calls Valid on the TrafficMonitorConfigMap before returning it, and gives back whatever value that returns as the error return LegacyTrafficMonitorTransformToMap converts the given LegacyTrafficMonitorConfig to a LegacyTrafficMonitorConfigMap. This also implicitly calls LegacyMonitorConfigValid on the LegacyTrafficMonitorConfigMap before returning it, and gives back whatever value that returns as the error return value. LegacyMonitorConfigValid checks the validity of the passed LegacyTrafficMonitorConfigMap, returning an error if it is invalid. Deprecated: LegacyTrafficMonitorConfigMap is deprecated, new code should use TODO uncomment this, when TO is fixed to include DeliveryServices. See https://github.com/apache/trafficcontrol/issues/3528 if len(cfg.DeliveryService) == 0 { 	return errors.New("MonitorConfig.DeliveryService empty") HealthData is a representation of all of the health information for a CDN or Delivery Service. This is the type of the `response` property of responses from Traffic Ops to GET requests made to its /deliveryservices/{{ID}}/health and /cdns/health API endpoints. HealthDataCacheGroup holds health information specific to a particular Cache Group.DecoderExtensionNumberEncoderExtensionRoundingModeprecaccmantSetPrecSetModePrecMinPrecAccMantExpsetExpAndRoundSetMantExpSignbitIsInfvalidate0setBits64SetFloat64SetRatSetInfRatuaddusubumuluquoucmpordpow5fmtBfmtXfmtPsqrtInverseSetFracSetFrac64InvDenomRatStringFloatStringFloatPrec/Users/test/Desktop/trafficcontrol/lib/go-tc/traffic_router.goisIPv4interfvipInterfacecoveragezone.polling."coveragezone.polling.""url"coveragezone.polling.url`json:"network,omitempty"``json:"network6,omitempty"``json:"coverageZones,omitempty"`X-MM-Client-IP"X-MM-Client-IP"`json:"admin,omitempty"``json:"expire,omitempty"``json:"minimum,omitempty"``json:"refresh,omitempty"``json:"retry,omitempty"``json:"matchlist"``json:"match-type"``json:"hashId"` CoverageZonePollingPrefix is the prefix of all Names of Parameters used to define coverage zone polling parameters. CoverageZonePollingURL is the Name of the Parameter that defines the URL that Traffic Router will repeatedly poll for a coverage zone file. CoverageZoneLocation represents a single "location" in a coverage zone file. GetFirstIPAddressOfType returns the first IP address (or CIDR-notation subnet) that can be found within the location that meets the criteria specified by its argument - "true" means an IPv4 address should be returned, while "false" means it should be IPv6. If no addresses (or subnets) are found that meet that criteria, an empty string is returned. CoverageZoneFile is used for unmarshalling a Coverage Zone File. X_MM_CLIENT_IP is an optional HTTP header that causes Traffic Router to use its value as the client IP address. SOA (Start of Authority record) defines the SOA record for the CDN's top-level domain. MatchSet structures are a list of MatchList structures with an associated Protocol. A MatchList is actually just a single match item in a match list. A LegacyTrafficServer is a representation of a cache server containing a subset of the information available in a server structure that conveys all the information important for Traffic Router and Traffic Monitor to handle it. Deprecated: The configuration versions that use this structure to represent a cache server are deprecated, new code should use TrafficServer instead. the deliveryServices key does not exist on mids Upgrade upgrades the LegacyTrafficServer into its modern-day equivalent. Note that the DeliveryServices slice is a "shallow" copy of the original, so making changes to the original slice will affect the upgraded copy. Deprecated: LegacyTrafficServer is deprecated. GetVIPInterface returns the primary interface specified by the `Monitor` property of an Interface. First interface marked as `Monitor` is returned. ToLegacyServer converts a TrafficServer to LegacyTrafficServer. TrafficServer represents a cache server for use by Traffic Monitor and Traffic Router instances. IPv4 gets the server's IPv4 address if one exists, otherwise an empty string. Note: This swallows errors from the legacy data conversion process. IPv6 gets the server's IPv6 address if one exists, otherwise an empty TSDeliveryService represents a delivery service as assigned to a TrafficServer in the TMConfig./Users/test/Desktop/trafficcontrol/lib/go-tc/traffic_stats.goiSecsmsgsinfluxgithub.com/influxdata/influxdb/client/v2"github.com/influxdata/influxdb/client/v2"^\d+[mhdw]$`^\d+[mhdw]$`"m"3600"d"86400"w"Invalid duration literal, no recognized suffix"Invalid duration literal, no recognized suffix"series"series"summary"summary"Parsing duration literal: %v"Parsing duration literal: %v"0s"0s"%ds"%ds"`json:"series,omitempty"``json:"summary,omitempty"``json:"average"``json:"fifthPercentile"``json:"max"``json:"min"``json:"ninetyEighthPercentile"``json:"ninetyFifthPercentile"``json:"totalBytes"``json:"totalTransactions"``json:"totalKiloBytes"``json:"columns"``json:"tags"``json:"values"`Datapoint %d (%v) malformed"Datapoint %d (%v) malformed"Datapoint %d (%v) malformed: %v"Datapoint %d (%v) malformed: %v"error converting timestamp %s into RFC3339 format: %v"error converting timestamp %s into RFC3339 format: %v"Invalid type %T for datapoint %d (%v)"Invalid type %T for datapoint %d (%v)"Messages: ["Messages: ["':'58']'93`json:"bandwidth"``json:"capacity"``json:"connections"``json:"currentStats"` TrafficStatsDurationPattern reflects all the possible durations that can be requested via the /deliveryservice_stats endpoint. DurationLiteralToSeconds returns the number of seconds to which an InfluxQL duration literal is equivalent. For invalid objects, it returns -1 - otherwise it will always, of course be > 0. TrafficStatsOrderable encodes what columns by which the data returned from a Traffic Stats query may be ordered. TimeOrder indicates an ordering by time at which the measurement was taken. OrderableFromString parses the passed string and returns the corresponding value as a pointer to a TrafficStatsOrderable - or nil if the value was invalid. TrafficStatsExclude encodes what parts of a response to a request to a "Traffic Stats" endpoint of the TO API may be omitted. ExcludeSeries can be used to omit the data series from a response. ExcludeSummary can be used to omit the summary series from a response. ExcludeInvalid can be used if the the key that you want to exclude fails ExcludeFromString parses the passed string and returns the corresponding value as a TrafficStatsExclude. TrafficStatsConfig represents the configuration of a request made to Traffic Stats. This is typically constructed by parsing a request body submitted to Traffic Ops. TrafficDSStatsConfig represents the configuration of a request made to Traffic Stats for Delivery Service stats. TrafficCacheStatsConfig represents the configuration of a request made to Traffic Stats for cache server stats. OffsetString is a stupid, dirty hack to try to convince Influx to not give back data that's outside of the range in a WHERE clause. It doesn't work, but it helps. (https://github.com/influxdata/influxdb/issues/8010) TODO: Don't log in library function - return error if there is one. TrafficDSStatsResponse represents a response from the /deliveryservice_stats "Traffic Stats" endpoints. Series holds the actual data - it is NOT in general the same as a github.com/influxdata/influxdb1-client/models.Row Summary contains summary statistics of the data in Series TrafficStatsResponse represents the generic response from one of the "Traffic Stats endpoints" of the Traffic Ops API, e.g. `/cache_stats`. TrafficStatsSummary contains summary statistics for a data series. Average is calculated as an arithmetic mean Count is the total number of data points _except_ for any values that would appear as 'nil' in the corresponding series LegacyTrafficDSStatsSummary contains summary statistics for a data series for Delivery Service stats. Deprecated: This uses a confusing, incorrect name for the total number of kilobytes served, so new code should use TrafficDSStatsSummary instead. TotalBytes is the total number of kilobytes served when the "metric type" requested is "kbps" (or actually just contains "kbps"). If this is not nil, TotalTransactions *should* always be nil. Totaltransactions is the total number of transactions within the requested window. Whenever the requested metric doesn't contain "kbps", it assumed to be some kind of transactions measurement. In that case, this will not be nil - otherwise it will be nil. If this not nil, TotalBytes *should* always be nil. TrafficDSStatsSummary contains summary statistics for a data series for deliveryservice stats. TotalKiloBytes is the total number of kilobytes served when the "metric type" requested is "kbps" TrafficStatsSeries is the actual data returned by a request to a "Traffic Stats endpoint". Columns is a list of column names. Each "row" in Values is ordered to match up with these column names. Count is the total number of returned data points. Should be the same as len(Values) Name is the name of the InfluxDB database from which the data was retrieved Tags is a set of InfluxDB tags associated with the requested database. Values is an array of rows of arbitrary data that can only really be interpreted by inspecting Columns, in general. In practice, however, each element is nearly always a slice where the first element is an RFC3339 timestamp (as a string) and the second/final element is a floating point number (or nil) indicating the value at that time. FormatTimestamps formats the timestamps contained in the Values array as RFC3339 strings. This returns an error if the data is not in the expected format. MessagesToString converts a set of messages from an InfluxDB node into a single, print-able string. TrafficStatsCDNStats contains summary statistics for a given CDN. TrafficStatsTotalStats contains summary statistics across CDNs. This differs from TrafficStatsCDNStats in that it omits Capacity. TrafficStatsCDNStatsResponse contains response for getting current stats. CurrentStatsResponse is the type of a response from Traffic Ops to a request to its /current_stats endpoint. TrafficStatsCDNsStats contains a list of CDN summary statistics./Users/test/Desktop/trafficcontrol/lib/go-tc/types.gouseInTablePtrexpectedUseInTable`json:"useInTable"``json:"useInTable" db:"use_in_table"`SELECT name, use_in_table from type where id=$1`SELECT name, use_in_table from type where id=$1`querying type data: "querying type data: "missing property: 'typeId'"missing property: 'typeId'"validating type: "validating type: "type not found"type not found"type is not a valid "type is not a valid " type" type" TypesResponse is the type of a response from Traffic Ops to a GET request made to its /types API endpoint. Type contains information about a given Type in Traffic Ops. TypeNullable contains information about a given Type in Traffic Ops. TypesResponseV5 is type struct response used for the latest minor version associated with api major version 5. TypesResponseV50 is the type of response (for RFC3339) from Traffic Ops to a GET Request TypeV5 contains information about a given Type in Traffic Ops used for the latest minor version associated with api major version 5. TypeV50 contains information about a given Type in Traffic Ops. GetTypeData returns the type's name and use_in_table, true/false if the query returned data, and any error. TODO: Move this to the DB helpers package. ValidateTypeID validates that the typeID references a type with the expected use_in_table string and returns "" and an error if the typeID is invalid. If valid, the type's name is returned./Users/test/Desktop/trafficcontrol/lib/go-tc/users.golocalUserroleIDchangeLogCountlastAuthenticatedregistrationSentucdn`json:"u"``json:"p"``json:"t"``json:"addressLine1" db:"address_line1"``json:"addressLine2" db:"address_line2"``json:"country" db:"country"``json:"gid"``json:"newUser" db:"new_user"``json:"phoneNumber" db:"phone_number"``json:"postalCode" db:"postal_code"``json:"publicSshKey" db:"public_ssh_key"``json:"role" db:"role"``json:"stateOrProvince" db:"state_or_province"``json:"-" db:"token"``json:"uid"``json:"registrationSent" db:"registration_sent"``json:"localPasswd,omitempty" db:"local_passwd"``json:"confirmLocalPasswd,omitempty" db:"confirm_local_passwd"``json:"roleName,omitempty" db:"role_name"``json:"localUser"``json:"roleName"``json:"changeLogCount" db:"change_log_count"``json:"lastAuthenticated" db:"last_authenticated"``json:"ucdn"``json:"addressLine1"``json:"addressLine2"``json:"city"``json:"company"``json:"confirmLocalPasswd"``json:"country"``json:"email"``json:"fullName"``json:"localPasswd"``json:"phoneNumber"``json:"postalCode"``json:"publicSshKey"``json:"stateOrProvince"`addressLine1: %w"addressLine1: %w"addressLine2: %w"addressLine2: %w"city: %w"city: %w"company: %w"company: %w"country: %w"country: %w"email: %w"email: %w"email: cannot be null or an empty string"email: cannot be null or an empty string"fullName: %w"fullName: %w"fullName: cannot be set to 'null' or empty string"fullName: cannot be set to 'null' or empty string"gid: %w"gid: %w"id: %w"id: %w"id: cannot change user id"id: cannot change user id"phoneNumber: %w"phoneNumber: %w"postalCode: %w"postalCode: %w"publicSshKey: %w"publicSshKey: %w"role: %w"role: %w"role: cannot be null"role: cannot be null"stateOrProvince: %w"stateOrProvince: %w"tenantID: %w"tenantID: %w"tenantID: cannot be null"tenantID: cannot be null"uid: %w"uid: %w"username: %w"username: %w"username: cannot be null or empty string"username: cannot be null or empty string"role: required and cannot be empty"role: required and cannot be empty"tenantId: required and cannot be zero"tenantId: required and cannot be zero"email: required"email: required"role: required and cannot be zero"role: required and cannot be zero" Upgrade converts a User to a UserV4 (as seen in API versions 4.x). Downgrade converts a UserV4 to a User (as seen in API versions < 4.0). UserCredentials contains Traffic Ops login credentials. UserToken represents a request payload containing a UUID token for authentication. commonUserFields contents are still visible when it is embedded LastUpdated is a new field for some structs. User represents a user of Traffic Ops. NOTE: RoleName db:"-" tag is required due to clashing with the DB query here: https://github.com/apache/trafficcontrol/blob/3b5dd406bf1a0bb456c062b0f6a465ec0617d8ef/traffic_ops/traffic_ops_golang/user/user.go#L197 It's done that way in order to maintain "rolename" vs "roleName" JSON field capitalization for the different users APIs. UserCurrent represents the profile for the authenticated user. ToLegacyCurrentUser will convert an APIv4 user to an APIv3 "current user" representation. A Role ID and "local user" value must be supplied, since the APIv4 User doesn't have them. UserV4 is an alias for the User struct used for the latest minor version associated with api major version 4. A UserV40 is a representation of a Traffic Ops user as it appears in version 4.0 of Traffic Ops's API. Deprecated: This has no known use, and will likely be removed in future UsersResponseV4 is the type of a response from Traffic Ops to requests made to /users which return more than one user for the latest 4.x api version variant. UserResponseV4 is the type of a response from Traffic Ops to requests made to /users which return one user for the latest 4.x api version variant. CurrentUserUpdateRequest differs from a regular User/UserCurrent in that many of its fields are *parsed* but not *unmarshaled*. This allows a handler to distinguish between "null" and "undefined" values. User, for whatever reason, contains all of the actual data. CurrentUserUpdateRequestUser holds all of the actual data in a request to update the current user. Upgrade converts an APIv3 and earlier "current user" to an APIv4 User. Fields not present in earlier API versions need to be passed explicitly. UnmarshalAndValidate validates the request and returns a User into which the request's information has been unmarshalled. Perl enforced this UsersResponse can hold a Traffic Ops API response to a request to get a list of users. UserResponse can hold a Traffic Ops API response to a request to get a user. CreateUserResponse can hold a Traffic Ops API response to a POST request to create a user. CreateUserResponseV4 can hold a Traffic Ops API response to a POST request to create a user in api v4. UpdateUserResponse can hold a Traffic Ops API response to a PUT request to update a user. UpdateUserResponseV4 can hold a Traffic Ops API response to a PUT request to update a user for the latest 4.x api version variant. DeleteUserResponse can theoretically hold a Traffic Ops API response to a DELETE request to update a user. It is unused. UserCurrentResponse can hold a Traffic Ops API response to a request to get or update the current user. UserCurrentResponseV4 is the latest 4.x Traffic Ops API version variant of UserResponse. UserDeliveryServiceDeleteResponse can hold a Traffic Ops API response to a request to remove a delivery service from a user. UserPasswordResetRequest can hold  Traffic Ops API request to reset a user's password. UserRegistrationRequest is the request submitted by operators when they want to register a new user. Role - despite being named "Role" - is actually merely the *ID* of a Role to give the new user. UserRegistrationRequestV4 is the alias for the UserRegistrationRequest for the latest 4.x api version variant. UserRegistrationRequestV40 is the request submitted by operators when they want to register a new user in api V4. This can only happen if an email isn't present in the request; the JSON parse handles actually invalid email addresses./Users/test/Desktop/trafficcontrol/lib/go-util/Users/test/Desktop/trafficcontrol/lib/go-util/assert/Users/test/Desktop/trafficcontrol/lib/go-util/assert/assertions.goEmptyExactlyGreaterOrEqualNotEmptyNotEqualfailureOutputmsgAsStrfailureMessagemsgAndArgs%+v"%+v" Messages: " Messages: "Not equal. Expected: %v Actual: %v"Not equal. Expected: %v Actual: %v"An error is expected but got nil."An error is expected but got nil."Not exactly equal. Expected: %v (%T) Actual: %v (%T)"Not exactly equal. Expected: %v (%T) Actual: %v (%T)""%v" is not greater than or equal to "%v""\"%v\" is not greater than or equal to \"%v\""Received unexpected error: %+v"Received unexpected error: %+v"Expected value not to be nil."Expected value not to be nil."Should not be: %v"Should not be: %v"expected %v to be empty, but it is not"expected %v to be empty, but it is not"Chancan't check that %v of type %T is empty"can't check that %v of type %T is empty"expected %v to not be empty, but it is"expected %v to not be empty, but it is"can't check that %v of type %T is not empty"can't check that %v of type %T is not empty" failureOutput checks if there is a message to be parsed and concatenates with a failure message. Equal asserts that two objects are equal. RequireEqual asserts that two objects are equal. It marks the test as failed and stops execution. Error asserts that a function returned an error (i.e. not `nil`). Exactly asserts that two objects are equal in value and type. GreaterOrEqual asserts that the first element is greater than or equal to the second RequireGreaterOrEqual asserts that the first element is greater than or equal to the second NoError asserts that a function returned no error (i.e. `nil`). RequireNoError asserts that a function returned no error (i.e. `nil`). NotNil asserts that the specified object is not nil. RequireNotNil asserts that the specified object is not nil. NotEqual asserts that two objects are NOT equal. RequireNotEqual asserts that two objects are NOT equal. Empty takes a value and checks whether it is empty for the given type supports slices, arrays, channels, strings, and maps NotEmpty takes a value and checks whether it isvnot empty for the given type/Users/test/Desktop/trafficcontrol/lib/go-util/backoff.goAESDecryptAESEncryptBackoffBitsPerByteBodyInterceptorBytesLenSplitCIDRIsSubsetCamelToSnakeCaseCoalesceIPsConstantBackoffDurationCopyMapDefaultFactorErrsToStrsFirstIPFloatPtrIP4InRangeIP4ToNumInt64PtrIntSliceToMapInterceptorInterfacePtrJoinErrsSepJoinErrsStrLastIPMSPerNSNewBackoffNewConstantBackoffRemoveStrDuplicatesRemoveStrFromArrayStrInArrayTimePtrToNumericUint64PtrValidateAESKeyWrapErrorbackoffconstantBackoffBackoffDurationfactorattemptFactorrgenjitterdurFloatminFloat30000000000'min: %v, is invalid.  min must be greater than '1'"'min: %v, is invalid.  min must be greater than '1'"'max: %v, is invalid.  max must be greater than 'min'"'max: %v, is invalid.  max must be greater than 'min'"'factor: %v, is invalid.  factor must be greater than '1'"'factor: %v, is invalid.  factor must be greater than '1'"NewSource Used to return an exponentially increasing time.Duration value that may be used to sleep between retries. DefaultFactor may be used by applications for the factor argument to NewBackoff. ConstantBackoffDuration is a fallback duration that may be used by an application along with NewConstantBackoff(). Implementation of a Backoff that returns a constant time duration used as a fallback. NewConstantBackoff returns a Backoff that does not change its duration. This is roughly equivalent to calling NewBackoff(d, d+1*time.Second, 1.0) (the max duration doesn't matter when the factor is 1), but is more efficient in terms of both CPU load/time and memory used, and so should be done instead. A Backoff is a definition of how long to wait between attempting something, which is normally a network action, to avoid overloading requested resources. BackoffDuration returns the time that should be waited before attempting the action again. Normally, this duration will grow exponentially, but in the case of a Backoff constructed using NewConstantBackoff, it will be the same every time. Reset clears any incrementing of the duration returned by BackoffDuration, so that the next call will yield the same duration as the first call. NewBackoff constructs and returns a Backoff that starts with a duration at min and increments it exponentially according to the "factor" up to a maximum defined by the passed max. The rate of increase is defined to be nmf where n is the number of attempts that have already been made, m is the minimum duration, and f is the factor. The duration for any given attempt n (starting at zero) is defined to be mf+j where j is a randomly generated "jitter" that is added to each duration. The "jitter" will be a number of nanoseconds between the zero and the magnitude of the difference between the min and the factor. If the factor, treated as a number of nanoseconds, is greater than the minimum duration, this jitter will *subtract* from the resulting duration, and it will be between this difference (exclusive) and zero (inclusive). If the factor is less than the min it will *add* to the resulting duration, and it will be between 0 (inclusive) and the difference (exclusive). verify arguments and set defaults if necessary. generate random jitter. Calculate and return  backoff time duration. add jitter reached the max duration return maxBodyBytesRealWriteUnwrapByteCount/Users/test/Desktop/trafficcontrol/lib/go-util/collections.gonewMapany CopyMap makes a "deep-ish" copy of the map passed to it. This will only deeply copy the map itself; this means that if the map values are references or structures containing references, those are only being shallowly copied!/Users/test/Desktop/trafficcontrol/lib/go-util/doc.go Package util contains miscellaneous utilities helpful for ATC components. One of the most popular class of utility offered by this package is the set of functions that yield references to their arguments. This allows for one-line assignment of pointers to most primitive types.	myInt := new(int)	*myInt = 5 ... can be written on one line using IntPtr like so:	myInt := IntPtr(5)/Users/test/Desktop/trafficcontrol/lib/go-util/encrypt.gobytesToEncryptcipherBlockgcmbytesToDecryptciphertextdecryptedStringnonceSizekeyBytesaescrypto/aes"crypto/aes"crypto/cipher"crypto/cipher"EncryptNewCipherNewGCMReadFull AESEncrypt takes in a 16, 24, or 32 byte AES key (128, 192, 256 bit encryption respectively) and plain text. It returns the encrypted text. In case of error, the text returned is an empty string. AES requires input text to be greater than 12 bytes in length. AESDecrypt takes in a 16, 24, or 32 byte AES key (128, 192, 256 bit encryption respectively) and encrypted text. It returns the resulting decrypted text. In case of error, the text returned is an empty string. AES requires input text to be greater than 12 bytes in length. ValidateAESKey takes in a byte slice and tests if it's a valid AES key (16, 24, or 32 bytes), returning an error if it isn't./Users/test/Desktop/trafficcontrol/lib/go-util/error.go WrapError wraps an error in a context for that error. This allows comparison of errors using errors.Is. This is much faster than fmt.Errorf, so it should be preferred wherever that performance impact is considered significant./Users/test/Desktop/trafficcontrol/lib/go-util/http.gowi Interceptor implements http.ResponseWriter. It intercepts writes to w, and tracks the HTTP code and the count of bytes written, while still writing to w. WriteHeader implements http.ResponseWriter. It does the real write to Interceptor's internal ResponseWriter, while keeping track of the code. Write implements http.ResponseWriter. It does the real write to Interceptor's internal ResponseWriter, while keeping track of the count of bytes written. It also sets Interceptor's tracked code to 200 if WriteHeader wasn't called (which is what the real http.ResponseWriter will write to the client). Header implements http.ResponseWriter. It returns Interceptor's internal ResponseWriter.Header, without modification or tracking. BodyInterceptor fulfills the Writer interface, but records the body and doesn't actually write. This allows performing operations on the entire body written by a handler, for example, compressing or hashing. To actually write, call `RealWrite()`. Note this means `len(b)` and `nil` are always returned by `Write()`, any real write errors will be returned by `RealWrite()`. It does the real write to Interceptor's internal ResponseWriter, without modification or tracking. It writes the given bytes to BodyInterceptor's internal tracking bytes, and does not write them to the internal ResponseWriter. To write the internal bytes, call BodyInterceptor.RealWrite. It returns BodyInterceptor's internal ResponseWriter.Header, without modification or tracking. RealWrite writes BodyInterceptor's internal bytes, which were stored by calls to Write. Body returns the internal bytes stored by calls to Write./Users/test/Desktop/trafficcontrol/lib/go-util/join.gojoinederrTypeerrorStrsjoinedErrors([a-z0-9])([A-Z])"([a-z0-9])([A-Z])"${1}_${2}"${1}_${2}" JoinErrsStr returns a string representation of all of the passed errors. This is equivalent to calling JoinErrs(errs).Error(), but in the case that JoinErrs returns nil that would panic. This checks for that case and instead returns an empty string. ErrsToStrs converts a slice of errors to a slice of their string representations. JoinErrs joins the passed errors into a single error with a message that is a combination of their error messages. This is equivalent to calling JoinErrsSep(errs, ""). JoinErrsSep joins the passed errors into a single error with a message that is a combination of their error messages, joined by the given separator. If the given separator is an empty string, the default (", ") is used. Note that this DOES NOT preserve error identity. For example:	err := JoinErrsSep([]error{sql.ErrNoRows, errors.New("foo")})	fmt.Println(errors.Is(err, sql.ErrNoRows))	// Output: false strip trailing separator CamelToSnakeCase returns a case transformation of the input string from assumed "camelCase" (or "PascalCase") to "snake_case". Note that the transformation applied to strings that contain non-"word" characters is undefined. Also, this doesn't handle names that contain abbreviations, initialisms, and/or acronyms very well in general, like e.g. "IPAddress"./Users/test/Desktop/trafficcontrol/lib/go-util/net.goipIsV4ipnetIPNetSourcescoalesceMaskLencoalesceNumberfinalNetsisV4maskIPlargerMasknanbipninverseMaskmaxIPmaxIPBtsfirstIPlastIPfullMaskpartintPartsaNumabbNumipNumipRangeNetSourcesiploopCoalesceIPs got both V4 and V6 IPs, ignoring IP '"CoalesceIPs got both V4 and V6 IPs, ignoring IP '"CoalesceIPs got both V4 and V6 IPs, ignoring CIDR '"CoalesceIPs got both V4 and V6 IPs, ignoring CIDR '"0xFFmalformed IPv4"malformed IPv4"malformed range"malformed range"malformed ip"malformed ip"malformed range (first part)"malformed range (first part)"malformed range (second part)"malformed range (second part)" BitsPerByte is the number of bits in a byte. CoalesceIPs combines ips into CIDRs, by combining overlapping networks into networks of size coalesceMaskLen, if there are at least coalesceNumber IPs in the larger mask. CoalesceCIDRs coalesces cidrs into a smaller set of CIDRs, by combining overlapping networks into networks of size coalesceMaskLen, if there are at least coalesceNumber cidrs in the larger mask. if the existing net is a subset of the new cidr, replace the existing net with our larger cidr use the larger of the coalesceMaskLen and this cidr's mask Note this means cidr.Mask is numerically smaller, but that actually means it's masking more things. Note bytes.Compare is defined to be lexographical, and we need a bit-wise comparison, but that's actually the same. CIDRIsSubset returns whether na is a subset (possibly improper) of nb. FirstIP returns the first IP in the CIDR. For example, The CIDR 192.0.2.0/24 returns 192.0.2.0. LastIP returns the last IP in the CIDR. For example, The CIDR 192.0.2.0/24 returns 192.0.2.255. RangeStr returns the hyphenated range of IPs. For example, The CIDR 192.0.2.0/24 returns "192.0.2.0-192.0.2.255". IPToCIDR returns the CIDR containing just the given IP. For IPv6, this means /128, for IPv4, /32. IP4ToNum converts the passed string to a 32-bit unsigned integer where each byte that makes up the number is one of the bytes of the IPv4 address. The address is encoded with each byte left-to-right making up the most-to-least significant bytes in the resulting number. If the passed string cannot be parsed as an IPv4 address in standard notation, an error is returned. IP4InRange checks if the given string IP address falls within the specified hyphen-delimited range. The range should be of the form "start-end" e.g. "192.0.2.0-192.0.2.255". If either the input IP address or either end of this range fail to parse as IP addresses - or if the range is malformed - an error is returned. The behavior of this utility is undefined if the start of the IP range does not encode via IP4ToNum to a lower number than the end of the range. no range check for equality/Users/test/Desktop/trafficcontrol/lib/go-util/num.goconvcurrBufintssortIntsBeforeHashingsortedIntsbinaryencoding/binary"encoding/binary"uint8uint16int8int16not an integer"not an integer"either Name or ID must be non-nil"either Name or ID must be non-nil"IntSizeexpected an integer value: "expected an integer value: "IntsMaxVarintLen64PutVarintSum512 MSPerNS is the number of *nanoseconds* in a *millisecond* - not the other way around, as the name might imply. ToNumeric returns a float for any numeric type, and false if the interface does not hold a numeric type. This allows converting unknown numeric types (for example, from JSON) in a single line. TODO try to parse string stats as numbers? Also, JSON numbers are defined by the JSON spec to be IEEE double-precision floating point numbers and as such the encoding/json package always decodes them as float64s before coercing to requested types, so this may not be needed. JSONIntStr unmarshals JSON strings or numbers into an int. This is designed to handle backwards-compatibility for old Perl endpoints which accept both. Please do not use this for new endpoints or new APIs, APIs should be well-typed. strip JSON quotes ToInt64 returns the int64 value of the JSONIntStr. String implements the fmt.Stringer interface by returning the JSONIntStr encoded in base 10 into a string. JSONNameOrIDStr is designed to handle backwards-compatibility for old Perl endpoints which accept both. Please do not use this for new endpoints or new APIs, APIs should be well-typed. NOTE: this differs from JSONIntStr in that this field could be 1 of 3 options:  1. string representing an integer  2. string representing a unique name  3. integer if quoted, assume it is a name BytesLenSplit splits the given byte array into an n-length arrays. If n > len(s), returns a slice with a single []byte containing all of s. If n <= 0, returns an empty slice. HashInts returns a SHA512 hash of ints. If sortIntsBeforeHashing, the ints are sorted before before hashing. Sorting is done in a copy, the input ints slice is not modified. IntSliceToMap creates an int set from an array./Users/test/Desktop/trafficcontrol/lib/go-util/ptr.godef Package util contains various miscellaneous utilities that are helpful throughout components and aren't necessarily related to ATC data structures. Ptr returns a pointer to the given value. StrPtr returns a pointer to the given string. Deprecated. This is exactly equivalent to just using Ptr, so duplicated functionality like this function will likely be removed before too long. IntPtr returns a pointer to the given integer. UIntPtr returns a pointer to the given unsigned integer. UInt64Ptr returns a pointer to the given 64-bit unsigned integer. Uint64Ptr returns a pointer to the given 64-bit unsigned integer. Deprecated. This is just a common mis-casing of UInt64Ptr. These should not both exist, and this one - being the less proper casing - is subject to removal without warning, as its very existence is likely accidental. Int64Ptr returns a pointer to the given 64-bit integer. BoolPtr returns a pointer to the given boolean. FloatPtr returns a pointer to the given 64-bit floating-point number. InterfacePtr returns a pointer to the given empty interface. TimePtr returns a pointer to the given time.Time value. Coalesce coalesces the given pointer to a concrete value. This is basically the inverse operation of Ptr - it safely dereferences its input. If the pointer is nil, def is returned as a default value. CoalesceToDefault coalesces a pointer to the type to which it points. It returns the "zero value" of its input's pointed-to type when the input is nil. This is equivalent to:	var x T	result := Coalesce(p, x) ... but can be done on one line without knowing the type of `p`. CopyIfNotNil makes a deep copy of p - unless it's nil, in which case it just returns nil./Users/test/Desktop/trafficcontrol/lib/go-util/str.goinputStringsseenStringsuniqueStringsnewStrArrayrune RemoveStrDuplicates removes duplicates from strings, considering a map of already-seen duplicates. Returns the strings which are unique, and not already present in seen; and a map of the unique strings in inputStrings and seenStrings. This can be used, for example, to remove duplicates from multiple lists of strings, in order, using a shared map of seen strings. StrInArray returns whether s is one of the strings in strs. Deprecated: This function is totally identical to ContainsStr, but this one is not used in any known ATC code, while ContainsStr is. New code should use ContainsStr so that this duplicate can be removed. RemoveStrFromArray removes a specific string from a string slice. ContainsStr returns whether x is one of the elements of a. StripAllWhitespace returns s with all whitespace removed, as defined by unicode.IsSpace./Users/test/Desktop/trafficcontrol/lib/go-util/util.goinitialBufSizeformattedTimeStack Stacktrace is a helper function which returns the current stacktrace. It wraps runtime.Stack, which requires a sufficiently long buffer. SliceToSet converts a slice to a map whose keys are the slice members, that is, a set. Note duplicates will be lost, as is the nature of a set. ConvertTimeFormat converts the input time to the supplied format./Users/test/Desktop/trafficcontrol/lib/varnishcfg/Users/test/Desktop/trafficcontrol/lib/varnishcfg/access_control.goaddBackendsaddBackendsToDirectoraddDirectorsassignBackendscidrsToVarnishCIDRsconfigureAccessControlForEdgeconfigureAccessControlForMiddefaultVCLVersiongetBackendNamegetDirectorTypenewVCLFileallowAllIPspurgeIPscidrPartsvarnishCIDRvarnishCIDRs`"127.0.0.1"``"::1"`"%s"/%s`"%s"/%s``"%s"`"10.0.0.0"/8`"10.0.0.0"/8`"172.16.0.0"/12`"172.16.0.0"/12`"192.168.0.0"/16`"192.168.0.0"/16`allow_all"allow_all"vcl_recv"vcl_recv"if ((req.method == "PUSH" || req.method == "PURGE" || req.method == "DELETE") && !client.ip ~ allow_all) {`if ((req.method == "PUSH" || req.method == "PURGE" || req.method == "DELETE") && !client.ip ~ allow_all) {`	return (synth(405));`	return (synth(405));`if (req.method == "PURGE") {`if (req.method == "PURGE") {`	return (purge);`	return (purge);`allow_all_but_push_purge"allow_all_but_push_purge"if ((req.method == "PUSH" || req.method == "PURGE") && client.ip ~ allow_all_but_push_purge) {`if ((req.method == "PUSH" || req.method == "PURGE") && client.ip ~ allow_all_but_push_purge) {`if (!client.ip ~ allow_all_but_push_purge && !client.ip ~ allow_all) {`if (!client.ip ~ allow_all_but_push_purge && !client.ip ~ allow_all) {` cidrsToVarnishCIDRs converts CIDRs from the format IP/mask to "IP"/mask push and purge are not allowed except for allow_all acl mid cache only accepts requests from from allowed IPs/Users/test/Desktop/trafficcontrol/lib/varnishcfg/backends.gobackendConditionsconditionshostHeaderLinesbackendNameoriginDomainfallbackDirectorLinesdirectorTyperetryPolicydirectordirectors"directors"req.http.host == "%s"`req.http.host == "%s"`bereq.http.host == "%s"`bereq.http.host == "%s"`if (%s) {"if (%s) {" || " || "	set req.backend_hint = %s.backend();"\tset req.backend_hint = %s.backend();"	set bereq.http.host = "%s";"\tset bereq.http.host = \"%s\";""}"vcl_backend_fetch"vcl_backend_fetch"new %s = directors.fallback();"new %s = directors.fallback();"_primary"_primary"%s.add_backend(%s_primary.backend());"%s.add_backend(%s_primary.backend());"_secondary"_secondary"%s.add_backend(%s_secondary.backend());"%s.add_backend(%s_secondary.backend());"%s.add_backend(%s);"%s.add_backend(%s);"vcl_init"vcl_init"new %s = directors.%s(%s);"new %s = directors.%s(%s);"round_robin"round_robin"fallback"fallback"shard"shard"%s_%d"%s_%d" only change request host from edge servers which typically has multiple request FQDNs or one request FQDN that is not the origin. maybe a better way to ensure backend names are unique?/Users/test/Desktop/trafficcontrol/lib/varnishcfg/cache_control.goberespLinesuncacheableHostsConditionsds %s has no origin fqdn, skipping!"ds %s has no origin fqdn, skipping!"`if (%s) {`	set beresp.uncacheable = true;`	set beresp.uncacheable = true;`vcl_backend_response"vcl_backend_response"/Users/test/Desktop/trafficcontrol/lib/varnishcfg/hitch.gosslDirfrontend = {`frontend = {`	host = "*"`	host = "*"`	port = "443"`	port = "443"`backend = "[127.0.0.1]:6081"`backend = "[127.0.0.1]:6081"`write-proxy-v2 = on`write-proxy-v2 = on`user = "root"`user = "root"`pem-file = {`pem-file = {`	cert = "`	cert = "`	private-key = "`	private-key = "` GetHitchConfig returns Hitch config using TO data TODO: change root user/Users/test/Desktop/trafficcontrol/lib/varnishcfg/vcl.gosubroutine4.1"4.1"vcl %s;
"vcl %s;\n"import %s;
"import %s;\n"backend %s {
"backend %s {\n"backend default none;
"backend default none;\n"acl %s {
"acl %s {\n"	%s;
"\t%s;\n"sub vcl_init {
"sub vcl_init {\n"	%s
"\t%s\n"sub %s {
"sub %s {\n"	.host = "%s";
"\t.host = \"%s\";\n"	.port = "%d";
"\t.port = \"%d\";\n" vclFile contains all VCL components varnishd will fail if there are no backends defined has to be before other subroutines for variables initialization/Users/test/Desktop/trafficcontrol/lib/varnishcfg/vclbuilder.goaclWarningscacheWarningsdirWarnings(warnings: %s) %w"(warnings: %s) %w" Package varnishcfg manages generating configuration files for Varnish cache and Hitch proxy using data from Traffic Ops APIs. VCLBuilder builds the default VCL file using TO data. opts NewVCLBuilder returns a new VCLBuilder object. BuildVCLFile builds the default VCL file. access control should be added first to ensure no request processed if it is not allowed/Users/test/Desktop/trafficcontrol/tc-health-client/Users/test/Desktop/trafficcontrol/tc-health-client/config/Users/test/Desktop/trafficcontrol/tc-health-client/config/config.goDefaultHealthMethodsDefaultLogDirectoryDefaultLogFileDefaultMarkdownMethodsDefaultMarkdownMinIntervalMSDefaultMarkupPollThresholdDefaultParentHealthL4PollMSDefaultParentHealthL7PollMSDefaultPollStateJSONLogDefaultTOLoginDispersionFactorDefaultTrafficServerBinDirDefaultTrafficServerConfigDirDefaultUnavailablePollThresholdGetConfigGetTOLoginDispersionHealthMethodHealthMethodParentL4HealthMethodParentL7HealthMethodParentServiceHealthMethodTrafficMonitorLogCfgNewCfgPtrParentHealthServicePollMSReadCredentialsgetCredentialsFromFileurlCopyhealthMethodsmarkdownMethodsLastModifyTimejson:"cdn-name"EnableActiveMarkdownsjson:"enable-active-markdowns"ReasonCodejson:"reason-code"TOCredentialFilejson:"to-credential-file"TORequestTimeOutSecondsjson:"to-request-timeout-seconds"json:"to-pass"TOUrljson:"to-url"json:"to-user"TmProxyURLjson:"tm-proxy-url"TmPollIntervalSecondsjson:"tm-poll-interval-seconds"TOLoginDispersionFactorjson:"to-login-dispersion-factor"UnavailablePollThresholdjson:"unavailable-poll-threshold"MarkUpPollThresholdjson:"markup-poll-threshold"json:"trafficserver-config-dir"TrafficServerBinDirjson:"trafficserver-bin-dir"PollStateJSONLogjson:"poll-state-json-log"EnablePollStateLogjson:"enable-poll-state-log"HealthClientConfigFileCredentialFileParsedProxyURLMarkdownMinIntervalMSjson:"markdown-min-interval-ms"ParentHealthL4PollMSjson:"parent-health-l4-poll-ms"ParentHealthL7PollMSjson:"parent-health-l7-poll-ms"json:"parent-health-service-poll-ms"ParentHealthServicePortjson:"parent-health-service-port"ParentHealthLogLocationjson:"parent-health-log-location"HealthMethodsjson:"health-methods"MarkdownMethodsjson:"markdown-methods"NumHealthWorkersjson:"num-health-workers"MonitorStrategiesPeersjson:"monitor-strategies-peers"TMPollingIntervalTORequestTimeoutlcfgmodTimecfconfigFilePtrlogLocationErrlogLocationEventlogdirPtrlogfiledispdispersionFactordispersionSecondsmd5hashpollingIntervalmd5crypto/md5"crypto/md5"github.com/apache/trafficcontrol/v8/tc-health-client/util"github.com/apache/trafficcontrol/v8/tc-health-client/util"tc-health-client/1.0"tc-health-client/1.0"/var/log/trafficcontrol/poll-state.json"/var/log/trafficcontrol/poll-state.json"/etc/trafficcontrol/tc-health-client.json"/etc/trafficcontrol/tc-health-client.json"/var/log/trafficcontrol"/var/log/trafficcontrol"tc-health-client.log"tc-health-client.log"/opt/trafficserver/bin"/opt/trafficserver/bin"AtomicPtrupNewAtomicPtrtraffic-monitor"traffic-monitor"parent-l4"parent-l4"parent-l7"parent-l7"parent-service"parent-service"`json:"cdn-name"``json:"enable-active-markdowns"``json:"reason-code"``json:"to-credential-file"``json:"to-request-timeout-seconds"``json:"to-pass"``json:"to-url"``json:"to-user"``json:"tm-proxy-url"``json:"tm-poll-interval-seconds"``json:"to-login-dispersion-factor"``json:"unavailable-poll-threshold"``json:"markup-poll-threshold"``json:"trafficserver-config-dir"``json:"trafficserver-bin-dir"``json:"poll-state-json-log"``json:"enable-poll-state-log"``json:"markdown-min-interval-ms"``json:"parent-health-l4-poll-ms"``json:"parent-health-l7-poll-ms"``json:"parent-health-service-poll-ms"``json:"parent-health-service-port"``json:"parent-health-log-location"``json:"health-methods"``json:"markdown-methods"``json:"num-health-workers"``json:"monitor-strategies-peers"`cannot continue, no TO credentials or TO URL have been specified, check configs"cannot continue, no TO credentials or TO URL have been specified, check configs"credentials are defined in the %s file, will not override them with those in the %s file"credentials are defined in the %s file, will not override them with those in the %s file"reading credentials from file '"reading credentials from file '"failed to retrieve one or more TrafficOps credentails"failed to retrieve one or more TrafficOps credentails"GetFileModificationTimecould not stat %s: %w"could not stat %s: %w"config-file"config-file"full path to the json config file"full path to the json config file"logging-dir"logging-dir"directory location for log files"directory location for log files"Log verbosity. Logging is output to stderr. By default, errors are logged. To log warnings, pass '-v'. To log info, pass '-vv', debug pass '-vvv'`Log verbosity. Logging is output to stderr. By default, errors are logged. To log warnings, pass '-v'. To log info, pass '-vv', debug pass '-vvv'`waiting %v seconds before logging into TrafficOps"waiting %v seconds before logging into TrafficOps"the OS hostname is not set, cannot continue: %s"the OS hostname is not set, cannot continue: %s"bigEndianUint16PutUint16AppendUint16PutUint32AppendUint32PutUint64AppendUint64BigEndianLoading a new config file."Loading a new config file."config parsing failed: %w"config parsing failed: %w"parsing TMPollingIntervalSeconds: "parsing TMPollingIntervalSeconds: "parsing TORequestTimeOutSeconds: "parsing TORequestTimeOutSeconds: ""active""local"invalid reason-code: "invalid reason-code: ", valid reason codes are 'active' or 'local'", valid reason codes are 'active' or 'local'"parsing TmProxyUrl: "parsing TmProxyUrl: "TmProxyUrl invalid port specified"TmProxyUrl invalid port specified"TM queries will use the proxy: %s"TM queries will use the proxy: %s"No hostname configured, getting from OS: "No hostname configured, getting from OS: "HostNameToShortcredentials path is a directory, must be a file"credentials path is a directory, must be a file"(source "`(source "`" && printf "${TO_URL}\n")`" && printf "${TO_URL}\n")`getting credentials from file returned error code %v stderr '%v' stdout '%v'"getting credentials from file returned error code %v stderr '%v' stdout '%v'"" && printf "${TO_USER}\n")`" && printf "${TO_USER}\n")`" && printf "${TO_PASS}\n")`" && printf "${TO_PASS}\n")` userAgent is the UA used by this service in HTTP requests. TODO dynamically add Version from RPM build. NewCfgPtr is a convenience func for NewAtomicPtr(cfg). TODO fix to not take CDN name, so it can't be wrong.      If this is wrong, the health client runs but just can't find tons of stuff,      resulting in strange not-obvious errors. Infer from server somehow (config header comment? t3c metadata? hostname -s?) ParentHealthServicePort is the port to serve parent health on. To disable serving parent health, set to 0. ParentHealthLogLocation may be a file path, stdout, stderr, or null (the empty string is equivalent to null) HealthMethods are the types of health to poll. If omitted, Traffic Monitor health will be used. MarkdownMethods are the types of health to consider when marking down parents. This may be empty or omitted, to never marking down parents. NumHealthWorkers is the number of worker microthreads (goroutines) per health poll method. Note this only applies to Parent L4, Parent L7, and Parent Service health; the Traffic Monitor health poll is a single HTTP request and thus doesn't need workers. Monitor peers inside strategies.yaml file HostName is this host's short hostname. If empty, the system's hostname will be used.*
 * ReadCredentials
 *
 * cfg - the existing config
 * updating - when true, existing credentials may be updated from the credential file
  verify that we have credentials or can read them from the credential file You should not configure a credential file and the credentials simultaneously in the health client config file.  Either use an external credential file or put the credentials in the health client config.  Precedence is given to credentials in the health client config file. LoadConfig returns whether the config was updated and any error. Note the cfg may be modified, even if the returned updated is false. Users should create and pass a copy of Cfg if changes on error are not acceptable. Load default value for strategies.yaml if tm-proxy-url is set in the config, verify the proxy getCredentialsFromFile gets the TO URL, user, and password from an environment variable file. from environment variables declared in a credentials file bash script, if they exist. Returns the TO URL, user, password, and any error. Note this returns empty strings with no error if the file doesn't exist, or if any variables aren't declared. we execute sh and source the file to get the environment variables, because it's easier and more accurate than writing our own sh env var parser./Users/test/Desktop/trafficcontrol/tc-health-client/sar/Users/test/Desktop/trafficcontrol/tc-health-client/sar/ephemeralportholder.goEphemeralPortHolderFindNetInterfaceAddrGetAndHoldEphemeralPortGetLocalAddrHostPortMakeTCPChecksumMultiSARProtocolNumberTCPSARSARAddrSARHostSARResultSendPacketSplitLastTCPHdrTCPHdrFromNativeTCPHdrNativeTCPHdrNativeOptionTCPHdrOptionEndOfOptionListTCPHdrOptionNoOperationTCPHdrToNativereceiveSARsarListenersarListenerRespsarRemoteInfsendRSTipPortlistenAddrphsar:0":0"listening: "listening: "malformed addr '"malformed addr '"', should have been ip:port"', should have been ip:port"' port was not an integer"' port was not an integer"' port was outside bounds"' port was outside bounds" EphemeralPortHolder serves 2 purposes: it gets an ephemeral TCP port, and it holds onto the port so the OS doesn't assign it to any other app. It listens on :0 thereby getting a socket on an ephemeral port. It continues listening but never reading from the socket until Close is called. GetAndHoldEphemeralPort gets an ephemeral port, and listens on it to prevent the OS assigning the port to other apps. Close must be called on the returned EphemeralPortHolder to stop listening. get the port now, so EphemeralPortHolder.Port() doesn't need to return an errorSrcPortthDestPortSeqNumAckNumDataOffsetReservedCWRECEURGACKPSHRSTSYNWindowChecksumSetChecksumOptionKindOptionLenOptionDataRTTRespTime/Users/test/Desktop/trafficcontrol/tc-health-client/sar/multisar.godataOffsetdestPorthdrBtsmakeHostErrResultnativesendTimepacketroundTripTimelistenRespHostPortPacketaddrHostsdoneSendingephemeralPortHolderhostAddrlocalAddrlocalAddrStrpacketSendStartpacketsremoteInfresultssarListenerErrsendTimessrcPortremoteportMapackNumaddrMapnumBtsreadRemoteAddrreadTimetcpHdrRawlocalAddrIPremoteArrremotesresponsesgetting local address: "getting local address: "failed to parse local addr '"failed to parse local addr '"' as IP"' as IP"failed to listen on ephemeral port: "failed to listen on ephemeral port: "lookup up host '"lookup up host '"looking up host '"looking up host '"' succeeded, but no addresses were found."' succeeded, but no addresses were found."failed to parse addr '"failed to parse addr '"' ip '"' ip '"2560converting native header to byte: "converting native header to byte: "sending packet: "sending packet: "multisar main thread sent %v packets in %vms
"multisar main thread sent %v packets in %vms\n"listening for ACKs: "listening for ACKs: "SAR listener got packet that was never sent somehow! Should never happen! Response: %+v
"SAR listener got packet that was never sent somehow! Should never happen! Response: %+v\n"ResolveIPAddr"ip4"resolving local address: "resolving local address: "IPConnnetFDsotypeisConnectedraddrsetAddrshutdowncloseReadcloseWritereadFromInet4readFromInet6readMsgreadMsgInet4readMsgInet6writeToInet4writeToInet6writeMsgwriteMsgInet4writeMsgInet6connectdupctrlNetworklistenStreamlistenDatagramaddrFuncwriteBuffersSetReadBufferSetWriteBufferReadFromIPReadMsgIPWriteToIPWriteMsgIPListenIPip4:tcp"ip4:tcp"listening for syn-ack response: "listening for syn-ack response: "multisar listener got doneSending, setting timeout '%v'
"multisar listener got doneSending, setting timeout '%v'\n"setting deadline timeout to listen for syn-ack response: "setting deadline timeout to listen for syn-ack response: "IsErrDeadlineExceededreading response: "reading response: "receiveSAR got packet that wasn't an rst or a synack, but matched the ports and AckNum. Very strange!"receiveSAR got packet that wasn't an rst or a synack, but matched the ports and AckNum. Very strange!" package sar implements a syn-ack-rst health ping. It sends a TCP SYN, waits for an ACK, then immediately sends an RST to kill the connection. The primary purpose of this is as a health check, to verify the remote host is reachable, and able and willing to respond. MultiSAR is like SAR for multiple requests. SAR has to listen on a raw IP port without a TCP socket, which is relatively inexpensive for a single request, but expensive for large numbers of requests. MultiSAR uses a single listener on an ephemeral local port for all SAR requests, significantly reducing resource costs. pre-construct all the packets, so we listen for as little time as possible TODO implement Initial Sequence Number ISN per RFC92933.4.1? It might be faster to use the same seq num for all packets map[host]addr - note hosts may be IPs, in which case host and addr will be the same map[addr][]host - note multiple FQDNs may have the same IP host is IP host isn't an IP, assume FQDN TODO handle IPv6 because we have no options? 4 bits Note we need to iterate over hostAddr, *not* hosts. The hosts has all, but we may have failed to resolve some, in which case they won't be sent and we must not listen for their responses. if it's not in hostAddr, we already added an error result and we won't send a packet, so don't listen for it we don't want to start the timeout until after we send the last packet. Buffer 1, the main sending thread doesn't block this isn't strictly necessary, the defer will close this shortly. But this closes it ASAP send the doneSending message to the listener, so it sets the timeout wait for the listener to return and set sarListenerResp and sarListenerErr multiple FQDNs may have the same IP, but at L4 we only care about the behavior of the IP this check shouldn't be necessary, the caller should never look at duration if err!=nil. This just makes it easier to debug if they do remotes is used to quickly, progressively match multiple requests map[remoteAddr][port]acknum listen on the local IP for the SynAck TODO should this ListenPacket, to let Go automatically choose the port for us? TODO listen on "sent everything" chan, and don't set timeout until everything was sent, to prevent timing out before some things are even sent the max TCP Header size is 60 bytes (IPv4 is variable up to 60, IPv6 is always 40) This means the buffer here won't be just the header, it may also contain part of the payload. We don't care here, our header parsing will stop after reading the final End Of Option List option. But if this were changed to do something with the body, that would need taken into account. after the main thread is done sending all packets, set the timeout Note this sets the absolute deadline, for all read packets. If we wanted to set the timeout for each individual packet read, we could call conn.SetDeadline inside the for-loop immediately before each conn.ReadFrom call. after we time out, we need to add everything still in remotes into responses as an error wasn't a read deadline error, some other kind of error 14 because the last data we need to look at, the flags, are at index 13 log.Warnf("receiveSAR got malformed packet, too short") log.Warnf("receiveSAR got mismatched dest port %+v expecting %v, ignoring and continuing to listen\n", tcpHdrRaw.DestPort(), srcPort) this is normal. Listening to an IP makes us receive all packets for all apps using that local IP. They're duplicated to us, so we're not causing anyone else to lose packets. We just need to ignore them note we swap src and dest ports. The source for the packet we sent is the dest we recieve, and vice versa. source of packet is dest for our request log.Warnf("receiveSAR got mismatched source port %+v expecting %v, ignoring and continuing to listen\n", tcpHdrRaw.SrcPort(), dstPort) log.Warnf("receiveSAR got mismatched ack num %+v expecting %v, ignoring and continuing to listen\n", tcpHdrRaw.AckNum(), ackNum) Note the sendRST below is commented because it isn't necessary: the Linux kernel, even though we're listening on the port, will respond with an RST. Presumably because the kernel knows an ACK for something it doesn't know it sent is malformed, and also because the AckNum doesn't match anything. I'm leaving the below sendRST commented to make it clear that an RST should be sent to help the remote host free resources quickly; but we don't need to, the kernel is doing it for us. if err := sendRST(log, remoteAddr, localAddrIP, remoteAddrIP, int(tcpHdr.AckNum), srcPort, dstPort); err != nil { 	log.Errorln("receiveSAR sendRST error: " + err.Error()) 	// don't fail. The RST is just to help the remote host close the connection gracefully. 	// We still succeeded with sending a syn and getting a syn-ack, which is all we need on our end We're expecting either a Reset or a Syn-Ack packet wasn't a Rest or a Syn-Ack, ignore it We found a match for an addr+port+acknum in our requests, that was either a Reset or Syn-Ack response. So now add the time to the response array, remove the request from remoteMap, and return if remoteMap is empty log.Warnf("multisar got packet, still have %v remotes\n", len(remotes)) if we read all the packets we were expecting, returnBuffersconsume/Users/test/Desktop/trafficcontrol/tc-health-client/sar/sar.goremoteAddrStrreceiveSARErrreceiveTimenumBtsSenttcpHdrdstPortremoteAddrIPreceiving SAR: "receiving SAR: "lookup up host: "lookup up host: "looking up host succeeded, but no addresses were found."looking up host succeeded, but no addresses were found."finding interface and address: "finding interface and address: "HardwareAddrifiMulticastAddrsgetting interfaces: "getting interfaces: "no interfaces found"no interfaces found"FlagLoopbackFlagUpinterface '"interface '"' had no addresses"' had no addresses"no interface found. Errors: "no interface found. Errors: "dialing address: "dialing address: "writing: "writing: "tried to write %v bytes, but only %v sent but no error"tried to write %v bytes, but only %v sent but no error"decoding tcp header: "decoding tcp header: "43690 SAR calls SARAddr if host is an IP address, or SARHost if host is an FQDN. SARAddr sends a syn-ack-reset to the given addr. The addr must be an IP. On success, the round-trip time to receive the Ack is returned, with a nil error. The addr is a string representation of an IPv4 or IPv6 address. TODO add optional local addr param TODO implement Initial Sequence Number ISN per RFC92933.4.1 the hdrBts packet is still missing the checksum, since we couldn't compute that until we had the marshalled bytes of the packet wait for the recieving SAR goroutine to finish have to receive in a goroutine, because listening doesn't return, and we need to start listening before we send (or else the response could get to our machine and be discarded between the send and listen) SARHost sends a syn-ack-reset to the given hostname. It looks up the hostname, and calls SendAddr on the first returned address. See SendAddr. GetLocalAddr gets a local IP, which this package will set as the TCP packet source, and then listen on this address to get the syn-ack response. remove any CIDR FindNetInterfaceAddr selects a local network interface to use. It picks the first interface that isn't loopback, is up, and has addresses. It then picks the    kR    